<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>设计模式: 聊一聊JavaScript设计模式（一） | 曜灵（SUN）Site</title><meta name=keywords content="JS,设计模式"><meta name=description content="一个模式就是一个可重用的方案。当代码是建立在行之有效的模式上时,我们可以花更少的时间去关心我们的代码结构,从而能花&mldr;"><meta name=author content="曜灵"><link rel=canonical href=https://lianpf.github.io/posts/computer-basics/02.js-design-pattern-i/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://lianpf.github.io/img-common/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://lianpf.github.io/img-common/favicon.png><link rel=icon type=image/png sizes=32x32 href=https://lianpf.github.io/img-common/favicon.png><link rel=apple-touch-icon href=https://lianpf.github.io/img-common/avatar.jpeg><link rel=mask-icon href=https://lianpf.github.io/img-common/avatar.jpeg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js></script>
<script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta property="og:title" content="设计模式: 聊一聊JavaScript设计模式（一）"><meta property="og:description" content="一个模式就是一个可重用的方案。当代码是建立在行之有效的模式上时,我们可以花更少的时间去关心我们的代码结构,从而能花&mldr;"><meta property="og:type" content="article"><meta property="og:url" content="https://lianpf.github.io/posts/computer-basics/02.js-design-pattern-i/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-03-20T00:00:00+00:00"><meta property="article:modified_time" content="2019-03-20T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="设计模式: 聊一聊JavaScript设计模式（一）"><meta name=twitter:description content="一个模式就是一个可重用的方案。当代码是建立在行之有效的模式上时,我们可以花更少的时间去关心我们的代码结构,从而能花&mldr;"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚文章","item":"https://lianpf.github.io/posts/"},{"@type":"ListItem","position":2,"name":"📕 计算机基础","item":"https://lianpf.github.io/posts/computer-basics/"},{"@type":"ListItem","position":3,"name":"设计模式: 聊一聊JavaScript设计模式（一）","item":"https://lianpf.github.io/posts/computer-basics/02.js-design-pattern-i/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"设计模式: 聊一聊JavaScript设计模式（一）","name":"设计模式: 聊一聊JavaScript设计模式（一）","description":"一个模式就是一个可重用的方案。当代码是建立在行之有效的模式上时,我们可以花更少的时间去关心我们的代码结构,从而能花\u0026hellip;\n","keywords":["JS","设计模式"],"articleBody":"一个模式就是一个可重用的方案。当代码是建立在行之有效的模式上时,我们可以花更少的时间去关心我们的代码结构,从而能花…\n引言 设计模式分类 常见设计模式 单例模式 观察者模式 工厂模式 策略模式 代理模式 引言 JavaScript 设计模式，一个模式就是一个可重用的方案。当代码是建立在行之有效的模式上时,我们可以花更少的时间去关心我们的代码结构,从而能花更多的时间关注我们的解决方案的整体质量。\n设计模式分类 三大类\n「创建型模式」 5种\n单例模式 工厂方法模式 抽象工厂模式 建造者模式 原型模式 「结构型模式」 7种\n代理模式 适配器模式 装饰器模式 外观模式 桥接模式 组合模式 享元模式 「行为型模式」 11种\n观察者模式 策略模式 模板方法模式 迭代子模式 责任链模式 命令模式 备忘录模式 状态模式 访问者模式 中介者模式 解释器模式 常见设计模式 1. 单例模式 Singleton Pattern: 1-1 原理 顾名思义就是保证每个类都只有一个实例对象（调用一个类，任何时候返回的都是同一个实例）\n1-2 实现方法 使用一个变量来标志当前是否已经为某个类创建过对象，如果创建了，则在下一次获取该类的实例时， 直接返回之前创建的对象，否则就创建一个对象\n1-3 coding var Universe; (function () { var instance; Universe = function Universe() { if (instance) { return instance; } instance = this; // 其它内容 this.start_time = 0; this.bang = \"Big\"; }; } ()); //测试代码 var a = new Universe(); var b = new Universe(); alert(a === b); // true 1-4 场景 用于: 一个全局使用的类频繁地创建与销毁\n要求生产唯一序列号 WEB 中的计数器，不用每次刷新都在数据库里加一次，用单例先缓存起来 创建的一个对象需要消耗的资源过多，比如 I/O 与数据库的连接等 2. 发布订阅(观察者模式) 2-1 原理 当对象间存在一对多关系时，则使用观察者模式. 比如，当一个对象被修改时，则会自动通知它的依赖对象\n2-2 实现方法 订阅，就是把几个函数推入数组中待用； 发布，就是把缓存在数组中的那一坨函数列队执行\n2-3 coding var event = { eventList:{}, listen:function(key,fn){ if(!this.eventList[key]){ this.eventList[key] = []; } this.eventList[key].push(fn); }, remove:function(key,fn){ var fns = this.eventList[key]; if(!fns){ return false; } if(!fn){ // 如果没有回调，表示取消此key下所有方法 fns \u0026\u0026 (fns.length=0); // 这是一种快速清空数组的方法哦！ }else{ for(var i=0;i","wordCount":"2064","inLanguage":"zh","datePublished":"2019-03-20T00:00:00Z","dateModified":"2019-03-20T00:00:00Z","author":{"@type":"Person","name":"曜灵"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lianpf.github.io/posts/computer-basics/02.js-design-pattern-i/"},"publisher":{"@type":"Organization","name":"曜灵（SUN）Site","logo":{"@type":"ImageObject","url":"https://lianpf.github.io/img-common/favicon.png"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://lianpf.github.io/ accesskey=h title="曜灵（SUN）Site (Alt + H)"><img src=https://lianpf.github.io/img-common/avatar.jpeg alt=logo aria-label=logo height=35>曜灵（SUN）Site</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lianpf.github.io/search title="🔍 搜索 (Alt + /)" accesskey=/><span>🔍 搜索</span></a></li><li><a href=https://lianpf.github.io/ title="🏠 主页"><span>🏠 主页</span></a></li><li><a href=https://lianpf.github.io/archives/ title="⏱️ 归档"><span>⏱️ 归档</span></a></li><li><a href=https://lianpf.github.io/tags title="🧩 标签"><span>🧩 标签</span></a></li><li><a href=https://lianpf.github.io/about title="🙋🏻‍♂️ 关于"><span>🙋🏻‍♂️ 关于</span></a></li></ul></nav></header><main class="main page"><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}</style><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://lianpf.github.io/>🏠 主页</a>&nbsp;»&nbsp;<a href=https://lianpf.github.io/posts/>📚文章</a>&nbsp;»&nbsp;<a href=https://lianpf.github.io/posts/computer-basics/>📕 计算机基础</a></div><h1 class=post-title>设计模式: 聊一聊JavaScript设计模式（一）</h1><div class=post-meta><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}.parent-post-meta{display:flex;flex-wrap:wrap;opacity:.8}</style><span class=parent-post-meta><span id=post_meta_style_1><span class="fa fa-calendar-check-o"></span>
<span>2019-03-20
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_3><span class="fa fa-file-word-o"></span>
<span>2064字
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_4><span class="fa fa-clock-o"></span>
<span>5分钟
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_5><span class="fa fa-user-o"></span>
<span>曜灵
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_6><span class="fa fa-tags" style=opacity:.8></span>
<span><span class=post-tags-meta><a href=https://lianpf.github.io/tags/js/ style=color:var(--secondary)!important>JS</a>
&nbsp;<a href=https://lianpf.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/ style=color:var(--secondary)!important>设计模式</a></span></span></span></span>
<span style=opacity:.8><span id=post_meta_style_7>&nbsp;&nbsp;
<span class="fa fa-eye"></span>
<span><span id=busuanzi_container_page_pv><span id=busuanzi_value_page_pv></span></span>
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_8><span class="fa fa-commenting-o"></span>
<span><script src=https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js></script>
<script>let url=document.documentURI,dnsUrl="https://lianpf.github.io/",urlSplit=url.split(dnsUrl),finalUrl=urlSplit[1];finalUrl[0]!=="/"&&(finalUrl="/"+finalUrl),twikoo.getCommentsCount({envId:null,region:null,urls:[finalUrl],includeReply:!1}).then(function(e){let t=e[0].count;const n=document.getElementById("comment_count");n.innerText=t}).catch(function(e){console.error(e)})</script><span id=comment_count></span></span></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e5%bc%95%e8%a8%80 aria-label=引言>引言</a><ul><li><a href=#%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e5%88%86%e7%b1%bb aria-label=设计模式分类>设计模式分类</a></li><li><a href=#%e5%b8%b8%e8%a7%81%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f aria-label=常见设计模式>常见设计模式</a><ul><li><a href=#1-%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8f-singleton-pattern aria-label="1. 单例模式 Singleton Pattern:">1. 单例模式 Singleton Pattern:</a><ul><li><a href=#1-1-%e5%8e%9f%e7%90%86 aria-label="1-1 原理">1-1 原理</a></li><li><a href=#1-2-%e5%ae%9e%e7%8e%b0%e6%96%b9%e6%b3%95 aria-label="1-2 实现方法">1-2 实现方法</a></li><li><a href=#1-3-coding aria-label="1-3 coding">1-3 coding</a></li><li><a href=#1-4-%e5%9c%ba%e6%99%af aria-label="1-4 场景">1-4 场景</a></li></ul></li><li><a href=#2-%e5%8f%91%e5%b8%83%e8%ae%a2%e9%98%85%e8%a7%82%e5%af%9f%e8%80%85%e6%a8%a1%e5%bc%8f aria-label="2. 发布订阅(观察者模式)">2. 发布订阅(观察者模式)</a><ul><li><a href=#2-1-%e5%8e%9f%e7%90%86 aria-label="2-1 原理">2-1 原理</a></li><li><a href=#2-2-%e5%ae%9e%e7%8e%b0%e6%96%b9%e6%b3%95 aria-label="2-2 实现方法">2-2 实现方法</a></li><li><a href=#2-3-coding aria-label="2-3 coding">2-3 coding</a></li><li><a href=#2-4-%e5%9c%ba%e6%99%af aria-label="2-4 场景">2-4 场景</a></li></ul></li><li><a href=#3-%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f aria-label="3. 工厂模式">3. 工厂模式</a><ul><li><a href=#3-1-%e5%ae%9e%e7%8e%b0%e5%8e%9f%e7%90%86 aria-label="3-1 实现原理">3-1 实现原理</a></li><li><a href=#3-2-%e5%88%86%e7%b1%bb aria-label="3-2 分类">3-2 分类</a></li><li><a href=#3-3-coding aria-label="3-3 coding">3-3 coding</a></li><li><a href=#3-4-%e5%9c%ba%e6%99%af aria-label="3-4 场景">3-4 场景</a></li></ul></li><li><a href=#4-%e7%ad%96%e7%95%a5%e6%a8%a1%e5%bc%8f aria-label="4. 策略模式">4. 策略模式</a><ul><li><a href=#4-1-%e5%8e%9f%e7%90%86 aria-label="4-1 原理">4-1 原理</a></li><li><a href=#4-2-coding aria-label="4-2 coding">4-2 coding</a></li><li><a href=#4-3-%e5%9c%ba%e6%99%af aria-label="4-3 场景">4-3 场景</a></li></ul></li><li><a href=#5-%e4%bb%a3%e7%90%86%e6%a8%a1%e5%bc%8f aria-label="5. 代理模式">5. 代理模式</a><ul><li><a href=#5-1-%e5%8e%9f%e7%90%86 aria-label="5-1 原理">5-1 原理</a></li><li><a href=#5-2-%e5%88%86%e7%b1%bb aria-label="5-2 分类">5-2 分类</a></li><li><a href=#5-3-coding aria-label="5-3 coding">5-3 coding</a></li><li><a href=#5-4-%e5%9c%ba%e6%99%af aria-label="5-4 场景">5-4 场景</a></li></ul></li></ul></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{elements&&(activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")}))},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>一个模式就是一个可重用的方案。当代码是建立在行之有效的模式上时,我们可以花更少的时间去关心我们的代码结构,从而能花&mldr;</p><p><img loading=lazy src=/img-blogs/20190320-001.png alt=聊一聊JavaScript设计模式（一）></p><ul><li>引言</li><li>设计模式分类</li><li>常见设计模式<ul><li>单例模式</li><li>观察者模式</li><li>工厂模式</li><li>策略模式</li><li>代理模式</li></ul></li></ul><h2 id=引言>引言<a hidden class=anchor aria-hidden=true href=#引言>#</a></h2><p>JavaScript 设计模式，一个模式就是一个可重用的方案。当代码是建立在行之有效的模式上时,我们可以花更少的时间去关心我们的代码结构,从而能花更多的时间关注我们的解决方案的整体质量。</p><hr><h3 id=设计模式分类>设计模式分类<a hidden class=anchor aria-hidden=true href=#设计模式分类>#</a></h3><blockquote><p>三大类</p></blockquote><p><strong>「创建型模式」</strong> 5种</p><ul><li>单例模式</li><li>工厂方法模式</li><li>抽象工厂模式</li><li>建造者模式</li><li>原型模式</li></ul><p><strong>「结构型模式」</strong> 7种</p><ul><li>代理模式</li><li>适配器模式</li><li>装饰器模式</li><li>外观模式</li><li>桥接模式</li><li>组合模式</li><li>享元模式</li></ul><p><strong>「行为型模式」</strong> 11种</p><ul><li>观察者模式</li><li>策略模式</li><li>模板方法模式</li><li>迭代子模式</li><li>责任链模式</li><li>命令模式</li><li>备忘录模式</li><li>状态模式</li><li>访问者模式</li><li>中介者模式</li><li>解释器模式</li></ul><hr><h3 id=常见设计模式>常见设计模式<a hidden class=anchor aria-hidden=true href=#常见设计模式>#</a></h3><h4 id=1-单例模式-singleton-pattern>1. 单例模式 Singleton Pattern:<a hidden class=anchor aria-hidden=true href=#1-单例模式-singleton-pattern>#</a></h4><h5 id=1-1-原理>1-1 原理<a hidden class=anchor aria-hidden=true href=#1-1-原理>#</a></h5><p>顾名思义就是保证每个类都只有一个实例对象（调用一个类，任何时候返回的都是同一个实例）</p><h5 id=1-2-实现方法>1-2 实现方法<a hidden class=anchor aria-hidden=true href=#1-2-实现方法>#</a></h5><p>使用一个变量来标志当前是否已经为某个类创建过对象，如果创建了，则在下一次获取该类的实例时， 直接返回之前创建的对象，否则就创建一个对象</p><h5 id=1-3-coding>1-3 coding<a hidden class=anchor aria-hidden=true href=#1-3-coding>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>var Universe;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(function () {
</span></span><span style=display:flex><span>    var instance;
</span></span><span style=display:flex><span>    Universe = function Universe() {
</span></span><span style=display:flex><span>        if (instance) {
</span></span><span style=display:flex><span>            return instance;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        instance = this;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        // 其它内容
</span></span><span style=display:flex><span>        this.start_time = 0;
</span></span><span style=display:flex><span>        this.bang = &#34;Big&#34;;
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>} ());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>//测试代码
</span></span><span style=display:flex><span>var a = new Universe();
</span></span><span style=display:flex><span>var b = new Universe();
</span></span><span style=display:flex><span>alert(a === b); // true
</span></span></code></pre></div><h5 id=1-4-场景>1-4 场景<a hidden class=anchor aria-hidden=true href=#1-4-场景>#</a></h5><blockquote><p>用于: 一个全局使用的类频繁地创建与销毁</p></blockquote><ul><li>要求生产唯一序列号</li><li>WEB 中的计数器，不用每次刷新都在数据库里加一次，用单例先缓存起来</li><li>创建的一个对象需要消耗的资源过多，比如 I/O 与数据库的连接等</li></ul><h4 id=2-发布订阅观察者模式>2. 发布订阅(观察者模式)<a hidden class=anchor aria-hidden=true href=#2-发布订阅观察者模式>#</a></h4><h5 id=2-1-原理>2-1 原理<a hidden class=anchor aria-hidden=true href=#2-1-原理>#</a></h5><p>当对象间存在一对多关系时，则使用观察者模式. 比如，当一个对象被修改时，则会自动通知它的依赖对象</p><h5 id=2-2-实现方法>2-2 实现方法<a hidden class=anchor aria-hidden=true href=#2-2-实现方法>#</a></h5><blockquote><p>订阅，就是把几个函数推入数组中待用； 发布，就是把缓存在数组中的那一坨函数列队执行</p></blockquote><h5 id=2-3-coding>2-3 coding<a hidden class=anchor aria-hidden=true href=#2-3-coding>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>var event = {
</span></span><span style=display:flex><span>  eventList:{},
</span></span><span style=display:flex><span>  listen:function(key,fn){
</span></span><span style=display:flex><span>    if(!this.eventList[key]){
</span></span><span style=display:flex><span>      this.eventList[key] = [];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    this.eventList[key].push(fn);
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  remove:function(key,fn){
</span></span><span style=display:flex><span>    var fns = this.eventList[key];
</span></span><span style=display:flex><span>    if(!fns){
</span></span><span style=display:flex><span>      return false;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    if(!fn){
</span></span><span style=display:flex><span>      // 如果没有回调，表示取消此key下所有方法
</span></span><span style=display:flex><span>      fns &amp;&amp; (fns.length=0); // 这是一种快速清空数组的方法哦！
</span></span><span style=display:flex><span>    }else{
</span></span><span style=display:flex><span>      for(var i=0;i&lt;fns.length;i++){
</span></span><span style=display:flex><span>        //遍历方法列表,剔除需要取消的方法
</span></span><span style=display:flex><span>        //要注意fns是引用型变量，实际是去除了this.eventList[key]下的方法。
</span></span><span style=display:flex><span>        if(fns[i] === fn){
</span></span><span style=display:flex><span>          fns.splice(i,1);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  //trigger(&#39;loginSuccess&#39;,参数1,参数2)
</span></span><span style=display:flex><span>  trigger:function(){
</span></span><span style=display:flex><span>    //出列第一个数据：&#39;loginSuccess&#39;
</span></span><span style=display:flex><span>    var key = Array.prototype.shift.call(arguments);
</span></span><span style=display:flex><span>    var fns = this.eventList[key];//拿到一组函数
</span></span><span style=display:flex><span>    if(!fns || fns.length === 0){
</span></span><span style=display:flex><span>      //没有要执行的函数，就返回
</span></span><span style=display:flex><span>      return false;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    for(var i=0;i&lt;fns.length;i++){
</span></span><span style=display:flex><span>      //arguments已经出列了一个数据，目前全是参数列表了
</span></span><span style=display:flex><span>      fns[i].apply(this,arguments);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>var installEvent = function(obj){
</span></span><span style=display:flex><span>  for(var i in event){
</span></span><span style=display:flex><span>    obj[i] = event[i];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>var login = {};
</span></span><span style=display:flex><span>installEvent(login);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>//显示头像
</span></span><span style=display:flex><span>function showAvatar(){
</span></span><span style=display:flex><span>  console.log(&#39;显示用户头像&#39;);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>//显示消息列表
</span></span><span style=display:flex><span>function showMessage(){
</span></span><span style=display:flex><span>  console.log(&#39;显示消息列表&#39;);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>//订阅
</span></span><span style=display:flex><span>login.listen(&#39;loginSuccess&#39;,showAvatar);
</span></span><span style=display:flex><span>login.listen(&#39;loginSuccess&#39;,showMessage);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>//发布
</span></span><span style=display:flex><span>login.trigger(&#39;loginSuccess&#39;);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>//取消订阅
</span></span><span style=display:flex><span>login.remove(&#39;loginSuccess&#39;,showAvatar);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>//再次发布
</span></span><span style=display:flex><span>login.trigger(&#39;loginSuccess&#39;);
</span></span></code></pre></div><h5 id=2-4-场景>2-4 场景<a hidden class=anchor aria-hidden=true href=#2-4-场景>#</a></h5><ul><li>按钮上绑定click事件</li><li>ajax解耦</li></ul><h4 id=3-工厂模式>3. 工厂模式<a hidden class=anchor aria-hidden=true href=#3-工厂模式>#</a></h4><h5 id=3-1-实现原理>3-1 实现原理<a hidden class=anchor aria-hidden=true href=#3-1-实现原理>#</a></h5><p>工厂模式定义一个用于创建对象的接口，这个接口由子类决定实例化哪一个类。该模式使一个类的实例化延迟到了子类。 而子类可以重写接口方法以便创建的时候指定自己的对象类型</p><h5 id=3-2-分类>3-2 分类<a hidden class=anchor aria-hidden=true href=#3-2-分类>#</a></h5><ul><li>简单工厂模式</li><li>工厂方法模式</li><li>抽象工厂模式</li></ul><blockquote><p>分别是在各自基础上有一定的改进: 简单工厂模式解决了入口不统一的问题; 工厂模式解决了修改地点不统一的问题; 抽象工厂模式解决了子类实现不规范的问题</p></blockquote><h5 id=3-3-coding>3-3 coding<a hidden class=anchor aria-hidden=true href=#3-3-coding>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function Animal(opts){
</span></span><span style=display:flex><span>    var obj = new Object();
</span></span><span style=display:flex><span>    obj.name = opts.name;
</span></span><span style=display:flex><span>    obj.color = opts.color;
</span></span><span style=display:flex><span>    obj.getInfo = function(){
</span></span><span style=display:flex><span>        return &#39;名称：&#39;+obj.name +&#39;， 颜色：&#39;+ obj.color;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    return obj;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>var cat = Animal({name: &#39;波斯猫&#39;, color: &#39;白色&#39;});
</span></span><span style=display:flex><span>cat.getInfo();
</span></span></code></pre></div><h5 id=3-4-场景>3-4 场景<a hidden class=anchor aria-hidden=true href=#3-4-场景>#</a></h5><p>简单说：假如我们想在网页面里插入一些元素，而这些元素类型不固定，可能是图片、链接、文本， 根据工厂模式的定义，在工厂模式下，工厂函数只需接受我们要创建的元素的类型，其他的工厂函数帮我们处理</p><h4 id=4-策略模式>4. 策略模式<a hidden class=anchor aria-hidden=true href=#4-策略模式>#</a></h4><h5 id=4-1-原理>4-1 原理<a hidden class=anchor aria-hidden=true href=#4-1-原理>#</a></h5><p>俗话说，条条大路(策略)通罗马(result)。在现实生活中，我们可以采用很多方法实现同一个目标。 比如我们先定个小目标，先挣它一个亿。我们可以根据具体的实际情况(按照对应的策略)来完成这个目标</p><h5 id=4-2-coding>4-2 coding<a hidden class=anchor aria-hidden=true href=#4-2-coding>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>// 某公司年终奖计算方式
</span></span><span style=display:flex><span>var Strategies = {
</span></span><span style=display:flex><span> &#34;A&#34;:function(salary){
</span></span><span style=display:flex><span>  return salary * 5;
</span></span><span style=display:flex><span> },
</span></span><span style=display:flex><span> &#34;B&#34;:function(salary){
</span></span><span style=display:flex><span>  return salary * 4;
</span></span><span style=display:flex><span> },
</span></span><span style=display:flex><span> &#34;C&#34;:function(salary){
</span></span><span style=display:flex><span>  return salary * 3;
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>var caculateBonus = function(level,salary){
</span></span><span style=display:flex><span> return Strategies[level](salary);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>console.log(caculateBonus(&#34;A&#34;,2000));
</span></span></code></pre></div><h5 id=4-3-场景>4-3 场景<a hidden class=anchor aria-hidden=true href=#4-3-场景>#</a></h5><ul><li>antd 中的message组件有info、success、error</li><li>表单校验</li></ul><h4 id=5-代理模式>5. 代理模式<a hidden class=anchor aria-hidden=true href=#5-代理模式>#</a></h4><h5 id=5-1-原理>5-1 原理<a hidden class=anchor aria-hidden=true href=#5-1-原理>#</a></h5><p>为其他对象提供一种代理以控制对这个对象的访问</p><h5 id=5-2-分类>5-2 分类<a hidden class=anchor aria-hidden=true href=#5-2-分类>#</a></h5><ul><li>保护代理模式</li><li>虚拟代理模式</li><li>缓存代理模式</li></ul><h5 id=5-3-coding>5-3 coding<a hidden class=anchor aria-hidden=true href=#5-3-coding>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>var Flower = function(){
</span></span><span style=display:flex><span>    this.price = 150
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>var xiaoming = {
</span></span><span style=display:flex><span>  sendflower: function(target){
</span></span><span style=display:flex><span>        var flower = new Flower()
</span></span><span style=display:flex><span>        target.receiveFlower(flower )
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>var B = {
</span></span><span style=display:flex><span>    receiveFlower: function(flower){
</span></span><span style=display:flex><span>        if(flower.price &lt; 100){
</span></span><span style=display:flex><span>          console.log(&#34;太便宜了，女神表示一脸嫌弃&#34;)
</span></span><span style=display:flex><span>          return false
</span></span><span style=display:flex><span>        }else{
</span></span><span style=display:flex><span>            A.receiveFlower(flower)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>var A = {
</span></span><span style=display:flex><span>    receiveFlower: function(){
</span></span><span style=display:flex><span>        console.log(&#34;接受了鲜花&#34;)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>xiaoming.sendFlower(B);
</span></span></code></pre></div><h5 id=5-4-场景>5-4 场景<a hidden class=anchor aria-hidden=true href=#5-4-场景>#</a></h5><ul><li>保护过滤</li><li>缓存代理 - 一些开销比较大的运算结果提供暂时的存储</li><li>虚拟代理(一些开销很大的对象，延迟到真正需要它的时候才去创建) - 图片上传</li></ul><hr><p><strong>最后， 希望大家早日实现：成为编程高手的伟大梦想！</strong><br><strong>欢迎交流~</strong></p><img src=/img-common/weChatPublic.jpg alt=微信公众号 width=600><p><strong>本文版权归原作者曜灵所有！未经允许，严禁转载！对非法转载者, 原作者保留采用法律手段追究的权利！</strong><br><strong>若需转载，请联系微信公众号：连先生有猫病，可获取作者联系方式！</strong></p></div><footer class=post-footer><nav class=paginav><a class=prev href=https://lianpf.github.io/posts/computer-basics/05.js-design-generics/><span class=title>« 上一页</span><br><span>谈谈 JS 和 设计泛型</span></a>
<a class=next href=https://lianpf.github.io/posts/frontend-develop/js-unknown/><span class=title>下一页 »</span><br><span>JavaScript之你不知道的this</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 设计模式: 聊一聊JavaScript设计模式（一） on twitter" href="https://twitter.com/intent/tweet/?text=%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%3a%20%e8%81%8a%e4%b8%80%e8%81%8aJavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%ef%bc%88%e4%b8%80%ef%bc%89&amp;url=https%3a%2f%2flianpf.github.io%2fposts%2fcomputer-basics%2f02.js-design-pattern-i%2f&amp;hashtags=JS%2c%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 设计模式: 聊一聊JavaScript设计模式（一） on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2flianpf.github.io%2fposts%2fcomputer-basics%2f02.js-design-pattern-i%2f&amp;title=%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%3a%20%e8%81%8a%e4%b8%80%e8%81%8aJavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%ef%bc%88%e4%b8%80%ef%bc%89&amp;summary=%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%3a%20%e8%81%8a%e4%b8%80%e8%81%8aJavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%ef%bc%88%e4%b8%80%ef%bc%89&amp;source=https%3a%2f%2flianpf.github.io%2fposts%2fcomputer-basics%2f02.js-design-pattern-i%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 设计模式: 聊一聊JavaScript设计模式（一） on reddit" href="https://reddit.com/submit?url=https%3a%2f%2flianpf.github.io%2fposts%2fcomputer-basics%2f02.js-design-pattern-i%2f&title=%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%3a%20%e8%81%8a%e4%b8%80%e8%81%8aJavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%ef%bc%88%e4%b8%80%ef%bc%89"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 设计模式: 聊一聊JavaScript设计模式（一） on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2flianpf.github.io%2fposts%2fcomputer-basics%2f02.js-design-pattern-i%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 设计模式: 聊一聊JavaScript设计模式（一） on whatsapp" href="https://api.whatsapp.com/send?text=%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%3a%20%e8%81%8a%e4%b8%80%e8%81%8aJavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%ef%bc%88%e4%b8%80%ef%bc%89%20-%20https%3a%2f%2flianpf.github.io%2fposts%2fcomputer-basics%2f02.js-design-pattern-i%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 设计模式: 聊一聊JavaScript设计模式（一） on telegram" href="https://telegram.me/share/url?text=%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%3a%20%e8%81%8a%e4%b8%80%e8%81%8aJavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%ef%bc%88%e4%b8%80%ef%bc%89&amp;url=https%3a%2f%2flianpf.github.io%2fposts%2fcomputer-basics%2f02.js-design-pattern-i%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></div><script src=https://utteranc.es/client.js repo=lianpf/lianpf.github.io issue-term=title label=comments theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>Copyright
&copy;
2016-2024
<a href=https://lianpf.github.io/ style=color:#939393>曜灵（SUN）Site</a>.
基于 Hugo 引擎和 PaperMod 主题</span>
<a href=https://beian.miit.gov.cn/ target=_blank style=color:#939393></a>&nbsp;</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg><span id=read_progress></span></span></a>
<script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>200||document.documentElement.scrollTop>200?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{(function(){document.cookie="change-themes="+escape("false")})(),document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.body.addEventListener("copy",function(e){if(window.getSelection().toString()&&window.getSelection().toString().length>50){let t=e.clipboardData||window.clipboardData;if(t){e.preventDefault();let n=window.getSelection().toString()+`

————————————————
版权声明：本文为「曜灵（SUN）Site」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：`+location.href,s=window.getSelection().toString()+`

————————————————
版权声明：本文为「曜灵（SUN）Site」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：`+location.href;t.setData("text/html",n),t.setData("text/plain",s)}}})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="复制";function i(){t.innerText="已复制！",setTimeout(()=>{t.innerText="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){let t=e.textContent+`
————————————————
版权声明：本文为「曜灵（SUN）Site」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：`+location.href;navigator.clipboard.writeText(t),i();return}const n=document.createRange();n.selectNodeContents(e);const s=window.getSelection();s.removeAllRanges(),s.addRange(n);try{document.execCommand("copy"),i()}catch{}s.removeRange(n)});let l=e.className.replaceAll("language-",""),n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),o=document.createElement("div");o.innerText=l,n.setAttribute("class","mac-tool"),a.setAttribute("class","mac bb1"),r.setAttribute("class","mac bb2"),c.setAttribute("class","mac bb3"),o.setAttribute("class","language-type"),n.appendChild(a),n.appendChild(r),n.appendChild(c),n.appendChild(o),s.classList.contains("highlight")?(s.appendChild(t),s.appendChild(n)):s.parentNode.firstChild==s||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?(e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t),s.appendChild(n)):(e.parentNode.appendChild(t),s.appendChild(n)))})</script></body></html>