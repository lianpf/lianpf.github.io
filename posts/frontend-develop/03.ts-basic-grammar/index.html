<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€» | æ›œçµï¼ˆSUNï¼‰Site</title><meta name=keywords content="TS"><meta name=description content="æœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ï¼Œå…³äºTypeScriptçš„åŸºç¡€è¯­æ³•ï¼Œä½ äº†è§£&mldr;"><meta name=author content="æ›œçµ"><link rel=canonical href=https://lianpf.github.io/posts/frontend-develop/03.ts-basic-grammar/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://lianpf.github.io/img-common/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://lianpf.github.io/img-common/favicon.png><link rel=icon type=image/png sizes=32x32 href=https://lianpf.github.io/img-common/favicon.png><link rel=apple-touch-icon href=https://lianpf.github.io/img-common/avatar.jpeg><link rel=mask-icon href=https://lianpf.github.io/img-common/avatar.jpeg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js></script>
<script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta property="og:title" content="vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€»"><meta property="og:description" content="æœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ï¼Œå…³äºTypeScriptçš„åŸºç¡€è¯­æ³•ï¼Œä½ äº†è§£&mldr;"><meta property="og:type" content="article"><meta property="og:url" content="https://lianpf.github.io/posts/frontend-develop/03.ts-basic-grammar/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-13T17:59:58+08:00"><meta property="article:modified_time" content="2021-03-13T17:59:58+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€»"><meta name=twitter:description content="æœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ï¼Œå…³äºTypeScriptçš„åŸºç¡€è¯­æ³•ï¼Œä½ äº†è§£&mldr;"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ğŸ“šæ–‡ç« ","item":"https://lianpf.github.io/posts/"},{"@type":"ListItem","position":2,"name":"ğŸ‘¨ğŸ»â€ğŸ’» å‰ç«¯","item":"https://lianpf.github.io/posts/frontend-develop/"},{"@type":"ListItem","position":3,"name":"vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€»","item":"https://lianpf.github.io/posts/frontend-develop/03.ts-basic-grammar/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€»","name":"vue3\u002bts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€»","description":"æœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ï¼Œå…³äºTypeScriptçš„åŸºç¡€è¯­æ³•ï¼Œä½ äº†è§£\u0026hellip;\n","keywords":["TS"],"articleBody":"æœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ï¼Œå…³äºTypeScriptçš„åŸºç¡€è¯­æ³•ï¼Œä½ äº†è§£â€¦\nä¸€ã€èƒŒæ™¯ åœ¨ reactÂ å’Œ vueÂ ç¤¾åŒºä¸­ä¹Ÿè¶Šæ¥è¶Šå¤šäººå¼€å§‹ä½¿ç”¨TypeScriptï¼Œä½¿ç”¨ TS å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä»å‘å¸ƒçš„ Vue3Â æ­£å¼ç‰ˆæœ¬æ¥çœ‹ï¼Œ Vue3Â çš„æºç æ˜¯ç”¨ TS ç¼–å†™çš„ï¼Œæ›´å¥½çš„ TypeScript æ”¯æŒä¹Ÿæ˜¯è¿™æ¬¡å‡çº§çš„ä¸€å¤§äº®ç‚¹ã€‚å½“ç„¶ï¼Œåœ¨å®é™…å¼€å‘ä¸­å¦‚ä½•æ­£ç¡®æ‹¥æŠ± TS ä»¥åŠå¦‚ä½•è¿ç§»åˆ° Vue3Â ä¹Ÿæ˜¯é¡¹ç›®ä¸­æˆ‘ä»¬ä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ï¼Œè¿™é‡Œé’ˆå¯¹ Vue3Â å’Œ TSå•ç‹¬åšäº†ä¸€ä¸ªç³»åˆ—å’Œå¤§å®¶åšä¸€ä¸‹äº¤æµï¼Œæœ¬ç¯‡æ˜¯ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ã€‚\næœ¬ç³»åˆ—å…¶ä»–å†…å®¹å¦‚ä¸‹:\nvue3+tsé¡¹ç›®ç³»åˆ—ç¬¬1ç¯‡ã€Švue3é¡¹ç›®ä»0åˆ°1æ­å»ºã€‹ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬3ç¯‡ã€Švue3ç»„åˆå¼apiåŠé‡è¦å±æ€§å˜æ›´ã€‹ äºŒã€å‰è¨€ 1ã€é™æ€ç±»å‹ã€åŠ¨æ€ç±»å‹ã€å¼ºç±»å‹ã€å¼±ç±»å‹ ç¼–è¯‘æ—¶å°±çŸ¥é“å˜é‡ç±»å‹çš„æ˜¯é™æ€ç±»å‹ï¼Œè¿è¡Œæ—¶æ‰çŸ¥é“ä¸€ä¸ªå˜é‡ç±»å‹çš„å«åšåŠ¨æ€ç±»å‹ã€‚ java æ˜¯é™æ€ç±»å‹ï¼Œ js æ˜¯åŠ¨æ€ç±»å‹ã€‚\nä¸å…è®¸éšå¼è½¬æ¢çš„æ˜¯å¼ºç±»å‹ï¼Œå…è®¸éšå¼è½¬æ¢çš„æ˜¯å¼±ç±»å‹ã€‚ java æ˜¯å¼ºç±»å‹ï¼Œ js æ˜¯å¼±ç±»å‹ã€‚\né‚£tsåˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹çš„è¯­è¨€ï¼Œå¾ˆæ˜æ˜¾ï¼Œ ts æ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œå› ä¸ºå®ƒéœ€è¦ç»è¿‡ç¼–è¯‘ã€‚ä½†æ˜¯ tsä¸æ˜¯å¼ºç±»å‹ï¼Œå› ä¸ºå®ƒå¯ä»¥å…è®¸éšå¼ç±»å‹è½¬æ¢ã€‚\nlet isBool: boolean let num: number = 10 isBool = !num // ok 2ã€Typescriptæ˜¯ä»€ä¹ˆ ECMAScript çš„è¶…é›† (stage 3) ç¼–è¯‘æœŸçš„ç±»å‹æ£€æŸ¥ ä¸å¼•å…¥é¢å¤–å¼€é”€(é›¶ä¾èµ–ï¼Œä¸æ‰©å±• js è¯­æ³•ï¼Œä¸ä¾µå…¥è¿è¡Œæ—¶) ç¼–è¯‘å‡ºé€šç”¨çš„ã€æ˜“è¯»çš„ js ä»£ç  Typescript = Type + ECMAScript + Babel-Lite\nTypescript è®¾è®¡ç›®æ ‡: é“¾æ¥\n3ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Typescript å¢åŠ äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ å‡å°‘è¿è¡Œæ—¶é”™è¯¯ï¼Œå†™å‡ºçš„ä»£ç æ›´åŠ å®‰å…¨ï¼Œå‡å°‘ BUG äº«å—åˆ°ä»£ç æç¤ºå¸¦æ¥çš„å¿«æ„Ÿ é‡æ„ç¥å™¨ ä¸‰ã€ç±»å‹ 1ã€åŸºç¡€ç±»å‹ å£°æ˜äº†å˜é‡çš„ç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡å°±æœ‰äº†é™æ€ç±»å‹çš„ç‰¹æ€§ï¼Œtsä¸­ä½¿ç”¨:æ“ä½œç¬¦æ¥å£°æ˜ç±»å‹:\nboolean number string array tupleï¼ˆå…ƒç»„ï¼‰ enumï¼ˆæšä¸¾ï¼‰ any \u0026 unknown void null \u0026 undefined never Object å£°æ˜å˜é‡çš„ç±»å‹:\nlet bool: boolean = false // boolean ç±»å‹ let num: number = 12 // number ç±»å‹ let str: string = 'hello world' // stringç±»å‹ let numArr: number[] = [1, 2, 3] // numberæ•°ç»„ç±»å‹ let numArr: Array = [1, 2, 3] // æ•°ç»„æ³›å‹å½¢å¼ï¼šnumberæ•°ç»„ç±»å‹ let unknow: any = 4 // anyç±»å‹ï¼Œå³ä»»ä¸€ç±»å‹ unknow = \"maybe a string instead\" unknow = false 1.1 æšä¸¾ï¼ˆenumï¼‰ æ•°å­—æšä¸¾ å­—ç¬¦ä¸²æšä¸¾ å¸¸é‡æšä¸¾ å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰æšä¸¾çš„æ¦‚å¿µï¼Œæšä¸¾å°±æ˜¯ä¸€ç»„å¸¸é‡çš„é›†åˆï¼Œä½†æ˜¯å’Œé›†åˆä¸åŒï¼Œæšä¸¾å¯ä»¥é€šè¿‡å˜é‡çš„å€¼æ¥å¾—åˆ°å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒå‘çš„è¿‡ç¨‹:\nenum Direction { UP, DOWN, LEFT, RIGHT } Direction.UP // 0 Direction[0] // 'UP' æ•°å­—æšä¸¾ ä¸Šä¾‹ä¸­çš„ Direction å°±æ˜¯ä¸€ä¸ªæ•°å­—æšä¸¾ï¼Œé»˜è®¤çš„ï¼Œç¬¬ä¸€ä¸ªå˜é‡çš„å€¼æ˜¯0ï¼Œåé¢çš„å€¼ä¼šåœ¨å‰ä¸€ä¸ªå€¼ä¸Š +1 ï¼Œæ‰€ä»¥ DOWN çš„å€¼ä¸º1ï¼Œ LEFT çš„å€¼ä¸º2ï¼Œä»¥æ­¤ç±»æ¨ã€‚ å¦‚æœæƒ³æ”¹å˜æšä¸¾çš„åˆå§‹å€¼ï¼Œåªéœ€è¦ç»™ç¬¬ä¸€ä¸ªå˜é‡èµ‹å€¼å³å¯:\nenum Direction { UP = 1, DOWN, LEFT, RIGHT } å­—ç¬¦ä¸²æšä¸¾ å­—ç¬¦ä¸²æšä¸¾çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œ åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»åˆå§‹åŒ–:\nå¦‚æœæŸä¸ªæˆå‘˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™ä¼šæŠ¥é”™\nenum Direction { UP = 'UP', DOWN = 'DOWN', LEFT = 'LEFT', RIGHT = 'RIGHT', MIDDLE //error æšä¸¾æˆå‘˜å¿…é¡»å…·æœ‰åˆå§‹åŒ–è¡¨è¾¾å¼ } å¸¸é‡æšä¸¾ å¯ä»¥ç”¨ const ä¿®é¥°ç¬¦æ¥å£°æ˜æšä¸¾ï¼Œè¿™æ—¶å€™ç¼–è¯‘åçš„jsä»£ç å°†ä¸ä¼šå‡ºç°é¢å¤–çš„å£°æ˜ä»£ç :\nenum Direction { UP, DOWN, LEFT, RIGHT } const enum Seasons { SPRING = 'SPRING', SUMMER = 'SUMMER', AUTUMN = 'AUTUMN', WINTER = 'WINTER' } const up = Direction.UP const spring = Seasons.SPRING ç”Ÿæˆçš„js:\nvar Direction; (function (Direction) { Direction[Direction[\"UP\"] = 0] = \"UP\"; Direction[Direction[\"DOWN\"] = 1] = \"DOWN\"; Direction[Direction[\"LEFT\"] = 2] = \"LEFT\"; Direction[Direction[\"RIGHT\"] = 3] = \"RIGHT\"; })(Direction || (Direction = {})); var up = Direction.UP; var spring = \"SPRING\" /* SPRING */; 1.2 any å’Œ unknown çš„åŒºåˆ« any : ä»»æ„ç±»å‹ unknown : æœªçŸ¥çš„ç±»å‹ ä»»ä½•ç±»å‹éƒ½èƒ½åˆ†é…ç»™ unknown ï¼Œä½† unknown ä¸èƒ½åˆ†é…ç»™å…¶ä»–åŸºæœ¬ç±»å‹ï¼Œè€Œ any å•¥éƒ½èƒ½åˆ†é…å’Œè¢«åˆ†é…\nunknown Demo:\nlet foo: unknown foo = true // ok foo = 123 //ok foo.toFixed(2) // error let foo1: string = foo // error any Demo:\nlet bar: any bar = true // ok bar = 123 //ok foo.toFixed(2) // ok let bar1:string = bar // ok å¦‚ä¸Šï¼Œç”¨äº† any å°±ç›¸å½“äºå®Œå…¨ä¸¢å¤±äº†ç±»å‹æ£€æŸ¥ï¼Œæ‰€ä»¥å°½é‡å°‘ç”¨ any ï¼Œå¯¹äºæœªçŸ¥ç±»å‹å¯ä»¥ç”¨ unknown\nunknown çš„æ­£ç¡®ç”¨æ³• å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼å°† unknown ç±»å‹ç¼©å°ä¸ºæ›´å…·ä½“çš„ç±»å‹èŒƒå›´:\nfunction getLen(value: unknown): number { if (typeof value === 'string') { // å› ä¸ºç±»å‹ä¿æŠ¤çš„åŸå› ï¼Œæ­¤å¤„ value è¢«åˆ¤æ–­ä¸º string ç±»å‹ return value.length } return 0 } è¿™ä¸ªè¿‡ç¨‹å«ç±»å‹æ”¶çª„(type narrowing)\n1.3 never never ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ neverç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼›å˜é‡ä¹Ÿå¯èƒ½æ˜¯ neverç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ã€‚\nnever ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ æ²¡æœ‰ç±»å‹æ˜¯neverçš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™neverç±»å‹ï¼ˆé™¤äº†neveræœ¬èº«ä¹‹å¤–ï¼‰ï¼Œå³ä½¿ anyä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™never\nåœ¨æœ€æ–°çš„ typescript 3.7 ä¸­ï¼Œä¸‹é¢ä»£ç ä¼šæŠ¥é”™:\n// never ç”¨æˆ·æ§åˆ¶æµåˆ†æ function neverReach (): never { throw new Error('an error') } const x = neverReach() x.toFixed(2) // x is unreachable never è¿˜å¯ä»¥ç”¨äºè”åˆç±»å‹çš„å¹ºå…ƒ:\ntype T0 = string | number | never // T0 is string | number 2ã€é«˜çº§ç±»å‹ 2.1 è”åˆç±»å‹ä¸äº¤å‰ç±»å‹ è”åˆç±»å‹(union type)è¡¨ç¤ºå¤šç§ç±»å‹çš„ â€œæˆ–â€ å…³ç³»\nfunction genLen(x: string | any[]) { return x.length } genLen('') // ok genLen([]) // ok genLen(1) // error äº¤å‰ç±»å‹è¡¨ç¤ºå¤šç§ç±»å‹çš„ â€œä¸â€ å…³ç³»\ninterface Person { name: string age: number } interface Animal { name: string color: string } const x: Person \u0026 Animal = { name: 'x', age: 1, color: 'red } ä½¿ç”¨è”åˆç±»å‹è¡¨ç¤ºæšä¸¾\ntype Position = 'UP' | 'DOWN' | 'LEFT' | 'RIGHT' const position: Position = 'UP' // å…·å€¼è”åˆç±»å‹ // type å…³é”®è¯å¯ä»¥å£°æ˜ä¸€ä¸ªç±»å‹ type positionType = 'top' | 'center' | 'bottom' let position: positionType = 'top' // ok position = 'left' // error ä¸èƒ½å°†ç±»å‹â€œ\"left\"â€åˆ†é…ç»™ç±»å‹â€œpositionTypeâ€ position = 'bottom' // ok // æ•°ç»„è”åˆç±»å‹ let arr: (number | string)[] = [] arr.push(1) // ok arr.push('hello') // ok arr.push(true) // error ç±»å‹â€œtrueâ€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œstring | numberâ€çš„å‚æ•°ã€‚ å¯ä»¥é¿å…ä½¿ç”¨ enum ä¾µå…¥äº†è¿è¡Œæ—¶ã€‚\n2.2 ç±»å‹ä¿æŠ¤å’Œç±»å‹æ–­è¨€ ts åˆå­¦è€…å¾ˆå®¹æ˜“å†™å‡ºä¸‹é¢çš„ä»£ç :\nfunction isString (value) { return Object.prototype.toString.call(value) === '[object String]' } function fn (x: string | number) { if (isString(x)) { return x.length // error ç±»å‹â€œstring | numberâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œlengthâ€ã€‚ } else { // ..... } } å¦‚ä½•è®© ts æ¨æ–­å‡ºæ¥ x æ˜¯ string ç±»å‹å‘¢?\n2.2.1 ä½¿ç”¨tsçš„ is å…³é”®è¯ function isString (value: unknown): value is string { return Object.prototype.toString.call(value) === '[object String]' } function fn (x: string | number) { if (isString(x)) { return x.length } else { // ..... } } 2.2.2 ç±»å‹ä¿æŠ¤ (1) js typeof å…³é”®è¯ typeof å…³ç³»è¯å¯ä»¥ä»å®ç° æ¨å‡ºç±»å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»å‹å…³é”®è¯\nfunction getLen(x: string | any[]) { return x.length } type GetLen = typeof getLen function callback(fn: GetLen) { fn(1) // ç±»å‹â€œ1â€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œstring | any[]â€çš„å‚æ•° } (2) js instanceof å…³é”®è¯ åœ¨ ts ä¸­ï¼Œinstanceof å…³é”®è¯èƒ½å¤Ÿå¸®åŠ© ts åˆ¤æ–­å‡ºæ„é€ å‡½æ•°çš„ç±»å‹:\nfunction fn1 (x: XMLHttpRequest | string) { if (x instanceof XMLHttpRequest) { // x is XMLHttpRequest return x.getAllResponseHeaders() } else { // x is string return x.length } } (3) é’ˆå¯¹ null å’Œ undefined çš„ç±»å‹ä¿æŠ¤ åœ¨æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œts ä¼šè‡ªåŠ¨å¯¹ null å’Œ undefined è¿›è¡Œç±»å‹ä¿æŠ¤:\nfunction fn2 (x?: string) { if (x) { return x.length } } 2.2.3 ç±»å‹æ–­è¨€ (1) é’ˆå¯¹ null å’Œ undefined çš„ç±»å‹æ–­è¨€ å¦‚æœæˆ‘ä»¬å·²ç»çŸ¥é“çš„å‚æ•°ä¸ä¸ºç©ºï¼Œå¯ä»¥ä½¿ç”¨!æ¥æ‰‹åŠ¨æ ‡è®°:\nfunction fn2 (x?: string) { return x!.length } 2.3 ç´¢å¼•ç±»å‹ï¼ˆIndex typesï¼‰ keyof in [] (1) keyof keyof ä¹Ÿæ˜¯ä¸€ä¸ª ç±»å‹å…³é”®è¯ ï¼Œå¯ä»¥ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡æ¥å£çš„æ‰€æœ‰ key å€¼:\ninterface Person { name: string age: number } type PersonAttrs = keyof Person // 'name' | 'age' (2) in in ä¹Ÿæ˜¯ä¸€ä¸ª ç±»å‹å…³é”®è¯ ï¼Œå¯ä»¥å¯¹ è”åˆç±»å‹ è¿›è¡Œéå†ï¼Œåªå¯ä»¥ç”¨åœ¨ type å…³é”®è¯ä¸‹é¢ã€‚\ntype Person = { [key in 'name' | 'age']: number } // ===\u003e type Person = { name: number; age: number; } (3) [] ä½¿ç”¨ [] æ“ä½œç¬¦å¯ä»¥è¿›è¡Œç´¢å¼•è®¿é—®ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª ç±»å‹å…³é”®è¯\ninterface Person { name: string age: number } type x = Person['name'] // x is string ç¤ºä¾‹ å†™ä¸€ä¸ªç±»å‹å¤åˆ¶çš„ç±»å‹å·¥å…·:\ntype Copy = { [key in keyof T]: T[key] } interface Person { name: string age: number } type Person1 = Copy 3ã€ç±»å‹æ¨æ–­ ts ä¸­çš„ç±»å‹æ¨æ–­æ˜¯éå¸¸å¼ºå¤§ï¼Œè€Œä¸”å…¶å†…éƒ¨å®ç°ä¹Ÿæ˜¯éå¸¸å¤æ‚çš„ã€‚\nåŸºæœ¬ç±»å‹æ¨æ–­:\n// ts æ¨å¯¼å‡º x æ˜¯ number ç±»å‹ let x = 10 å¯¹è±¡ç±»å‹æ¨æ–­:\n// ts æ¨æ–­å‡º myObj çš„ç±»å‹: myObj: { x: number; y: string; z: boolean; const myObj = { x:1, y: '2', z: true } å‡½æ•°ç±»å‹æ¨æ–­:\n// ts æ¨å¯¼å‡ºå‡½æ•°è¿”å›å€¼æ˜¯ number ç±»å‹ function len (str: string) { return str.length } ä¸Šä¸‹æ–‡ç±»å‹æ¨æ–­:\n// ts æ¨å¯¼å‡º event æ˜¯ ProgressEvent ç±»å‹ const xhr = new XMLHttpRequest() xhr.onload = function (event) {} å†™ ts ä»£ç çš„æ—¶å€™ï¼Œå¯¹äºåŸºæœ¬ç±»å‹æˆ‘ä»¬å¯ä»¥ä¸ç”¨æ‰‹åŠ¨å£°æ˜å…¶ç±»å‹ï¼Œè®© ts è‡ªå·±å»æ¨æ–­\nçŸ¥ä¹ - typescriptä¸Šä¸‹æ–‡ç›¸å…³ç±»å‹æµ…æ https://zhuanlan.zhihu.com/p/84481228\n4ã€ç±»å‹å…¼å®¹æ€§ typescript çš„å­ç±»å‹æ˜¯åŸºäº ç»“æ„å­ç±»å‹ çš„ï¼Œåªè¦ç»“æ„å¯ä»¥å…¼å®¹ï¼Œå°±æ˜¯å­ç±»å‹ã€‚(Duck Type)\nclass Point { x: number } function getPointX(point: Point) { return point.x } class Point2 { x: number } let point2 = new Point2() getPointX(point2) // OK java ã€ c++ ç­‰ä¼ ç»Ÿé™æ€ç±»å‹è¯­è¨€æ˜¯åŸºäº åä¹‰å­ç±»å‹ çš„ï¼Œå¿…é¡»æ˜¾ç¤ºå£°æ˜å­ç±»å‹å…³ç³»(ç»§æ‰¿)ï¼Œæ‰å¯ä»¥å…¼å®¹ã€‚\npublic class Main { public static void main (String[] args) { getPointX(new Point()); // ok getPointX(new ChildPoint()); // ok getPointX(new Point1()); // error } public static void getPointX (Point point) { System.out.println(point.x); } static class Point { public int x = 1; } static class Point2 { public int x = 2; } static class ChildPoint extends Point { public int x = 3; } } 4.1 å¯¹è±¡å­ç±»å‹ å­ç±»å‹ä¸­å¿…é¡»åŒ…å«æºç±»å‹æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•:\nfunction getPointX(point: { x: number }) { return point.x } const point = { x: 1, y: '2' } getPointX(point) // OK æ³¨æ„ï¼Œå¦‚æœç›´æ¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡å­—é¢é‡æ˜¯ä¼šæŠ¥é”™çš„:\nfunction getPointX(point: { x: number }) { return point.x } getPointX({ x: 1, y: '2' }) // error è¿™æ˜¯ ts ä¸­çš„å¦ä¸€ä¸ªç‰¹æ€§ï¼Œå«åš: excess property check ï¼Œå½“ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡æ—¶ï¼Œä¼šè¿›è¡Œé¢å¤–å±æ€§æ£€æŸ¥ã€‚\n4.2 åå˜ä¸é€†å˜ ä»‹ç»ç±»å‹å…¼å®¹å’Œç±»å‹å®‰å…¨å°±éå¸¸æœ‰å¿…è¦ä»‹ç»ä¸€ä¸‹é€†å˜ä¸åå˜çš„æ¦‚å¿µ:\nåœ¨ä»‹ç»ä¹‹å‰ï¼Œå…ˆçº¦å®šå¦‚ä¸‹æ ‡è®°:\nA â‰¼ B è¡¨ç¤ºAæ˜¯Bçš„å­ç±»å‹ï¼ŒAåŒ…å«Bçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ A =\u003e B è¡¨ç¤ºä»¥ A ä¸ºå‚æ•°ï¼ŒB ä¸ºè¿”å›å€¼çš„æ–¹æ³•ã€‚ (param: A) =\u003e B ä¸€ä¸ªé—®é¢˜ å¦‚æœæˆ‘ç°åœ¨æœ‰ä¸‰ä¸ªç±»å‹ Animal ã€ Dog ã€ WangCai(æ—ºè´¢) ï¼Œé‚£ä¹ˆè‚¯å®šå­˜åœ¨ä¸‹é¢çš„å…³ç³»: WangCai â‰¼ Dog â‰¼ Animal å³ æ—ºè´¢å±äºç‹—å±äºåŠ¨ç‰©ã€‚\né—®é¢˜:ä»¥ä¸‹å“ªç§ç±»å‹æ˜¯ Dog =\u003e Dog çš„å­ç±»å‘¢?\nWangCai =\u003e WangCai WangCai =\u003e Animal Animal =\u003e Animal Animal =\u003e WangCai ä»ä»£ç æ¥çœ‹ class Animal { sleep: Function } class Dog extends Animal { // å  bark: Function } class WangCai extends Dog { dance: Function } type DogCbFn = (dog: Dog) =\u003e Dog function getDogName (cb: DogCbFn) { const dog = new Dog() const myDog = cb(dog) myDog.bark() } const animal = new Animal() const wangcai = new WangCai() getDogName(wangcai =\u003e { wangcai.dance() return wangcai }) // error getDogName(wangcai =\u003e { wangcai.dance() return animal }) // error getDogName(animal =\u003e { animal.sleep() return wangcai }) // ok getDogName(animal =\u003e { animal.sleep() return animal }) // error å¯ä»¥çœ‹åˆ°åªæœ‰ Animal =\u003e WangCai æ‰æ˜¯ Dog =\u003e Dog çš„å­ç±»å‹ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼Œå¯¹äºå‡½æ•°ç±»å‹æ¥è¯´ï¼Œå‡½æ•°å‚æ•°çš„ç±»å‹å…¼å®¹æ˜¯åå‘çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º é€†å˜ ï¼Œè¿”å›å€¼çš„ç±»å‹å…¼å®¹æ˜¯æ­£å‘çš„ï¼Œç§°ä¹‹ä¸º åå˜ ã€‚\n(1) å‡½æ•°å­ç±»å‹ ä¸Šé¢é€†å˜ä¸åå˜çš„ä¾‹å­ä»‹ç»äº†å‡½æ•°å‚æ•°åªæœ‰ä¸€ä¸ªæ—¶çš„æƒ…å†µï¼Œå¦‚æœå‡½æ•°å‚æ•°æœ‰å¤šä¸ªæ—¶è¯¥å¦‚ä½•åŒºåˆ†?\nå…¶å®å‡½æ•°çš„å‚æ•°å¯ä»¥è½¬åŒ–ä¸º Tuple çš„ç±»å‹å…¼å®¹æ€§:\ntype Tuple1 = [string, number] type Tuple2 = [string, number, boolean] let tuple1: Tuple1 = ['1', 1] let tuple2: Tuple2 = ['1', 1, true] let t1: Tuple1 = tuple2 // ok let t2: Tuple2 = tuple1 // error å¯ä»¥çœ‹åˆ° Tuple2 =\u003e Tuple1 ï¼Œå³é•¿åº¦å¤§çš„æ˜¯é•¿åº¦å°çš„å­ç±»å‹ï¼Œå†ç”±äºå‡½æ•°å‚æ•°çš„é€†å˜ç‰¹æ€§ï¼Œæ‰€ä»¥å‡½æ•°å‚æ•°å°‘çš„å¯ä»¥èµ‹å€¼ç»™å‚æ•°å¤šçš„(å‚æ•°ä»å‰å¾€åéœ€ä¸€ä¸€å¯¹åº”):\n[1, 2].forEach((item, index) =\u003e { console.log(item) }) // ok [1, 2].forEach((item, index, arr, other) =\u003e { console.log(other) }) // error å››ã€æ¥å£ å†™è¿‡javaçš„åŒå­¦åº”è¯¥éƒ½çŸ¥é“æ¥å£çš„æ¦‚å¿µï¼Œjavaä¸­çš„æ¥å£æ˜¯ç”¨æ¥æè¿°ç±»çš„åŠŸèƒ½çš„\ninterface BabyInter { void cry(); } class Baby implements BabyInter { @Override public void cry() { System.out.print(\"crying\") } } ä½†æ˜¯tsé‡Œé¢çš„æ¥å£è¿˜æ˜¯æœ‰ä¸€ç‚¹ä¸ä¸€æ ·çš„ï¼ŒåŒæ ·æ˜¯ç”¨æ¥æè¿°æ•°æ®çš„ç»“æ„ï¼Œtsçš„æ¥å£ä¸ä»…å¯ä»¥æè¿°ç±»ï¼Œè¿˜å¯ä»¥æè¿°å˜é‡ï¼Œæè¿°æ–¹æ³•, ä½¿ç”¨interfaceå…³é”®è¯æ¥å£°æ˜æ¥å£:\ninterface BabyInter { name: string, cry () : void } let baby: BabyInter = { name: 'apple', cry () : void { console.log(this.name + 'is crying') } } let getBaby = () : BabyInter =\u003e { return { name: 'apple', cry () {} } } 1ã€å¯é€‰å±æ€§ æ¥å£é‡Œçš„å±æ€§ä¸å…¨éƒ½æ˜¯å¿…éœ€çš„ï¼Œå¯ä»¥æ˜¯å¯é€‰çš„ã€‚\ninterface FontStyleOptions { size: number; color?: string; } const getFontStyle = (options: FontStyleOptions) =\u003e { options.color = options.color || '#000000' return options } const fontStyle = getFontStyle({ size: 16 }) å¯é€‰å±æ€§çš„å¥½å¤„ä¹‹ä¸€æ˜¯å¯ä»¥å¯¹å¯èƒ½å­˜åœ¨çš„å±æ€§è¿›è¡Œé¢„å®šä¹‰ï¼Œå¥½å¤„ä¹‹äºŒæ˜¯åœ¨å¼•ç”¨äº†ä¸å­˜åœ¨çš„å±æ€§æ—¶å¯ä»¥æ•è·é”™è¯¯ã€‚\n2ã€å¯ç´¢å¼•çš„ç±»å‹ é¢å¤–çš„å±æ€§æ£€æŸ¥ å¦‚æœFontStyleOptionsæ¥å£ä¸­é™¤äº†æœ‰sizeå±æ€§ï¼Œè¿˜æœ‰ä¸€äº›ä¸ç¡®å®šçš„å…¶å®ƒå±æ€§ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å®šä¹‰å®ƒ:\ninterface FontStyleOptions { size: number; [prop: string]: number; } let obj: FontStyleOptions = { size: 16, border: 1 } obj.height = 18 // ok obj.background = '#ffffff' // error ä¸èƒ½å°†ç±»å‹â€œ\"#ffffff\"â€åˆ†é…ç»™ç±»å‹â€œnumberâ€ è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºå¯ç´¢å¼•çš„ç±»å‹æ¥è¯´ï¼Œç´¢å¼•ç­¾åçš„å‚æ•°ç±»å‹å¿…é¡»ä¸º â€œstringâ€ æˆ– â€œnumberâ€:\ninterface FontStyleOptions { size: number; [prop: boolean]: string; // error } è¿™ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸ºå¯¹è±¡çš„é”®å€¼è¦ä¹ˆæ˜¯å­—ç¬¦ä¸²è¦ä¹ˆæ˜¯æ•°å­—ã€‚ è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œç´¢å¼•çš„ç±»å‹å¿…é¡»æ˜¯å…¶ä»–å±æ€§çš„è”åˆç±»å‹:\ninterface FontStyleOptions { size: number; // error ç±»å‹â€œnumberâ€çš„å±æ€§â€œsizeâ€ä¸èƒ½èµ‹ç»™å­—ç¬¦ä¸²ç´¢å¼•ç±»å‹â€œstringâ€ [prop: string]: string; } interface FontStyleOptions { size: number; [prop: string]: string | number; // ok } äº”ã€ç±» 1ã€ç»§æ‰¿ class Animal { name: string; constructor(theName: string) { this.name = theName; } move(distanceInMeters: number = 0) { console.log(`${this.name} moved ${distanceInMeters}m.`); } } class Snake extends Animal { constructor(name: string) { super(name); } move(distanceInMeters = 5) { console.log(\"Slithering...\"); super.move(distanceInMeters); } } class Horse extends Animal { constructor(name: string) { super(name); } move(distanceInMeters = 45) { console.log(\"Galloping...\"); super.move(distanceInMeters); } } let sam = new Snake(\"Sammy the Python\"); let tom: Animal = new Horse(\"Tommy the Palomino\"); sam.move(); tom.move(34); è¾“å‡º\nSlithering... Sammy the Python moved 5m. Galloping... Tommy the Palomino moved 34m. å…³é”®ç‚¹\nä½¿ç”¨extendså…³é”®å­—åˆ›å»ºäº†Animalçš„ä¸¤ä¸ªå­ç±»ï¼š Horseå’Œ Snake æ´¾ç”Ÿç±»åŒ…å«äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒå¿…é¡»è°ƒç”¨ super()ï¼Œå®ƒä¼šæ‰§è¡ŒåŸºç±»çš„æ„é€ å‡½æ•°ã€‚ è€Œä¸”ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œè®¿é—® thisçš„å±æ€§ä¹‹å‰ï¼Œä¸€å®šè¦è°ƒç”¨ super() é‡å†™ä» Animalç»§æ‰¿æ¥çš„ moveæ–¹æ³•ï¼Œä½¿å¾— moveæ–¹æ³•æ ¹æ®ä¸åŒçš„ç±»è€Œå…·æœ‰ä¸åŒçš„åŠŸèƒ½ tsä¸­çš„ç±»å’Œes6çš„ç±»æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„åŒºåˆ«ï¼Œä¸»è¦æ˜¯å¢åŠ äº†ç±»æˆå‘˜å’Œæ–¹æ³•çš„ä¿®é¥°ç¬¦(private, protected, public)å’Œå¯¹æ¥å£çš„å®ç°ã€‚\n2ã€ä¿®é¥°ç¬¦ public ä¿®é¥°ç¬¦: ç±»æˆå‘˜å’Œæ–¹æ³•èƒ½åœ¨è¯¥ç±»å’Œè¯¥ç±»çš„å­ç±»ä¸­è¢«ä½¿ç”¨ï¼Œä¹Ÿèƒ½åœ¨å¤–éƒ¨è¢«ä½¿ç”¨ã€‚TypeScripté‡Œï¼Œæˆå‘˜éƒ½é»˜è®¤ä¸º public private ä¿®é¥°ç¬¦: ç±»æˆå‘˜å’Œæ–¹æ³•åªèƒ½åœ¨è¯¥ç±»ä¸­è¢«ä½¿ç”¨ï¼Œä¸èƒ½åœ¨å¤–éƒ¨è¢«ä½¿ç”¨ã€‚ protected ä¿®é¥°ç¬¦: ç±»æˆå‘˜å’Œæ–¹æ³•åªèƒ½åœ¨è¯¥ç±»å’Œè¯¥ç±»çš„å­ç±»ä¸­è¢«ä½¿ç”¨ï¼Œä¸èƒ½åœ¨å¤–éƒ¨è¢«ä½¿ç”¨ã€‚ readonlyå…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ï¼Œåªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ– class Person { private age: number protected name: string constructor (name: string, age: number) { this.name = name this.age = age } } class Student extends Person { constructor (name: string, age: number) { super(name, age) } learn () :void { console.log(this.name + 'is learning') // ok console.log(this.age) // error } } let student = new Student('Lucy', 18) student.name // error æ³¨æ„ å¦‚æœå…¶ä¸­ä¸€ä¸ªç±»å‹é‡ŒåŒ…å«ä¸€ä¸ª privateæˆå‘˜ï¼Œé‚£ä¹ˆåªæœ‰å½“å¦å¤–ä¸€ä¸ªç±»å‹ä¸­ä¹Ÿå­˜åœ¨è¿™æ ·ä¸€ä¸ª privateæˆå‘˜ï¼Œ å¹¶ä¸”å®ƒä»¬éƒ½æ˜¯æ¥è‡ªåŒä¸€å¤„å£°æ˜æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªç±»å‹æ˜¯å…¼å®¹çš„ã€‚ å¯¹äº protectedæˆå‘˜ä¹Ÿä½¿ç”¨è¿™ä¸ªè§„åˆ™\n3ã€å­˜å–å™¨ é€šè¿‡getters/settersæ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚ å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®\nlet passcode = \"secret passcode\"; class Employee { private _fullName: string; get fullName(): string { return this._fullName; } set fullName(newName: string) { if (passcode \u0026\u0026 passcode == \"secret passcode\") { this._fullName = newName; } else { console.log(\"Error: Unauthorized update of employee!\"); } } } let employee = new Employee(); employee.fullName = \"Bob Smith\"; if (employee.fullName) { alert(employee.fullName); } æ³¨æ„\nå­˜å–å™¨è¦æ±‚å°†ç¼–è¯‘å™¨è®¾ç½®ä¸ºè¾“å‡ºECMAScript 5æˆ–æ›´é«˜ã€‚ ä¸æ”¯æŒé™çº§åˆ°ECMAScript 3 åªå¸¦æœ‰ getä¸å¸¦æœ‰ setçš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º readonlyï¼ˆè¿™åœ¨ä»ä»£ç ç”Ÿæˆ .d.tsæ–‡ä»¶æ—¶æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå› ä¸ºåˆ©ç”¨è¿™ä¸ªå±æ€§çš„ç”¨æˆ·ä¼šçœ‹åˆ°ä¸å…è®¸å¤Ÿæ”¹å˜å®ƒçš„å€¼ï¼‰ 4ã€é™æ€å±æ€§ å‰é¢è®¨è®ºäº†ç±»çš„å®ä¾‹æˆå‘˜ï¼Œé‚£äº›ä»…å½“ç±»è¢«å®ä¾‹åŒ–çš„æ—¶å€™æ‰ä¼šè¢«åˆå§‹åŒ–çš„å±æ€§ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨staticå…³é”®è¯åˆ›å»ºç±»çš„é™æ€æˆå‘˜ï¼Œè¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Š\nclass Grid { static origin = {x: 0, y: 0}; calculateDistanceFromOrigin(point: {x: number; y: number;}) { let xDist = (point.x - Grid.origin.x); let yDist = (point.y - Grid.origin.y); return Math.sqrt(xDist * xDist + yDist * yDist) / this.scale; } constructor (public scale: number) { } } let grid1 = new Grid(1.0); // 1x scale let grid2 = new Grid(5.0); // 5x scale console.log(grid1.calculateDistanceFromOrigin({x: 10, y: 10})); console.log(grid2.calculateDistanceFromOrigin({x: 10, y: 10})); 5ã€æŠ½è±¡ç±» æŠ½è±¡ç±»åšä¸ºå…¶å®ƒæ´¾ç”Ÿç±»çš„åŸºç±»ä½¿ç”¨ã€‚ä¸€èˆ¬ä¸ä¼šç›´æ¥è¢«å®ä¾‹åŒ– ä¸åŒäºæ¥å£ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜çš„å®ç°ç»†èŠ‚ abstractå…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³• æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸åŒ…å«å…·ä½“å®ç°å¹¶ä¸”å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç° abstract class Department { constructor(public name: string) { } printName(): void { console.log('Department name: ' + this.name); } abstract printMeeting(): void; // å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç° } class AccountingDepartment extends Department { constructor() { super('Accounting and Auditing'); // åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨ super() } printMeeting(): void { console.log('The Accounting Department meets each Monday at 10am.'); } generateReports(): void { console.log('Generating accounting reports...'); } } let department: AccountingDepartment = new AccountingDepartment(); // å…è®¸å¯¹ä¸€ä¸ªæŠ½è±¡å­ç±»è¿›è¡Œå®ä¾‹åŒ–å’Œèµ‹å€¼ department.printName(); department.printMeeting(); let department2: Department; // å…è®¸åˆ›å»ºä¸€ä¸ªå¯¹æŠ½è±¡ç±»å‹çš„å¼•ç”¨ department2 = new Department(); // é”™è¯¯: ä¸èƒ½åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹ department2.generateReports(); // é”™è¯¯: æ–¹æ³•åœ¨å£°æ˜çš„æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨ 6ã€ç±»å’Œæ¥å£ tsä¸­ç±»å¯ä»¥ä½¿ç”¨å…³é”®è¯implementsæ¥å®ç°æ¥å£:\ninterface BabyInter { name: string cry () : void } class Baby implements BabyInter { name: string constructor (name: string) { this.name = name } cry () :void { console.log(this.name + 'is crying') } } å¦‚æœ Baby ç±»ä¸­æ²¡æœ‰å£°æ˜ cry æ–¹æ³•ä¼šæ€æ ·:\ninterface BabyInter { name: string cry () : void } class Baby implements BabyInter { name: string constructor (name: string) { this.name = name } } ä¼šæŠ¥ä¸€ä¸ªç¼–è¯‘é”™è¯¯: [ts] ç±»â€œBabyâ€é”™è¯¯å®ç°æ¥å£â€œBabyInterâ€ã€‚ç±»å‹â€œBabyâ€ä¸­ç¼ºå°‘å±æ€§â€œcryâ€ã€‚\nå…­ã€å‡½æ•° 1ã€å‡½æ•°ç±»å‹ (1) å‡ ç§å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹å†™æ³• è®°ä½åœ¨ () åé¢æ·»åŠ è¿”å›å€¼ç±»å‹å³å¯\nfunction fn(): number { return 1 } const fn = function (): number { return 1 } const fn = (): number =\u003e { return 1 } const obj = { fn (): number { return 1 } } (2) å‡½æ•°ç±»å‹ ts ä¸­ä¹Ÿæœ‰å‡½æ•°ç±»å‹ï¼Œç”¨æ¥æè¿°ä¸€ä¸ªå‡½æ•°:\ntype FnType = (x: number, y: number) =\u003e number å®Œæ•´çš„å‡½æ•°å†™æ³•\nlet myAdd: (x: number, y: number) =\u003e number = function(x: number, y: number): number { return x + y } // ä½¿ç”¨ FnType let myAdd: FnType = function(x: number, y: number): number { return x + y } // ts è‡ªåŠ¨æ¨å¯¼å‚æ•°ç±»å‹ let myAdd: FnType = function(x, y) { return x + y } 2ã€å‡½æ•°é‡è½½? jså› ä¸ºæ˜¯åŠ¨æ€ç±»å‹ï¼Œæœ¬èº«ä¸éœ€è¦æ”¯æŒé‡è½½ï¼Œtsä¸ºäº†ä¿è¯ç±»å‹å®‰å…¨ï¼Œæ”¯æŒäº†å‡½æ•°ç­¾åçš„ç±»å‹é‡è½½ã€‚å³:\nå¤šä¸ª é‡è½½ç­¾å å’Œä¸€ä¸ª å®ç°ç­¾å\nfunction len(s: string): string; function len(arr: any[]): number; function len(x: string | any[]) { if (typeof x === 'string') { return x.length.toString() } return x.length } let a = len('').trim() // error let b = len([]).toFixed(2) // ok let c = len(2) // error ts å‡½æ•°é‡è½½çš„å…¶ä»–ç‰¹æ€§:\nå¦‚æœå®šä¹‰äº† é‡è½½ç­¾å ï¼Œåˆ™ å®ç°ç­¾å å¯¹å¤–ä¸å¯è§ å®ç°ç­¾å å¿…é¡»å…¼å®¹ é‡è½½ç­¾å é‡è½½ç­¾å çš„ç±»å‹ä¸ä¼šåˆå¹¶ TS ä¸­çš„å‡½æ•°é‡è½½å…¶å®å¹¶ä¸æ˜¯çœŸçš„é‡è½½ã€‚\nä¸ƒã€æ³›å‹ 1ã€ä»€ä¹ˆæ˜¯æ³›å‹ è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„APIï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘ä»£ç å—çš„é‡ç”¨æ€§ã€‚ ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ã€‚\né€šè¿‡å­—é¢æ„æ€æ¥çœ‹ï¼Œæ³›å‹æœ‰â€œå¹¿æ³›çš„ç±»å‹â€ä¹‹æ„ï¼Œå³æ•°æ®çš„ç±»å‹ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªå˜é‡æ¥åŠ¨æ€ç¡®å®šï¼Œä¸€èˆ¬ç”¨ \u003c\u003e æ“ä½œç¬¦æ¥å£°æ˜æ³›å‹çš„ä½¿ç”¨ã€‚\nå°è¯•ç‰›åˆ€ // æ³›å‹æ–¹æ³•\nfunction createList(): T[] { return [] as T[] } const numberList = createList() // number[] const stringList = createList() // string[] 2ã€æ³›å‹æ¥å£ interface GenericIdentityFn { (arg: T): T; } function identity(arg: T): T { return arg; } let myIdentity: GenericIdentityFn = identity; 3ã€æ³›å‹ç±» // æ³›å‹ç±»çš„å®šä¹‰ class ArrayList { list: T[] push (item: T) :void { this.list.push(item) } pop () :T { return this.list.pop() } } // æ³›å‹ç±»çš„ä½¿ç”¨ const list = new ArrayList() list.push('hello') // ok list.push(1) //error å°çŸ¥è¯†:Kï¼ŒVï¼ŒTï¼ŒEç­‰æ³›å‹åç§°ä¸æ˜¯å›ºå®šå†™æ­»äº†ï¼Œæ˜¯å¯ä»¥éšæ„å®šä¹‰çš„ï¼Œä¸ºäº†è¯­ä¹‰åŒ–ï¼Œæ˜¯æœ‰ç‰¹æ®Šå«ä¹‰çš„:\nTè¡¨ç¤º type ç±»å‹ã€‚ Kã€V:åˆ†åˆ«ä»£è¡¨é”®å€¼ä¸­çš„ Keyã€Valueã€‚ E:è¡¨ç¤º enum æšä¸¾ã€‚ 4ã€æ³›å‹çº¦æŸ å¦‚æœæˆ‘ä»¬åªå¸Œæœ› createList å‡½æ•°åªèƒ½ç”ŸæˆæŒ‡å®šçš„ç±»å‹æ•°ç»„ï¼Œè¯¥å¦‚ä½•åšï¼Œå¯ä»¥ä½¿ç”¨ extends å…³é”®è¯æ¥çº¦æŸæ³›å‹çš„èŒƒå›´å’Œå½¢çŠ¶ã€‚\næ­¤æ—¶ extends çº¦æŸçš„æ˜¯è¾“å…¥å€¼\ninterface Lengthwise { length: number } function createList(): T[] { return [] as T[] } const numberList = createList() // ok const arrayList = createList() // ok const stringList = createList() // error console.log(numberList) // [] console.log(arrayList) // [] 4.1 æ¡ä»¶æ§åˆ¶ extends é™¤äº†åšçº¦æŸç±»å‹ï¼Œè¿˜å¯ä»¥åšæ¡ä»¶æ§åˆ¶ï¼Œç›¸å½“äºä¸ä¸€ä¸ªä¸‰å…ƒè¿ç®—ç¬¦ï¼Œåªä¸è¿‡æ˜¯é’ˆå¯¹ç±»å‹çš„ã€‚\nT extends U ? X : Y å¦‚æœ T å¯ä»¥è¢«åˆ†é…ç»™ Uï¼Œåˆ™è¿”å› Xï¼Œå¦åˆ™è¿”å› Yã€‚\ntype IsNumber = T extends number ? true : false type x = IsNumber // false 4.2 ç±»å‹æ˜ å°„ ç±»å‹æ˜ å°„ç›¸å½“ä¸ä¸€ä¸ªç±»å‹çš„å‡½æ•°ï¼Œå¯ä»¥åšä¸€äº›ç±»å‹è¿ç®—ï¼Œè¾“å…¥ä¸€ä¸ªç±»å‹ï¼Œè¾“å‡ºå¦ä¸€ä¸ªç±»å‹ï¼Œå‰æ–‡æˆ‘ä»¬ä¸¾äº†ä¸ª Copy çš„ä¾‹å­ã€‚\n(1) å†…ç½®çš„æ˜ å°„ç±»å‹ // æ¯ä¸€ä¸ªå±æ€§éƒ½å˜æˆå¯é€‰ type Partial = { [P in keyof T]?: T[P] } // æ¯ä¸€ä¸ªå±æ€§éƒ½å˜æˆå¯é€‰ type Readonly = { readonly [P in keyof T]: T[P] } // é€‰åˆ™å¯¹è±¡ä¸­çš„æŸäº›å±æ€§ type Pick = { [P in K]: T[P]; } // ...... typescript 2.8 åœ¨ lib.d.ts ä¸­å†…ç½®äº†å‡ ä¸ªæ˜ å°„ç±»å‹:\nExclude â€“ ä» T ä¸­å‰”é™¤å¯ä»¥èµ‹å€¼ç»™ U çš„ç±»å‹ã€‚ Extract â€“ æå– T ä¸­å¯ä»¥èµ‹å€¼ç»™ U çš„ç±»å‹ã€‚ NonNullable â€“ ä» T ä¸­å‰”é™¤ null å’Œ undefined ã€‚ ReturnType â€“ è·å–å‡½æ•°è¿”å›å€¼ç±»å‹ã€‚ InstanceType â€“ è·å–æ„é€ å‡½æ•°ç±»å‹çš„å®ä¾‹ç±»å‹ã€‚ (2) extends æ¡ä»¶åˆ†å‘ å¯¹äº T extends U ? X : Y æ¥è¯´ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªç‰¹æ€§ï¼Œå½“ T æ˜¯ä¸€ä¸ªè”åˆç±»å‹æ—¶ï¼Œä¼šè¿›è¡Œæ¡ä»¶åˆ†å‘ã€‚\ntype Union = string | number type ParamType = T extends number ? 'isNumber' : 'isString' type UnionType = ParamType // 'isNumber' | 'isString' å®é™…ä¸Šï¼Œextends è¿ç®—ä¼šå˜æˆå¦‚ä¸‹å½¢å¼:\n(string extends number ? 'number' : 'string') | (number extends number ? 'number' : 'string') Extract å°±æ˜¯åŸºäºæ­¤ç‰¹æ€§å®ç°çš„ï¼Œå†é…åˆ never å¹ºå…ƒçš„ç‰¹æ€§:\ntype Exclude = T extends K ? never : T type T1 = Exclude // number (3) infer å…³é”®è¯ infer å…³é”®è¯å¸¸åœ¨æ¡ä»¶ç±»å‹ä¸­å’Œ extends å…³é”®è¯ä¸€åŒå‡ºç°ï¼Œè¡¨ç¤ºå°†è¦æ¨æ–­çš„ç±»å‹ï¼Œä½œä¸ºç±»å‹å˜é‡å¯ä»¥åœ¨ä¸‰å…ƒè¡¨è¾¾å¼çš„ True éƒ¨åˆ†å¼•ç”¨\nts ä¸­å†…ç½®çš„ä¸€ä¸ªæ˜ å°„ç±»å‹ ReturnType ï¼Œç”¨äºè·å–å‡½æ•°ç±»å‹çš„è¿”å›å€¼:\nfunction len (str: string) { return str.length } type LenFn = typeof len // (str: string) =\u003e number type LenFnReturn = ReturnType // number ReturnType çš„å®ç°:\ntype ReturnType any\u003e = T extends (...args: any) =\u003e infer R ? R : any; å…«ã€æ¨¡å— 1ã€å…¨å±€æ¨¡å— vs. æ–‡ä»¶æ¨¡å— é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰€å†™çš„ä»£ç æ˜¯ä½äºå…¨å±€æ¨¡å—ä¸‹çš„:\nconst foo = 2 æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºäº†å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼Œts è®¤ä¸ºæ˜¯æ­£å¸¸çš„:\nconst bar = foo // ok å¦‚æœè¦æ‰“ç ´è¿™ç§é™åˆ¶ï¼Œåªè¦æ–‡ä»¶ä¸­æœ‰ import æˆ–è€… export è¡¨è¾¾å¼å³å¯:\nexport const bar = foo // error 2ã€æ¨¡å—è§£æç­–ç•¥ Tpescript æœ‰ä¸¤ç§æ¨¡å—çš„è§£æç­–ç•¥: Node å’Œ Classic ã€‚\nå½“ tsconfig.json ä¸­ module è®¾ç½®æˆ AMDã€Systemã€ES2015 æ—¶ï¼Œé»˜è®¤ä¸º classic ï¼Œå¦åˆ™ä¸º Node ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ moduleResolution æ‰‹åŠ¨æŒ‡å®šæ¨¡å—è§£æç­–ç•¥ã€‚\nä¸¤ç§æ¨¡å—è§£æç­–ç•¥çš„åŒºåˆ«åœ¨äº:\nimport { a } from 'moduleB' Classic:\n/root/src/folder/moduleB.ts /root/src/folder/moduleB.d.ts /root/src/moduleB.ts /root/src/moduleB.d.ts /root/moduleB.ts /root/moduleB.d.ts /moduleB.ts /moduleB.d.ts Node:\n/root/src/node_modules/moduleB.ts /root/src/node_modules/moduleB.tsx /root/src/node_modules/moduleB.d.ts /root/src/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"types\"å±æ€§) /root/src/node_modules/moduleB/index.ts /root/src/node_modules/moduleB/index.tsx /root/src/node_modules/moduleB/index.d.ts /root/node_modules/moduleB.ts /root/node_modules/moduleB.tsx /root/node_modules/moduleB.d.ts /root/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"types\"å±æ€§) /root/node_modules/moduleB/index.ts /root/node_modules/moduleB/index.tsx /root/node_modules/moduleB/index.d.ts /node_modules/moduleB.ts /node_modules/moduleB.tsx /node_modules/moduleB.d.ts /node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"types\"å±æ€§) /node_modules/moduleB/index.ts /node_modules/moduleB/index.tsx /node_modules/moduleB/index.d.ts å‚è€ƒ:\nå¯å‚è€ƒæ–‡ç« -è¯­é›€ TypeScriptå®˜æ–¹æ–‡æ¡£ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","wordCount":"7604","inLanguage":"zh","datePublished":"2021-03-13T17:59:58+08:00","dateModified":"2021-03-13T17:59:58+08:00","author":{"@type":"Person","name":"æ›œçµ"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lianpf.github.io/posts/frontend-develop/03.ts-basic-grammar/"},"publisher":{"@type":"Organization","name":"æ›œçµï¼ˆSUNï¼‰Site","logo":{"@type":"ImageObject","url":"https://lianpf.github.io/img-common/favicon.png"}}}</script></head><body id=top><script>(function(){let e,t=new RegExp("(^| )change-themes=([^;]*)(;|$)");(e=document.cookie.match(t))||((new Date).getHours()>=19||(new Date).getHours()<6?(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")))})(),localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://lianpf.github.io/ accesskey=h title="æ›œçµï¼ˆSUNï¼‰Site (Alt + H)"><img src=https://lianpf.github.io/img-common/avatar.jpeg alt=logo aria-label=logo height=35>æ›œçµï¼ˆSUNï¼‰Site</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lianpf.github.io/search title="ğŸ” æœç´¢ (Alt + /)" accesskey=/><span>ğŸ” æœç´¢</span></a></li><li><a href=https://lianpf.github.io/ title="ğŸ  ä¸»é¡µ"><span>ğŸ  ä¸»é¡µ</span></a></li><li><a href=https://lianpf.github.io/archives/ title="â±ï¸ å½’æ¡£"><span>â±ï¸ å½’æ¡£</span></a></li><li><a href=https://lianpf.github.io/tags title="ğŸ§© æ ‡ç­¾"><span>ğŸ§© æ ‡ç­¾</span></a></li><li><a href=https://lianpf.github.io/about title="ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº"><span>ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº</span></a></li></ul></nav></header><main class="main page"><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}</style><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://lianpf.github.io/>ğŸ  ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://lianpf.github.io/posts/>ğŸ“šæ–‡ç« </a>&nbsp;Â»&nbsp;<a href=https://lianpf.github.io/posts/frontend-develop/>ğŸ‘¨ğŸ»â€ğŸ’» å‰ç«¯</a></div><h1 class=post-title>vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€»</h1><div class=post-meta><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}.parent-post-meta{display:flex;flex-wrap:wrap;opacity:.8}</style><span class=parent-post-meta><span id=post_meta_style_1><span class="fa fa-calendar-check-o"></span>
<span>2021-03-13
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_3><span class="fa fa-file-word-o"></span>
<span>7604å­—
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_4><span class="fa fa-clock-o"></span>
<span>16åˆ†é’Ÿ
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_5><span class="fa fa-user-o"></span>
<span>æ›œçµ
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_6><span class="fa fa-tags" style=opacity:.8></span>
<span><span class=post-tags-meta><a href=https://lianpf.github.io/tags/ts/ style=color:var(--secondary)!important>TS</a></span></span></span></span>
<span style=opacity:.8><span id=post_meta_style_7>&nbsp;&nbsp;
<span class="fa fa-eye"></span>
<span><span id=busuanzi_container_page_pv><span id=busuanzi_value_page_pv></span></span>
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_8><span class="fa fa-commenting-o"></span>
<span><script src=https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js></script>
<script>let url=document.documentURI,dnsUrl="https://lianpf.github.io/",urlSplit=url.split(dnsUrl),finalUrl=urlSplit[1];finalUrl[0]!=="/"&&(finalUrl="/"+finalUrl),twikoo.getCommentsCount({envId:null,region:null,urls:[finalUrl],includeReply:!1}).then(function(e){let t=e[0].count;const n=document.getElementById("comment_count");n.innerText=t}).catch(function(e){console.error(e)})</script><span id=comment_count></span></span></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e4%b8%80%e8%83%8c%e6%99%af aria-label=ä¸€ã€èƒŒæ™¯>ä¸€ã€èƒŒæ™¯</a></li><li><a href=#%e4%ba%8c%e5%89%8d%e8%a8%80 aria-label=äºŒã€å‰è¨€>äºŒã€å‰è¨€</a><ul><li><a href=#1%e9%9d%99%e6%80%81%e7%b1%bb%e5%9e%8b%e5%8a%a8%e6%80%81%e7%b1%bb%e5%9e%8b%e5%bc%ba%e7%b1%bb%e5%9e%8b%e5%bc%b1%e7%b1%bb%e5%9e%8b aria-label=1ã€é™æ€ç±»å‹ã€åŠ¨æ€ç±»å‹ã€å¼ºç±»å‹ã€å¼±ç±»å‹>1ã€é™æ€ç±»å‹ã€åŠ¨æ€ç±»å‹ã€å¼ºç±»å‹ã€å¼±ç±»å‹</a></li><li><a href=#2typescript%e6%98%af%e4%bb%80%e4%b9%88 aria-label=2ã€Typescriptæ˜¯ä»€ä¹ˆ>2ã€Typescriptæ˜¯ä»€ä¹ˆ</a></li><li><a href=#3%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8-typescript aria-label="3ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Typescript">3ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Typescript</a></li></ul></li><li><a href=#%e4%b8%89%e7%b1%bb%e5%9e%8b aria-label=ä¸‰ã€ç±»å‹>ä¸‰ã€ç±»å‹</a><ul><li><a href=#1%e5%9f%ba%e7%a1%80%e7%b1%bb%e5%9e%8b aria-label=1ã€åŸºç¡€ç±»å‹>1ã€åŸºç¡€ç±»å‹</a><ul><li><a href=#11-%e6%9e%9a%e4%b8%beenum aria-label="1.1 æšä¸¾ï¼ˆenumï¼‰">1.1 æšä¸¾ï¼ˆ<code>enum</code>ï¼‰</a></li><li><a href=#12-any-%e5%92%8c-unknown-%e7%9a%84%e5%8c%ba%e5%88%ab aria-label="1.2 any å’Œ unknown çš„åŒºåˆ«">1.2 <code>any</code> å’Œ <code>unknown</code> çš„åŒºåˆ«</a></li><li><a href=#13-never aria-label="1.3 never">1.3 <code>never</code></a></li></ul></li><li><a href=#2%e9%ab%98%e7%ba%a7%e7%b1%bb%e5%9e%8b aria-label=2ã€é«˜çº§ç±»å‹>2ã€é«˜çº§ç±»å‹</a><ul><li><a href=#21-%e8%81%94%e5%90%88%e7%b1%bb%e5%9e%8b%e4%b8%8e%e4%ba%a4%e5%8f%89%e7%b1%bb%e5%9e%8b aria-label="2.1 è”åˆç±»å‹ä¸äº¤å‰ç±»å‹">2.1 è”åˆç±»å‹ä¸äº¤å‰ç±»å‹</a></li><li><a href=#22-%e7%b1%bb%e5%9e%8b%e4%bf%9d%e6%8a%a4%e5%92%8c%e7%b1%bb%e5%9e%8b%e6%96%ad%e8%a8%80 aria-label="2.2 ç±»å‹ä¿æŠ¤å’Œç±»å‹æ–­è¨€">2.2 ç±»å‹ä¿æŠ¤å’Œç±»å‹æ–­è¨€</a><ul><li><a href=#221-%e4%bd%bf%e7%94%a8ts%e7%9a%84-is-%e5%85%b3%e9%94%ae%e8%af%8d aria-label="2.2.1 ä½¿ç”¨tsçš„ is å…³é”®è¯">2.2.1 ä½¿ç”¨tsçš„ <code>is</code> å…³é”®è¯</a></li><li><a href=#222-%e7%b1%bb%e5%9e%8b%e4%bf%9d%e6%8a%a4 aria-label="2.2.2 ç±»å‹ä¿æŠ¤">2.2.2 ç±»å‹ä¿æŠ¤</a><ul><li><a href=#1-js-typeof-%e5%85%b3%e9%94%ae%e8%af%8d aria-label="(1) js typeof å…³é”®è¯">(1) js <code>typeof</code> å…³é”®è¯</a></li><li><a href=#2-js-instanceof-%e5%85%b3%e9%94%ae%e8%af%8d aria-label="(2) js instanceof å…³é”®è¯">(2) js <code>instanceof</code> å…³é”®è¯</a></li><li><a href=#3-%e9%92%88%e5%af%b9-null-%e5%92%8c-undefined-%e7%9a%84%e7%b1%bb%e5%9e%8b%e4%bf%9d%e6%8a%a4 aria-label="(3) é’ˆå¯¹ null å’Œ undefined çš„ç±»å‹ä¿æŠ¤">(3) é’ˆå¯¹ null å’Œ undefined çš„ç±»å‹ä¿æŠ¤</a></li></ul></li><li><a href=#223-%e7%b1%bb%e5%9e%8b%e6%96%ad%e8%a8%80 aria-label="2.2.3 ç±»å‹æ–­è¨€">2.2.3 ç±»å‹æ–­è¨€</a><ul><li><a href=#1-%e9%92%88%e5%af%b9-null-%e5%92%8c-undefined-%e7%9a%84%e7%b1%bb%e5%9e%8b%e6%96%ad%e8%a8%80 aria-label="(1) é’ˆå¯¹ null å’Œ undefined çš„ç±»å‹æ–­è¨€">(1) é’ˆå¯¹ null å’Œ undefined çš„ç±»å‹æ–­è¨€</a></li></ul></li></ul></li><li><a href=#23-%e7%b4%a2%e5%bc%95%e7%b1%bb%e5%9e%8bindex-types aria-label="2.3 ç´¢å¼•ç±»å‹ï¼ˆIndex typesï¼‰">2.3 ç´¢å¼•ç±»å‹ï¼ˆIndex typesï¼‰</a><ul><li><a href=#1-keyof aria-label="(1) keyof">(1) keyof</a></li><li><a href=#2-in aria-label="(2) in">(2) in</a></li><li><a href=#3- aria-label="(3) []">(3) <code>[]</code></a></li></ul></li></ul></li><li><a href=#3%e7%b1%bb%e5%9e%8b%e6%8e%a8%e6%96%ad aria-label=3ã€ç±»å‹æ¨æ–­>3ã€ç±»å‹æ¨æ–­</a></li><li><a href=#4%e7%b1%bb%e5%9e%8b%e5%85%bc%e5%ae%b9%e6%80%a7 aria-label=4ã€ç±»å‹å…¼å®¹æ€§>4ã€ç±»å‹å…¼å®¹æ€§</a><ul><li><a href=#41-%e5%af%b9%e8%b1%a1%e5%ad%90%e7%b1%bb%e5%9e%8b aria-label="4.1 å¯¹è±¡å­ç±»å‹">4.1 å¯¹è±¡å­ç±»å‹</a></li><li><a href=#42-%e5%8d%8f%e5%8f%98%e4%b8%8e%e9%80%86%e5%8f%98 aria-label="4.2 åå˜ä¸é€†å˜">4.2 åå˜ä¸é€†å˜</a><ul><li><a href=#1-%e5%87%bd%e6%95%b0%e5%ad%90%e7%b1%bb%e5%9e%8b aria-label="(1) å‡½æ•°å­ç±»å‹">(1) å‡½æ•°å­ç±»å‹</a></li></ul></li></ul></li></ul></li><li><a href=#%e5%9b%9b%e6%8e%a5%e5%8f%a3 aria-label=å››ã€æ¥å£>å››ã€æ¥å£</a><ul><li><a href=#1%e5%8f%af%e9%80%89%e5%b1%9e%e6%80%a7 aria-label=1ã€å¯é€‰å±æ€§>1ã€å¯é€‰å±æ€§</a></li><li><a href=#2%e5%8f%af%e7%b4%a2%e5%bc%95%e7%9a%84%e7%b1%bb%e5%9e%8b aria-label=2ã€å¯ç´¢å¼•çš„ç±»å‹>2ã€å¯ç´¢å¼•çš„ç±»å‹</a></li></ul></li><li><a href=#%e4%ba%94%e7%b1%bb aria-label=äº”ã€ç±»>äº”ã€ç±»</a><ul><li><a href=#1%e7%bb%a7%e6%89%bf aria-label=1ã€ç»§æ‰¿>1ã€ç»§æ‰¿</a></li><li><a href=#2%e4%bf%ae%e9%a5%b0%e7%ac%a6 aria-label=2ã€ä¿®é¥°ç¬¦>2ã€ä¿®é¥°ç¬¦</a></li><li><a href=#3%e5%ad%98%e5%8f%96%e5%99%a8 aria-label=3ã€å­˜å–å™¨>3ã€å­˜å–å™¨</a></li><li><a href=#4%e9%9d%99%e6%80%81%e5%b1%9e%e6%80%a7 aria-label=4ã€é™æ€å±æ€§>4ã€é™æ€å±æ€§</a></li><li><a href=#5%e6%8a%bd%e8%b1%a1%e7%b1%bb aria-label=5ã€æŠ½è±¡ç±»>5ã€æŠ½è±¡ç±»</a></li><li><a href=#6%e7%b1%bb%e5%92%8c%e6%8e%a5%e5%8f%a3 aria-label=6ã€ç±»å’Œæ¥å£>6ã€ç±»å’Œæ¥å£</a></li></ul></li><li><a href=#%e5%85%ad%e5%87%bd%e6%95%b0 aria-label=å…­ã€å‡½æ•°>å…­ã€å‡½æ•°</a><ul><li><a href=#1%e5%87%bd%e6%95%b0%e7%b1%bb%e5%9e%8b aria-label=1ã€å‡½æ•°ç±»å‹>1ã€å‡½æ•°ç±»å‹</a><ul><li><a href=#1-%e5%87%a0%e7%a7%8d%e5%87%bd%e6%95%b0%e7%b1%bb%e5%9e%8b%e7%9a%84%e8%bf%94%e5%9b%9e%e5%80%bc%e7%b1%bb%e5%9e%8b%e5%86%99%e6%b3%95 aria-label="(1) å‡ ç§å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹å†™æ³•">(1) å‡ ç§å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹å†™æ³•</a></li><li><a href=#2-%e5%87%bd%e6%95%b0%e7%b1%bb%e5%9e%8b aria-label="(2) å‡½æ•°ç±»å‹">(2) å‡½æ•°ç±»å‹</a></li></ul></li><li><a href=#2%e5%87%bd%e6%95%b0%e9%87%8d%e8%bd%bd aria-label=2ã€å‡½æ•°é‡è½½?>2ã€å‡½æ•°é‡è½½<code>?</code></a></li></ul></li><li><a href=#%e4%b8%83%e6%b3%9b%e5%9e%8b aria-label=ä¸ƒã€æ³›å‹>ä¸ƒã€æ³›å‹</a><ul><li><a href=#1%e4%bb%80%e4%b9%88%e6%98%af%e6%b3%9b%e5%9e%8b aria-label=1ã€ä»€ä¹ˆæ˜¯æ³›å‹>1ã€ä»€ä¹ˆæ˜¯æ³›å‹</a></li><li><a href=#2%e6%b3%9b%e5%9e%8b%e6%8e%a5%e5%8f%a3 aria-label=2ã€æ³›å‹æ¥å£>2ã€æ³›å‹æ¥å£</a></li><li><a href=#3%e6%b3%9b%e5%9e%8b%e7%b1%bb aria-label=3ã€æ³›å‹ç±»>3ã€æ³›å‹ç±»</a></li><li><a href=#4%e6%b3%9b%e5%9e%8b%e7%ba%a6%e6%9d%9f aria-label=4ã€æ³›å‹çº¦æŸ>4ã€æ³›å‹çº¦æŸ</a><ul><li><a href=#41-%e6%9d%a1%e4%bb%b6%e6%8e%a7%e5%88%b6 aria-label="4.1 æ¡ä»¶æ§åˆ¶">4.1 æ¡ä»¶æ§åˆ¶</a></li><li><a href=#42-%e7%b1%bb%e5%9e%8b%e6%98%a0%e5%b0%84 aria-label="4.2 ç±»å‹æ˜ å°„">4.2 ç±»å‹æ˜ å°„</a><ul><li><a href=#1-%e5%86%85%e7%bd%ae%e7%9a%84%e6%98%a0%e5%b0%84%e7%b1%bb%e5%9e%8b aria-label="(1) å†…ç½®çš„æ˜ å°„ç±»å‹">(1) å†…ç½®çš„æ˜ å°„ç±»å‹</a></li><li><a href=#2-extends-%e6%9d%a1%e4%bb%b6%e5%88%86%e5%8f%91 aria-label="(2) extends æ¡ä»¶åˆ†å‘">(2) extends æ¡ä»¶åˆ†å‘</a></li><li><a href=#3-infer-%e5%85%b3%e9%94%ae%e8%af%8d aria-label="(3) infer å…³é”®è¯">(3) infer å…³é”®è¯</a></li></ul></li></ul></li></ul></li><li><a href=#%e5%85%ab%e6%a8%a1%e5%9d%97 aria-label=å…«ã€æ¨¡å—>å…«ã€æ¨¡å—</a><ul><li><a href=#1%e5%85%a8%e5%b1%80%e6%a8%a1%e5%9d%97-vs-%e6%96%87%e4%bb%b6%e6%a8%a1%e5%9d%97 aria-label="1ã€å…¨å±€æ¨¡å— vs. æ–‡ä»¶æ¨¡å—">1ã€å…¨å±€æ¨¡å— vs. æ–‡ä»¶æ¨¡å—</a></li><li><a href=#2%e6%a8%a1%e5%9d%97%e8%a7%a3%e6%9e%90%e7%ad%96%e7%95%a5 aria-label=2ã€æ¨¡å—è§£æç­–ç•¥>2ã€æ¨¡å—è§£æç­–ç•¥</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{elements&&(activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")}))},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>æœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ï¼Œå…³äº<code>TypeScript</code>çš„åŸºç¡€è¯­æ³•ï¼Œä½ äº†è§£&mldr;</p><h2 id=ä¸€èƒŒæ™¯>ä¸€ã€èƒŒæ™¯<a hidden class=anchor aria-hidden=true href=#ä¸€èƒŒæ™¯>#</a></h2><p>åœ¨ reactÂ å’Œ vueÂ ç¤¾åŒºä¸­ä¹Ÿè¶Šæ¥è¶Šå¤šäººå¼€å§‹ä½¿ç”¨TypeScriptï¼Œä½¿ç”¨ TS å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä»å‘å¸ƒçš„ Vue3Â æ­£å¼ç‰ˆæœ¬æ¥çœ‹ï¼Œ Vue3Â çš„æºç æ˜¯ç”¨ TS ç¼–å†™çš„ï¼Œæ›´å¥½çš„ TypeScript æ”¯æŒä¹Ÿæ˜¯è¿™æ¬¡å‡çº§çš„ä¸€å¤§äº®ç‚¹ã€‚å½“ç„¶ï¼Œåœ¨å®é™…å¼€å‘ä¸­å¦‚ä½•æ­£ç¡®æ‹¥æŠ± TS ä»¥åŠå¦‚ä½•è¿ç§»åˆ° Vue3Â ä¹Ÿæ˜¯é¡¹ç›®ä¸­æˆ‘ä»¬ä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ï¼Œè¿™é‡Œé’ˆå¯¹ Vue3Â å’Œ TSå•ç‹¬åšäº†ä¸€ä¸ªç³»åˆ—å’Œå¤§å®¶åšä¸€ä¸‹äº¤æµï¼Œæœ¬ç¯‡æ˜¯ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ã€‚</p><p>æœ¬ç³»åˆ—å…¶ä»–å†…å®¹å¦‚ä¸‹:</p><ul><li>vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬1ç¯‡<a href=https://lianpf.github.io/posts/%E5%BC%80%E5%8F%91%E6%97%A5%E8%AE%B0/10.vue3%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/>ã€Švue3é¡¹ç›®ä»0åˆ°1æ­å»ºã€‹</a></li><li>vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡<a href=https://lianpf.github.io/posts/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/03.ts%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/>ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹</a></li><li>vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬3ç¯‡<a href=https://lianpf.github.io/posts/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/07.vue3%E7%BB%84%E5%90%88%E5%BC%8Fapi%E5%8F%8A%E9%87%8D%E8%A6%81%E5%B1%9E%E6%80%A7%E5%8F%98%E6%9B%B4/>ã€Švue3ç»„åˆå¼apiåŠé‡è¦å±æ€§å˜æ›´ã€‹</a></li></ul><h2 id=äºŒå‰è¨€>äºŒã€å‰è¨€<a hidden class=anchor aria-hidden=true href=#äºŒå‰è¨€>#</a></h2><h3 id=1é™æ€ç±»å‹åŠ¨æ€ç±»å‹å¼ºç±»å‹å¼±ç±»å‹>1ã€é™æ€ç±»å‹ã€åŠ¨æ€ç±»å‹ã€å¼ºç±»å‹ã€å¼±ç±»å‹<a hidden class=anchor aria-hidden=true href=#1é™æ€ç±»å‹åŠ¨æ€ç±»å‹å¼ºç±»å‹å¼±ç±»å‹>#</a></h3><p>ç¼–è¯‘æ—¶å°±çŸ¥é“å˜é‡ç±»å‹çš„æ˜¯é™æ€ç±»å‹ï¼Œè¿è¡Œæ—¶æ‰çŸ¥é“ä¸€ä¸ªå˜é‡ç±»å‹çš„å«åšåŠ¨æ€ç±»å‹ã€‚ java æ˜¯é™æ€ç±»å‹ï¼Œ js æ˜¯åŠ¨æ€ç±»å‹ã€‚</p><p>ä¸å…è®¸éšå¼è½¬æ¢çš„æ˜¯å¼ºç±»å‹ï¼Œå…è®¸éšå¼è½¬æ¢çš„æ˜¯å¼±ç±»å‹ã€‚ java æ˜¯å¼ºç±»å‹ï¼Œ js æ˜¯å¼±ç±»å‹ã€‚</p><p>é‚£tsåˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹çš„è¯­è¨€ï¼Œå¾ˆæ˜æ˜¾ï¼Œ ts æ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œå› ä¸ºå®ƒéœ€è¦ç»è¿‡ç¼–è¯‘ã€‚ä½†æ˜¯ tsä¸æ˜¯å¼ºç±»å‹ï¼Œå› ä¸ºå®ƒå¯ä»¥å…è®¸éšå¼ç±»å‹è½¬æ¢ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>let isBool: boolean
</span></span><span style=display:flex><span>let num: number = 10
</span></span><span style=display:flex><span>isBool = !num // ok
</span></span></code></pre></div><h3 id=2typescriptæ˜¯ä»€ä¹ˆ>2ã€Typescriptæ˜¯ä»€ä¹ˆ<a hidden class=anchor aria-hidden=true href=#2typescriptæ˜¯ä»€ä¹ˆ>#</a></h3><ul><li>ECMAScript çš„è¶…é›† (stage 3)</li><li>ç¼–è¯‘æœŸçš„ç±»å‹æ£€æŸ¥</li><li>ä¸å¼•å…¥é¢å¤–å¼€é”€(é›¶ä¾èµ–ï¼Œä¸æ‰©å±• js è¯­æ³•ï¼Œä¸ä¾µå…¥è¿è¡Œæ—¶)</li><li>ç¼–è¯‘å‡ºé€šç”¨çš„ã€æ˜“è¯»çš„ js ä»£ç </li></ul><p><code>Typescript = Type + ECMAScript + Babel-Lite</code></p><p>Typescript è®¾è®¡ç›®æ ‡: <a href=https://github.com/Microsoft/TypeScript/wiki/TypeScript-Design-Goals>é“¾æ¥</a></p><h3 id=3ä¸ºä»€ä¹ˆä½¿ç”¨-typescript>3ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Typescript<a hidden class=anchor aria-hidden=true href=#3ä¸ºä»€ä¹ˆä½¿ç”¨-typescript>#</a></h3><ul><li>å¢åŠ äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</li><li>å‡å°‘è¿è¡Œæ—¶é”™è¯¯ï¼Œå†™å‡ºçš„ä»£ç æ›´åŠ å®‰å…¨ï¼Œå‡å°‘ BUG</li><li>äº«å—åˆ°ä»£ç æç¤ºå¸¦æ¥çš„å¿«æ„Ÿ</li><li>é‡æ„ç¥å™¨</li></ul><h2 id=ä¸‰ç±»å‹>ä¸‰ã€ç±»å‹<a hidden class=anchor aria-hidden=true href=#ä¸‰ç±»å‹>#</a></h2><h3 id=1åŸºç¡€ç±»å‹>1ã€åŸºç¡€ç±»å‹<a hidden class=anchor aria-hidden=true href=#1åŸºç¡€ç±»å‹>#</a></h3><p>å£°æ˜äº†å˜é‡çš„ç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡å°±æœ‰äº†é™æ€ç±»å‹çš„ç‰¹æ€§ï¼Œtsä¸­ä½¿ç”¨<code>:</code>æ“ä½œç¬¦æ¥å£°æ˜ç±»å‹:</p><ul><li>boolean</li><li>number</li><li>string</li><li>array</li><li>tupleï¼ˆå…ƒç»„ï¼‰</li><li>enumï¼ˆæšä¸¾ï¼‰</li><li>any & unknown</li><li>void</li><li>null & undefined</li><li>never</li><li>Object</li></ul><p>å£°æ˜å˜é‡çš„ç±»å‹:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>let bool: boolean = false // boolean ç±»å‹
</span></span><span style=display:flex><span>let num: number = 12 // number ç±»å‹
</span></span><span style=display:flex><span>let str: string = &#39;hello world&#39; // stringç±»å‹
</span></span><span style=display:flex><span>let numArr: number[] = [1, 2, 3] // numberæ•°ç»„ç±»å‹
</span></span><span style=display:flex><span>let numArr: Array&lt;number&gt; = [1, 2, 3] // æ•°ç»„æ³›å‹å½¢å¼ï¼šnumberæ•°ç»„ç±»å‹
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let unknow: any = 4 // anyç±»å‹ï¼Œå³ä»»ä¸€ç±»å‹
</span></span><span style=display:flex><span>unknow = &#34;maybe a string instead&#34;
</span></span><span style=display:flex><span>unknow = false
</span></span></code></pre></div><h4 id=11-æšä¸¾enum>1.1 æšä¸¾ï¼ˆ<code>enum</code>ï¼‰<a hidden class=anchor aria-hidden=true href=#11-æšä¸¾enum>#</a></h4><ul><li>æ•°å­—æšä¸¾</li><li>å­—ç¬¦ä¸²æšä¸¾</li><li>å¸¸é‡æšä¸¾</li></ul><p>å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰æšä¸¾çš„æ¦‚å¿µï¼Œæšä¸¾å°±æ˜¯ä¸€ç»„å¸¸é‡çš„é›†åˆï¼Œä½†æ˜¯å’Œé›†åˆä¸åŒï¼Œæšä¸¾å¯ä»¥é€šè¿‡å˜é‡çš„å€¼æ¥å¾—åˆ°å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒå‘çš„è¿‡ç¨‹:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>enum Direction {
</span></span><span style=display:flex><span>  UP,
</span></span><span style=display:flex><span>  DOWN,
</span></span><span style=display:flex><span>  LEFT,
</span></span><span style=display:flex><span>  RIGHT
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Direction.UP // 0
</span></span><span style=display:flex><span>Direction[0] // &#39;UP&#39;
</span></span></code></pre></div><p><strong>æ•°å­—æšä¸¾</strong><br></p><p>ä¸Šä¾‹ä¸­çš„ Direction å°±æ˜¯ä¸€ä¸ªæ•°å­—æšä¸¾ï¼Œé»˜è®¤çš„ï¼Œç¬¬ä¸€ä¸ªå˜é‡çš„å€¼æ˜¯0ï¼Œåé¢çš„å€¼ä¼šåœ¨å‰ä¸€ä¸ªå€¼ä¸Š +1 ï¼Œæ‰€ä»¥ DOWN çš„å€¼ä¸º1ï¼Œ LEFT çš„å€¼ä¸º2ï¼Œä»¥æ­¤ç±»æ¨ã€‚
å¦‚æœæƒ³æ”¹å˜æšä¸¾çš„åˆå§‹å€¼ï¼Œåªéœ€è¦ç»™ç¬¬ä¸€ä¸ªå˜é‡èµ‹å€¼å³å¯:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>enum Direction {
</span></span><span style=display:flex><span>  UP = 1,
</span></span><span style=display:flex><span>  DOWN,
</span></span><span style=display:flex><span>  LEFT,
</span></span><span style=display:flex><span>  RIGHT
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>å­—ç¬¦ä¸²æšä¸¾</strong><br>å­—ç¬¦ä¸²æšä¸¾çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œ åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œ<strong>æ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»åˆå§‹åŒ–</strong>:</p><blockquote><p>å¦‚æœæŸä¸ªæˆå‘˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™ä¼šæŠ¥é”™</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>enum Direction {
</span></span><span style=display:flex><span>  UP = &#39;UP&#39;,
</span></span><span style=display:flex><span>  DOWN = &#39;DOWN&#39;,
</span></span><span style=display:flex><span>  LEFT = &#39;LEFT&#39;,
</span></span><span style=display:flex><span>  RIGHT = &#39;RIGHT&#39;,
</span></span><span style=display:flex><span>  MIDDLE //error æšä¸¾æˆå‘˜å¿…é¡»å…·æœ‰åˆå§‹åŒ–è¡¨è¾¾å¼
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>å¸¸é‡æšä¸¾</strong><br>å¯ä»¥ç”¨ <code>const</code> ä¿®é¥°ç¬¦æ¥å£°æ˜æšä¸¾ï¼Œè¿™æ—¶å€™ç¼–è¯‘åçš„jsä»£ç å°†ä¸ä¼šå‡ºç°é¢å¤–çš„å£°æ˜ä»£ç :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>enum Direction {
</span></span><span style=display:flex><span>  UP,
</span></span><span style=display:flex><span>  DOWN,
</span></span><span style=display:flex><span>  LEFT,
</span></span><span style=display:flex><span>  RIGHT
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>const enum Seasons {
</span></span><span style=display:flex><span>  SPRING = &#39;SPRING&#39;,
</span></span><span style=display:flex><span>  SUMMER = &#39;SUMMER&#39;,
</span></span><span style=display:flex><span>  AUTUMN = &#39;AUTUMN&#39;,
</span></span><span style=display:flex><span>  WINTER = &#39;WINTER&#39;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const up = Direction.UP
</span></span><span style=display:flex><span>const spring = Seasons.SPRING
</span></span></code></pre></div><p>ç”Ÿæˆçš„js:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>var Direction;
</span></span><span style=display:flex><span>(function (Direction) {
</span></span><span style=display:flex><span>  Direction[Direction[&#34;UP&#34;] = 0] = &#34;UP&#34;;
</span></span><span style=display:flex><span>  Direction[Direction[&#34;DOWN&#34;] = 1] = &#34;DOWN&#34;;
</span></span><span style=display:flex><span>  Direction[Direction[&#34;LEFT&#34;] = 2] = &#34;LEFT&#34;;
</span></span><span style=display:flex><span>  Direction[Direction[&#34;RIGHT&#34;] = 3] = &#34;RIGHT&#34;;
</span></span><span style=display:flex><span>})(Direction || (Direction = {}));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>var up = Direction.UP;
</span></span><span style=display:flex><span>var spring = &#34;SPRING&#34; /* SPRING */;
</span></span></code></pre></div><h4 id=12-any-å’Œ-unknown-çš„åŒºåˆ«>1.2 <code>any</code> å’Œ <code>unknown</code> çš„åŒºåˆ«<a hidden class=anchor aria-hidden=true href=#12-any-å’Œ-unknown-çš„åŒºåˆ«>#</a></h4><ul><li><code>any</code> : ä»»æ„ç±»å‹</li><li><code>unknown</code> : æœªçŸ¥çš„ç±»å‹</li></ul><p><strong>ä»»ä½•ç±»å‹éƒ½èƒ½åˆ†é…ç»™ <code>unknown</code> ï¼Œä½† <code>unknown</code> ä¸èƒ½åˆ†é…ç»™å…¶ä»–åŸºæœ¬ç±»å‹ï¼Œè€Œ <code>any</code> å•¥éƒ½èƒ½åˆ†é…å’Œè¢«åˆ†é…</strong></p><p><code>unknown</code> Demo:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>let foo: unknown
</span></span><span style=display:flex><span>foo = true // ok
</span></span><span style=display:flex><span>foo = 123 //ok
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>foo.toFixed(2) // error
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let foo1: string = foo // error
</span></span></code></pre></div><p><code>any</code> Demo:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>let bar: any
</span></span><span style=display:flex><span>bar = true // ok
</span></span><span style=display:flex><span>bar = 123 //ok
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>foo.toFixed(2) // ok
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let bar1:string = bar // ok
</span></span></code></pre></div><p>å¦‚ä¸Šï¼Œç”¨äº† <code>any</code> å°±ç›¸å½“äºå®Œå…¨ä¸¢å¤±äº†ç±»å‹æ£€æŸ¥ï¼Œæ‰€ä»¥å°½é‡å°‘ç”¨ <code>any</code> ï¼Œå¯¹äºæœªçŸ¥ç±»å‹å¯ä»¥ç”¨ <code>unknown</code></p><p><strong><code>unknown</code> çš„æ­£ç¡®ç”¨æ³•</strong><br>å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼å°† <code>unknown</code> ç±»å‹ç¼©å°ä¸ºæ›´å…·ä½“çš„ç±»å‹èŒƒå›´:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function getLen(value: unknown): number {
</span></span><span style=display:flex><span>  if (typeof value === &#39;string&#39;) {
</span></span><span style=display:flex><span>    // å› ä¸ºç±»å‹ä¿æŠ¤çš„åŸå› ï¼Œæ­¤å¤„ value è¢«åˆ¤æ–­ä¸º string ç±»å‹
</span></span><span style=display:flex><span>    return value.length
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  return 0
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>è¿™ä¸ªè¿‡ç¨‹å«ç±»å‹æ”¶çª„(type narrowing)</p></blockquote><h4 id=13-never>1.3 <code>never</code><a hidden class=anchor aria-hidden=true href=#13-never>#</a></h4><ul><li><code>never</code> ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚</li></ul><blockquote><p>neverç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼›å˜é‡ä¹Ÿå¯èƒ½æ˜¯ neverç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ã€‚</p></blockquote><ul><li><code>never</code> ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹</li></ul><blockquote><p>æ²¡æœ‰ç±»å‹æ˜¯neverçš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™neverç±»å‹ï¼ˆé™¤äº†neveræœ¬èº«ä¹‹å¤–ï¼‰ï¼Œå³ä½¿ anyä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™never</p></blockquote><p>åœ¨æœ€æ–°çš„ typescript 3.7 ä¸­ï¼Œä¸‹é¢ä»£ç ä¼šæŠ¥é”™:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>// never ç”¨æˆ·æ§åˆ¶æµåˆ†æ
</span></span><span style=display:flex><span>function neverReach (): never {
</span></span><span style=display:flex><span>  throw new Error(&#39;an error&#39;)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const x = neverReach()
</span></span><span style=display:flex><span>x.toFixed(2) // x is unreachable
</span></span></code></pre></div><p>never è¿˜å¯ä»¥ç”¨äºè”åˆç±»å‹çš„<a href="https://baike.baidu.com/item/%E5%8D%95%E4%BD%8D%E5%85%83/11035606?fromtitle=%E5%B9%BA%E5%85%83&amp;fromid=5122315&amp;fr=aladdin">å¹ºå…ƒ</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>type T0 = string | number | never // T0 is string | number
</span></span></code></pre></div><p><a id=ts-01-02-02></a></p><h3 id=2é«˜çº§ç±»å‹>2ã€é«˜çº§ç±»å‹<a hidden class=anchor aria-hidden=true href=#2é«˜çº§ç±»å‹>#</a></h3><h4 id=21-è”åˆç±»å‹ä¸äº¤å‰ç±»å‹>2.1 è”åˆç±»å‹ä¸äº¤å‰ç±»å‹<a hidden class=anchor aria-hidden=true href=#21-è”åˆç±»å‹ä¸äº¤å‰ç±»å‹>#</a></h4><p>è”åˆç±»å‹(union type)è¡¨ç¤ºå¤šç§ç±»å‹çš„ â€œæˆ–â€ å…³ç³»</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function genLen(x: string | any[]) {
</span></span><span style=display:flex><span>  return x.length
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>genLen(&#39;&#39;) // ok
</span></span><span style=display:flex><span>genLen([]) // ok
</span></span><span style=display:flex><span>genLen(1) // error
</span></span></code></pre></div><p>äº¤å‰ç±»å‹è¡¨ç¤ºå¤šç§ç±»å‹çš„ â€œä¸â€ å…³ç³»</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface Person {
</span></span><span style=display:flex><span>  name: string
</span></span><span style=display:flex><span>  age: number
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>interface Animal {
</span></span><span style=display:flex><span>  name: string
</span></span><span style=display:flex><span>  color: string
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const x: Person &amp; Animal = {
</span></span><span style=display:flex><span>  name: &#39;x&#39;,
</span></span><span style=display:flex><span>  age: 1,
</span></span><span style=display:flex><span>  color: &#39;red
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ä½¿ç”¨è”åˆç±»å‹è¡¨ç¤ºæšä¸¾</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>type Position = &#39;UP&#39; | &#39;DOWN&#39; | &#39;LEFT&#39; | &#39;RIGHT&#39;
</span></span><span style=display:flex><span>const position: Position = &#39;UP&#39;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>// å…·å€¼è”åˆç±»å‹
</span></span><span style=display:flex><span>// type å…³é”®è¯å¯ä»¥å£°æ˜ä¸€ä¸ªç±»å‹
</span></span><span style=display:flex><span>type positionType = &#39;top&#39; | &#39;center&#39; | &#39;bottom&#39;
</span></span><span style=display:flex><span>let position: positionType = &#39;top&#39; // ok
</span></span><span style=display:flex><span>position = &#39;left&#39; // error ä¸èƒ½å°†ç±»å‹â€œ&#34;left&#34;â€åˆ†é…ç»™ç±»å‹â€œpositionTypeâ€
</span></span><span style=display:flex><span>position = &#39;bottom&#39; // ok
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// æ•°ç»„è”åˆç±»å‹
</span></span><span style=display:flex><span>let arr: (number | string)[] = []
</span></span><span style=display:flex><span>arr.push(1) // ok
</span></span><span style=display:flex><span>arr.push(&#39;hello&#39;) // ok
</span></span><span style=display:flex><span>arr.push(true) // error ç±»å‹â€œtrueâ€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œstring | numberâ€çš„å‚æ•°ã€‚
</span></span></code></pre></div><p>å¯ä»¥é¿å…ä½¿ç”¨ enum ä¾µå…¥äº†è¿è¡Œæ—¶ã€‚</p><p><a id=ts-01-02-03></a></p><h4 id=22-ç±»å‹ä¿æŠ¤å’Œç±»å‹æ–­è¨€>2.2 ç±»å‹ä¿æŠ¤å’Œç±»å‹æ–­è¨€<a hidden class=anchor aria-hidden=true href=#22-ç±»å‹ä¿æŠ¤å’Œç±»å‹æ–­è¨€>#</a></h4><p>ts åˆå­¦è€…å¾ˆå®¹æ˜“å†™å‡ºä¸‹é¢çš„ä»£ç :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function isString (value) {
</span></span><span style=display:flex><span>  return Object.prototype.toString.call(value) === &#39;[object String]&#39;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function fn (x: string | number) {
</span></span><span style=display:flex><span>  if (isString(x)) {
</span></span><span style=display:flex><span>    return x.length // error ç±»å‹â€œstring | numberâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œlengthâ€ã€‚
</span></span><span style=display:flex><span>  } else {
</span></span><span style=display:flex><span>    // .....
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å¦‚ä½•è®© ts æ¨æ–­å‡ºæ¥ x æ˜¯ string ç±»å‹å‘¢?</p><h5 id=221-ä½¿ç”¨tsçš„-is-å…³é”®è¯>2.2.1 ä½¿ç”¨tsçš„ <code>is</code> å…³é”®è¯<a hidden class=anchor aria-hidden=true href=#221-ä½¿ç”¨tsçš„-is-å…³é”®è¯>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function isString (value: unknown): value is string {
</span></span><span style=display:flex><span>  return Object.prototype.toString.call(value) === &#39;[object String]&#39;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function fn (x: string | number) {
</span></span><span style=display:flex><span>  if (isString(x)) {
</span></span><span style=display:flex><span>    return x.length
</span></span><span style=display:flex><span>  } else {
</span></span><span style=display:flex><span>    // .....
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h5 id=222-ç±»å‹ä¿æŠ¤>2.2.2 ç±»å‹ä¿æŠ¤<a hidden class=anchor aria-hidden=true href=#222-ç±»å‹ä¿æŠ¤>#</a></h5><h6 id=1-js-typeof-å…³é”®è¯>(1) js <code>typeof</code> å…³é”®è¯<a hidden class=anchor aria-hidden=true href=#1-js-typeof-å…³é”®è¯>#</a></h6><p>typeof å…³ç³»è¯å¯ä»¥ä»å®ç° æ¨å‡ºç±»å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»å‹å…³é”®è¯</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function getLen(x: string | any[]) {
</span></span><span style=display:flex><span>  return x.length
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>type GetLen = typeof getLen
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function callback(fn: GetLen) {
</span></span><span style=display:flex><span>  fn(1) // ç±»å‹â€œ1â€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œstring | any[]â€çš„å‚æ•°
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h6 id=2-js-instanceof-å…³é”®è¯>(2) js <code>instanceof</code> å…³é”®è¯<a hidden class=anchor aria-hidden=true href=#2-js-instanceof-å…³é”®è¯>#</a></h6><p>åœ¨ ts ä¸­ï¼Œinstanceof å…³é”®è¯èƒ½å¤Ÿå¸®åŠ© ts åˆ¤æ–­å‡ºæ„é€ å‡½æ•°çš„ç±»å‹:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function fn1 (x: XMLHttpRequest | string) {
</span></span><span style=display:flex><span>  if (x instanceof XMLHttpRequest) { // x is XMLHttpRequest
</span></span><span style=display:flex><span>    return x.getAllResponseHeaders()
</span></span><span style=display:flex><span>  } else { // x is string
</span></span><span style=display:flex><span>    return x.length
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h6 id=3-é’ˆå¯¹-null-å’Œ-undefined-çš„ç±»å‹ä¿æŠ¤>(3) é’ˆå¯¹ null å’Œ undefined çš„ç±»å‹ä¿æŠ¤<a hidden class=anchor aria-hidden=true href=#3-é’ˆå¯¹-null-å’Œ-undefined-çš„ç±»å‹ä¿æŠ¤>#</a></h6><p>åœ¨æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œts ä¼šè‡ªåŠ¨å¯¹ null å’Œ undefined è¿›è¡Œç±»å‹ä¿æŠ¤:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function fn2 (x?: string) {
</span></span><span style=display:flex><span>  if (x) {
</span></span><span style=display:flex><span>    return x.length
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h5 id=223-ç±»å‹æ–­è¨€>2.2.3 ç±»å‹æ–­è¨€<a hidden class=anchor aria-hidden=true href=#223-ç±»å‹æ–­è¨€>#</a></h5><h6 id=1-é’ˆå¯¹-null-å’Œ-undefined-çš„ç±»å‹æ–­è¨€>(1) é’ˆå¯¹ null å’Œ undefined çš„ç±»å‹æ–­è¨€<a hidden class=anchor aria-hidden=true href=#1-é’ˆå¯¹-null-å’Œ-undefined-çš„ç±»å‹æ–­è¨€>#</a></h6><p>å¦‚æœæˆ‘ä»¬å·²ç»çŸ¥é“çš„å‚æ•°ä¸ä¸ºç©ºï¼Œå¯ä»¥ä½¿ç”¨<code>!</code>æ¥æ‰‹åŠ¨æ ‡è®°:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function fn2 (x?: string) {
</span></span><span style=display:flex><span>  return x!.length
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=23-ç´¢å¼•ç±»å‹index-types>2.3 ç´¢å¼•ç±»å‹ï¼ˆIndex typesï¼‰<a hidden class=anchor aria-hidden=true href=#23-ç´¢å¼•ç±»å‹index-types>#</a></h4><ul><li>keyof</li><li>in</li><li><code>[]</code></li></ul><h5 id=1-keyof>(1) keyof<a hidden class=anchor aria-hidden=true href=#1-keyof>#</a></h5><p>keyof ä¹Ÿæ˜¯ä¸€ä¸ª ç±»å‹å…³é”®è¯ ï¼Œå¯ä»¥ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡æ¥å£çš„æ‰€æœ‰ key å€¼:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface Person {
</span></span><span style=display:flex><span>  name: string
</span></span><span style=display:flex><span>  age: number
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>type PersonAttrs = keyof Person // &#39;name&#39; | &#39;age&#39;
</span></span></code></pre></div><h5 id=2-in>(2) in<a hidden class=anchor aria-hidden=true href=#2-in>#</a></h5><p>in ä¹Ÿæ˜¯ä¸€ä¸ª ç±»å‹å…³é”®è¯ ï¼Œå¯ä»¥å¯¹ è”åˆç±»å‹ è¿›è¡Œéå†ï¼Œåªå¯ä»¥ç”¨åœ¨ type å…³é”®è¯ä¸‹é¢ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>type Person = {
</span></span><span style=display:flex><span>  [key in &#39;name&#39; | &#39;age&#39;]: number
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// ===&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>type Person = {
</span></span><span style=display:flex><span>  name: number;
</span></span><span style=display:flex><span>  age: number;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h5 id=3->(3) <code>[]</code><a hidden class=anchor aria-hidden=true href=#3->#</a></h5><p>ä½¿ç”¨ <code>[]</code> æ“ä½œç¬¦å¯ä»¥è¿›è¡Œç´¢å¼•è®¿é—®ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª ç±»å‹å…³é”®è¯</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface Person {
</span></span><span style=display:flex><span>  name: string
</span></span><span style=display:flex><span>  age: number
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>type x = Person[&#39;name&#39;] // x is string
</span></span></code></pre></div><p><strong>ç¤ºä¾‹</strong><br>å†™ä¸€ä¸ªç±»å‹å¤åˆ¶çš„ç±»å‹å·¥å…·:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>type Copy&lt;T&gt; = {
</span></span><span style=display:flex><span>  [key in keyof T]: T[key]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>interface Person {
</span></span><span style=display:flex><span>  name: string
</span></span><span style=display:flex><span>  age: number
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>type Person1 = Copy&lt;Person&gt;
</span></span></code></pre></div><p><a id=ts-01-02-03></a></p><h3 id=3ç±»å‹æ¨æ–­>3ã€ç±»å‹æ¨æ–­<a hidden class=anchor aria-hidden=true href=#3ç±»å‹æ¨æ–­>#</a></h3><p>ts ä¸­çš„ç±»å‹æ¨æ–­æ˜¯éå¸¸å¼ºå¤§ï¼Œè€Œä¸”å…¶å†…éƒ¨å®ç°ä¹Ÿæ˜¯éå¸¸å¤æ‚çš„ã€‚</p><p>åŸºæœ¬ç±»å‹æ¨æ–­:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>// ts æ¨å¯¼å‡º x æ˜¯ number ç±»å‹
</span></span><span style=display:flex><span>let x = 10
</span></span></code></pre></div><p>å¯¹è±¡ç±»å‹æ¨æ–­:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>// ts æ¨æ–­å‡º myObj çš„ç±»å‹: myObj: { x: number; y: string; z: boolean;
</span></span><span style=display:flex><span>const myObj = {
</span></span><span style=display:flex><span>  x:1,
</span></span><span style=display:flex><span>  y: &#39;2&#39;,
</span></span><span style=display:flex><span>  z: true
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å‡½æ•°ç±»å‹æ¨æ–­:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>// ts æ¨å¯¼å‡ºå‡½æ•°è¿”å›å€¼æ˜¯ number ç±»å‹
</span></span><span style=display:flex><span>function len (str: string) {
</span></span><span style=display:flex><span>  return str.length
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ä¸Šä¸‹æ–‡ç±»å‹æ¨æ–­:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>// ts æ¨å¯¼å‡º event æ˜¯ ProgressEvent ç±»å‹
</span></span><span style=display:flex><span>const xhr = new XMLHttpRequest()
</span></span><span style=display:flex><span>xhr.onload = function (event) {}
</span></span></code></pre></div><blockquote><p>å†™ ts ä»£ç çš„æ—¶å€™ï¼Œå¯¹äºåŸºæœ¬ç±»å‹æˆ‘ä»¬å¯ä»¥ä¸ç”¨æ‰‹åŠ¨å£°æ˜å…¶ç±»å‹ï¼Œè®© ts è‡ªå·±å»æ¨æ–­</p></blockquote><p>çŸ¥ä¹ - typescriptä¸Šä¸‹æ–‡ç›¸å…³ç±»å‹æµ…æ <a href=https://zhuanlan.zhihu.com/p/84481228>https://zhuanlan.zhihu.com/p/84481228</a></p><h3 id=4ç±»å‹å…¼å®¹æ€§>4ã€ç±»å‹å…¼å®¹æ€§<a hidden class=anchor aria-hidden=true href=#4ç±»å‹å…¼å®¹æ€§>#</a></h3><p>typescript çš„å­ç±»å‹æ˜¯åŸºäº ç»“æ„å­ç±»å‹ çš„ï¼Œåªè¦ç»“æ„å¯ä»¥å…¼å®¹ï¼Œå°±æ˜¯å­ç±»å‹ã€‚(Duck Type)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>class Point {
</span></span><span style=display:flex><span>  x: number
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function getPointX(point: Point) {
</span></span><span style=display:flex><span>  return point.x
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>class Point2 {
</span></span><span style=display:flex><span>  x: number
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let point2 = new Point2()
</span></span><span style=display:flex><span>getPointX(point2) // OK
</span></span></code></pre></div><p>java ã€ c++ ç­‰ä¼ ç»Ÿé™æ€ç±»å‹è¯­è¨€æ˜¯åŸºäº åä¹‰å­ç±»å‹ çš„ï¼Œå¿…é¡»æ˜¾ç¤ºå£°æ˜å­ç±»å‹å…³ç³»(ç»§æ‰¿)ï¼Œæ‰å¯ä»¥å…¼å®¹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>public class Main {
</span></span><span style=display:flex><span>  public static void main (String[] args) {
</span></span><span style=display:flex><span>    getPointX(new Point()); // ok
</span></span><span style=display:flex><span>    getPointX(new ChildPoint()); // ok
</span></span><span style=display:flex><span>    getPointX(new Point1()); // error
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  public static void getPointX (Point point) {
</span></span><span style=display:flex><span>    System.out.println(point.x);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  static class Point {
</span></span><span style=display:flex><span>    public int x = 1;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  static class Point2 {
</span></span><span style=display:flex><span>    public int x = 2;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  static class ChildPoint extends Point {
</span></span><span style=display:flex><span>    public int x = 3;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=41-å¯¹è±¡å­ç±»å‹>4.1 å¯¹è±¡å­ç±»å‹<a hidden class=anchor aria-hidden=true href=#41-å¯¹è±¡å­ç±»å‹>#</a></h4><p>å­ç±»å‹ä¸­å¿…é¡»åŒ…å«æºç±»å‹æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function getPointX(point: { x: number }) {
</span></span><span style=display:flex><span>  return point.x
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const point = {
</span></span><span style=display:flex><span>  x: 1,
</span></span><span style=display:flex><span>  y: &#39;2&#39;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>getPointX(point) // OK
</span></span></code></pre></div><p>æ³¨æ„ï¼Œå¦‚æœç›´æ¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡å­—é¢é‡æ˜¯ä¼šæŠ¥é”™çš„:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function getPointX(point: { x: number }) {
</span></span><span style=display:flex><span>  return point.x
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>getPointX({ x: 1, y: &#39;2&#39; }) // error
</span></span></code></pre></div><p>è¿™æ˜¯ ts ä¸­çš„å¦ä¸€ä¸ªç‰¹æ€§ï¼Œå«åš: <code>excess property check</code> ï¼Œå½“ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡æ—¶ï¼Œä¼šè¿›è¡Œé¢å¤–å±æ€§æ£€æŸ¥ã€‚</p><h4 id=42-åå˜ä¸é€†å˜>4.2 åå˜ä¸é€†å˜<a hidden class=anchor aria-hidden=true href=#42-åå˜ä¸é€†å˜>#</a></h4><p>ä»‹ç»ç±»å‹å…¼å®¹å’Œç±»å‹å®‰å…¨å°±éå¸¸æœ‰å¿…è¦ä»‹ç»ä¸€ä¸‹é€†å˜ä¸åå˜çš„æ¦‚å¿µ:</p><p>åœ¨ä»‹ç»ä¹‹å‰ï¼Œå…ˆçº¦å®šå¦‚ä¸‹æ ‡è®°:</p><ul><li><code>A â‰¼ B</code> è¡¨ç¤ºAæ˜¯Bçš„å­ç±»å‹ï¼ŒAåŒ…å«Bçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</li><li><code>A => B</code> è¡¨ç¤ºä»¥ A ä¸ºå‚æ•°ï¼ŒB ä¸ºè¿”å›å€¼çš„æ–¹æ³•ã€‚ (param: A) => B</li></ul><p><strong>ä¸€ä¸ªé—®é¢˜</strong><br>å¦‚æœæˆ‘ç°åœ¨æœ‰ä¸‰ä¸ªç±»å‹ Animal ã€ Dog ã€ WangCai(æ—ºè´¢) ï¼Œé‚£ä¹ˆè‚¯å®šå­˜åœ¨ä¸‹é¢çš„å…³ç³»: WangCai â‰¼ Dog â‰¼ Animal å³ æ—ºè´¢å±äºç‹—å±äºåŠ¨ç‰©ã€‚</p><p>é—®é¢˜:ä»¥ä¸‹å“ªç§ç±»å‹æ˜¯ Dog => Dog çš„å­ç±»å‘¢?</p><ul><li>WangCai => WangCai</li><li>WangCai => Animal</li><li>Animal => Animal</li><li>Animal => WangCai</li></ul><p><strong>ä»ä»£ç æ¥çœ‹</strong><br></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>class Animal {
</span></span><span style=display:flex><span>  sleep: Function
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>class Dog extends Animal {
</span></span><span style=display:flex><span>  // å 
</span></span><span style=display:flex><span>  bark: Function
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>class WangCai extends Dog {
</span></span><span style=display:flex><span>  dance: Function
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>type DogCbFn = (dog: Dog) =&gt; Dog
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function getDogName (cb: DogCbFn) {
</span></span><span style=display:flex><span>  const dog = new Dog()
</span></span><span style=display:flex><span>  const myDog = cb(dog)
</span></span><span style=display:flex><span>  myDog.bark()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const animal = new Animal()
</span></span><span style=display:flex><span>const wangcai = new WangCai()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>getDogName(wangcai =&gt; {
</span></span><span style=display:flex><span>  wangcai.dance()
</span></span><span style=display:flex><span>  return wangcai
</span></span><span style=display:flex><span>}) // error
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>getDogName(wangcai =&gt; {
</span></span><span style=display:flex><span>  wangcai.dance()
</span></span><span style=display:flex><span>  return animal
</span></span><span style=display:flex><span>}) // error
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>getDogName(animal =&gt; {
</span></span><span style=display:flex><span>  animal.sleep()
</span></span><span style=display:flex><span>  return wangcai
</span></span><span style=display:flex><span>}) // ok
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>getDogName(animal =&gt; {
</span></span><span style=display:flex><span>  animal.sleep()
</span></span><span style=display:flex><span>  return animal
</span></span><span style=display:flex><span>}) // error
</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°åªæœ‰ Animal => WangCai æ‰æ˜¯ Dog => Dog çš„å­ç±»å‹ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼Œå¯¹äºå‡½æ•°ç±»å‹æ¥è¯´ï¼Œå‡½æ•°å‚æ•°çš„ç±»å‹å…¼å®¹æ˜¯åå‘çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º é€†å˜ ï¼Œè¿”å›å€¼çš„ç±»å‹å…¼å®¹æ˜¯æ­£å‘çš„ï¼Œç§°ä¹‹ä¸º åå˜ ã€‚</p><h5 id=1-å‡½æ•°å­ç±»å‹>(1) å‡½æ•°å­ç±»å‹<a hidden class=anchor aria-hidden=true href=#1-å‡½æ•°å­ç±»å‹>#</a></h5><p>ä¸Šé¢é€†å˜ä¸åå˜çš„ä¾‹å­ä»‹ç»äº†å‡½æ•°å‚æ•°åªæœ‰ä¸€ä¸ªæ—¶çš„æƒ…å†µï¼Œå¦‚æœå‡½æ•°å‚æ•°æœ‰å¤šä¸ªæ—¶è¯¥å¦‚ä½•åŒºåˆ†?</p><p>å…¶å®å‡½æ•°çš„å‚æ•°å¯ä»¥è½¬åŒ–ä¸º Tuple çš„ç±»å‹å…¼å®¹æ€§:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>type Tuple1 = [string, number]
</span></span><span style=display:flex><span>type Tuple2 = [string, number, boolean]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let tuple1: Tuple1 = [&#39;1&#39;, 1]
</span></span><span style=display:flex><span>let tuple2: Tuple2 = [&#39;1&#39;, 1, true]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let t1: Tuple1 = tuple2 // ok
</span></span><span style=display:flex><span>let t2: Tuple2 = tuple1 // error
</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ° Tuple2 => Tuple1 ï¼Œå³é•¿åº¦å¤§çš„æ˜¯é•¿åº¦å°çš„å­ç±»å‹ï¼Œå†ç”±äºå‡½æ•°å‚æ•°çš„é€†å˜ç‰¹æ€§ï¼Œæ‰€ä»¥å‡½æ•°å‚æ•°å°‘çš„å¯ä»¥èµ‹å€¼ç»™å‚æ•°å¤šçš„(å‚æ•°ä»å‰å¾€åéœ€ä¸€ä¸€å¯¹åº”):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>[1, 2].forEach((item, index) =&gt; {
</span></span><span style=display:flex><span>  console.log(item)
</span></span><span style=display:flex><span>}) // ok
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[1, 2].forEach((item, index, arr, other) =&gt; {
</span></span><span style=display:flex><span>  console.log(other)
</span></span><span style=display:flex><span>}) // error
</span></span></code></pre></div><h2 id=å››æ¥å£>å››ã€æ¥å£<a hidden class=anchor aria-hidden=true href=#å››æ¥å£>#</a></h2><blockquote><p>å†™è¿‡javaçš„åŒå­¦åº”è¯¥éƒ½çŸ¥é“æ¥å£çš„æ¦‚å¿µï¼Œjavaä¸­çš„æ¥å£æ˜¯ç”¨æ¥æè¿°ç±»çš„åŠŸèƒ½çš„</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface BabyInter {
</span></span><span style=display:flex><span>  void cry();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>class Baby implements BabyInter {
</span></span><span style=display:flex><span>  @Override
</span></span><span style=display:flex><span>  public void cry() {
</span></span><span style=display:flex><span>    System.out.print(&#34;crying&#34;)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ä½†æ˜¯<code>ts</code>é‡Œé¢çš„æ¥å£è¿˜æ˜¯æœ‰ä¸€ç‚¹ä¸ä¸€æ ·çš„ï¼ŒåŒæ ·æ˜¯ç”¨æ¥æè¿°æ•°æ®çš„ç»“æ„ï¼Œ<code>ts</code>çš„æ¥å£ä¸ä»…å¯ä»¥æè¿°ç±»ï¼Œè¿˜å¯ä»¥æè¿°å˜é‡ï¼Œæè¿°æ–¹æ³•, ä½¿ç”¨<code>interface</code>å…³é”®è¯æ¥å£°æ˜æ¥å£:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface BabyInter {
</span></span><span style=display:flex><span>  name: string,
</span></span><span style=display:flex><span>  cry () : void
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let baby: BabyInter = {
</span></span><span style=display:flex><span>  name: &#39;apple&#39;,
</span></span><span style=display:flex><span>  cry () : void {
</span></span><span style=display:flex><span>    console.log(this.name + &#39;is crying&#39;)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let getBaby = () : BabyInter =&gt; {
</span></span><span style=display:flex><span>  return {
</span></span><span style=display:flex><span>    name: &#39;apple&#39;,
</span></span><span style=display:flex><span>    cry () {}
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=1å¯é€‰å±æ€§>1ã€å¯é€‰å±æ€§<a hidden class=anchor aria-hidden=true href=#1å¯é€‰å±æ€§>#</a></h3><p>æ¥å£é‡Œçš„å±æ€§ä¸å…¨éƒ½æ˜¯å¿…éœ€çš„ï¼Œå¯ä»¥æ˜¯å¯é€‰çš„ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface FontStyleOptions {
</span></span><span style=display:flex><span>  size: number;
</span></span><span style=display:flex><span>  color?: string;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const getFontStyle = (options: FontStyleOptions) =&gt; {
</span></span><span style=display:flex><span>  options.color = options.color || &#39;#000000&#39;
</span></span><span style=display:flex><span>  return options
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const fontStyle = getFontStyle({
</span></span><span style=display:flex><span>  size: 16
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>å¯é€‰å±æ€§çš„å¥½å¤„ä¹‹ä¸€æ˜¯å¯ä»¥å¯¹å¯èƒ½å­˜åœ¨çš„å±æ€§è¿›è¡Œé¢„å®šä¹‰ï¼Œå¥½å¤„ä¹‹äºŒæ˜¯åœ¨å¼•ç”¨äº†ä¸å­˜åœ¨çš„å±æ€§æ—¶å¯ä»¥æ•è·é”™è¯¯ã€‚</p><h3 id=2å¯ç´¢å¼•çš„ç±»å‹>2ã€å¯ç´¢å¼•çš„ç±»å‹<a hidden class=anchor aria-hidden=true href=#2å¯ç´¢å¼•çš„ç±»å‹>#</a></h3><blockquote><p>é¢å¤–çš„å±æ€§æ£€æŸ¥
å¦‚æœ<code>FontStyleOptions</code>æ¥å£ä¸­é™¤äº†æœ‰<code>size</code>å±æ€§ï¼Œè¿˜æœ‰ä¸€äº›ä¸ç¡®å®šçš„å…¶å®ƒå±æ€§ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å®šä¹‰å®ƒ:</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface FontStyleOptions {
</span></span><span style=display:flex><span>  size: number;
</span></span><span style=display:flex><span>  [prop: string]: number;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>let obj: FontStyleOptions = {
</span></span><span style=display:flex><span>  size: 16,
</span></span><span style=display:flex><span>  border: 1
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>obj.height = 18 // ok
</span></span><span style=display:flex><span>obj.background = &#39;#ffffff&#39; // error ä¸èƒ½å°†ç±»å‹â€œ&#34;#ffffff&#34;â€åˆ†é…ç»™ç±»å‹â€œnumberâ€
</span></span></code></pre></div><p>è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºå¯ç´¢å¼•çš„ç±»å‹æ¥è¯´ï¼Œç´¢å¼•ç­¾åçš„å‚æ•°ç±»å‹å¿…é¡»ä¸º &ldquo;string&rdquo; æˆ– &ldquo;number&rdquo;:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface FontStyleOptions {
</span></span><span style=display:flex><span>  size: number;
</span></span><span style=display:flex><span>  [prop: boolean]: string; // error
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¿™ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸ºå¯¹è±¡çš„é”®å€¼è¦ä¹ˆæ˜¯å­—ç¬¦ä¸²è¦ä¹ˆæ˜¯æ•°å­—ã€‚ è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œç´¢å¼•çš„ç±»å‹å¿…é¡»æ˜¯å…¶ä»–å±æ€§çš„è”åˆç±»å‹:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface FontStyleOptions {
</span></span><span style=display:flex><span>  size: number; // error ç±»å‹â€œnumberâ€çš„å±æ€§â€œsizeâ€ä¸èƒ½èµ‹ç»™å­—ç¬¦ä¸²ç´¢å¼•ç±»å‹â€œstringâ€
</span></span><span style=display:flex><span>  [prop: string]: string;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>interface FontStyleOptions {
</span></span><span style=display:flex><span>  size: number;
</span></span><span style=display:flex><span>  [prop: string]: string | number; // ok
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=äº”ç±»>äº”ã€ç±»<a hidden class=anchor aria-hidden=true href=#äº”ç±»>#</a></h2><h3 id=1ç»§æ‰¿>1ã€ç»§æ‰¿<a hidden class=anchor aria-hidden=true href=#1ç»§æ‰¿>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>class Animal {
</span></span><span style=display:flex><span>    name: string;
</span></span><span style=display:flex><span>    constructor(theName: string) { this.name = theName; }
</span></span><span style=display:flex><span>    move(distanceInMeters: number = 0) {
</span></span><span style=display:flex><span>        console.log(`${this.name} moved ${distanceInMeters}m.`);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>class Snake extends Animal {
</span></span><span style=display:flex><span>    constructor(name: string) { super(name); }
</span></span><span style=display:flex><span>    move(distanceInMeters = 5) {
</span></span><span style=display:flex><span>        console.log(&#34;Slithering...&#34;);
</span></span><span style=display:flex><span>        super.move(distanceInMeters);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>class Horse extends Animal {
</span></span><span style=display:flex><span>    constructor(name: string) { super(name); }
</span></span><span style=display:flex><span>    move(distanceInMeters = 45) {
</span></span><span style=display:flex><span>        console.log(&#34;Galloping...&#34;);
</span></span><span style=display:flex><span>        super.move(distanceInMeters);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let sam = new Snake(&#34;Sammy the Python&#34;);
</span></span><span style=display:flex><span>let tom: Animal = new Horse(&#34;Tommy the Palomino&#34;);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sam.move();
</span></span><span style=display:flex><span>tom.move(34);
</span></span></code></pre></div><p>è¾“å‡º</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Slithering...
</span></span><span style=display:flex><span>Sammy the Python moved 5m.
</span></span><span style=display:flex><span>Galloping...
</span></span><span style=display:flex><span>Tommy the Palomino moved 34m.
</span></span></code></pre></div><p><strong>å…³é”®ç‚¹</strong></p><ul><li>ä½¿ç”¨<code>extends</code>å…³é”®å­—åˆ›å»ºäº†Animalçš„ä¸¤ä¸ªå­ç±»ï¼š Horseå’Œ Snake</li><li>æ´¾ç”Ÿç±»åŒ…å«äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒå¿…é¡»è°ƒç”¨ <code>super()</code>ï¼Œå®ƒä¼šæ‰§è¡ŒåŸºç±»çš„æ„é€ å‡½æ•°ã€‚ è€Œä¸”ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œè®¿é—® thisçš„å±æ€§ä¹‹å‰ï¼Œä¸€å®šè¦è°ƒç”¨ <code>super()</code></li><li><code>é‡å†™</code>ä» Animalç»§æ‰¿æ¥çš„ moveæ–¹æ³•ï¼Œä½¿å¾— moveæ–¹æ³•æ ¹æ®ä¸åŒçš„ç±»è€Œå…·æœ‰ä¸åŒçš„åŠŸèƒ½</li></ul><p>tsä¸­çš„ç±»å’Œes6çš„ç±»æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„åŒºåˆ«ï¼Œä¸»è¦æ˜¯å¢åŠ äº†ç±»æˆå‘˜å’Œæ–¹æ³•çš„ä¿®é¥°ç¬¦(private, protected, public)å’Œå¯¹æ¥å£çš„å®ç°ã€‚</p><h3 id=2ä¿®é¥°ç¬¦>2ã€ä¿®é¥°ç¬¦<a hidden class=anchor aria-hidden=true href=#2ä¿®é¥°ç¬¦>#</a></h3><ul><li><code>public</code> ä¿®é¥°ç¬¦: ç±»æˆå‘˜å’Œæ–¹æ³•èƒ½åœ¨è¯¥ç±»å’Œè¯¥ç±»çš„å­ç±»ä¸­è¢«ä½¿ç”¨ï¼Œä¹Ÿèƒ½åœ¨å¤–éƒ¨è¢«ä½¿ç”¨ã€‚TypeScripté‡Œï¼Œæˆå‘˜éƒ½é»˜è®¤ä¸º public</li><li><code>private</code> ä¿®é¥°ç¬¦: ç±»æˆå‘˜å’Œæ–¹æ³•åªèƒ½åœ¨è¯¥ç±»ä¸­è¢«ä½¿ç”¨ï¼Œä¸èƒ½åœ¨å¤–éƒ¨è¢«ä½¿ç”¨ã€‚</li><li><code>protected</code> ä¿®é¥°ç¬¦: ç±»æˆå‘˜å’Œæ–¹æ³•åªèƒ½åœ¨è¯¥ç±»å’Œè¯¥ç±»çš„å­ç±»ä¸­è¢«ä½¿ç”¨ï¼Œä¸èƒ½åœ¨å¤–éƒ¨è¢«ä½¿ç”¨ã€‚</li><li><code>readonly</code>å…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ï¼Œåªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>class Person {
</span></span><span style=display:flex><span>  private age: number
</span></span><span style=display:flex><span>  protected name: string
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  constructor (name: string, age: number) {
</span></span><span style=display:flex><span>    this.name = name
</span></span><span style=display:flex><span>    this.age = age
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>class Student extends Person {
</span></span><span style=display:flex><span>  constructor (name: string, age: number) {
</span></span><span style=display:flex><span>    super(name, age)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  learn () :void {
</span></span><span style=display:flex><span>    console.log(this.name + &#39;is learning&#39;) // ok console.log(this.age) // error
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let student = new Student(&#39;Lucy&#39;, 18)
</span></span><span style=display:flex><span>student.name // error
</span></span></code></pre></div><p><strong>æ³¨æ„</strong><br>å¦‚æœå…¶ä¸­ä¸€ä¸ªç±»å‹é‡ŒåŒ…å«ä¸€ä¸ª privateæˆå‘˜ï¼Œé‚£ä¹ˆåªæœ‰å½“å¦å¤–ä¸€ä¸ªç±»å‹ä¸­ä¹Ÿå­˜åœ¨è¿™æ ·ä¸€ä¸ª privateæˆå‘˜ï¼Œ å¹¶ä¸”å®ƒä»¬éƒ½æ˜¯æ¥è‡ªåŒä¸€å¤„å£°æ˜æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªç±»å‹æ˜¯å…¼å®¹çš„ã€‚ å¯¹äº protectedæˆå‘˜ä¹Ÿä½¿ç”¨è¿™ä¸ªè§„åˆ™</p><h3 id=3å­˜å–å™¨>3ã€å­˜å–å™¨<a hidden class=anchor aria-hidden=true href=#3å­˜å–å™¨>#</a></h3><blockquote><p>é€šè¿‡getters/settersæ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚ å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>let passcode = &#34;secret passcode&#34;;
</span></span><span style=display:flex><span>class Employee {
</span></span><span style=display:flex><span>    private _fullName: string;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    get fullName(): string {
</span></span><span style=display:flex><span>        return this._fullName;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    set fullName(newName: string) {
</span></span><span style=display:flex><span>        if (passcode &amp;&amp; passcode == &#34;secret passcode&#34;) {
</span></span><span style=display:flex><span>            this._fullName = newName;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        else {
</span></span><span style=display:flex><span>            console.log(&#34;Error: Unauthorized update of employee!&#34;);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let employee = new Employee();
</span></span><span style=display:flex><span>employee.fullName = &#34;Bob Smith&#34;;
</span></span><span style=display:flex><span>if (employee.fullName) {
</span></span><span style=display:flex><span>    alert(employee.fullName);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>æ³¨æ„</strong></p><ul><li>å­˜å–å™¨è¦æ±‚å°†ç¼–è¯‘å™¨è®¾ç½®ä¸ºè¾“å‡ºECMAScript 5æˆ–æ›´é«˜ã€‚ ä¸æ”¯æŒé™çº§åˆ°ECMAScript 3</li><li>åªå¸¦æœ‰ getä¸å¸¦æœ‰ setçš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º readonlyï¼ˆè¿™åœ¨ä»ä»£ç ç”Ÿæˆ .d.tsæ–‡ä»¶æ—¶æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå› ä¸ºåˆ©ç”¨è¿™ä¸ªå±æ€§çš„ç”¨æˆ·ä¼šçœ‹åˆ°ä¸å…è®¸å¤Ÿæ”¹å˜å®ƒçš„å€¼ï¼‰</li></ul><h3 id=4é™æ€å±æ€§>4ã€é™æ€å±æ€§<a hidden class=anchor aria-hidden=true href=#4é™æ€å±æ€§>#</a></h3><blockquote><p>å‰é¢è®¨è®ºäº†ç±»çš„å®ä¾‹æˆå‘˜ï¼Œé‚£äº›ä»…å½“ç±»è¢«å®ä¾‹åŒ–çš„æ—¶å€™æ‰ä¼šè¢«åˆå§‹åŒ–çš„å±æ€§ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<code>static</code>å…³é”®è¯åˆ›å»ºç±»çš„é™æ€æˆå‘˜ï¼Œè¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Š</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>class Grid {
</span></span><span style=display:flex><span>    static origin = {x: 0, y: 0};
</span></span><span style=display:flex><span>    calculateDistanceFromOrigin(point: {x: number; y: number;}) {
</span></span><span style=display:flex><span>        let xDist = (point.x - Grid.origin.x);
</span></span><span style=display:flex><span>        let yDist = (point.y - Grid.origin.y);
</span></span><span style=display:flex><span>        return Math.sqrt(xDist * xDist + yDist * yDist) / this.scale;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    constructor (public scale: number) { }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let grid1 = new Grid(1.0);  // 1x scale
</span></span><span style=display:flex><span>let grid2 = new Grid(5.0);  // 5x scale
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>console.log(grid1.calculateDistanceFromOrigin({x: 10, y: 10}));
</span></span><span style=display:flex><span>console.log(grid2.calculateDistanceFromOrigin({x: 10, y: 10}));
</span></span></code></pre></div><h3 id=5æŠ½è±¡ç±»>5ã€æŠ½è±¡ç±»<a hidden class=anchor aria-hidden=true href=#5æŠ½è±¡ç±»>#</a></h3><ul><li>æŠ½è±¡ç±»åšä¸ºå…¶å®ƒæ´¾ç”Ÿç±»çš„åŸºç±»ä½¿ç”¨ã€‚ä¸€èˆ¬ä¸ä¼šç›´æ¥è¢«å®ä¾‹åŒ–</li><li>ä¸åŒäºæ¥å£ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜çš„å®ç°ç»†èŠ‚</li><li>abstractå…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³•</li><li>æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸åŒ…å«å…·ä½“å®ç°å¹¶ä¸”å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>abstract class Department {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    constructor(public name: string) {
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    printName(): void {
</span></span><span style=display:flex><span>        console.log(&#39;Department name: &#39; + this.name);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    abstract printMeeting(): void; // å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>class AccountingDepartment extends Department {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    constructor() {
</span></span><span style=display:flex><span>        super(&#39;Accounting and Auditing&#39;); // åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨ super()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    printMeeting(): void {
</span></span><span style=display:flex><span>        console.log(&#39;The Accounting Department meets each Monday at 10am.&#39;);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    generateReports(): void {
</span></span><span style=display:flex><span>        console.log(&#39;Generating accounting reports...&#39;);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let department: AccountingDepartment = new AccountingDepartment(); // å…è®¸å¯¹ä¸€ä¸ªæŠ½è±¡å­ç±»è¿›è¡Œå®ä¾‹åŒ–å’Œèµ‹å€¼
</span></span><span style=display:flex><span>department.printName();
</span></span><span style=display:flex><span>department.printMeeting();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let department2: Department; // å…è®¸åˆ›å»ºä¸€ä¸ªå¯¹æŠ½è±¡ç±»å‹çš„å¼•ç”¨
</span></span><span style=display:flex><span>department2 = new Department(); // é”™è¯¯: ä¸èƒ½åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹
</span></span><span style=display:flex><span>department2.generateReports(); // é”™è¯¯: æ–¹æ³•åœ¨å£°æ˜çš„æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨
</span></span></code></pre></div><h3 id=6ç±»å’Œæ¥å£>6ã€ç±»å’Œæ¥å£<a hidden class=anchor aria-hidden=true href=#6ç±»å’Œæ¥å£>#</a></h3><p>tsä¸­ç±»å¯ä»¥ä½¿ç”¨å…³é”®è¯<code>implements</code>æ¥å®ç°æ¥å£:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface BabyInter {
</span></span><span style=display:flex><span>  name: string
</span></span><span style=display:flex><span>  cry () : void
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>class Baby implements BabyInter {
</span></span><span style=display:flex><span>  name: string
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  constructor (name: string) {
</span></span><span style=display:flex><span>    this.name = name
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  cry () :void {
</span></span><span style=display:flex><span>    console.log(this.name + &#39;is crying&#39;)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å¦‚æœ Baby ç±»ä¸­æ²¡æœ‰å£°æ˜ cry æ–¹æ³•ä¼šæ€æ ·:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface BabyInter {
</span></span><span style=display:flex><span>  name: string
</span></span><span style=display:flex><span>  cry () : void
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>class Baby implements BabyInter {
</span></span><span style=display:flex><span>  name: string
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  constructor (name: string) {
</span></span><span style=display:flex><span>    this.name = name
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>ä¼šæŠ¥ä¸€ä¸ªç¼–è¯‘é”™è¯¯: <code>[ts] ç±»â€œBabyâ€é”™è¯¯å®ç°æ¥å£â€œBabyInterâ€ã€‚ç±»å‹â€œBabyâ€ä¸­ç¼ºå°‘å±æ€§â€œcryâ€ã€‚</code></p></blockquote><h2 id=å…­å‡½æ•°>å…­ã€å‡½æ•°<a hidden class=anchor aria-hidden=true href=#å…­å‡½æ•°>#</a></h2><h3 id=1å‡½æ•°ç±»å‹>1ã€å‡½æ•°ç±»å‹<a hidden class=anchor aria-hidden=true href=#1å‡½æ•°ç±»å‹>#</a></h3><h4 id=1-å‡ ç§å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹å†™æ³•>(1) å‡ ç§å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹å†™æ³•<a hidden class=anchor aria-hidden=true href=#1-å‡ ç§å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹å†™æ³•>#</a></h4><blockquote><p>è®°ä½åœ¨ () åé¢æ·»åŠ è¿”å›å€¼ç±»å‹å³å¯</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function fn(): number {
</span></span><span style=display:flex><span>  return 1
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const fn = function (): number {
</span></span><span style=display:flex><span>  return 1
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const fn = (): number =&gt; {
</span></span><span style=display:flex><span>  return 1
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const obj = {
</span></span><span style=display:flex><span>  fn (): number {
</span></span><span style=display:flex><span>    return 1
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=2-å‡½æ•°ç±»å‹>(2) å‡½æ•°ç±»å‹<a hidden class=anchor aria-hidden=true href=#2-å‡½æ•°ç±»å‹>#</a></h4><p>ts ä¸­ä¹Ÿæœ‰å‡½æ•°ç±»å‹ï¼Œç”¨æ¥æè¿°ä¸€ä¸ªå‡½æ•°:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>type FnType = (x: number, y: number) =&gt; number
</span></span></code></pre></div><p><strong>å®Œæ•´çš„å‡½æ•°å†™æ³•</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>let myAdd: (x: number, y: number) =&gt; number = function(x: number, y: number): number {
</span></span><span style=display:flex><span>  return x + y
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// ä½¿ç”¨ FnType
</span></span><span style=display:flex><span>let myAdd: FnType = function(x: number, y: number): number {
</span></span><span style=display:flex><span>  return x + y
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// ts è‡ªåŠ¨æ¨å¯¼å‚æ•°ç±»å‹
</span></span><span style=display:flex><span>let myAdd: FnType = function(x, y) {
</span></span><span style=display:flex><span>  return x + y
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=2å‡½æ•°é‡è½½>2ã€å‡½æ•°é‡è½½<code>?</code><a hidden class=anchor aria-hidden=true href=#2å‡½æ•°é‡è½½>#</a></h3><p>jså› ä¸ºæ˜¯åŠ¨æ€ç±»å‹ï¼Œæœ¬èº«ä¸éœ€è¦æ”¯æŒé‡è½½ï¼Œtsä¸ºäº†ä¿è¯ç±»å‹å®‰å…¨ï¼Œæ”¯æŒäº†å‡½æ•°ç­¾åçš„ç±»å‹é‡è½½ã€‚å³:</p><p>å¤šä¸ª <code>é‡è½½ç­¾å</code> å’Œä¸€ä¸ª <code>å®ç°ç­¾å</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function len(s: string): string;
</span></span><span style=display:flex><span>function len(arr: any[]): number;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function len(x: string | any[]) {
</span></span><span style=display:flex><span>  if (typeof x === &#39;string&#39;) {
</span></span><span style=display:flex><span>    return x.length.toString()
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  return x.length
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let a = len(&#39;&#39;).trim() // error
</span></span><span style=display:flex><span>let b = len([]).toFixed(2) // ok
</span></span><span style=display:flex><span>let c = len(2) // error
</span></span></code></pre></div><p>ts å‡½æ•°é‡è½½çš„å…¶ä»–ç‰¹æ€§:</p><ul><li>å¦‚æœå®šä¹‰äº† <code>é‡è½½ç­¾å</code> ï¼Œåˆ™ <code>å®ç°ç­¾å</code> å¯¹å¤–ä¸å¯è§</li><li><code>å®ç°ç­¾å</code> å¿…é¡»å…¼å®¹ <code>é‡è½½ç­¾å</code></li><li><code>é‡è½½ç­¾å</code> çš„ç±»å‹ä¸ä¼šåˆå¹¶</li></ul><blockquote><p>TS ä¸­çš„å‡½æ•°é‡è½½å…¶å®å¹¶ä¸æ˜¯çœŸçš„é‡è½½ã€‚</p></blockquote><p><a id=ts-01-06></a></p><h2 id=ä¸ƒæ³›å‹>ä¸ƒã€æ³›å‹<a hidden class=anchor aria-hidden=true href=#ä¸ƒæ³›å‹>#</a></h2><h3 id=1ä»€ä¹ˆæ˜¯æ³›å‹>1ã€ä»€ä¹ˆæ˜¯æ³›å‹<a hidden class=anchor aria-hidden=true href=#1ä»€ä¹ˆæ˜¯æ³›å‹>#</a></h3><p>è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„APIï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘ä»£ç å—çš„é‡ç”¨æ€§ã€‚ ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ã€‚</p><p>é€šè¿‡å­—é¢æ„æ€æ¥çœ‹ï¼Œæ³›å‹æœ‰â€œå¹¿æ³›çš„ç±»å‹â€ä¹‹æ„ï¼Œå³æ•°æ®çš„ç±»å‹ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªå˜é‡æ¥åŠ¨æ€ç¡®å®šï¼Œä¸€èˆ¬ç”¨ <code>&lt;></code> æ“ä½œç¬¦æ¥å£°æ˜æ³›å‹çš„ä½¿ç”¨ã€‚</p><p><strong>å°è¯•ç‰›åˆ€</strong><br>// æ³›å‹æ–¹æ³•</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function createList&lt;T&gt;(): T[] {
</span></span><span style=display:flex><span>  return [] as T[]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const numberList = createList&lt;number&gt;() // number[]
</span></span><span style=display:flex><span>const stringList = createList&lt;string&gt;() // string[]
</span></span></code></pre></div><h3 id=2æ³›å‹æ¥å£>2ã€æ³›å‹æ¥å£<a hidden class=anchor aria-hidden=true href=#2æ³›å‹æ¥å£>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface GenericIdentityFn&lt;T&gt; {
</span></span><span style=display:flex><span>    (arg: T): T;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function identity&lt;T&gt;(arg: T): T {
</span></span><span style=display:flex><span>    return arg;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>let myIdentity: GenericIdentityFn&lt;number&gt; = identity;
</span></span></code></pre></div><h3 id=3æ³›å‹ç±»>3ã€æ³›å‹ç±»<a hidden class=anchor aria-hidden=true href=#3æ³›å‹ç±»>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>// æ³›å‹ç±»çš„å®šä¹‰
</span></span><span style=display:flex><span>class ArrayList&lt;T&gt; {
</span></span><span style=display:flex><span>  list: T[]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  push (item: T) :void {
</span></span><span style=display:flex><span>    this.list.push(item)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  pop () :T {
</span></span><span style=display:flex><span>    return this.list.pop()
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// æ³›å‹ç±»çš„ä½¿ç”¨
</span></span><span style=display:flex><span>const list = new ArrayList&lt;string&gt;()
</span></span><span style=display:flex><span>list.push(&#39;hello&#39;) // ok
</span></span><span style=display:flex><span>list.push(1) //error
</span></span></code></pre></div><p>å°çŸ¥è¯†:Kï¼ŒVï¼ŒTï¼ŒEç­‰æ³›å‹åç§°ä¸æ˜¯å›ºå®šå†™æ­»äº†ï¼Œæ˜¯å¯ä»¥éšæ„å®šä¹‰çš„ï¼Œä¸ºäº†è¯­ä¹‰åŒ–ï¼Œæ˜¯æœ‰ç‰¹æ®Šå«ä¹‰çš„:</p><ul><li><code>T</code>è¡¨ç¤º <code>type</code> ç±»å‹ã€‚</li><li><code>Kã€V</code>:åˆ†åˆ«ä»£è¡¨é”®å€¼ä¸­çš„ <code>Keyã€Value</code>ã€‚</li><li><code>E</code>:è¡¨ç¤º enum æšä¸¾ã€‚</li></ul><h3 id=4æ³›å‹çº¦æŸ>4ã€æ³›å‹çº¦æŸ<a hidden class=anchor aria-hidden=true href=#4æ³›å‹çº¦æŸ>#</a></h3><p>å¦‚æœæˆ‘ä»¬åªå¸Œæœ› createList å‡½æ•°åªèƒ½ç”ŸæˆæŒ‡å®šçš„ç±»å‹æ•°ç»„ï¼Œè¯¥å¦‚ä½•åšï¼Œå¯ä»¥ä½¿ç”¨ <code>extends</code> å…³é”®è¯æ¥çº¦æŸæ³›å‹çš„èŒƒå›´å’Œå½¢çŠ¶ã€‚</p><blockquote><p>æ­¤æ—¶ extends çº¦æŸçš„æ˜¯è¾“å…¥å€¼</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>interface Lengthwise {
</span></span><span style=display:flex><span>  length: number
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function createList&lt;T extends string | number | Lengthwise&gt;(): T[] {
</span></span><span style=display:flex><span>  return [] as T[]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>const numberList = createList&lt;number&gt;() // ok
</span></span><span style=display:flex><span>const arrayList = createList&lt;any[1, 2, 3]&gt;() // ok
</span></span><span style=display:flex><span>const stringList = createList&lt;boolean&gt;() // error
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>console.log(numberList) // []
</span></span><span style=display:flex><span>console.log(arrayList) // []
</span></span></code></pre></div><h4 id=41-æ¡ä»¶æ§åˆ¶>4.1 æ¡ä»¶æ§åˆ¶<a hidden class=anchor aria-hidden=true href=#41-æ¡ä»¶æ§åˆ¶>#</a></h4><p><code>extends</code> é™¤äº†åšçº¦æŸç±»å‹ï¼Œè¿˜å¯ä»¥åšæ¡ä»¶æ§åˆ¶ï¼Œç›¸å½“äºä¸ä¸€ä¸ªä¸‰å…ƒè¿ç®—ç¬¦ï¼Œåªä¸è¿‡æ˜¯é’ˆå¯¹ç±»å‹çš„ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>T extends U ? X : Y
</span></span></code></pre></div><p>å¦‚æœ T å¯ä»¥è¢«åˆ†é…ç»™ Uï¼Œåˆ™è¿”å› Xï¼Œå¦åˆ™è¿”å› Yã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>type IsNumber&lt;T&gt; = T extends number ? true : false
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>type x = IsNumber&lt;string&gt; // false
</span></span></code></pre></div><p><a id=ts-02-03></a></p><h4 id=42-ç±»å‹æ˜ å°„>4.2 ç±»å‹æ˜ å°„<a hidden class=anchor aria-hidden=true href=#42-ç±»å‹æ˜ å°„>#</a></h4><p>ç±»å‹æ˜ å°„ç›¸å½“ä¸ä¸€ä¸ªç±»å‹çš„å‡½æ•°ï¼Œå¯ä»¥åšä¸€äº›ç±»å‹è¿ç®—ï¼Œè¾“å…¥ä¸€ä¸ªç±»å‹ï¼Œè¾“å‡ºå¦ä¸€ä¸ªç±»å‹ï¼Œå‰æ–‡æˆ‘ä»¬ä¸¾äº†ä¸ª <code>Copy</code> çš„ä¾‹å­ã€‚</p><h5 id=1-å†…ç½®çš„æ˜ å°„ç±»å‹>(1) å†…ç½®çš„æ˜ å°„ç±»å‹<a hidden class=anchor aria-hidden=true href=#1-å†…ç½®çš„æ˜ å°„ç±»å‹>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>// æ¯ä¸€ä¸ªå±æ€§éƒ½å˜æˆå¯é€‰
</span></span><span style=display:flex><span>type Partial&lt;T&gt; = {
</span></span><span style=display:flex><span>  [P in keyof T]?: T[P]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// æ¯ä¸€ä¸ªå±æ€§éƒ½å˜æˆå¯é€‰
</span></span><span style=display:flex><span>type Readonly&lt;T&gt; = {
</span></span><span style=display:flex><span>  readonly [P in keyof T]: T[P]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// é€‰åˆ™å¯¹è±¡ä¸­çš„æŸäº›å±æ€§
</span></span><span style=display:flex><span>type Pick&lt;T, K extends keyof T&gt; = {
</span></span><span style=display:flex><span>  [P in K]: T[P];
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// ......
</span></span></code></pre></div><p>typescript 2.8 åœ¨ lib.d.ts ä¸­å†…ç½®äº†å‡ ä¸ªæ˜ å°„ç±»å‹:</p><ul><li><code>Exclude&lt;T, U></code> &ndash; ä» T ä¸­å‰”é™¤å¯ä»¥èµ‹å€¼ç»™ U çš„ç±»å‹ã€‚</li><li><code>Extract&lt;T, U></code> &ndash; æå– T ä¸­å¯ä»¥èµ‹å€¼ç»™ U çš„ç±»å‹ã€‚</li><li><code>NonNullable&lt;T></code> &ndash; ä» T ä¸­å‰”é™¤ null å’Œ undefined ã€‚</li><li><code>ReturnType&lt;T></code> &ndash; è·å–å‡½æ•°è¿”å›å€¼ç±»å‹ã€‚</li><li><code>InstanceType&lt;T></code> &ndash; è·å–æ„é€ å‡½æ•°ç±»å‹çš„å®ä¾‹ç±»å‹ã€‚</li></ul><h5 id=2-extends-æ¡ä»¶åˆ†å‘>(2) extends æ¡ä»¶åˆ†å‘<a hidden class=anchor aria-hidden=true href=#2-extends-æ¡ä»¶åˆ†å‘>#</a></h5><p>å¯¹äº <code>T extends U ? X : Y</code> æ¥è¯´ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªç‰¹æ€§ï¼Œå½“ T æ˜¯ä¸€ä¸ªè”åˆç±»å‹æ—¶ï¼Œä¼šè¿›è¡Œæ¡ä»¶åˆ†å‘ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>type Union = string | number
</span></span><span style=display:flex><span>type ParamType&lt;T&gt; = T extends number ? &#39;isNumber&#39; : &#39;isString&#39;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>type UnionType = ParamType&lt;Union&gt; // &#39;isNumber&#39; | &#39;isString&#39;
</span></span></code></pre></div><p>å®é™…ä¸Šï¼Œextends è¿ç®—ä¼šå˜æˆå¦‚ä¸‹å½¢å¼:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span> (string extends number ? &#39;number&#39; : &#39;string&#39;) | (number extends number ? &#39;number&#39; : &#39;string&#39;)
</span></span></code></pre></div><p><code>Extract</code> å°±æ˜¯åŸºäºæ­¤ç‰¹æ€§å®ç°çš„ï¼Œå†é…åˆ never å¹ºå…ƒçš„ç‰¹æ€§:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>type Exclude&lt;T, K&gt; = T extends K ? never : T
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>type T1 = Exclude&lt;string | number | boolean, string | boolean&gt; // number
</span></span></code></pre></div><h5 id=3-infer-å…³é”®è¯>(3) infer å…³é”®è¯<a hidden class=anchor aria-hidden=true href=#3-infer-å…³é”®è¯>#</a></h5><blockquote><p>infer å…³é”®è¯å¸¸åœ¨æ¡ä»¶ç±»å‹ä¸­å’Œ extends å…³é”®è¯ä¸€åŒå‡ºç°ï¼Œè¡¨ç¤ºå°†è¦æ¨æ–­çš„ç±»å‹ï¼Œä½œä¸ºç±»å‹å˜é‡å¯ä»¥åœ¨ä¸‰å…ƒè¡¨è¾¾å¼çš„ True éƒ¨åˆ†å¼•ç”¨</p></blockquote><p>ts ä¸­å†…ç½®çš„ä¸€ä¸ªæ˜ å°„ç±»å‹ <code>ReturnType</code> ï¼Œç”¨äºè·å–å‡½æ•°ç±»å‹çš„è¿”å›å€¼:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>function len (str: string) {
</span></span><span style=display:flex><span>  return str.length
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>type LenFn = typeof len // (str: string) =&gt; number
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>type LenFnReturn = ReturnType&lt;LenFn&gt; // number
</span></span></code></pre></div><p>ReturnType çš„å®ç°:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>type ReturnType&lt;T extends (...args: any) =&gt; any&gt; = T extends (...args: any) =&gt; infer R ? R : any;
</span></span></code></pre></div><h2 id=å…«æ¨¡å—>å…«ã€æ¨¡å—<a hidden class=anchor aria-hidden=true href=#å…«æ¨¡å—>#</a></h2><h3 id=1å…¨å±€æ¨¡å—-vs-æ–‡ä»¶æ¨¡å—>1ã€å…¨å±€æ¨¡å— vs. æ–‡ä»¶æ¨¡å—<a hidden class=anchor aria-hidden=true href=#1å…¨å±€æ¨¡å—-vs-æ–‡ä»¶æ¨¡å—>#</a></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰€å†™çš„ä»£ç æ˜¯ä½äºå…¨å±€æ¨¡å—ä¸‹çš„:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const foo = 2
</span></span></code></pre></div><p>æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºäº†å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼Œts è®¤ä¸ºæ˜¯æ­£å¸¸çš„:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>const bar = foo // ok
</span></span></code></pre></div><p>å¦‚æœè¦æ‰“ç ´è¿™ç§é™åˆ¶ï¼Œåªè¦æ–‡ä»¶ä¸­æœ‰ import æˆ–è€… export è¡¨è¾¾å¼å³å¯:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>export const bar = foo // error
</span></span></code></pre></div><h3 id=2æ¨¡å—è§£æç­–ç•¥>2ã€æ¨¡å—è§£æç­–ç•¥<a hidden class=anchor aria-hidden=true href=#2æ¨¡å—è§£æç­–ç•¥>#</a></h3><p>Tpescript æœ‰ä¸¤ç§æ¨¡å—çš„è§£æç­–ç•¥: <a href=https://www.tslang.cn/docs/handbook/module-resolution.html#node>Node</a> å’Œ <a href=https://www.tslang.cn/docs/handbook/module-resolution.html#classic>Classic</a> ã€‚</p><p>å½“ <code>tsconfig.json</code> ä¸­ <code>module</code> è®¾ç½®æˆ <code>AMD</code>ã€<code>System</code>ã€<code>ES2015</code> æ—¶ï¼Œé»˜è®¤ä¸º <code>classic</code> ï¼Œå¦åˆ™ä¸º <code>Node</code> ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>moduleResolution</code> æ‰‹åŠ¨æŒ‡å®šæ¨¡å—è§£æç­–ç•¥ã€‚</p><p>ä¸¤ç§æ¨¡å—è§£æç­–ç•¥çš„åŒºåˆ«åœ¨äº:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>import { a } from &#39;moduleB&#39;
</span></span></code></pre></div><p><code>Classic</code>:</p><ul><li><code>/root/src/folder/moduleB.ts</code></li><li><code>/root/src/folder/moduleB.d.ts</code></li><li><code>/root/src/moduleB.ts</code></li><li><code>/root/src/moduleB.d.ts</code></li><li><code>/root/moduleB.ts</code></li><li><code>/root/moduleB.d.ts</code></li><li><code>/moduleB.ts</code></li><li><code>/moduleB.d.ts</code></li></ul><p><code>Node</code>:</p><ul><li><code>/root/src/node_modules/moduleB.ts</code></li><li><code>/root/src/node_modules/moduleB.tsx</code></li><li><code>/root/src/node_modules/moduleB.d.ts</code></li><li><code>/root/src/node_modules/moduleB/package.json</code> (å¦‚æœæŒ‡å®šäº†"types"å±æ€§)</li><li><code>/root/src/node_modules/moduleB/index.ts</code></li><li><code>/root/src/node_modules/moduleB/index.tsx</code></li><li><code>/root/src/node_modules/moduleB/index.d.ts</code></li><li><code>/root/node_modules/moduleB.ts</code></li><li><code>/root/node_modules/moduleB.tsx</code></li><li><code>/root/node_modules/moduleB.d.ts</code></li><li><code>/root/node_modules/moduleB/package.json</code> (å¦‚æœæŒ‡å®šäº†"types"å±æ€§)</li><li><code>/root/node_modules/moduleB/index.ts</code></li><li><code>/root/node_modules/moduleB/index.tsx</code></li><li><code>/root/node_modules/moduleB/index.d.ts</code></li><li><code>/node_modules/moduleB.ts</code></li><li><code>/node_modules/moduleB.tsx</code></li><li><code>/node_modules/moduleB.d.ts</code></li><li><code>/node_modules/moduleB/package.json</code> (å¦‚æœæŒ‡å®šäº†"types"å±æ€§)</li><li><code>/node_modules/moduleB/index.ts</code></li><li><code>/node_modules/moduleB/index.tsx</code></li><li><code>/node_modules/moduleB/index.d.ts</code></li></ul><hr><p>å‚è€ƒ:</p><ul><li><a href=https://www.yuque.com/fed/share/eggmow>å¯å‚è€ƒæ–‡ç« -è¯­é›€</a></li><li><a href=https://www.tslang.cn/docs/handbook/typescript-in-5-minutes.html>TypeScriptå®˜æ–¹æ–‡æ¡£</a></li></ul><hr><p><strong>æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼</strong><br><strong>æ¬¢è¿äº¤æµ~</strong></p><img src=/img-common/weChatPublic.jpg alt=å¾®ä¿¡å…¬ä¼—å· width=600 height=286><p><strong>æœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼</strong><br><strong>è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼</strong></p></div><footer class=post-footer><nav class=paginav><a class=prev href=https://lianpf.github.io/posts/frontend-develop/vue3-composition-api-and-main-attrs/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>vue3+ts(3)ï¼švue3ç»„åˆå¼apiåŠé‡è¦å±æ€§å˜æ›´</span></a>
<a class=next href=https://lianpf.github.io/posts/frontend-develop/10.vue3%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>vue3+ts(1)ï¼švue3é¡¹ç›®ä»0åˆ°1æ­å»º</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€» on twitter" href="https://twitter.com/intent/tweet/?text=vue3%2bts%282%29%ef%bc%9aTypeScript%20%e8%af%ad%e6%b3%95%e6%b1%87%e6%80%bb&amp;url=https%3a%2f%2flianpf.github.io%2fposts%2ffrontend-develop%2f03.ts-basic-grammar%2f&amp;hashtags=TS"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€» on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2flianpf.github.io%2fposts%2ffrontend-develop%2f03.ts-basic-grammar%2f&amp;title=vue3%2bts%282%29%ef%bc%9aTypeScript%20%e8%af%ad%e6%b3%95%e6%b1%87%e6%80%bb&amp;summary=vue3%2bts%282%29%ef%bc%9aTypeScript%20%e8%af%ad%e6%b3%95%e6%b1%87%e6%80%bb&amp;source=https%3a%2f%2flianpf.github.io%2fposts%2ffrontend-develop%2f03.ts-basic-grammar%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€» on reddit" href="https://reddit.com/submit?url=https%3a%2f%2flianpf.github.io%2fposts%2ffrontend-develop%2f03.ts-basic-grammar%2f&title=vue3%2bts%282%29%ef%bc%9aTypeScript%20%e8%af%ad%e6%b3%95%e6%b1%87%e6%80%bb"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€» on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2flianpf.github.io%2fposts%2ffrontend-develop%2f03.ts-basic-grammar%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€» on whatsapp" href="https://api.whatsapp.com/send?text=vue3%2bts%282%29%ef%bc%9aTypeScript%20%e8%af%ad%e6%b3%95%e6%b1%87%e6%80%bb%20-%20https%3a%2f%2flianpf.github.io%2fposts%2ffrontend-develop%2f03.ts-basic-grammar%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€» on telegram" href="https://telegram.me/share/url?text=vue3%2bts%282%29%ef%bc%9aTypeScript%20%e8%af%ad%e6%b3%95%e6%b1%87%e6%80%bb&amp;url=https%3a%2f%2flianpf.github.io%2fposts%2ffrontend-develop%2f03.ts-basic-grammar%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></div><script src=https://utteranc.es/client.js repo=lianpf/lianpf.github.io issue-term=title label=comments theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>Copyright
&copy;
2016-2024
<a href=https://lianpf.github.io/ style=color:#939393>æ›œçµï¼ˆSUNï¼‰Site</a>.
åŸºäº Hugo å¼•æ“å’Œ PaperMod ä¸»é¢˜</span>
<a href=https://beian.miit.gov.cn/ target=_blank style=color:#939393></a>&nbsp;</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg><span id=read_progress></span></span></a>
<script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>200||document.documentElement.scrollTop>200?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{(function(){document.cookie="change-themes="+escape("false")})(),document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.body.addEventListener("copy",function(e){if(window.getSelection().toString()&&window.getSelection().toString().length>50){let t=e.clipboardData||window.clipboardData;if(t){e.preventDefault();let n=window.getSelection().toString()+`

â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œæ›œçµï¼ˆSUNï¼‰Siteã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
åŸæ–‡é“¾æ¥ï¼š`+location.href,s=window.getSelection().toString()+`

â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œæ›œçµï¼ˆSUNï¼‰Siteã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
åŸæ–‡é“¾æ¥ï¼š`+location.href;t.setData("text/html",n),t.setData("text/plain",s)}}})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="å¤åˆ¶";function i(){t.innerText="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerText="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){let t=e.textContent+`
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œæ›œçµï¼ˆSUNï¼‰Siteã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
åŸæ–‡é“¾æ¥ï¼š`+location.href;navigator.clipboard.writeText(t),i();return}const n=document.createRange();n.selectNodeContents(e);const s=window.getSelection();s.removeAllRanges(),s.addRange(n);try{document.execCommand("copy"),i()}catch{}s.removeRange(n)});let l=e.className.replaceAll("language-",""),n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),o=document.createElement("div");o.innerText=l,n.setAttribute("class","mac-tool"),a.setAttribute("class","mac bb1"),r.setAttribute("class","mac bb2"),c.setAttribute("class","mac bb3"),o.setAttribute("class","language-type"),n.appendChild(a),n.appendChild(r),n.appendChild(c),n.appendChild(o),s.classList.contains("highlight")?(s.appendChild(t),s.appendChild(n)):s.parentNode.firstChild==s||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?(e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t),s.appendChild(n)):(e.parentNode.appendChild(t),s.appendChild(n)))})</script></body></html>